---
author: Atishay Jain
contributor: "calibre (4.7.0) \\[https://calibre-ebook.com\\]"
date: "2022-04-09T22:00:00+00:00"
identifier:
- ec49cb91-9278-45c8-97cb-d80513fd0b61
- ec49cb91-9278-45c8-97cb-d80513fd0b61
language: en
publisher: Manning Publications Co.
title: Hugo in Action
---

![](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/cover.jpeg)

[]{#titlepage.xhtml}

<div>

```{=html}
<svg xmlns="http://www.w3.org/2000/svg" height="100%" preserveaspectratio="xMidYMid meet" version="1.1" viewbox="0 0 900 1128" width="100%" xmlns:xlink="http://www.w3.org/1999/xlink">
```
`<image height="1128" width="900" xlink:href="../Images/cover.jpeg">`{=html}`</image>`{=html}
```{=html}
</svg>
```

</div>

[]{#IFC.xhtml}

# inside front cover {#IFC.xhtml#heading_id_2 .tochead}

![](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/IFC_F01_Jain.png){.calibre1}

[]{#title.htm}

  

![](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/Manning_copyright.png){.calibre2}

 

 

# Hugo in Action {#title.htm#heading_id_2 .copyrighta}

[]{#title.htm#pgfId-1002085}Static sites and dynamic Jamstack apps

 

[]{#title.htm#pgfId-1002087}Atishay Jain

 

Foreword by Steve Francia

 

To comment go to
[liveBook](https://livebook.manning.com/#!/book/hugo-in-action/discussion)

 

 

![](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/Manning_M_small.png){.calibre3}

Manning

Shelter Island

 

For more information on this and other Manning titles go to

[www.manning.com](https://www.manning.com/)

 

[]{#copyright.htm}

# Copyright {#copyright.htm#heading_id_2 .copyright}

For online information and ordering of these  and other Manning books,
please visit [www.manning.com](https://www.manning.com/). The publisher
offers discounts on these books when ordered in quantity.

For more information, please contact

 

Special Sales Department

Manning Publications Co.

20 Baldwin Road

PO Box 761

Shelter Island, NY 11964

Email: orders@manning.com

 

©2022 by Manning Publications Co. All rights reserved.

 

No part of this publication may be reproduced, stored in a retrieval
system, or transmitted, in any form or by means electronic, mechanical,
photocopying, or otherwise, without prior written permission of the
publisher.

Many of the designations used by manufacturers and sellers to
distinguish their products are claimed as trademarks. Where those
designations appear in the book, and Manning Publications was aware of a
trademark claim, the designations have been printed in initial caps or
all caps.

[♾]{.segoe} Recognizing the importance of preserving what has been
written, it is Manning's policy to have the books we publish printed on
acid-free paper, and we exert our best efforts to that end. Recognizing
also our responsibility to conserve the resources of our planet, Manning
books are printed on paper that is at least 15 percent recycled and
processed without the use of elemental chlorine.

 

+-----------------------------------+-----------------------------------+
| ![](vertopal_8097d56a5            | Manning Publications Co.          |
| e0b4a3295545dc13bbc2bee/Images/Ma |                                   |
| nning_M_small.png){.calibre8}     | 20 Baldwin Road Technical         |
|                                   |                                   |
|                                   | PO Box 761                        |
|                                   |                                   |
|                                   | Shelter Island, NY 11964          |
+-----------------------------------+-----------------------------------+

 

+-----------------------------------+-----------------------------------+
| Development editor:               | Katie Sposato Johnson             |
+-----------------------------------+-----------------------------------+
| Technical development editor:     | Louis Lazaris                     |
+-----------------------------------+-----------------------------------+
| Review editor:                    | Ivan Martinović and Adriana Sabo  |
+-----------------------------------+-----------------------------------+
| Production editor:                | Deirdre Hiam                      |
+-----------------------------------+-----------------------------------+
| Copy editor:                      | Frances Buran                     |
+-----------------------------------+-----------------------------------+
| Proofreader:                      | Keri Hales                        |
+-----------------------------------+-----------------------------------+
| Technical proofreader:            | Taylor Dolezal                    |
+-----------------------------------+-----------------------------------+
| Typesetter:                       | Gordan Salinović                  |
+-----------------------------------+-----------------------------------+
| Cover designer:                   | Marija Tudor                      |
+-----------------------------------+-----------------------------------+

 

ISBN: 9781617297007

[]{#dedication.htm}

# dedication {#dedication.htm#heading_id_2 .tochead}

To Ritika, my lifeline.

[]{#TOC.htm}

# []{#TOC.htm#pgfId-1017232}contents {#TOC.htm#heading_id_2 .tochead}

[front matter](../Text/FM.htm#pgfId-1016734){.index}

[]{#TOC.htm#pgfId-1017234
.calibre9}[foreword](../Text/FM.htm#pgfId-1016993){.index}

[]{#TOC.htm#pgfId-1017236
.calibre9}[preface](../Text/FM.htm#pgfId-1016356){.index}

[]{#TOC.htm#pgfId-1017238
.calibre9}[acknowledgments](../Text/FM.htm#pgfId-1011770){.index}

[]{#TOC.htm#pgfId-1017240 .calibre9}[about this
book](../Text/FM.htm#pgfId-1011816){.index}

[]{#TOC.htm#pgfId-1017242 .calibre9}[about the
author](../Text/FM.htm#pgfId-1016640){.index}

[]{#TOC.htm#pgfId-1017244 .calibre9}[about the cover
illustration](../Text/FM.htm#pgfId-1016734){.index}

[]{#TOC.htm#pgfId-1017246} [Part 1 Static Hugo websites: Loading fast,
building to last](../Text/P1.htm#pgfId-1022635){.index1}

[]{#TOC.htm#pgfId-1017248}[1 The Jamstack and
Hugo](../Text/CH01.htm#pgfId-1017146){.index1}

[]{#TOC.htm#pgfId-1017250}[1.1 The stack in
Jamstack](../Text/CH01.htm#pgfId-1011838){.index1}

[]{#TOC.htm#pgfId-1017252}[1.2 How does Jamstack
work?](../Text/CH01.htm#pgfId-1012176){.index1}

[]{#TOC.htm#pgfId-1017254}[1.3 The JAM in
Jamstack](../Text/CH01.htm#pgfId-1012420){.index1}

[]{#TOC.htm#pgfId-1017257}[JavaScript](../Text/CH01.htm#pgfId-1012449){.index1}

[Application programming interfaces
(APIs)](../Text/CH01.htm#pgfId-1012488){.index1}

[Markup](../Text/CH01.htm#pgfId-1012533){.index1}

[]{#TOC.htm#pgfId-1017260}[1.4 Why use
Jamstack?](../Text/CH01.htm#pgfId-1012678){.index1}

[]{#TOC.htm#pgfId-1017264}[Minimal
operations](../Text/CH01.htm#pgfId-1012697){.index1}

[Great performance](../Text/CH01.htm#pgfId-1012719){.index1}

[Lower costs](../Text/CH01.htm#pgfId-1012746){.index1}

[Developer productivity](../Text/CH01.htm#pgfId-1012773){.index1}

[Longevity](../Text/CH01.htm#pgfId-1012800){.index1}

[Tooling](../Text/CH01.htm#pgfId-1012827){.index1}

[]{#TOC.htm#pgfId-1017269}[1.5 When not to use the
Jamstack](../Text/CH01.htm#pgfId-1012878){.index1}

[]{#TOC.htm#pgfId-1017271}[When there is dynamic data with no historical
significance](../Text/CH01.htm#pgfId-1012897){.index1}

[Building based on user-generated content with transient
data](../Text/CH01.htm#pgfId-1012955){.index1}

[Having user-specific web
pages](../Text/CH01.htm#pgfId-1012924){.index1}

[When there is no data to
compile](../Text/CH01.htm#pgfId-1012986){.index1}

[]{#TOC.htm#pgfId-1017276}[1.6 Selecting the
builder](../Text/CH01.htm#pgfId-1013073){.index1}

[]{#TOC.htm#pgfId-1017278}[1.7 Why choose
Hugo?](../Text/CH01.htm#pgfId-1013124){.index1}

[]{#TOC.htm#pgfId-1017282}[Hugo is
fast](../Text/CH01.htm#pgfId-1013173){.index1}

[Hugo is stable](../Text/CH01.htm#pgfId-1013249){.index1}

[Hugo is built for performance](../Text/CH01.htm#pgfId-1013282){.index1}

[Hugo is self-contained](../Text/CH01.htm#pgfId-1013315){.index1}

[Hugo is a single file](../Text/CH01.htm#pgfId-1013370){.index1}

[Hugo can be extremely low
maintenance](../Text/CH01.htm#pgfId-1013392){.index1}

[Hugo can save you from analysis
paralysis](../Text/CH01.htm#pgfId-1013419){.index1}

[Hugo is powerful](../Text/CH01.htm#pgfId-1013446){.index1}

[Hugo is scalable](../Text/CH01.htm#pgfId-1013485){.index1}

[Hugo is a community project](../Text/CH01.htm#pgfId-1013512){.index1}

[]{#TOC.htm#pgfId-1017291}[1.8 Is speed really
important?](../Text/CH01.htm#pgfId-1013553){.index1}

[]{#TOC.htm#pgfId-1017293}[1.9 What can we build with
Hugo?](../Text/CH01.htm#pgfId-1013626){.index1}

[]{#TOC.htm#pgfId-1017296}[Personal websites and
blogs](../Text/CH01.htm#pgfId-1013648){.index1}

[Nontechnology business
websites](../Text/CH01.htm#pgfId-1013689){.index1}

[Documentation websites](../Text/CH01.htm#pgfId-1013726){.index1}

[Hybrid Jamstack-based
websites](../Text/CH01.htm#pgfId-1013757){.index1}

[]{#TOC.htm#pgfId-1017300}[1.10 Cases that don't map to
Hugo](../Text/CH01.htm#pgfId-1013802){.index1}

[]{#TOC.htm#pgfId-1017302}[1.11 How to be successful with Hugo and this
book](../Text/CH01.htm#pgfId-1013835){.index1}

[]{#TOC.htm#pgfId-1017304}[2 Live in 30 minutes: You now have a
website](../Text/CH02.htm#pgfId-1020147){.index1}

[]{#TOC.htm#pgfId-1017306}[2.1 Your first Hugo
website](../Text/CH02.htm#pgfId-1011857){.index1}

[]{#TOC.htm#pgfId-1017309}[The Hugo command
line](../Text/CH02.htm#pgfId-1011876){.index1}

[Adding to source control](../Text/CH02.htm#pgfId-1012424){.index1}

[Structure of the Hugo source
folder](../Text/CH02.htm#pgfId-1012933){.index1}

[]{#TOC.htm#pgfId-1017312}[2.2 Adding a
theme](../Text/CH02.htm#pgfId-1013383){.index1}

[]{#TOC.htm#pgfId-1017315}[Adding a theme to the
website](../Text/CH02.htm#pgfId-1013663){.index1}

[Running the dev server](../Text/CH02.htm#pgfId-1013985){.index1}

[]{#TOC.htm#pgfId-1017317}[2.3 Adding
content](../Text/CH02.htm#pgfId-1014714){.index1}

[]{#TOC.htm#pgfId-1017321}[Configuration](../Text/CH02.htm#pgfId-1014771){.index1}

[Content pages](../Text/CH02.htm#pgfId-1016049){.index1}

[Index page](../Text/CH02.htm#pgfId-1016115){.index1}

[]{#TOC.htm#pgfId-1017323}[2.4 Continuous
delivery](../Text/CH02.htm#pgfId-1017236){.index1}

[]{#TOC.htm#pgfId-1017327}[Netlify
hosting](../Text/CH02.htm#pgfId-1017430){.index1}

[GitHub Pages](../Text/CH02.htm#pgfId-1017628){.index1}

[Vercel, Cloudflare, AWS Amplify, and other dedicated Jamstack
hosts](../Text/CH02.htm#pgfId-1018419){.index1}

[AWS, Azure, and Google Cloud file
storage](../Text/CH02.htm#pgfId-1018462){.index1}

[]{#TOC.htm#pgfId-1017330}[2.5 Meeting the goals for performance and
maintainability](../Text/CH02.htm#pgfId-1018562){.index1}

[]{#TOC.htm#pgfId-1017334}[Performance](../Text/CH02.htm#pgfId-1018598){.index1}

[Maintainability](../Text/CH02.htm#pgfId-1018712){.index1}

[Choose the theme wisely](../Text/CH02.htm#pgfId-1018862){.index1}

[]{#TOC.htm#pgfId-1017336}[3 Using markup for
content](../Text/CH03.htm#pgfId-1021263){.index1}

[]{#TOC.htm#pgfId-1017338}[3.1 Writing content in
Markdown](../Text/CH03.htm#pgfId-1011858){.index1}

[]{#TOC.htm#pgfId-1017341}[Paragraphs in
Markdown](../Text/CH03.htm#pgfId-1011934){.index1}

[Headings, lists, and other block
elements](../Text/CH03.htm#pgfId-1012000){.index1}

[Formatting, inline links, code, and
images](../Text/CH03.htm#pgfId-1012541){.index1}

[HTML](../Text/CH03.htm#pgfId-1012974){.index1}

[Tables, task lists, and code
blocks](../Text/CH03.htm#pgfId-1013224){.index1}

[Emojis, IDs, and other Hugo
extensions](../Text/CH03.htm#pgfId-1013530){.index1}

[]{#TOC.htm#pgfId-1017347}[3.2 Markdown in
action](../Text/CH03.htm#pgfId-1013923){.index1}

[]{#TOC.htm#pgfId-1017349}[3.3 Other markup
languages](../Text/CH03.htm#pgfId-1014278){.index1}

[]{#TOC.htm#pgfId-1017351}[3.4
Metadata](../Text/CH03.htm#pgfId-1014880){.index1}

[]{#TOC.htm#pgfId-1017355}[Comments](../Text/CH03.htm#pgfId-1014940){.index1}

[Basic data types](../Text/CH03.htm#pgfId-1015071){.index1}

[Multiline strings](../Text/CH03.htm#pgfId-1015491){.index1}

[Lists](../Text/CH03.htm#pgfId-1015705){.index1}

[Dictionaries](../Text/CH03.htm#pgfId-1015959){.index1}

[Revisiting config.yaml](../Text/CH03.htm#pgfId-1016389){.index1}

[]{#TOC.htm#pgfId-1017360}[3.5 Other metadata
languages](../Text/CH03.htm#pgfId-1017503){.index1}

[]{#TOC.htm#pgfId-1017362}[3.6 Front
matter](../Text/CH03.htm#pgfId-1018073){.index1}

[]{#TOC.htm#pgfId-1017365}[Common metadata elements in the front
matter](../Text/CH03.htm#pgfId-1018381){.index1}

[Data-driven landing page using the front
matter](../Text/CH03.htm#pgfId-1019992){.index1}

[]{#TOC.htm#pgfId-1017367}[3.7 Benefits of using markup and metadata
languages](../Text/CH03.htm#pgfId-1020204){.index1}

[]{#TOC.htm#pgfId-1017370}[Content
versioning](../Text/CH03.htm#pgfId-1020229){.index1}

[Theme independence](../Text/CH03.htm#pgfId-1020300){.index1}

[Cleanliness](../Text/CH03.htm#pgfId-1020455){.index1}

[]{#TOC.htm#pgfId-1017373}[4 Content management with
Hugo](../Text/CH04.htm#pgfId-1021275){.index1}

[]{#TOC.htm#pgfId-1017375}[4.1 Customizing with the Hugo
configurations](../Text/CH04.htm#pgfId-1011898){.index1}

[]{#TOC.htm#pgfId-1017377}[4.2 Organizing content with sections and
menus](../Text/CH04.htm#pgfId-1012836){.index1}

[]{#TOC.htm#pgfId-1017380}[Sections](../Text/CH04.htm#pgfId-1012869){.index1}

[Menus](../Text/CH04.htm#pgfId-1013770){.index1}

[]{#TOC.htm#pgfId-1017382}[4.3 Better together with page
bundles](../Text/CH04.htm#pgfId-1015430){.index1}

[]{#TOC.htm#pgfId-1017386}[Leaf
bundles](../Text/CH04.htm#pgfId-1015584){.index1}

[Branch bundles](../Text/CH04.htm#pgfId-1015854){.index1}

[Headless bundles](../Text/CH04.htm#pgfId-1016530){.index1}

[]{#TOC.htm#pgfId-1017388}[4.4 More than tags:
Taxonomies](../Text/CH04.htm#pgfId-1016635){.index1}

[]{#TOC.htm#pgfId-1017390}[4.5 YouTube, Gists, and other snippets via
shortcodes](../Text/CH04.htm#pgfId-1017883){.index1}

[]{#TOC.htm#pgfId-1017393}[Shortcodes with
content](../Text/CH04.htm#pgfId-1018310){.index1}

[Nested shortcodes](../Text/CH04.htm#pgfId-1018798){.index1}

[Built-in shortcodes](../Text/CH04.htm#pgfId-1019121){.index1}

[]{#TOC.htm#pgfId-1017396}[4.6 Content sharing using custom
shortcodes](../Text/CH04.htm#pgfId-1019428){.index1}

[]{#TOC.htm#pgfId-1017399}[HTML
shortcodes](../Text/CH04.htm#pgfId-1019452){.index1}

[Markup-based shortcodes](../Text/CH04.htm#pgfId-1019962){.index1}

[Inline shortcodes](../Text/CH04.htm#pgfId-1020085){.index1}

[]{#TOC.htm#pgfId-1017402}[5 Custom pages and customized content with
the Go template language](../Text/CH05.htm#pgfId-1027035){.index1}

[]{#TOC.htm#pgfId-1017404}[5.1 Separating data and
design](../Text/CH05.htm#pgfId-1011898){.index1}

[]{#TOC.htm#pgfId-1017407}[Accessing the Go template
language](../Text/CH05.htm#pgfId-1012082){.index1}

[Existence checks](../Text/CH05.htm#pgfId-1013239){.index1}

[Using site variables for
defaults](../Text/CH05.htm#pgfId-1013849){.index1}

[Creating variables for
simplification](../Text/CH05.htm#pgfId-1014367){.index1}

[Using standard library functions to reduce the code
size](../Text/CH05.htm#pgfId-1015022){.index1}

[Using a context switch via the with conditional for simplifying further
checks](../Text/CH05.htm#pgfId-1016102){.index1}

[Adding content processing](../Text/CH05.htm#pgfId-1016846){.index1}

[Adding Markdown content](../Text/CH05.htm#pgfId-1017889){.index1}

[]{#TOC.htm#pgfId-1017415}[5.2 Using external data to add
content](../Text/CH05.htm#pgfId-1018662){.index1}

[]{#TOC.htm#pgfId-1017418}[Adding the
menu](../Text/CH05.htm#pgfId-1018688){.index1}

[Adding recent blog posts](../Text/CH05.htm#pgfId-1020757){.index1}

[]{#TOC.htm#pgfId-1017420}[5.3 Playing with structured
data](../Text/CH05.htm#pgfId-1021799){.index1}

[]{#TOC.htm#pgfId-1017423}[Using front matter for structured
data](../Text/CH05.htm#pgfId-1021936){.index1}

[Parsing files for data](../Text/CH05.htm#pgfId-1022863){.index1}

[]{#TOC.htm#pgfId-1017425}[5.4 Enhancing life with the Go template
language](../Text/CH05.htm#pgfId-1023837){.index1}

[]{#TOC.htm#pgfId-1017428}[Template code in
shortcodes](../Text/CH05.htm#pgfId-1023875){.index1}

[Inner content in shortcodes](../Text/CH05.htm#pgfId-1024832){.index1}

[Save some time with
archetypes](../Text/CH05.htm#pgfId-1025650){.index1}

[]{#TOC.htm#pgfId-1017431}[6 Structuring web
pages](../Text/CH06.htm#pgfId-1030630){.index1}

[]{#TOC.htm#pgfId-1017433}[6.1 Using content types, base templates, and
blocks to structure templates](../Text/CH06.htm#pgfId-1011830){.index1}

[]{#TOC.htm#pgfId-1017435}[Encapsulating templates with different
content types](../Text/CH06.htm#pgfId-1011872){.index1}

[Providing the base template for
reuse](../Text/CH06.htm#pgfId-1012241){.index1}

[Defining blocks of code](../Text/CH06.htm#pgfId-1012334){.index1}

[Reusing the base template in a different
layout](../Text/CH06.htm#pgfId-1013828){.index1}

[]{#TOC.htm#pgfId-1017440}[6.2 Reusing content with
partials](../Text/CH06.htm#pgfId-1015348){.index1}

[]{#TOC.htm#pgfId-1017444}[Moving to a
partial](../Text/CH06.htm#pgfId-1015785){.index1}

[The partial context](../Text/CH06.htm#pgfId-1016427){.index1}

[Bringing back the submenu using additional parameters to the menu
partial](../Text/CH06.htm#pgfId-1017474){.index1}

[Partials and performance](../Text/CH06.htm#pgfId-1018034){.index1}

[A detour to partial returns](../Text/CH06.htm#pgfId-1019040){.index1}

[]{#TOC.htm#pgfId-1017448}[6.3 Asset handling with Hugo
Pipes](../Text/CH06.htm#pgfId-1021058){.index1}

[]{#TOC.htm#pgfId-1017451}[Handling textual
assets](../Text/CH06.htm#pgfId-1021088){.index1}

[Handling images](../Text/CH06.htm#pgfId-1024531){.index1}

[Other assets](../Text/CH06.htm#pgfId-1028572){.index1}

[]{#TOC.htm#pgfId-1017454}[6.4 Controlling Markdown
rendering](../Text/CH06.htm#pgfId-1028776){.index1}

[]{#TOC.htm#pgfId-1017456}[6.5 Using bundled templates for common
work](../Text/CH06.htm#pgfId-1029183){.index1}

[]{#TOC.htm#pgfId-1017458}[7 Creating your own
theme](../Text/CH07.htm#pgfId-1023601){.index1}

[]{#TOC.htm#pgfId-1017460}[7.1 More ways to lay out
content](../Text/CH07.htm#pgfId-1011919){.index1}

[]{#TOC.htm#pgfId-1017462}[Parameterizing front matter to differentiate
the News page interface](../Text/CH07.htm#pgfId-1011953){.index1}

[Using the cascade property to apply properties to the front matter of
multiple pages](../Text/CH07.htm#pgfId-1012686){.index1}

[Providing a different layout to the blog
content](../Text/CH07.htm#pgfId-1013264){.index1}

[Cascading targets](../Text/CH07.htm#pgfId-1014583){.index1}

[Related pages via Hugo](../Text/CH07.htm#pgfId-1015056){.index1}

[]{#TOC.htm#pgfId-1017468}[7.2 Updating the index pages by providing
content and subsection lists](../Text/CH07.htm#pgfId-1016109){.index1}

[]{#TOC.htm#pgfId-1017471}[Using the list template for index
pages](../Text/CH07.htm#pgfId-1016153){.index1}

[Creating multiple pages to render a long
list](../Text/CH07.htm#pgfId-1016710){.index1}

[Using a custom paginator](../Text/CH07.htm#pgfId-1017883){.index1}

[Rendering a list of
subsections](../Text/CH07.htm#pgfId-1018288){.index1}

[]{#TOC.htm#pgfId-1017475}[7.3 Providing the taxonomy
pages](../Text/CH07.htm#pgfId-1019384){.index1}

[]{#TOC.htm#pgfId-1017478}[The terms
page](../Text/CH07.htm#pgfId-1019595){.index1}

[The taxonomy pages](../Text/CH07.htm#pgfId-1020599){.index1}

[]{#TOC.htm#pgfId-1017480}[7.4 Creating our own
theme](../Text/CH07.htm#pgfId-1021082){.index1}

[]{#TOC.htm#pgfId-1017483}[Moving to a new
theme](../Text/CH07.htm#pgfId-1021101){.index1}

[Aligning content with the
theme](../Text/CH07.htm#pgfId-1021615){.index1}

[Providing theme assets](../Text/CH07.htm#pgfId-1021919){.index1}

[]{#TOC.htm#pgfId-1017486}[7.5 Powering up with content
views](../Text/CH07.htm#pgfId-1022197){.index1}

[]{#TOC.htm#pgfId-1017488}[8 Hugo Modules: Plugins for
everybody](../Text/CH08.htm#pgfId-1017397){.index1}

[]{#TOC.htm#pgfId-1017490}[8.1 Setting up Hugo
Modules](../Text/CH08.htm#pgfId-1011877){.index1}

[]{#TOC.htm#pgfId-1017492}[8.2 Themes as Hugo
Modules](../Text/CH08.htm#pgfId-1012192){.index1}

[]{#TOC.htm#pgfId-1017494}[8.3 Importing
themes](../Text/CH08.htm#pgfId-1012294){.index1}

[]{#TOC.htm#pgfId-1017496}[8.4 Enabling themes other than
Eclectic](../Text/CH08.htm#pgfId-1012544){.index1}

[]{#TOC.htm#pgfId-1017498}[8.5 Getting a specific version of a
theme](../Text/CH08.htm#pgfId-1012701){.index1}

[]{#TOC.htm#pgfId-1017500}[8.6 Viewing the dependencies source
code](../Text/CH08.htm#pgfId-1013177){.index1}

[]{#TOC.htm#pgfId-1017502}[8.7 Modifying dependencies
locally](../Text/CH08.htm#pgfId-1013329){.index1}

[]{#TOC.htm#pgfId-1017504}[8.8 Adding nested
dependencies](../Text/CH08.htm#pgfId-1013845){.index1}

[]{#TOC.htm#pgfId-1017506}[8.9 Modules as template
plugins](../Text/CH08.htm#pgfId-1014434){.index1}

[]{#TOC.htm#pgfId-1017508}[8.10 Shared dependencies across the theme and
website](../Text/CH08.htm#pgfId-1015208){.index1}

[]{#TOC.htm#pgfId-1017510}[8.11 Content
plugins](../Text/CH08.htm#pgfId-1015399){.index1}

[]{#TOC.htm#pgfId-1017512}[8.12 Commonly used Hugo Modules
APIs](../Text/CH08.htm#pgfId-1016189){.index1}

[]{#TOC.htm#pgfId-1017514} [Part 2 Expanding with the Jamstack: Dynamic
outside, static inside](../Text/P2.htm#pgfId-998407){.index1}

[]{#TOC.htm#pgfId-1017516}[9 Accessing APIs to enhance
functionality](../Text/CH09.htm#pgfId-1027424){.index1}

[]{#TOC.htm#pgfId-1017518}[9.1 Build-time vs. run-time API
access](../Text/CH09.htm#pgfId-1011846){.index1}

[]{#TOC.htm#pgfId-1017520}[9.2 Embedding tweets at compile
time](../Text/CH09.htm#pgfId-1011921){.index1}

[]{#TOC.htm#pgfId-1017523}[Understanding the Twitter
API](../Text/CH09.htm#pgfId-1012078){.index1}

[Understanding Hugo's functions for compile-time API
access](../Text/CH09.htm#pgfId-1012695){.index1}

[Rendering a tweet as a
testimonial](../Text/CH09.htm#pgfId-1013168){.index1}

[Managing content lifetimes](../Text/CH09.htm#pgfId-1014057){.index1}

[]{#TOC.htm#pgfId-1017527}[9.3 Hugo and REST
APIs](../Text/CH09.htm#pgfId-1014498){.index1}

[]{#TOC.htm#pgfId-1017529}[9.4 Creating a contact page the Jamstack
way](../Text/CH09.htm#pgfId-1014603){.index1}

[]{#TOC.htm#pgfId-1017532}[Setting up a contact
form](../Text/CH09.htm#pgfId-1014643){.index1}

[Choosing a form provider](../Text/CH09.htm#pgfId-1015962){.index1}

[Using Netlify forms for the Contact Us
page](../Text/CH09.htm#pgfId-1016074){.index1}

[Using Formspree for contact
forms](../Text/CH09.htm#pgfId-1016522){.index1}

[]{#TOC.htm#pgfId-1017536}[9.5 Building dynamic
surveys](../Text/CH09.htm#pgfId-1017696){.index1}

[]{#TOC.htm#pgfId-1017538}[9.6 Commenting using the
Jamstack](../Text/CH09.htm#pgfId-1019461){.index1}

[]{#TOC.htm#pgfId-1017541}[Displaying a comment
form](../Text/CH09.htm#pgfId-1019506){.index1}

[Displaying comments](../Text/CH09.htm#pgfId-1021098){.index1}

[]{#TOC.htm#pgfId-1017543}[9.7 Pseudo APIs that compile to
JSON](../Text/CH09.htm#pgfId-1025269){.index1}

[]{#TOC.htm#pgfId-1017546}[Custom output formats in
Hugo](../Text/CH09.htm#pgfId-1025444){.index1}

[Creating the JSON API for the
website](../Text/CH09.htm#pgfId-1025536){.index1}

[]{#TOC.htm#pgfId-1017548}[10 The power of
JavaScript](../Text/CH10.htm#pgfId-1026192){.index1}

[]{#TOC.htm#pgfId-1017550}[10.1 Why use JavaScript in a Hugo
project?](../Text/CH10.htm#pgfId-1011851){.index1}

[]{#TOC.htm#pgfId-1017552}[10.2 Using JavaScript to control the page
flow](../Text/CH10.htm#pgfId-1011986){.index1}

[]{#TOC.htm#pgfId-1017555}[Handling forms in
JavaScript](../Text/CH10.htm#pgfId-1012008){.index1}

[Building and loading JavaScript using Hugo
Pipes](../Text/CH10.htm#pgfId-1013477){.index1}

[]{#TOC.htm#pgfId-1017557}[10.3 Approaches for JavaScript
handling](../Text/CH10.htm#pgfId-1014077){.index1}

[]{#TOC.htm#pgfId-1017560}[HTML as primary JavaScript as a
utility](../Text/CH10.htm#pgfId-1014170){.index1}

[JavaScript as a separate layer to
HTML](../Text/CH10.htm#pgfId-1014389){.index1}

[]{#TOC.htm#pgfId-1017562}[10.4 Converting JavaScript to a utility
controlled by the HTML code](../Text/CH10.htm#pgfId-1014626){.index1}

[]{#TOC.htm#pgfId-1017565}[Enabling dynamic forms through
JavaScript](../Text/CH10.htm#pgfId-1014648){.index1}

[Splitting JavaScript into multiple
files](../Text/CH10.htm#pgfId-1015916){.index1}

[Passing variables when building
JavaScript](../Text/CH10.htm#pgfId-1016455){.index1}

[]{#TOC.htm#pgfId-1017568}[10.5 Enabling client-side
search](../Text/CH10.htm#pgfId-1017380){.index1}

[]{#TOC.htm#pgfId-1017571}[Concept of a client-side
search](../Text/CH10.htm#pgfId-1017402){.index1}

[Showing the search box in the
header](../Text/CH10.htm#pgfId-1017510){.index1}

[Loading the website data](../Text/CH10.htm#pgfId-1017841){.index1}

[Importing a search library](../Text/CH10.htm#pgfId-1019381){.index1}

[Updating our build systems to support
npm](../Text/CH10.htm#pgfId-1020274){.index1}

[Creating a search index](../Text/CH10.htm#pgfId-1021097){.index1}

[Getting search input and showing
results](../Text/CH10.htm#pgfId-1021826){.index1}

[Using Hugo modules with
JavaScript](../Text/CH10.htm#pgfId-1023198){.index1}

[]{#TOC.htm#pgfId-1017579}[10.6 An SPA in a Hugo
website](../Text/CH10.htm#pgfId-1023798){.index1}

[]{#TOC.htm#pgfId-1017582}[Importing a node module in the root
project](../Text/CH10.htm#pgfId-1023940){.index1}

[Creating a template for the
SPA](../Text/CH10.htm#pgfId-1024211){.index1}

[Importing CSS](../Text/CH10.htm#pgfId-1024797){.index1}

[Creating a web page](../Text/CH10.htm#pgfId-1025153){.index1}

[]{#TOC.htm#pgfId-1017586}[11 Breaking barriers with custom APIs and
webhooks](../Text/CH11.htm#pgfId-1027126){.index1}

[]{#TOC.htm#pgfId-1017588}[11.1 Building custom
APIs](../Text/CH11.htm#pgfId-1011826){.index1}

[]{#TOC.htm#pgfId-1017591}[Choosing the layer of the application
stack](../Text/CH11.htm#pgfId-1011859){.index1}

[Monoliths vs. microservices](../Text/CH11.htm#pgfId-1011916){.index1}

[]{#TOC.htm#pgfId-1017593}[11.2 Adding LaTeX rendering to our
website](../Text/CH11.htm#pgfId-1012093){.index1}

[]{#TOC.htm#pgfId-1017596}[What is
LaTeX?](../Text/CH11.htm#pgfId-1012135){.index1}

[How can we render LaTeX?](../Text/CH11.htm#pgfId-1012239){.index1}

[Server-side LaTeX rendering](../Text/CH11.htm#pgfId-1012360){.index1}

[Writing the code to render
LaTeX](../Text/CH11.htm#pgfId-1012449){.index1}

[Adding a HTTP server to call this
function](../Text/CH11.htm#pgfId-1014117){.index1}

[Adding some security to prevent unauthorized
access](../Text/CH11.htm#pgfId-1016614){.index1}

[Deploying to the cloud via Netlify
Functions](../Text/CH11.htm#pgfId-1016040){.index1}

[Deploying to the cloud via
Heroku](../Text/CH11.htm#pgfId-1016896){.index1}

[Creating shortcode to render
LaTeX](../Text/CH11.htm#pgfId-1017715){.index1}

[Adding some LaTeX to our
website](../Text/CH11.htm#pgfId-1018406){.index1}

[]{#TOC.htm#pgfId-1017606}[11.3 Using webhooks to rebuild
automatically](../Text/CH11.htm#pgfId-1019037){.index1}

[]{#TOC.htm#pgfId-1017609}[Creating a webhook for Netlify
rebuilds](../Text/CH11.htm#pgfId-1019150){.index1}

[Adding the webhook to Netlify
Forms](../Text/CH11.htm#pgfId-1019273){.index1}

[Preventing abuse](../Text/CH11.htm#pgfId-1019380){.index1}

[Creating a GitHub Pages rebuild
webhook](../Text/CH11.htm#pgfId-1022571){.index1}

[Creating a function to trigger GitHub
webhooks](../Text/CH11.htm#pgfId-1022923){.index1}

[Adding a webhook to Formspree to rebuild the
website](../Text/CH11.htm#pgfId-1024642){.index1}

[Updating the JavaScript code for some immediate feedback on the comment
submission](../Text/CH11.htm#pgfId-1024772){.index1}

[]{#TOC.htm#pgfId-1017616}[12 Adding e-commerce capabilities using the
Jamstack](../Text/CH12.htm#pgfId-1032921){.index1}

[]{#TOC.htm#pgfId-1017618}[12.1 Creating e-commerce
pages](../Text/CH12.htm#pgfId-1011845){.index1}

[]{#TOC.htm#pgfId-1017621}[Creating the product content
view](../Text/CH12.htm#pgfId-1011869){.index1}

[Building a single product
page](../Text/CH12.htm#pgfId-1013532){.index1}

[]{#TOC.htm#pgfId-1017623}[12.2 Creating a shopping
cart](../Text/CH12.htm#pgfId-1015487){.index1}

[]{#TOC.htm#pgfId-1017626}[Creating a cart button in the
header](../Text/CH12.htm#pgfId-1015626){.index1}

[Creating the cart in
JavaScript](../Text/CH12.htm#pgfId-1016121){.index1}

[]{#TOC.htm#pgfId-1017628}[12.3 Checkout
support](../Text/CH12.htm#pgfId-1021251){.index1}

[]{#TOC.htm#pgfId-1017631}[Setting up the billing
provider](../Text/CH12.htm#pgfId-1021275){.index1}

[Creating a checkout session](../Text/CH12.htm#pgfId-1021387){.index1}

[Handling success and failure](../Text/CH12.htm#pgfId-1026474){.index1}

[Enabling the Buy Now button](../Text/CH12.htm#pgfId-1027287){.index1}

[]{#TOC.htm#pgfId-1017635}[12.4
Fulfillment](../Text/CH12.htm#pgfId-1027313){.index1}

[]{#TOC.htm#pgfId-1017638}[Receiving and verifying
webhooks](../Text/CH12.htm#pgfId-1027448){.index1}

[Getting purchase details](../Text/CH12.htm#pgfId-1028532){.index1}

[Setting up an email provider](../Text/CH12.htm#pgfId-1029470){.index1}

[Sending emails](../Text/CH12.htm#pgfId-1029629){.index1}

[Preparing content to send to the
users](../Text/CH12.htm#pgfId-1030162){.index1}

[Attaching files to email](../Text/CH12.htm#pgfId-1031405){.index1}

[]{#TOC.htm#pgfId-1017644}[13 Wrapping it
up](../Text/CH13.htm#pgfId-1035306){.index1}

[]{#TOC.htm#pgfId-1017646}[13.1 Developing multilingual
websites](../Text/CH13.htm#pgfId-1011826){.index1}

[]{#TOC.htm#pgfId-1017648}[Overrides and defaults for content in a
multilingual website](../Text/CH13.htm#pgfId-1011981){.index1}

[Accessing strings within the
theme](../Text/CH13.htm#pgfId-1012938){.index1}

[Linking to translated pages](../Text/CH13.htm#pgfId-1013572){.index1}

[]{#TOC.htm#pgfId-1017652}[13.2 Special
pages](../Text/CH13.htm#pgfId-1013930){.index1}

[]{#TOC.htm#pgfId-1017655}[Sitemaps](../Text/CH13.htm#pgfId-1014052){.index1}

[robots.txt](../Text/CH13.htm#pgfId-1014749){.index1}

[]{#TOC.htm#pgfId-1017657}[13.3 Different versions using different
output formats](../Text/CH13.htm#pgfId-1015254){.index1}

[]{#TOC.htm#pgfId-1017660}[Built-in RSS
formats](../Text/CH13.htm#pgfId-1015334){.index1}

[Creating our own output
format](../Text/CH13.htm#pgfId-1015676){.index1}

[]{#TOC.htm#pgfId-1017662}[13.4 Service workers in progressive web
apps](../Text/CH13.htm#pgfId-1016477){.index1}

[]{#TOC.htm#pgfId-1017666}[Install
functions](../Text/CH13.htm#pgfId-1016651){.index1}

[Activation functions](../Text/CH13.htm#pgfId-1017329){.index1}

[Fetching resources](../Text/CH13.htm#pgfId-1017713){.index1}

[]{#TOC.htm#pgfId-1017668}[13.5 Prefetching on
hover](../Text/CH13.htm#pgfId-1021990){.index1}

[]{#TOC.htm#pgfId-1017670}[13.6 Cleaner navigation with the Turbo
JavaScript library](../Text/CH13.htm#pgfId-1022380){.index1}

[]{#TOC.htm#pgfId-1017673}[Adding Turbo Drive to the
template](../Text/CH13.htm#pgfId-1022552){.index1}

[Handling JavaScript-based
navigation](../Text/CH13.htm#pgfId-1022918){.index1}

[]{#TOC.htm#pgfId-1017675}[13.7 More Jamstack tooling and
services](../Text/CH13.htm#pgfId-1023541){.index1}

[]{#TOC.htm#pgfId-1017677}[CLI, SDKs, configurations, and additional
automation SDKs (software development
kits)](../Text/CH13.htm#pgfId-1023560){.index1}

[Authentication, storage, and other pieces of the
puzzle](../Text/CH13.htm#pgfId-1023774){.index1}

[]{#TOC.htm#pgfId-1017680}[13.8 The Hugo
community](../Text/CH13.htm#pgfId-1023819){.index1}

[]{#TOC.htm#pgfId-1017683}[Asking for
help](../Text/CH13.htm#pgfId-1023844){.index1}

[Showcasing your work](../Text/CH13.htm#pgfId-1023886){.index1}

[Contributing](../Text/CH13.htm#pgfId-1023927){.index1}

[]{#TOC.htm#pgfId-1017686}[13.9 The future of
Hugo](../Text/CH13.htm#pgfId-1023963){.index1}

[]{#TOC.htm#pgfId-1017688}[appendix A Getting up and running with
Hugo](../Text/APP_A.htm#pgfId-1096664){.index1}

[]{#TOC.htm#pgfId-1017690}[appendix B TOML and JSON for
metadata](../Text/APP_B.htm#pgfId-1015831){.index1}

[]{#TOC.htm#pgfId-1017693}[appendix C A GUI-based admin section with
Netlify CMS](../Text/APP_C.htm#pgfId-1013875){.index1}

[]{#TOC.htm#pgfId-1017696}[appendix D The Go template
language](../Text/APP_D.htm#pgfId-1022937){.index1}

[]{#TOC.htm#pgfId-1017699}[appendix E Answers to
exercises](../Text/APP_E.htm#pgfId-1014800){.index1}

[]{#TOC.htm#pgfId-1017702}
[index](../Text/HugoinActionIX.htm#pgfId-503251){.index1}

[]{#FM.htm}

# front matter {#FM.htm#heading_id_2 .tochead}

## []{#FM.htm#pgfId-1016993}foreword {#FM.htm#sigil_toc_id_1 .fm-head}

[]{#FM.htm#pgfId-1016994 .calibre9}Hugo was born out of two beliefs: 1)
website maintenance (authoring, hosting, securing, etc.) could be
dramatically simplified, and 2) the Go programming language and its
ecosystem would provide the right base for a fast, straightforward, and
productive website engine.

[]{#FM.htm#pgfId-1016995 .calibre9}As I write this in late spring of
2022, we're approaching the ninth anniversary of Hugo's first public
announcement (June 2013). Reflecting back to the months leading up to
Hugo's first release, I had recently begun investigating a new
programming language from Google, the Go programming language. It had
just reached 1.0 status, and I was looking for a project so I could
learn through building. Simultaneously, I was becoming increasingly
frustrated with my WordPress-powered blog that was growing in cost and
complexity. I calculated that I had spent more time doing maintenance
and security patches than authoring new posts.

[]{#FM.htm#pgfId-1016996 .calibre9}I had begun playing with the static
site generators available at the time; Jekyll and Pelican being the two
most prominent. Installing was complicated, however, taking me a few
hours each because they both required me to first install the entire
toolset for each programming language and then all the language
dependencies. After that, I needed to install the software and all of
its dependencies, requiring hundreds of packages to be fetched and
resolved.

[]{#FM.htm#pgfId-1016997 .calibre9}I began porting my content to
Markdown and building my blog in Jekyll. Rendering my small blog of
maybe 200 posts and the most basic template still took over five
minutes! I would tweak the template and then rerun the builder and wait
another five minutes before I could see how it was rendered. Five
minutes is far too long for a feedback loop to be productive.

[]{#FM.htm#pgfId-1016998 .calibre9}I recognized that these tools didn't
fix the maintenance issues I experienced with WordPress; they just
shifted it to the dev machine. I thought it must be possible to write a
better and simpler static site generator and was looking for a project
to learn Go anyway. I spent the next couple of days writing a small
prototype. The prototype confirmed that a website engine in Go could be
magnitudes faster than the existing ones, and it would fix my
installation experience as well. I spent the next few months designing
and writing Hugo, incorporating my 20 years of experience working with
and building CMSs and taking inspiration from everywhere.

[]{#FM.htm#pgfId-1016999 .calibre9}I ported my blog to Hugo and
announced my first Go project to the world in July 2013. At the time, I
had no idea how this personal project, which I simply wrote for my own
blog, would change my life and change the world. To build Hugo the way I
wanted to design it forced me to invent new libraries in Go, several of
which (notably Cobra, Viper, and Afero) have gone on to be some of the
most popular in Go's ecosystem, with adoption from Kubernetes, Docker,
GitHub, and thousands of others. The experience of writing Hugo
ultimately led me to join the Go team as the product lead in 2016 to
help shape the future of the language.

[]{#FM.htm#pgfId-1017000 .calibre9}Hugo's simple and accessible design,
combined with its unparalleled performance and productivity, immediately
gained attention. Hugo continued to grow in adoption and popularity,
ultimately becoming the most popular static site generator and one of
the most popular open source CMS systems. It's currently rated as #13
based on a number of websites
([[https://trends.builtwith.com/cms/open-source](https://trends.builtwith.com/cms/open-source){.url}]{.fm-hyperlink}).
Along with this growth came a small but dedicated contributor base,
including Bjørn Erik Pedersen who succeeded me as the lead developer of
Hugo.

[]{#FM.htm#pgfId-1017001 .calibre9}Hugo also attracted the attention of
Atishay Jain, an innovative software engineer who had a part in
developing many of Adobe's technologies that we're all familiar with.
He's written this book, *Hugo in Action*, which is straightforward and
approachable. It explains not only how to use Hugo but also explains the
history of how things came to be and the context of each decision you
make through the process.

[]{#FM.htm#pgfId-1017002 .calibre9}Beginners will deeply appreciate
chapter 2's "Live in 30 minutes" section, which provides plenty of
guidance to make even people who are new to command-line applications
and websites feel comfortable. All readers will benefit from the breadth
and context that this book provides. I personally appreciated chapter
9's recipes to extend Hugo using external APIs, which expand the
functionality of Hugo to include dynamic features while retaining Hugo's
security and performance advantages.

[]{#FM.htm#pgfId-1017003 .calibre9}---[Steve Francia]{.small-caps}

creator of Hugo

[]{#FM.htm#pgfId-1016024 .calibre9} 

## []{#FM.htm#pgfId-1016356}preface {#FM.htm#sigil_toc_id_2 .fm-head}

[]{#FM.htm#pgfId-1016357 .calibre9}The World Wide Web was initially a
document delivery mechanism. Early web pages were documents that
presented the same contents to everyone and were present as a file on
disk. Early web browsers were more like a printer that would deliver the
documents on the screen. The significant achievement of the web was
document delivery from a server far away, managed by someone else, and
the ability to navigate across documents via hyperlinks. Developers
always wanted to do more. They wrote scripts to generate all
combinations of web pages to make the system appear dynamic. As the
number of combinations increased, we found that we could support an
infinite number of variations by dynamically generating the web pages on
a server. This approach brought a lot of complexity that the mainstream
web community has been dealing with ever since.

[]{#FM.htm#pgfId-1016358 .calibre9}My first website had a total of 10
pages. It lasted on the internet for eight months. When it was defaced
the first time, I tried to set it up again. But I had neither the skills
nor the perseverance to keep it running for a long time. This
whack-a-mole game continued across multiple technology stacks,
frameworks, and approaches. Either pay someone to keep your system
secure or dedicate yourself to keeping it up. The cycle of redoing the
website continued until I landed on the Jamstack. Very few websites need
infinite combinations of pages. For the rest, the run-time content
generation approach is suboptimal both from the maintenance and
performance perspectives. The Jamstack is a flashback to the
generate-all-combinations era with just one catch---we can still do
infinite combinations using JavaScript for the cases where there is a
need. For the significant portions of most websites, we can be free of
all the complexity.

[]{#FM.htm#pgfId-1016359 .calibre9}When I first picked up Hugo, I didn't
realize how much of it was unlearning the web development conventions
used in the run-time development model. Although images should always
get stored with the rest of the document, static and dynamic content
constraints forced this to be different. The more I used Hugo, the more
I found about its way of doing things. The lack of structured learning
resources caused a lot of rework. That is what triggered me to write
this book. Hugo is an engineered product, not a mashup of multiple
technologies to catch up to the trends or a solution covering years of
cruft under a set of buzzwords. Hugo deserves a proper learning resource
that presents the most straightforward web development approach and
showcases how we can use Hugo to do much more than what it humbly
advertises. That is what this book is about---setting up for simplicity
and success.

[]{#FM.htm#pgfId-1016360 .calibre9}As I wrote this book, my website has
been sitting patiently. I do not have to spend a single second to
maintain it. After a hiatus of two years, I can pick it up from where I
left it, whenever I want, to make incremental improvements. This book is
about fast websites that can last without continuous monitoring, unlike
the approaches I tried in the past.

## []{#FM.htm#pgfId-1011770}acknowledgments {#FM.htm#sigil_toc_id_3 .fm-head}

[]{#FM.htm#pgfId-1011780 .calibre9}This is my first book, and I when I
signed up for it, I had no idea what I was signing up for. What was
planned as a six-month project took two years to complete, thanks to
changing personal circumstances (arrival of kids) and changes all around
the globe (the COVID-19 pandemic).

[]{#FM.htm#pgfId-1011786 .calibre9}I would sincerely like to thank my
wife, Ritika, who went through a tough pregnancy, premature delivery,
and a month-long stay in NICU---all while I was writing this book!
Without her constant support and inspiration, this book would never have
happened. This book also required continuous support from my parents,
work colleagues, and friends who made time for me to get it done.

[]{#FM.htm#pgfId-1011792 .calibre9}Next, I would like to thank my
editor, Katie Sposato Johnson, for helping me comb through the entire
set of guidelines to complete the book in the right format. She had
answers with additional resources and guidelines for everything. I
really appreciate the accommodation that the entire Manning team
provided with my slippage of deadlines again and again, specifically,
Deirdre Hiam my project editor; Frances Buran, my copyeditor; and Keri
Hales, my proofreader.

[]{#FM.htm#pgfId-1011798 .calibre9}This book would not have been the
same without the readers and reviewers on the livebook forums and the
structured reviews. They, with their sharp critiques, changed the
direction of the book multiple times. The first two chapters have been
redone almost 20 times with major and minor tweaks based on places where
the readers got stuck. It was great to see the roadblocks getting
removed, albeit slowly, with each change as more and more readers could
get through the initial hurdles and get into enjoying Hugo. To all the
reviewers: Al Norman, Alberto Ciarlanti, Alex Lucas, Amit Lamba, Anton
Rich, Cena Mayo, Clive Harber, Darrin Bishop, David Jacobs, David Pardo,
Guy Ndjeng, Hilde Van Gysel, Jeff Smith, Jerome Meyer, Joseph Houghes,
Joshua White, Jürgen Hötzel, Lakshmi Narasimhan, Marjorie Roswell,
Michael Bright, Milorad Imbra, Riccardo Marotti, Sander Zegveld, Sau Fai
Fong, Taylor Dolezal, Theofanis Despoudis, and Vidhyadharan Deivamani,
your suggestions helped make this a better book.

[]{#FM.htm#pgfId-1011804 .calibre9}Of course, nothing was possible
without \@spf13, \@bep, and the entire team that has made Hugo the
ultimate static site builder. The thought and care that has gone into
making Hugo is evidenced in the way its core structure and ideas have
survived unchanged as the Jamstack concepts and services have matured.
The Hugo community is a marvel, and it is a pleasure to have had healthy
discussions on the Hugo forums for not only problems and solutions, but
also for approaches, pros and cons, and performance considerations for
doing things in a certain way.

[]{#FM.htm#pgfId-1011810 .calibre9}Lastly, I would like to thank the
service providers, GitHub, Netlify, Formspree, Stripe, and SendGrid, for
having stable backbone services for us to be able to build upon. These
services are affordable, reliable, and have allowed us to focus on what
we love the most---creating new websites.

## []{#FM.htm#pgfId-1011816}about this book {#FM.htm#sigil_toc_id_4 .fm-head}

[]{#FM.htm#pgfId-1011826 .calibre9}*Hugo in Action* guides you through
building a fast and low maintenance website using the Hugo static site
builder. It enables you to understand the core concept of the Jamstack
and the profound impact of its compilation step on the website's
architecture. This book provides a step-by-step walkthrough for laying
out content, organizing templates, and managing assets in a Hugo-based
website. It provides the best practices for building a quick-to-compile,
quick-to-load, and easy-to-maintain website, along with the means to
debug issues, optimize existing template files, and set the website's
architecture for optimal usage of Hugo.

### []{#FM.htm#pgfId-1011839}Who should read this book {#FM.htm#sigil_toc_id_5 .fm-head1}

[]{#FM.htm#pgfId-1011849 .calibre9}Hugo is a tool for web developers
looking for a powerful static site builder to create feature-rich
websites without compromising run-time performance, developer
experience, and maintainability. This book expects its readers to
understand HTML, CSS, JavaScript, and version control using Git and
GitHub-based code hosting. The readers should also be familiar with the
basic usage of the command line, including navigating through the
filesystem and running simple commands. Both beginner and experienced
web developers will benefit from this book.

### []{#FM.htm#pgfId-1011855}How this book is organized: A road map {#FM.htm#sigil_toc_id_6 .fm-head1}

[]{#FM.htm#pgfId-1011865 .calibre9}The entire book runs through a single
example website for a fictional company called Acme Corporation. We'll
build the site and add new features to improve its behavior while
introducing approaches to development.

[]{#FM.htm#pgfId-1011871 .calibre9}The book has two distinct parts. The
first part focuses on the core functionality of Hugo, which we will run
in isolation from the rest of the internet. The second part centers on
how Hugo provides the means to communicate with various services and how
the JavaScript ecosystem furnishes the functionality that is not
possible during Hugo's compilation step.

-   []{#FM.htm#pgfId-1011877 .calibre9}Chapter 1 introduces the Jamstack
    and explains the ideas behind it. This chapter also lays out the
    parts of the Jamstack and how these work together. It also
    introduces the Hugo static site builder and discusses when it is
    sensible to use Hugo and when it is inappropriate to use Hugo or the
    Jamstack.

-   []{#FM.htm#pgfId-1011898 .calibre9}Chapter 2 provides a brief
    overview of a Hugo project's working directory. It also sets up web
    hosting and creates a simple Hugo-based website that is live on the
    internet, which offers outstanding performance and a manageable set
    of dependencies.

-   []{#FM.htm#pgfId-1011915 .calibre9}Chapter 3 lets us play the role
    of the content author. This chapter provides an in-depth overview of
    Markdown and YAML, the two main languages used to create content and
    provide metadata for a Hugo website. It also compares these
    languages with other available options and provides an overview of
    the standard metadata properties we can use in the front matter of a
    Hugo web page.

-   []{#FM.htm#pgfId-1011932 .calibre9}Chapter 4 allows us to play the
    role of the website editor. This chapter shows how to organize pages
    in a Hugo website into sections, menus, and Hugo taxonomies, how to
    bunch contents into a page bundle, and how to effectively use Hugo's
    built-in and community-provided shortcodes to enable and extend
    Markdown features.

-   []{#FM.htm#pgfId-1011949 .calibre9}Chapter 5 offers our first
    glimpse of the Go template language that provides the means to
    control the rendering of a web page. We will explore how to build
    custom pages in Hugo, how to render content with the Go template
    language, how to access Hugo's variables, functions, configurations,
    and front matter, and how to read from the filesystem using Hugo.

-   []{#FM.htm#pgfId-1011966 .calibre9}Chapter 6 explores the critical
    components of a Hugo theme and the tools Hugo provides for building
    custom web pages. It teaches us how to organize templates for easy
    maintenance and reuse, to improve productivity by sharing template
    code and snippets between multiple page types, and to tackle
    resource management issues with Hugo pipes.

-   []{#FM.htm#pgfId-1011983 .calibre9}Chapter 7 allows us to take full
    ownership of the website. It shows how the building blocks of Hugo's
    content system (the leaf and branch bundles, the taxonomy system,
    layouts, and types) all map to template code.

-   []{#FM.htm#pgfId-1012000 .calibre9}Chapter 8 dives deep into Hugo
    Modules, which are a powerful, widely misunderstood, and underused
    feature of Hugo. Hugo's modules allow the creation and consumption
    of plugins (from themes and templates to shortcodes and even
    content) from all the components of a Hugo-based website.

-   []{#FM.htm#pgfId-1012017 .calibre9}Chapter 9 steps outside of the
    bounds of our project folder and showcases Hugo's support for the
    second pillar of the Jamstack---APIs. This chapter moves us into Web
    2.0 with support for dynamic features like comments and contact
    forms. It also presents some simple solutions to historically more
    challenging problems such as dynamic surveys and RESTful GET APIs.

-   []{#FM.htm#pgfId-1012034 .calibre9}Chapter 10 shows why Hugo goes to
    great lengths to ensure that it plays nicely with JavaScript (the
    "J" in Jamstack). This includes customizing and integrating with one
    of the fastest JavaScript bundlers. Hugo clarifies concerns between
    the compile-time and run-time environments while still keeping tight
    integration and providing unified control. This chapter uses
    client-side scripting for dynamic features like background form
    submissions and the npm ecosystems for client-side searches. It also
    sets up a hybrid website with Hugo and JavaScript that takes
    ownership of the pieces they excel in.

-   []{#FM.htm#pgfId-1012051 .calibre9}Chapter 11 introduces the
    Jamstack way of building low-maintenance APIs to extend Hugo with
    features that it does not natively provide. We do this without
    losing the key performance benefits of Hugo. This chapter also
    explores webhooks---the server-to-server API communication mechanism
    that integrates with independent API providers---to enable our
    website to act as a unified backend with little operational
    overhead.

-   []{#FM.htm#pgfId-1012068 .calibre9}Chapter 12 dives into a capstone
    project where everything from the book is put into practice. This
    chapter busts some of the most popular myths of the Jamstack by
    building an e-commerce website with end-to-end support from the
    shopping cart to checkout to order fulfillment.

-   []{#FM.htm#pgfId-1012085 .calibre9}Chapter 13 takes the existing
    website and stretches it in multiple directions. This provides
    support for numerous (human) languages and many views of the same
    content with different themes. It also makes our website even faster
    with offline support, instant pages, and Turbo techniques and
    libraries. It also discusses scripting to reduce the work done
    manually in the browser and participation in the Hugo community for
    support, appreciation, and contribution.

[]{#FM.htm#pgfId-1012102 .calibre9}The chapters in this book should be
read in order: what you learn from previous chapters is built upon in
the following ones. Each chapter improves the example website from where
it was left in the last chapter. If the reader, by chance, wants to
understand a topic out of order, it is advised to look at the code
checkpoint at the end of the previous chapter to understand where the
next chapter starts.

### []{#FM.htm#pgfId-1012108}About the code {#FM.htm#sigil_toc_id_7 .fm-head1}

[]{#FM.htm#pgfId-1012118 .calibre9}This book contains many examples of
source code, both in numbered listings and in line with normal text. In
both cases, the source code is formatted in a
[fixed-width]{.fm-code-in-text} [font]{.fm-code-in-text}
[like]{.fm-code-in-text} [this]{.fm-code-in-text} to separate it from
ordinary text.

[]{#FM.htm#pgfId-1012133 .calibre9}In many cases, the original source
code has been reformatted; we've added line breaks and reworked
indentation to accommodate the available page space in the book. In rare
cases, even this was not enough, and listings include line-continuation
markers ([➥]{.fm-code-continuation-arrow}). Additionally, comments in
the source code have often been removed from the listings when the code
is described in the text. Code annotations accompany many of the
listings, highlighting important concepts.

[]{#FM.htm#pgfId-1016491 .calibre9}The book has over 128 code
checkpoints and more than 94 chapter resources present on GitHub with
links to the exact checkpoint associated with any section immediately
after the section. You can get executable snippets of code from the
liveBook (online) version of this book at
[[https://livebook.manning.com/book/hugo-in-action](https://livebook.manning.com/book/hugo-in-action){.url}]{.fm-hyperlink}.
The complete code for the examples in the book is available for download
from the Manning website at
[[https://www.manning.com/books/hugo-in-action](https://www.manning.com/books/hugo-in-action){.url}]{.fm-hyperlink},
and from GitHub at
[[https://github.com/hugoinaction/hugoinaction](https://github.com/hugoinaction/hugoinaction){.url}]{.fm-hyperlink}.

[]{#FM.htm#pgfId-1012146 .calibre9}The resources provide easy-to-use
copies of the code samples embedded throughout the book and assets like
CSS files and the images used to build the example website. Code
checkpoints provide working code up to the point in the book where it is
referenced and are presented as branches in the GitHub repository. We
can compare two checkpoints between any sections in the text to see the
changes between those two sections. For example,
[[https://github.com/hugoinaction/hugoinaction/compare/chapter-03-06\...chapter-04-11](https://github.com/hugoinaction/hugoinaction/compare/chapter-03-06...chapter-04-11){.url}]{.fm-hyperlink}
provides all the changes as commits messages between code checkpoints
chapter-03-6 and chapter-04-11. It also provides a diff between the two
checkpoints. Each checkpoint can also be viewed live on the book's
website in a subdomain like
[[https://chapter-04-11.hugoinaction.com](https://chapter-04-11.hugoinaction.com){.url}]{.fm-hyperlink},
which offers a working version of the website at chapter 04, checkpoint
11. The readme file for the repository also provides summaries and links
to additional chapter resources and checkpoints. You can clone the code
repository locally and use [git]{.fm-code-in-text}
[checkout]{.fm-code-in-text} [\<checkpoin]{.fm-code-in-text}
[or]{.fm-code-in-text} [chapter]{.fm-code-in-text}
[resource]{.fm-code-in-text} [name\>]{.fm-code-in-text} to get to a
specific code checkpoint or to a specific chapter's resources.

[]{#FM.htm#pgfId-1012173}[Tip]{.fm-callout-head} Code checkpoints are a
vital tool in debugging issues. Some details with light documentation
can be gleaned from code checkpoints. Readers can compare their code to
a checkpoint to figure out and fix misunderstandings and mistakes.

### []{#FM.htm#pgfId-1016536}liveBook discussion forum {#FM.htm#sigil_toc_id_8 .fm-head1}

[]{#FM.htm#pgfId-1016569 .calibre9}Purchase of *Hugo in Action* includes
free access to liveBook, Manning's online reading platform. Using
liveBook's exclusive discussion features, you can attach comments to the
book globally or to specific sections or paragraphs. It's a snap to make
notes for yourself, ask and answer technical questions, and receive help
from the author and other users. To access the forum, go to
[[https://livebook.manning.com/book/hugo-in-action/discussion](https://livebook.manning.com/book/hugo-in-action/discussion){.url}]{.fm-hyperlink}.
You can also learn more about Manning\'s forums and the rules of conduct
at
[[https://livebook.manning.com/discussion](https://livebook.manning.com/discussion){.url}]{.fm-hyperlink}.

[]{#FM.htm#pgfId-1016571 .calibre9}Manning's commitment to our readers
is to provide a venue where a meaningful dialogue between individual
readers and between readers and the author can take place. It is not a
commitment to any specific amount of participation on the part of the
author, whose contribution to the forum remains voluntary (and unpaid).
We suggest you try asking the author some challenging questions lest his
interest stray! The forum and the archives of previous discussions will
be accessible from the publisher's website as long as the book is in
print.

### []{#FM.htm#pgfId-1016529}Other online resources {#FM.htm#sigil_toc_id_9 .fm-head1}

[]{#FM.htm#pgfId-1012189 .calibre9}The official documentation website
for Hugo is
[[https://gohugo.io/documentation/](https://gohugo.io/documentation/){.url}]{.fm-hyperlink}.
It provides a complete list of all available Hugo parameters and
features. The Hugo community at
[[https://discourse.gohugo.io/](https://discourse.gohugo.io/){.url}]{.fm-hyperlink}
can be of immense help in figuring out best practices, asking for help,
or providing feedback.

## []{#FM.htm#pgfId-1016640}about the author {#FM.htm#sigil_toc_id_10 .fm-head}

![AtishayJain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/AtishayJain.png){.calibre1} 
 

[]{#FM.htm#pgfId-1016756}[Atishay Jain]{.small-caps1} is a senior
computer scientist at Adobe. He is an experienced web developer,
developing web-based software used by millions of Adobe Creative Cloud
customers on a daily basis and has contributed to many Adobe tools,
including Photoshop, Acrobat and Illustrator. Atishay is a guest author
at CSS-Tricks and is a regular conference speaker at web conferences. He
has his own personal website with a 100/100 score on Google Lighthouse,
focusing on the performance of all the features of a regular website.
Learn more about Atishay at
[[https://atishay.me](https://atishay.me){.url}]{.fm-hyperlink}.

## []{#FM.htm#pgfId-1016734}about the cover illustration {#FM.htm#sigil_toc_id_11 .fm-head}

[]{#FM.htm#pgfId-1016704 .calibre9}The figure on the cover of *Hugo in
Action*, "Femme de cracovie," or "A Woman from Krakow," is taken from a
collection by Jacques Grasset de Saint-Sauveur, published in 1797. Each
illustration is finely drawn and colored by hand.

[]{#FM.htm#pgfId-1016708 .calibre9}In those days, it was easy to
identify where people lived and what their trade or station in life was
just by their dress. Manning celebrates the inventiveness and initiative
of today's computer business with book covers based on the rich
diversity of regional culture centuries ago, brought back to life by
pictures from collections such as this one.

[]{#P1.htm}

# []{#P1.htm#pgfId-1022635}Part 1 Static Hugo websites: Loading fast, building to last {#P1.htm#heading_id_2 .tochead}

[]{#P1.htm#pgfId-1022681 .calibre9}Are you looking for a website that is
fast, flexible, fully automated, and fun to build? Part 1 of *Hugo in
Action* gives you a static website that loads instantly across the
planet and works with minimal operational overhead.

[]{#P1.htm#pgfId-1024279 .calibre9}Chapter 1 introduces Hugo and the
Jamstack, and provides an understanding of the unique approach to
website development practiced by Hugo users.

[]{#P1.htm#pgfId-1024282 .calibre9}Chapter 2 discusses setting up the
build environment and deploying a functional website to production. We
will also discuss how to keep tabs on its performance and to keep our
maintenance work low.

[]{#P1.htm#pgfId-1024285 .calibre9}Chapter 3 takes us deep into
authoring with Markdown and YAML for content and metadata, respectively.
We will use Markdown's formatting capabilities and Hugo's extensions to
prepare our pages for presentation on the internet.

[]{#P1.htm#pgfId-1022682 .calibre9}In chapter 4, we don the hat of the
website editor. The content organization with Hugo is different than
most other approaches for building websites, and there are solid reasons
for that. Chapter 4 also shows how intuitive and maintenance friendly
Hugo's page bundles are.

[]{#P1.htm#pgfId-1024288 .calibre9}In chapter 5, we shift gears and move
into the developer role. The Go template language is powerful, and
Hugo's function library massively amplifies that power. We will see how
we can use Hugo templates for everything---from extending Markdown to
automating repetitive work for the content author.

[]{#P1.htm#pgfId-1022683 .calibre9}In chapter 6, the development moves
from a single web page to an entire section and also provides the ins
and outs of sharing templates and content within a website.

[]{#P1.htm#pgfId-1024297 .calibre9}In chapter 7, we become independent
of the external theme we have used since chapter 2. Here we dive into
the internals of Hugo's model for web development. We write code
enabling all the features we used as a content editor in chapter 4.

[]{#P1.htm#pgfId-1024300 .calibre9}Finally, chapter 8 adds a new
direction, where we go beyond a single website into sharing content,
templates, and code across multiple websites.

[]{#P1.htm#pgfId-1024303 .calibre9}As you will see, Hugo Modules is a
plugin system for everybody---from content authors to editors and from
user interface to business logic developers.

[]{#P1.htm#pgfId-1022667 .calibre9}At the end of part 1, you will have a
fast and flexible website. You will also have experience using some of
the best techniques to ensure it remains fast, without a heavy
investment in operations.

[]{#CH01.htm}

# []{#CH01.htm#pgfId-1017146}1 The Jamstack and Hugo {#CH01.htm#heading_id_2 .tochead}

[]{#CH01.htm#pgfId-1022752}This chapter covers

-   []{#CH01.htm#pgfId-1022784 .calibre9}Jamstack basics for building
    websites
-   []{#CH01.htm#pgfId-1022785 .calibre9}Principles of static site
    generators
-   []{#CH01.htm#pgfId-1022786 .calibre9}Understanding the Hugo static
    site generator
-   []{#CH01.htm#pgfId-1022787 .calibre9}Benefits of the Hugo static
    site generator
-   []{#CH01.htm#pgfId-1022773 .calibre9}Use cases best suited for
    Jamstack and Hugo

[]{#CH01.htm#pgfId-1011814 .calibre9}If you have been associated with
websites recently or have friends in similar situations, you must know
how much work is involved in maintaining a website. It needs DevOps
engineers, system administrators, and database architects to keep a
website running on the internet. It is a full-time job for an entire
team, not just an individual. The upkeep of content is so time-consuming
that the creators move at an unprecedented rate to managed hosting
services like WordPress.com or even to give away their content to
platforms like Medium or Facebook.

[]{#CH01.htm#pgfId-1011820 .calibre9}Jamstack is a web development
architecture that minimizes the day-to-day overhead of maintaining
websites by moving the complicated pieces out of run time or by
encapsulating them into easier-to-manage services. The term Jamstack was
coined by the cofounder and CEO of Netlify, Matt Biilmann, in 2016.
Jamstack forgoes databases by storing all the content into files
compiled during deployment and then distributing them over a content
delivery network (CDN). Application programming interfaces (APIs)
provide dynamic, server-based content, maintained by third parties or
hosted by cloud service providers with minimal day-to-day involvement by
the website owner. This way, developers are freed from the tasks of
handling security updates, denial-of-service (DoS) attacks, and constant
monitoring to keep hackers at bay.

[]{#CH01.htm#pgfId-1011826 .calibre9}Jamstack is heavily reliant on the
core web technologies of HTML, CSS, and JavaScript. It offers the
ability to get up and running on the modern web quickly so we can build
websites with outstanding performance, low cost, and little maintenance.
It can create websites for various use cases like individual blogs,
business websites, and e-commerce solutions. Jamstack works in harmony
with a server-based framework by providing full support for static
content. We can, however, still use a traditional framework to offer
user-generated, server-based content.

[]{#CH01.htm#pgfId-1011832 .calibre9}Hugo is among the most popular of
the current Jamstack frameworks and provides the best build speeds. It
helps us enjoy web development without the annoyances of setup, upkeep,
or day-to-day maintenance. There is no waiting for compilation, updates,
or deployment! Hugo takes a template and a website in markup format and
converts that to HTML, so the site is ready to be hosted. I congratulate
you for picking up this book and embarking on the journey to radically
simplify your approach to web development.

## []{#CH01.htm#pgfId-1011838}1.1 The stack in Jamstack {#CH01.htm#sigil_toc_id_12 .fm-head}

[]{#CH01.htm#pgfId-1011861 .calibre9}[]{#CH01.htm#marker-1011849
.calibre9}[]{#CH01.htm#marker-1011851 .calibre9}To understand Jamstack
fully, we first need to understand the concept of a web stack. The *web
stack* is a collection of software used for web application development.
Some popular web stacks include LAMP (Linux Apache MySQL PHP), Microsoft
.NET (IIS, ASP.NET, MS SQL Server), MEAN (MongoDB Express Angular
Node.js), and MERN (MongoDB Express React Node.js). Figure 1.1 shows a
typical web stack for a non- Jamstack-based website.

[]{#CH01.htm#pgfId-1011870 .calibre9}A web page consists of static as
well as dynamic assets. Different servers serve these assets in the
stack. A web server like Apache or IIS primarily hosts static assets
such as images, JavaScript, and CSS in a traditional web stack. These
files do not change across multiple users. A second set of assets is
dynamic content, which can be different. It is based on the supplied
request parameters, which include the URL, request headers, cookies, or
associated HTTP POST data. An application server with software like PHP,
ASP.NET, or Express takes these parameters and creates a response. It
might need to do a series of requests to the database server (like MySQL
or MongoDB) that holds the website's content. The application server
takes this content and uses the application logic to stitch it into a
JSON response (in MEAN/MERN) or, with an HTML template, into HTML
content (in LAMP), which it then serves to the web browser. The web page
is assembled in the browser by executing the JavaScript and styling the
provided content and images with CSS.

![CH01_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH01_F01_Jain.png){.calibre1}\

[]{#CH01.htm#pgfId-1032719}Figure 1.1 A traditional web stack used for
development. Non-Jamstack websites have a stack with web servers that
provide static assets. Application servers provide dynamic content,
generated by using the data stored in the database server and assembled
and rendered in the web browser.

[]{#CH01.htm#pgfId-1011929 .calibre9}This web architecture has been
mostly the same since the beginning of the internet, but growth and
increased traffic have stressed this architecture. Increasing the CPU
and RAM in the []{#CH01.htm#marker-1011902 .calibre9}servers (called
*vertical scaling*) cannot handle the amount of traffic moving through
the modern internet. This load requires us to add multiple
[]{#CH01.htm#marker-1011918 .calibre9}machines (called *horizontal
scaling*) to the stack.

[]{#CH01.htm#pgfId-1011938 .calibre9}Web servers are easy to scale.
Because the content does not change, we can replicate it across multiple
machines that share the load. CDNs perform the task of copying these
assets across nodes geographically closer to the end user and provide
internet scaling of all network traffic at faster speeds for the end
user. Figure 1.2 shows the scaling strategies for the web server on the
left.

![CH01_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH01_F02_Jain.png){.calibre1}\

[]{#CH01.htm#pgfId-1032685}Figure 1.2 The traditional web stack needs
scaling to handle the load on the web. Horizontally scaling the web
servers (left) is easy. We can add as many web servers as needed to
handle the load. Scaling the application stack (right) is difficult. We
cannot have hundreds of database servers (horizontal scaling), and there
is a limit to the RAM and CPU capacities (vertical scaling) we can have
in these servers. A variety of caching techniques are needed to solve
this problem. Jamstack suggests (top) moving as much work as possible
from the application servers to the web servers.

[]{#CH01.htm#pgfId-1011944 .calibre9}The application layers (application
and database servers) are a lot harder to scale. If we keep the requests
stateless by managing the user's state on the client (via JavaScript or
cookies), we can scale the application servers horizontally. Because
these servers handle the application logic, it is harder to move these
to a CDN.

[]{#CH01.htm#pgfId-1011950 .calibre9}The database layer is the hardest
to scale. The *CAP theorem* tells []{#CH01.htm#marker-1011961
.calibre9}us that scaling a regular database is not possible at the
internet scale. (We cannot horizontally scale to thousands of MySQL
servers.) The theorem states that in a distributed database, we can
simultaneously have, at maximum, two of the three CAP properties:

-   []{#CH01.htm#pgfId-1011971 .calibre9}*Consistency*---Every read
    receives the most recent write or an error.

-   []{#CH01.htm#pgfId-1011992 .calibre9}*Availability*---Every request
    gets a (non-error) response.

-   []{#CH01.htm#pgfId-1012009 .calibre9}*Partition tolerance*---The
    []{#CH01.htm#marker-1012022 .calibre9}system continues to operate
    despite an arbitrary number of messages being dropped (or delayed)
    by the network between nodes).

[]{#CH01.htm#pgfId-1012032 .calibre9}Workarounds such as eventual
consistency are present in the application stack, where the database is
not consistent but becomes so after some time. These workarounds lead to
difficulties in the application logic and force constraints on some of
the things we can achieve with server technology.

[]{#CH01.htm#pgfId-1012038 .calibre9}Despite the problems, the
traditional web stack has survived the internet scale. One of the
biggest reasons why the stack has worked despite database scalability
problems is the type of load. Database changes are an order of magnitude
less, in most cases, than the retrieval of that data. We can relieve the
database retrieval load by adding layers of caching. Read replicas for
the database and RAM-based caching on the application servers are both
solutions for this. We have even found that many web pages do not change
across multiple requests. Many websites can add CDNs over the
application layer to ease that load. Figure 1.2 on the right shows this
solution.

[]{#CH01.htm#pgfId-1012044 .calibre9}Looking at figure 1.2 closely, the
application layer is similar to the web server layer. It is a lot harder
to manage the caching layers in the application servers built for
dynamic calculations. Jamstack upends the traditional web stack by
moving most of the logic out of the application into the web server
layer.

[]{#CH01.htm#pgfId-1012060}[Note]{.fm-callout-head} Jamstack is not a
web stack in the traditional sense. It does not prescribe any specific
technology for use in developing websites. It provides an approach to
web development where most of the website is prebuilt and client-side
scripting adds dynamicity. This changes the nature and arrangement of
software in the traditional stack.

[]{#CH01.htm#pgfId-1012092 .calibre9}Being explicit about trying to
cache everything makes cache management a lot simpler. We can precompute
and cache a lot of the work that needs dynamic computation. This
*precomputation* (also called *compilation* and *prerendering* in
Jamstack) provides []{#CH01.htm#marker-1012097 .calibre9}an
[]{#CH01.htm#marker-1012103 .calibre9}added []{#CH01.htm#marker-1012109
.calibre9}benefit of enhanced performance because no calculation is
needed in the server when the user requests data.

[]{#CH01.htm#pgfId-1012119 .calibre9}Jamstack does not prohibit
server-side or client-side processing. It advises using these only when
required. Precomputation during deployment is more efficient, and web
servers have fewer security issues and maintenance needs than
application servers.

[]{#CH01.htm#pgfId-1012135 .calibre9}Figure 1.3 provides a comparison of
the Jamstack with the traditional web stack at run time for the first
issued request that fetches the HTML page. For the initial HTML in the
classic approach, the query needs to go through to the service's origin
server across the internet. The load balancer then selects an
application server. The application server may send multiple requests to
the database to get the data it needs. It assembles the response based
on the application logic and the HTML template that is a part of the
application code to create the final HTML passed on to the client for
rendering. With Jamstack, the compilation step has already performed
database processing and application logic-based stitching. This HTML
generation does not happen for every request. Therefore the request does
not need to go across the internet to the origin server. A CDN location
geographically close to the client serves the content.

![CH01_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH01_F03_Jain.png){.calibre1}\

[]{#CH01.htm#pgfId-1032651}Figure 1.3 A comparison of the first
request's run-time impact in a traditional web stack with the Jamstack
architecture. In the conventional approach, when we request the initial
HTML page, it goes through the load balancer to the application server.
The application server does multiple database calls to get the data and
then creates the HTML page based on the template. In the Jamstack
approach, the HTML is precomputed and comes from a CDN.

[]{#CH01.htm#pgfId-1012155 .calibre9}Note that figure 1.3 shows only the
initial request for data. Normally, there are additional calls for
images, JavaScript, and CSS files. These requests might ask for more
data from the origin server or from third-party services.
[]{#CH01.htm#marker-1012157 .calibre9}[]{#CH01.htm#marker-1012160
.calibre9}

## []{#CH01.htm#pgfId-1012176}[]{#CH01.htm#marker-1024031}1.2 How does Jamstack work? {#CH01.htm#sigil_toc_id_13 .fm-head}

[]{#CH01.htm#pgfId-1012200 .calibre9}[]{#CH01.htm#marker-1012201
.calibre9}The simplified stack that Jamstack provides has a lot of
processing going on behind the scenes. Jamstack's emphasis on the
compilation process is something new for the web platform. Figure 1.4
explains the various parts of the Jamstack.

![CH01_F04_JAIN](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH01_F04_JAIN.png){.calibre1}\

[]{#CH01.htm#pgfId-1032617}Figure 1.4 Viewing the inner workings of the
Jamstack. The development and content teams maintain the source code for
a Jamstack-based website. This code consists of the website data and a
set of templates. A Jamstack builder picks up the code in the
compilation process to create the static website's HTML/CSS/JS contents.
The builder might also call services during compile time and output JSON
documents that serve as an API. This output is given to the CDN to
distribute geographically. The client gets the website from the closest
CDN endpoint. The client executes the JavaScript code that can ask for
additional data from the services.

[]{#CH01.htm#pgfId-1012237 .calibre9}A considerable portion of the world
wide web consists of websites managed by a CMS. A *content management
system (CMS)* is []{#CH01.htm#marker-1012220 .calibre9}a tool used for
creation and management of digital content. The content in most websites
is kept separate from the presentation logic and can be managed by
different individuals, requiring a different skill set to develop and
maintain than the business logic. In a Jamstack-based website, we store
the content in markup documents instead of in the database. Unlike a
cell in a database table, a markup document allows for viewing and
editing the page contents with a regular text-based editor. The content
authors or editors can directly edit those files or use a graphical CMS
if they so desire. The developer maintains the templates and the
business logic to combine the data and create the website. These files
can be managed in a version control system like Git and hosted on a
cloud-based repository system like GitHub to manage the changes. This
forms the []{#CH01.htm#marker-1012226 .calibre9}markup (*M*) layer of
the website.

[]{#CH01.htm#pgfId-1012287 .calibre9}A website builder like Hugo uses
the data stored in markup files to compile the website into HTML and CSS
files, JavaScript, and image-based assets. The builder can communicate
with both external and internal services via APIs to fetch the data to
compile into the website. The builder can also build the website content
into a machine-friendly format like JSON. JSON files act as
[]{#CH01.htm#marker-1012276 .calibre9}APIs (called *pseudo APIs*) for
the markup data that the JavaScript code or native mobile apps consume.

::: fm-sidebar-block
[]{#CH01.htm#pgfId-1032595 .calibre9}Doing it old school

[]{#CH01.htm#pgfId-1032596}The approach of writing content and saving it
in a folder on a disk and then uploading it to a shared hosting provider
that manages the content looks a lot like the early web, where we used
to upload HTML and PHP files over an FTP connection. The parallels are
easy to see. These similarities raise the question, what is different
this time?

\

[]{#CH01.htm#pgfId-1032597}The web has matured a lot since we moved away
from controlling full servers. Frontend technology now performs many
features that required server code back then. Additionally, shared
hosting has upgraded itself to the cloud, where you can scale hosting
and computation to the internet scale. Even the traditional web
stack-based services are cloud-hosted.

\

[]{#CH01.htm#pgfId-1032598}The other significant change from that era is
tooling. Tools like FrontPage originally targeted designers and end
users, making the website a mesh of copy-pasted scripts that even the
website author did not understand. Modern tools target developers and
help in optimization, maintenance, and performance. Now we engineer
websites with these tools rather than mashing them up together. We've
learned from the early days of the web. We have a much better system
with enough power and flexibility to build any application desired
without compromises.
:::

[]{#CH01.htm#pgfId-1012296 .calibre9}The geographically distributed
machines of a CDN host the compiled website for consumption. The CDN
node closest to the end user serves this content to the end user. All
the static content is user-agnostic and fast to produce. For dynamic
data, JavaScript code can take over. JavaScript is the *J* layer of the
Jamstack. JavaScript provides interactivity and personalization to the
website.

[]{#CH01.htm#pgfId-1012311 .calibre9}The JavaScript layer can
communicate with various services to provide dynamic content. These
services expose APIs that form the *A* layer of the Jamstack. These APIs
encapsulate the remains of the application servers of the traditional
stack. Jamstack recommends using managed services like those owned by
third parties or those hosted on a FaaS (function as a service) cloud
solution to minimize maintenance.

::: fm-sidebar-block
[]{#CH01.htm#pgfId-1032571 .calibre9}Exercise 1.1

[]{#CH01.htm#pgfId-1032572}In Jamstack, where should most of the logic
reside?

1.  []{#CH01.htm#pgfId-1032573}Server

2.  []{#CH01.htm#pgfId-1032574}Microservices

3.  []{#CH01.htm#pgfId-1032575}Compiled templates

4.  []{#CH01.htm#pgfId-1032576}Client

5.  []{#CH01.htm#pgfId-1032578}JavaScript[]{#CH01.htm#marker-1032577}
:::

## []{#CH01.htm#pgfId-1012420}1.3 The JAM in Jamstack {#CH01.htm#sigil_toc_id_14 .fm-head}

[]{#CH01.htm#pgfId-1012440 .calibre9}[]{#CH01.htm#marker-1012431
.calibre9}The *JAM* part of the Jamstack stands for JavaScript, APIs,
and markup. Let's take a look at each of these
components[]{#CH01.htm#marker-1023042}.

### []{#CH01.htm#pgfId-1012449}1.3.1 JavaScript {#CH01.htm#sigil_toc_id_15 .fm-head1}

[]{#CH01.htm#pgfId-1012468 .calibre9}[]{#CH01.htm#marker-1012460
.calibre9}[]{#CH01.htm#marker-1012462 .calibre9}*JavaScript* in Jamstack
refers to all the approaches to client-side scripting that provide
interactivity and dynamic functionality, which is personalized to the
user and cannot be precompiled. This enables developers to react to user
actions and modifies the user interface at run time. Jamstack leaves the
specifics of the JavaScript framework and its management to the web
developer.

[]{#CH01.htm#pgfId-1012477 .calibre9}In traditional stacks, the server
plays a prominent role in handling user interactions. It generates new
pages even when just a part of the page needs to be modified. That is
unnecessary and suboptimal. Modern JavaScript is fully capable of
storing the user state in the browser. It can communicate with the
server and update the interface without the user needing to reload or
see a flicker in the interface. Jamstack prescribes using JavaScript for
use cases where it shines the best---providing interactive interfaces to
the end user and communicating from the client to the server.
[]{#CH01.htm#marker-1012479 .calibre9}[]{#CH01.htm#marker-1012482
.calibre9}

### []{#CH01.htm#pgfId-1012488}1.3.2 Application programming interfaces (APIs) {#CH01.htm#sigil_toc_id_16 .fm-head1}

[]{#CH01.htm#pgfId-1012507 .calibre9}[]{#CH01.htm#marker-1012499
.calibre9}[]{#CH01.htm#marker-1012501 .calibre9}*Application programming
interfaces (APIs)* provide a well-defined contract for communicating
with a web service. APIs abstract the entire server functionality so the
client does not need to understand the server internals to consume the
service. In Jamstack, precompilation and client-side JavaScript take
over a lot of the work usually done on the server, but the server still
has its use cases. These include storage of the application state across
machines, computations that require more processing power than a single
machine, and data that must be transmitted back from the website viewer
to the servers.

[]{#CH01.htm#pgfId-1012516 .calibre9}Many traditional systems expose
APIs to communicate with the underlying functionality. Although this
approach fits in the Jamstack definition, Jamstack advises minimizing
the building of APIs to reduce maintenance overhead. A lot of operations
that need APIs in other stacks are handled differently in Jamstack.
Instead of content creation, update, or deletion APIs, you can place,
update, or remove files on disk. Only dynamic updates based on user
actions in the website (like purchases and comments) need dedicated
APIs.

[]{#CH01.htm#pgfId-1012522 .calibre9}There are third-party API providers
that provide high-level APIs, which developers can use without going
through the overhead of building everything themselves. From handling
comments to full-text searches, a lot is available at scale without
writing custom code. When we need to write a custom backend, cloud
service providers make that task easier than building it from scratch.
With FaaS, the cloud service providers take over the ownership of
uptime, ongoing security updates, and scaling with user load. The
service provider maintains performance and availability across the
globe. The developer writes code and hands it over to the service
provider to deploy. The ongoing work is minimal. Developers can then
work to enhance functionality or update any dependencies at the function
level. []{#CH01.htm#marker-1012524 .calibre9}[]{#CH01.htm#marker-1012527
.calibre9}

### []{#CH01.htm#pgfId-1012533}[]{#CH01.htm#marker-1023041}1.3.3 Markup {#CH01.htm#sigil_toc_id_17 .fm-head1}

[]{#CH01.htm#pgfId-1012556 .calibre9}[]{#CH01.htm#marker-1012544
.calibre9}[]{#CH01.htm#marker-1012546 .calibre9}The traditional
definition of *markup* includes a set of annotations (like XML tags in
HTML documents or stars around the text in Markdown) in a text document
that provides further information on how to understand or render the
text. []{#CH01.htm#marker-1023040}Jamstack considers the entire markup
document as markup. This consists of the textual data, the annotations,
and the structured metadata.

[]{#CH01.htm#pgfId-1012565 .calibre9}Markup forms the data layer of the
Jamstack. Unlike traditional databases, we store markup in text files.
It is readable and editable by humans in its raw form without using a
tool to convert it to a readable format. Markup languages provide a way
to write formatted documents in a terse and readable way. Markdown is
the most popular markup language for writing content in the Jamstack.
(We will examine Markdown in detail in chapter 3.) Various metadata
languages that we use for additional information associated with the
document can accompany this content. One of these is YAML (Yaml Ain't
Markup Language), which we will also discuss in chapter 3.

[]{#CH01.htm#pgfId-1012581}[Note]{.fm-callout-head} HTML (HyperText
Markup Language) is []{#CH01.htm#marker-1012583}also a markup language,
and you are free to choose that for writing your data in Jamstack.
Human-readable languages like Markdown, however, make it easier to read
and maintain our data. This is converted to HTML during rendering,
keeping the layout (template) and presentation (CSS) out of content.

[]{#CH01.htm#pgfId-1012593 .calibre9}There are many advantages to using
a markup-based document to store data. Most of the web page is
unstructured. A regular database keeps it in a single cell. This
approach, however, is not a good use of database technology. We can use
a version control system like Git to monitor the data changes if the
data is managed as individual files. Having the data along with the code
eases migration across services and build environments. We can store all
configuration files together. Optimization and testing are more
straightforward with the ability to create new build environments
(stage, production, etc.) on demand. With unstructured content, most of
the organization and querying capabilities of the databases are not
helpful. Hosting blogs or generic web pages based on a database is not
the best use of their resources.

[]{#CH01.htm#pgfId-1012599 .calibre9}With the popularity of Git and
GitHub, many developers are already familiar with markup languages,
especially Markdown. Most developers write readme files in a markup
language. These languages are stable, standardized, easy to learn, and
easy to understand. There is a lot of tooling available to write in
these languages or migrate data to them. They also work well with diff
and merge tools (used for comparing changes in a file), and most
programming languages have libraries to parse these languages. This
tooling provides extreme flexibility for programmers to manipulate data
the way they like.

::: fm-sidebar-block
[]{#CH01.htm#pgfId-1032546 .calibre9}Exercise 1.2

[]{#CH01.htm#pgfId-1032547}What does the M in Jamstack stand for?

1.  []{#CH01.htm#pgfId-1032548}markup

2.  []{#CH01.htm#pgfId-1032549}Markdown

3.  []{#CH01.htm#pgfId-1032550}MySQL

4.  []{#CH01.htm#pgfId-1032554}MongoDB[]{#CH01.htm#marker-1032551}[]{#CH01.htm#marker-1032552}[]{#CH01.htm#marker-1032553}
:::

## []{#CH01.htm#pgfId-1012678}1.4 Why use Jamstack? {#CH01.htm#sigil_toc_id_18 .fm-head}

[]{#CH01.htm#pgfId-1012688 .calibre9}[]{#CH01.htm#marker-1032535
.calibre9}Prebuilding HTML content presented to the user has unique
advantages---from minimal operations to outstanding performance and cost
reductions. We'll look at these advantages and more in the following
sections.

### []{#CH01.htm#pgfId-1012697}1.4.1 Minimal operations {#CH01.htm#sigil_toc_id_19 .fm-head1}

[]{#CH01.htm#pgfId-1012707 .calibre9}[]{#CH01.htm#marker-1012708
.calibre9}Because content is prebuilt before publication, the number of
moving parts in a site is reduced. The service provider takes care of
security updates, hardware failures, and network issues. The cloud host
provides almost 100% uptime without any active involvement from the
website owner. There is no need to be on call, no need to think about
servers, scaling, load balancing, uptime across continents, or any other
operational overhead. The developer can focus on the joy of building,
and the business can focus on its core competency rather than setting up
a DevOps team. []{#CH01.htm#marker-1012712 .calibre9}

### []{#CH01.htm#pgfId-1012719}1.4.2 Great performance {#CH01.htm#sigil_toc_id_20 .fm-head1}

[]{#CH01.htm#pgfId-1012736 .calibre9}[]{#CH01.htm#marker-1012730
.calibre9}[]{#CH01.htm#marker-1012732 .calibre9}CDN hosts in its
entirety the prebuilt HTML provided as a static website. This way, every
file is cached and served from a server geographically close to the end
user. There is no round trip to an application server and no database
query, which can become a bottleneck. Most site generators targeting the
Jamstack generate the HTML at compile time. It is already available to
render when the user requests it. The website is functional, even with a
single HTTP request. A simple website built with Jamstack can provide a
90%+ performance score on most audits. If the developer is sensitive to
performance while building the theme, the Jamstack-based website can
meet all the criteria for a 100% score in these audits.
[]{#CH01.htm#marker-1012737 .calibre9}[]{#CH01.htm#marker-1012740
.calibre9}

### []{#CH01.htm#pgfId-1012746}1.4.3 Lower costs {#CH01.htm#sigil_toc_id_21 .fm-head1}

[]{#CH01.htm#pgfId-1012763 .calibre9}[]{#CH01.htm#marker-1012757
.calibre9}[]{#CH01.htm#marker-1012759 .calibre9}The removal of the
database and the application servers from the hosting stack reduces the
hardware costs. With the operations becoming automatic, most DevOps
requirements are not present. All this translates to significant cost
savings. You can have a website for free using static-site hosts like
GitHub Pages and Netlify. All major cloud providers like AWS S3, Google
Cloud Storage, and Azure Storage provide low-cost static hosting. There
is no need to have an IT or a DevOps team for managing the fleet of
servers. []{#CH01.htm#marker-1012764
.calibre9}[]{#CH01.htm#marker-1012767 .calibre9}

### []{#CH01.htm#pgfId-1012773}1.4.4 Developer productivity {#CH01.htm#sigil_toc_id_22 .fm-head1}

[]{#CH01.htm#pgfId-1012790 .calibre9}[]{#CH01.htm#marker-1012784
.calibre9}[]{#CH01.htm#marker-1012786 .calibre9}A version control system
like Git manages a Jamstack-based website. There is no need to have
complicated development environments. Running the code on the developer
machine is one command away. Most websites can be deployed by a simple
push to a server many times a day. These features give the developer the
time and flexibility to focus on the content of the website.
[]{#CH01.htm#marker-1012791 .calibre9}[]{#CH01.htm#marker-1012794
.calibre9}

### []{#CH01.htm#pgfId-1012800}1.4.5 Longevity {#CH01.htm#sigil_toc_id_23 .fm-head1}

[]{#CH01.htm#pgfId-1012817 .calibre9}[]{#CH01.htm#marker-1012811
.calibre9}[]{#CH01.htm#marker-1012813 .calibre9}HTML/CSS is the most
stable technology built. Today's browsers bend over backward to continue
to support all features that they have supported since the 1990s. If you
host a Jamstack-based website and vanish from the internet for a decade,
it will still be there when you come back in the same state (mostly)
where you left it. The internet is not forgiving to any technology stack
outside of plain HTML, CSS, or JavaScript hosted on a static server. You
can even continue to use the static site generator in a virtual machine
without updating the version. Because the generator is local, security
vulnerabilities in the generator do not impact the website. You do not
need to go online and expose these vulnerabilities to the internet.
[]{#CH01.htm#marker-1012818 .calibre9}[]{#CH01.htm#marker-1012821
.calibre9}

### []{#CH01.htm#pgfId-1012827}1.4.6 Tooling {#CH01.htm#sigil_toc_id_24 .fm-head1}

[]{#CH01.htm#pgfId-1012844 .calibre9}[]{#CH01.htm#marker-1012838
.calibre9}[]{#CH01.htm#marker-1012840 .calibre9}With fewer moving parts
and a well-defined structure, the tooling for Jamstack is much more
advanced and powerful than other web stacks. One-click deployment is
readily available with hands-off support for scaling through Netlify,
GitHub Pages, and so on. Having the entire website present as code also
means that there is nothing to hide. There are no complicated
configurations for security or performance, no extra management overhead
for different layers in the stack, and no IDE (integrated development
environment).

::: fm-sidebar-block
[]{#CH01.htm#pgfId-1032462 .calibre9}Updating on the fly

[]{#CH01.htm#pgfId-1032463}When new to the Jamstack, it may seem to be a
limitation that we cannot update the website on the fly. Most
traditional systems provide an admin mode to update the website. The
Jamstack does not prescribe anything. With the Jamstack, there is no
need for any special tooling to update a Jamstack-based website.

\

[]{#CH01.htm#pgfId-1032464}The markup language is friendly and easy to
use. We can provide updates in any text editor. Most version control
providers like GitHub, GitLab, and Bitbucket can commit new changes from
the browser. Continuous integration can automatically build and deploy
this to production. We get the benefits of having an entire version
control system for our content. We also can choose our text editor
freely. As a bonus, we can update the theme wherever and whenever
desired. Textual content, automatic deployment, and continuous
integration ensure that we do not miss WordPress's admin mode, but admin
tools are also available if needed. We'll discuss the Netlify CMS in
appendix C.
[]{#CH01.htm#marker-1032465}[]{#CH01.htm#marker-1032466}[]{#CH01.htm#marker-1032467}
:::

## []{#CH01.htm#pgfId-1012878}[]{#CH01.htm#marker-1023163}1.5 When not to use the Jamstack {#CH01.htm#sigil_toc_id_25 .fm-head}

[]{#CH01.htm#pgfId-1012888 .calibre9}[]{#CH01.htm#marker-1012889
.calibre9}One assumption of the Jamstack is that the content is
available at compile time and does not change rapidly. The Jamstack does
not offer a lot if this assumption turns out to be false. The following
sections provide use cases for when not to use Jamstack.

### []{#CH01.htm#pgfId-1012897}1.5.1 When there is dynamic data with no historical significance {#CH01.htm#sigil_toc_id_26 .fm-head1}

[]{#CH01.htm#pgfId-1012914 .calibre9}[]{#CH01.htm#marker-1012908
.calibre9}[]{#CH01.htm#marker-1012910 .calibre9}If we are building a
dashboard-type application with ever-changing data, then precompilation
as a concept does not provide great value. Sensor-based data can change
within milliseconds. In many cases, no one reads this data. Jamstack
does not work well with this type of application. A major exception is
reporting, where some data needs to live for a long time, is read
frequently, and is rarely, if ever, changed. This type of report is a
perfect case to be pre-generated and saved. There is no point in doing
this on the fly. The Jamstack fits the reporting use case perfectly.
[]{#CH01.htm#marker-1012915 .calibre9}[]{#CH01.htm#marker-1012918
.calibre9}

### []{#CH01.htm#pgfId-1012924}1.5.2 Building based on user-generated content with transient data {#CH01.htm#sigil_toc_id_27 .fm-head1}

[]{#CH01.htm#pgfId-1012943 .calibre9}[]{#CH01.htm#marker-1012935
.calibre9}[]{#CH01.htm#marker-1012937
.calibre9}[]{#CH01.htm#marker-1012939 .calibre9}Websites like Twitter
and Facebook have tiny posts that we rarely read as individual pages.
These get compiled into feeds, which are different for each user and
which change over time. The users may not read the feed at any given
time, so pre-generation can prove to be wasteful. These use cases do not
fit into the write once, read many times scenarios the Jamstack excels
at. While we could theoretically compile often-used pages, the
traditional web stack can also do that. One thing to remember here is
that the story changes considerably if the data has value in permanence.
If we have user-generated blog posts, product pages, or articles that
are written once and read many times, this comes back to the write once,
read many times use case that the Jamstack is great at.
[]{#CH01.htm#marker-1012944 .calibre9}[]{#CH01.htm#marker-1012947
.calibre9}[]{#CH01.htm#marker-1012949 .calibre9}

### []{#CH01.htm#pgfId-1012955}1.5.3 Having user-specific web pages {#CH01.htm#sigil_toc_id_28 .fm-head1}

[]{#CH01.htm#pgfId-1012974 .calibre9}[]{#CH01.htm#marker-1012966
.calibre9}[]{#CH01.htm#marker-1012968
.calibre9}[]{#CH01.htm#marker-1012970 .calibre9}There are websites where
the developers personalize each page for the user. This data is
different because it's based on the user ID. Therefore, it might not
make sense to precompile. Most users might not log in. There is no
public access to bots that can cause increased load. The whole concept
of many reads and a single write for the data is false. An example of
this would be a calendar application. Because each user's calendar is
different, it does not make sense to pre-generate everyone's daily
calendar. []{#CH01.htm#marker-1012975
.calibre9}[]{#CH01.htm#marker-1012978
.calibre9}[]{#CH01.htm#marker-1012980 .calibre9}

### []{#CH01.htm#pgfId-1012986}[]{#CH01.htm#marker-1023162}1.5.4 When there is no data to compile {#CH01.htm#sigil_toc_id_29 .fm-head1}

[]{#CH01.htm#pgfId-1012996 .calibre9}[]{#CH01.htm#marker-1012997
.calibre9}Web apps are websites where the user is a creator and a
consumer. For a document editor (think Google Docs), there is no data to
present. In these cases, the Jamstack approach does not help.

[]{#CH01.htm#pgfId-1013005 .calibre9}Note that the Jamstack is helpful
in all the previous cases for building the static parts of the website.
These include the Privacy Policy page and the Terms of Use page. Even
the About Us page and the company blog can be built optimally using the
Jamstack. These pages could be set up using the Jamstack approach, while
a different stack can serve the rest of the website or web application.

::: fm-sidebar-block
[]{#CH01.htm#pgfId-1032438 .calibre9}Exercise 1.3

[]{#CH01.htm#pgfId-1032439}Which website from the following list would
be best to build with the Jamstack?

1.  []{#CH01.htm#pgfId-1032440}A search engine

2.  []{#CH01.htm#pgfId-1032441}A shopping website

3.  []{#CH01.htm#pgfId-1032442}A social network

4.  []{#CH01.htm#pgfId-1032445}An image
    editor[]{#CH01.htm#marker-1032443}[]{#CH01.htm#marker-1032444}
:::

## []{#CH01.htm#pgfId-1013073}1.6 Selecting the builder {#CH01.htm#sigil_toc_id_30 .fm-head}

[]{#CH01.htm#pgfId-1013090 .calibre9}[]{#CH01.htm#marker-1013084
.calibre9}[]{#CH01.htm#marker-1013086 .calibre9}The Jamstack does not
prescribe a specific technology. The developer is free to choose the
technology of their liking to build the website. There is an extensive
list of static site builders with various tradeoffs. These are made in
different programming languages, provide integrations, and support many
plugins.

[]{#CH01.htm#pgfId-1013095 .calibre9}Jekyll, built in Ruby, is a popular
static site builder that seamlessly integrates with GitHub Pages. GitHub
can automatically deploy Jekyll-based websites from a repository without
writing a custom build step. Many Hugo users started their journeys with
Jekyll and moved to Hugo looking for better build performance.

[]{#CH01.htm#pgfId-1013101 .calibre9}Hugo is among the fastest static
site generators with a deep feature set. Hugo's development team has
focused on building a system that can render a complicated website with
hundreds of pages in less than a second. Written in Go (Golang), Hugo
comes as a single binary with all batteries included. With no plugins,
the core team has standardized most of its features. This
standardization allows building the elements with a lot of thought
focusing on maintainability and performance. Its template language is a
complete programming language that we can use to create anything. The
documentation is well maintained, and the community is active in the
forums. Many popular websites with millions of monthly users have Hugo
as their generator. The core of Hugo is stable, and while it does
rapidly evolve, it has compatibility with the older versions.

[]{#CH01.htm#pgfId-1013107 .calibre9}There is a crop of popular
JavaScript framework-based static site builders like Gatsby, Nuxt, and
Next.js. These force you to follow their choices of how to write and use
JavaScript. Frameworks like Next.js include features to build the API
backend. If you are looking to develop a JavaScript-heavy application
and agree with the decisions made by these frameworks, these might be
great choices. Due to the nature of the JavaScript ecosystem, and the
relatively small amount of time these frameworks have been in existence,
expect some churn.

[]{#CH01.htm#pgfId-1013113 .calibre9}There is another set of static site
builders like Pelican in Python and mdBook in Rust. These are much
smaller in feature sets and popularity. Use these if you are tied to a
language and want to write custom features. []{#CH01.htm#marker-1013115
.calibre9}[]{#CH01.htm#marker-1013118 .calibre9}

## []{#CH01.htm#pgfId-1013124}[]{#CH01.htm#marker-1013535}[]{#CH01.htm#marker-1013530}[]{#CH01.htm#marker-1012689}[]{#CH01.htm#marker-1023106}1.7 Why choose Hugo? {#CH01.htm#sigil_toc_id_31 .fm-head}

[]{#CH01.htm#pgfId-1013141 .calibre9}[]{#CH01.htm#marker-1013135
.calibre9}[]{#CH01.htm#marker-1013137 .calibre9}Hugo is one of the
oldest static site generators and has continued to rise in popularity
over time. Its creator, Steve Francia, has extensive experience with CMS
and technical writing needs. His background includes building a
closed-source CMS (Supersite) that's used by Major League Soccer and
Priceline. He has deep experience with Magento and WordPress and has
served on Drupal's board of directors. He led the technical writing
departments of both MongoDB and Docker. He took all of that experience,
using the strengths of each of these systems, and channeled that into
designing Hugo.

[]{#CH01.htm#pgfId-1013146 .calibre9}Hugo lies at the sweet spot between
a tool like WordPress, which is built primarily for a nontechnical
audience, and Rails or Express.js, which provide the power to generate
generic software but require ongoing maintenance. With Hugo, you get the
flexibility of a custom theme with less maintenance than most other
options and excellent performance. Hugo is for users who don't mind
getting their hands into the code and for those who need to have a life
outside of their project.

::: fm-sidebar-block
[]{#CH01.htm#pgfId-1032415 .calibre9}You are not alone

[]{#CH01.htm#pgfId-1032417}Hugo is extremely popular in the industry.
Websites like Bootstrap ([[https://getboot
strap.com](https://getbootstrap.com){.url}]{.fm-hyperlink}), Let's
Encrypt
([[https://letsencrypt.org](https://letsencrypt.org){.url}]{.fm-hyperlink}),
Smashing Magazine ([[https://
www.smashingmagazine.com](https://www.smashingmagazine.com){.url}]{.fm-hyperlink}),
Netlify
([[https://www.netlify.com/](https://www.netlify.com/){.url}]{.fm-hyperlink}),
and 1Password Support
([[https://support.1password.com/](https://support.1password.com/){.url}]{.fm-hyperlink})
use Hugo at scale. Smashing Magazine migrated its website with thousands
of pages from WordPress to Hugo because of Hugo's performance and ease
of use.
:::

### []{#CH01.htm#pgfId-1013173}[]{#CH01.htm#marker-1024073}[]{#CH01.htm#marker-1024072}1.7.1 Hugo is fast {#CH01.htm#sigil_toc_id_32 .fm-head1}

[]{#CH01.htm#pgfId-1013190 .calibre9}[]{#CH01.htm#marker-1013184
.calibre9}[]{#CH01.htm#marker-1013186 .calibre9}Hugo is the fastest
feature-rich static site builder available. While we may not appreciate
this when starting a project, this is extremely important in our
day-to-day lives. Waiting for compilation or refreshes is a significant
reason for developer frustration and can mean a project's death if it's
a hobby. Performance becomes even more critical when technology
modifications force us to go through a substantial change in our website
template. For example, the advent of mobile devices brought death to
many WordPress themes, where updating every aspect was so painful that
developers gave up. Moreover, a Hugo-based website continues to provide
a respectable development performance even with a decade worth of
content. A Hugo-based website's facelift or rewrite is easier and more
enjoyable than with any slower framework.

::: fm-sidebar-block
[]{#CH01.htm#pgfId-1032377 .calibre9}Hugo and the Go language

[]{#CH01.htm#pgfId-1032378}One concern people have is that adopting Hugo
means learning the Go language. While this is true for other static site
generators written in scripting languages, this is not true for Go-based
applications. *There is no need to learn Go or to understand how it
works to be successful with Hugo.* Just like people don't need to learn
C++ to use Windows or Photoshop, Hugo does not require any Go
programming knowledge. This book does not have a single line of Go code.
The Go programming language has built-in support for concurrency.
Writing code with parallel execution is easier in Go than in many other
programming languages used to build website generators. Hugo benefits
immensely from Go's speed without additional complexity.

\

[]{#CH01.htm#pgfId-1032391}Hugo's users use the Go template language,
which, despite the name, is a different language from Go itself. It
allows us to write anything we want, including modules and functions,
without dealing with a lot of complexity with multithreaded code. You
may not even need the Go template language if you don't plan to write a
custom theme or a shortcode. You can write content in a markup language
and pick a theme off the shelf to build your website.

\

[]{#CH01.htm#pgfId-1032392}Most other Jamstack-based website builders
have a single-threaded, sequential-flow source language. This approach
allows them to have plugins, but you pay massively in the form of
performance. With the most significant features available in Hugo, there
is no need to compromise on build performance and developer experience
with a slow framework.

\

[]{#CH01.htm#pgfId-1032393}Go is among the newer languages (publicly
released in 2009), but it has broken into mainstream development. It is
a top-10 language in terms of adoption. Major projects including Docker
and Kubernetes are written in Go. Also, most of the cloud is written in
Go, including AWS, Azure, and Google Cloud Platform (GCP). Major
enterprises including Google, American Express, and Dropbox use Go
extensively.

\

[]{#CH01.htm#pgfId-1032394}Conveniently, Hugo's creator, Steve Francia,
also serves as the product and strategy lead for the Go programming
language at Google. Consequently, Hugo is a project that is well
understood by the Go team. It influences the programming language itself
and can adopt the best of its features.
[]{#CH01.htm#marker-1032395}[]{#CH01.htm#marker-1032396}
:::

### []{#CH01.htm#pgfId-1013249}1.7.2 Hugo is stable {#CH01.htm#sigil_toc_id_33 .fm-head1}

[]{#CH01.htm#pgfId-1013266 .calibre9}[]{#CH01.htm#marker-1013260
.calibre9}[]{#CH01.htm#marker-1013262 .calibre9}The core features of
Hugo have been supported for a long time and are not likely to break.
Any new additions make sure that these features are not disturbed and
continue to work as-is. In the early days of Hugo, development moved
slowly as the team focused on getting the architecture right. This
approach has paid off. Hugo is flexible and extensible to new features,
and most releases do not break the thousands of websites built with it.

[]{#CH01.htm#pgfId-1013271 .calibre9}The Hugo development team believes
in the continuous evolution of Hugo while maintaining backward
compatibility. Hugo attempts to be backward-compatible across releases
and guides us in upgrading if something needs to change. If you pick an
old theme and get the latest version of Hugo, you might get some
warnings, but most of it should continue to work.
[]{#CH01.htm#marker-1013273 .calibre9}[]{#CH01.htm#marker-1013276
.calibre9}

### []{#CH01.htm#pgfId-1013282}1.7.3 Hugo is built for performance {#CH01.htm#sigil_toc_id_34 .fm-head1}

[]{#CH01.htm#pgfId-1013299 .calibre9}[]{#CH01.htm#marker-1013293
.calibre9}[]{#CH01.htm#marker-1013295 .calibre9}The Hugo community has a
tendency to look for performance gains in everything they do. There is a
lot of advice on improving your website's performance in easy-to-do
steps in the community forums. If you find a random script from the
internet for doing something with Hugo, there is a high likelihood that
its author has optimized it for performance.

[]{#CH01.htm#pgfId-1013304 .calibre9}The core performance of Hugo also
impacts its output. The performance primitives are available for other
uses. Developers can learn from the approach that Hugo uses for
optimizing their workflows. []{#CH01.htm#marker-1013306
.calibre9}[]{#CH01.htm#marker-1013309 .calibre9}

### []{#CH01.htm#pgfId-1013315}1.7.4 Hugo is self-contained {#CH01.htm#sigil_toc_id_35 .fm-head1}

[]{#CH01.htm#pgfId-1013344 .calibre9}[]{#CH01.htm#marker-1013326
.calibre9}[]{#CH01.htm#marker-1013328 .calibre9}A plugin-heavy system
appears to provide a lot of flexibility and capabilities until
maintenance rolls around. Your site can get into a bad state even if one
plugin is abandoned while the framework is being actively maintained!
Plugin abandonment has been a classic problem with frameworks like
Rails, where each major version became a massive pain for migrating all
the plugins. We can see the same in the ecosystems like Backbone and
Angular, where there are many stale plugins. Even Jekyll, which is
extremely popular and actively maintained, has a considerable problem
[]{#CH01.htm#marker-1013333 .calibre9}of *plugin rot*.

[]{#CH01.htm#pgfId-1013353 .calibre9}Being self-contained has allowed
Hugo to bypass issues that have plagued other projects. The core team
has standardized optimal approaches to perform tasks that are available
natively. The Hugo team has optimized Hugo without needing lower-level
API compatibility. They continue to write complicated multithreaded
logic for the standardized workflows to eke out the few extra
milliseconds that their users can spend elsewhere. Hugo's users get a
lot more support than they would from the plugin authors and have less
fear of abandoning their core workflows.

[]{#CH01.htm#pgfId-1013359 .calibre9}Being self-contained does not mean
Hugo is not extensible. The Go template language is potent, and users
can share snippets of code as modules that can be reused and that can
perform complicated logic using this language.
[]{#CH01.htm#marker-1013361 .calibre9}[]{#CH01.htm#marker-1013364
.calibre9}

### []{#CH01.htm#pgfId-1013370}1.7.5 Hugo is a single file {#CH01.htm#sigil_toc_id_36 .fm-head1}

[]{#CH01.htm#pgfId-1013380 .calibre9}[]{#CH01.htm#marker-1013381
.calibre9}Hugo packages all its core dependencies and resources in to a
single executable file. A single file makes downloading Hugo,
transferring it to another machine, and backing it up extremely simple.
In systems where each file has a lot of scrutiny due to security
concerns, a single binary file with no other dependencies shines.
Developers can merge the Hugo binary with their source code to use it in
a restricted environment. With a single file taking care of everything,
there are no dependencies to update and no build systems to manage. The
full web stack with custom APIs can be built with a handful of
dependencies. This freedom is in stark contrast to JavaScript-based
static site builders, which have hundreds of dependencies, each of which
might need to be vetted by a security team for usage in an enterprise
environment. []{#CH01.htm#marker-1013385 .calibre9}

### []{#CH01.htm#pgfId-1013392}1.7.6 Hugo can be extremely low maintenance {#CH01.htm#sigil_toc_id_37 .fm-head1}

[]{#CH01.htm#pgfId-1013409 .calibre9}[]{#CH01.htm#marker-1013403
.calibre9}[]{#CH01.htm#marker-1013405 .calibre9}With fewer moving parts
(plugins and operating system dependencies), a tiny installation
footprint, no database, and no complicated hosting steps, the
maintenance churn with Hugo can be a lot less than with other web
development approaches. Each dependency needs to be maintained. You can
get a compelling website with low maintenance with just Hugo and a
hosting provider. While Hugo has had updates where backward
compatibility has broken (for valid performance, extensibility, and
maintainability reasons), you are free to take the updates when you have
time, and you do not have to fix arcane plugins. We cannot say this
about most other ecosystems in the web development world.
[]{#CH01.htm#marker-1013410 .calibre9}[]{#CH01.htm#marker-1013413
.calibre9}

### []{#CH01.htm#pgfId-1013419}1.7.7 Hugo can save you from analysis paralysis {#CH01.htm#sigil_toc_id_38 .fm-head1}

[]{#CH01.htm#pgfId-1013436 .calibre9}[]{#CH01.htm#marker-1013430
.calibre9}[]{#CH01.htm#marker-1013432 .calibre9}Hugo is opinionated and
built with a lot of techniques to get up and running quickly. While the
powerful template system allows you to roll out a custom solution to a
problem, the Hugo team has already solved the most common ones. Hugo has
generic implementations for pagination, categorizing content into
unlimited types of categories, and getting core website elements like
menus. Getting up and running is easy with Hugo because there is a
well-documented and widespread approach to solving most problems readily
available. []{#CH01.htm#marker-1013437
.calibre9}[]{#CH01.htm#marker-1013440 .calibre9}

### []{#CH01.htm#pgfId-1013446}1.7.8 Hugo is powerful {#CH01.htm#sigil_toc_id_39 .fm-head1}

[]{#CH01.htm#pgfId-1013463 .calibre9}[]{#CH01.htm#marker-1013457
.calibre9}[]{#CH01.htm#marker-1013459 .calibre9}Despite being
opinionated, Hugo is versatile. The Go template language that Hugo
extends is powerful and flexible. This power provides the ability for
developers to write proper programs with Hugo. The standard library
provided by Hugo is enormous and growing. It comes with outstanding
performance right from the start. Even if you write terrible code, the
core performance of the built-in functions ensures a relatively good
performance for the website's compilation. With access to APIs during
website generation, Hugo provides a lot of power without losing the
generated output's performance.

[]{#CH01.htm#pgfId-1013468 .calibre9}You can write functions anywhere in
your website with Hugo, including while developing content (as custom
shortcodes embedded in the markup) to do some special processing. You
can encapsulate that into something that you can reuse or leave as
one-time snippets of code on specific pages.

[]{#CH01.htm#pgfId-1013474 .calibre9}Hugo has lots of web development
primitives. Still, not using them does not seem like fighting the
framework. If you don't want to use a feature provided by Hugo and build
your own using the template language, the experience with the rest of
Hugo does not deteriorate. Hugo provides good support for interacting
with APIs and JavaScript that can provide extensibility and dynamicity
where needed. []{#CH01.htm#marker-1013476
.calibre9}[]{#CH01.htm#marker-1013479 .calibre9}

### []{#CH01.htm#pgfId-1013485}1.7.9 Hugo is scalable {#CH01.htm#sigil_toc_id_40 .fm-head1}

[]{#CH01.htm#pgfId-1013502 .calibre9}[]{#CH01.htm#marker-1013496
.calibre9}[]{#CH01.htm#marker-1013498 .calibre9}Hugo already caters to
websites with multilingual content, having thousands of pages and
millions of monthly active users. Hugo has a proven record of handling
the scale of some of the biggest and most heavily used websites on the
internet. There are already enough primitives and capabilities to scale
the Hugo-based website from a developer to a team. Hugo supports a wide
variety of input and output formats. It has various features to enable
the automation of the day-to-day work for a nontechnical member of the
team. []{#CH01.htm#marker-1013503 .calibre9}[]{#CH01.htm#marker-1013506
.calibre9}

### []{#CH01.htm#pgfId-1013512}[]{#CH01.htm#marker-1013525}[]{#CH01.htm#marker-1013523}1.7.10 Hugo is a community project {#CH01.htm#sigil_toc_id_41 .fm-head1}

[]{#CH01.htm#pgfId-1013529 .calibre9}[]{#CH01.htm#marker-1032347
.calibre9}[]{#CH01.htm#marker-1032348 .calibre9}A community of
volunteers maintains Hugo with no commercial interest in the project.
This voluntary nature allows for the direction of the project to be in
the community's best interest. Hugo cannot pivot, get acquired, or shut
down at the whim of a corporation. []{#CH01.htm#marker-1032350
.calibre9}[]{#CH01.htm#marker-1032351
.calibre9}[]{#CH01.htm#marker-1032352
.calibre9}[]{#CH01.htm#marker-1032353 .calibre9}

![CH01_F05_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH01_F05_Jain.png){.calibre1}\

[]{#CH01.htm#pgfId-1032316}Figure 1.5 DevOps and the Jamstack: Alex, the
web developer, talks to Bob, who works as a system/IT admin. Bob
convinced management to use a cloud-based solution with the existing
technology and drop the investigation into the Jamstack.

## []{#CH01.htm#pgfId-1013553}1.8 Is speed really important? {#CH01.htm#sigil_toc_id_42 .fm-head}

[]{#CH01.htm#pgfId-1013586 .calibre9}[]{#CH01.htm#marker-1013578
.calibre9}[]{#CH01.htm#marker-1013580
.calibre9}[]{#CH01.htm#marker-1013582 .calibre9}We cannot emphasize
enough the importance of build performance. Hugo employs many techniques
to speed up build times, like having a multithreaded core with support
for caching at all layers to prevent as much rework as possible. Speed
frees the developer from the burden of waiting for the build to complete
after every small change.

[]{#CH01.htm#pgfId-1013591 .calibre9}If you launch Hugo in watch mode (a
special mode for development), the website comes up in less than a
second. It reloads with your edits without having to go through the
entire step of setting up fancy hot module replacements for live
reloads. This feature is not just for the themes but for the whole of
the website! We get the flexibility to edit the website in the 5 minutes
that we might have between other chores. In other frameworks, getting up
and ready is in itself a task.

[]{#CH01.htm#pgfId-1013597 .calibre9}Because you don't need to recompile
your site after changes, the developer can make changes or experiment
and see results quickly. The same is the case with data entry. A
significant burden with static site builders and slow build times is
that committing data is something that the content writer needs to plan
for because getting up and running itself can take time. The flexibility
of WordPress and the performance of the Jamstack are not either/or with
a framework like Hugo.

[]{#CH01.htm#pgfId-1013603 .calibre9}With performance at Hugo's core and
all the primitives exposed, as a developer you start to rethink your
website-building strategy. Does this code need to go into JavaScript
that has to run on every one of the billion customer machines that visit
this page, or can we write this so it runs once and saves the results as
SVGs or precomputed HTML so that our customers don't have to re-execute?
These minor tweaks while building go a long way in improving the
website's performance. []{#CH01.htm#marker-1013605
.calibre9}[]{#CH01.htm#marker-1013608
.calibre9}[]{#CH01.htm#marker-1013610 .calibre9}

::: fm-sidebar-block
[]{#CH01.htm#pgfId-1032296 .calibre9}Exercise 1.4

[]{#CH01.htm#pgfId-1032297}Hugo is built using which programming
language?
:::

## []{#CH01.htm#pgfId-1013626}1.9 What can we build with Hugo? {#CH01.htm#sigil_toc_id_43 .fm-head}

[]{#CH01.htm#pgfId-1013643 .calibre9}[]{#CH01.htm#marker-1013637
.calibre9}[]{#CH01.htm#marker-1013639 .calibre9}The Jamstack is a
versatile concept, and we can apply it to a variety of problems. Hugo
has been a poster child for the success of the Jamstack with its ability
to handle scale. Hugo shines when information flows from the server to
the client, then the users can focus on consumption rather than
creation. This approach fits the traditional definition of publishing,
where content creators provide content via a medium like the web to
consumers. The following sections introduce us to the things that Hugo
specializes in.

### []{#CH01.htm#pgfId-1013648}1.9.1 Personal websites and blogs {#CH01.htm#sigil_toc_id_44 .fm-head1}

[]{#CH01.htm#pgfId-1013669 .calibre9}[]{#CH01.htm#marker-1013659
.calibre9}[]{#CH01.htm#marker-1013661
.calibre9}[]{#CH01.htm#marker-1013663
.calibre9}[]{#CH01.htm#marker-1013665 .calibre9}Hugo is well suited for
getting up and running with a personal website. Big goals for personal
websites are low maintenance, low costs, and the flexibility to showcase
your tastes. Throughout this book, you will see how we can build
something with little supervision, almost free hosting, and enough
flexibility to customize as much as you desire. You get outstanding
performance, the ability to update when and where you want, full SEO
support, and a quick start.

[]{#CH01.htm#pgfId-1013674 .calibre9}You can pick up any publicly
available Hugo theme to get started and be up and running with a decent
website in minutes. (You will be surprised at how many features are
available without any customization.) Once there, it is straightforward
to fork the theme and start customizing it to leave your unique
impression on the internet. []{#CH01.htm#marker-1013676
.calibre9}[]{#CH01.htm#marker-1013679
.calibre9}[]{#CH01.htm#marker-1013681
.calibre9}[]{#CH01.htm#marker-1013683 .calibre9}

### []{#CH01.htm#pgfId-1013689}1.9.2 Nontechnology business websites {#CH01.htm#sigil_toc_id_45 .fm-head1}

[]{#CH01.htm#pgfId-1013708 .calibre9}[]{#CH01.htm#marker-1013700
.calibre9}[]{#CH01.htm#marker-1013702
.calibre9}[]{#CH01.htm#marker-1013704 .calibre9}Hugo scales to teams
updating content in parallel without any problem. Businesses whose core
competencies do not include building websites need something easy to
maintain, with low cost, and outstanding performance. They also want
flexibility and control. Hugo ticks all of these boxes. It is well
thought out and easy to understand for any vendor team. Hugo provides
few places where a developer could write harmful code that would slow
down the website. The entire mechanism is flexible enough to add the one
custom page that the business needs immediately without going through
and ripping apart the whole website.

[]{#CH01.htm#pgfId-1013713 .calibre9}With the JavaScript and API layer
of the Jamstack, you can extend Hugo websites to provide features
reserved for dynamic websites updating on the fly. You will see in this
book how we can build low-cost, low-maintenance features like shopping
carts while statically managing the rest of the website.
[]{#CH01.htm#marker-1013715 .calibre9}[]{#CH01.htm#marker-1013718
.calibre9}[]{#CH01.htm#marker-1013720 .calibre9}

### []{#CH01.htm#pgfId-1013726}1.9.3 Documentation websites {#CH01.htm#sigil_toc_id_46 .fm-head1}

[]{#CH01.htm#pgfId-1013745 .calibre9}[]{#CH01.htm#marker-1013737
.calibre9}[]{#CH01.htm#marker-1013739
.calibre9}[]{#CH01.htm#marker-1013741 .calibre9}Hugo has excellent
support for reading structured data from a CSV or JSON files and then
creating a website from those, and you can still apply custom themes! It
has built-in support for syntax highlighting and can scale to a large
number of pages quickly. These make it well suited to write custom
websites that can read from the API docs and prepare a neatly formatted
version from the specification. []{#CH01.htm#marker-1013746
.calibre9}[]{#CH01.htm#marker-1013749
.calibre9}[]{#CH01.htm#marker-1013751 .calibre9}

### []{#CH01.htm#pgfId-1013757}1.9.4 Hybrid Jamstack-based websites {#CH01.htm#sigil_toc_id_47 .fm-head1}

[]{#CH01.htm#pgfId-1013776 .calibre9}[]{#CH01.htm#marker-1013768
.calibre9}[]{#CH01.htm#marker-1013770
.calibre9}[]{#CH01.htm#marker-1013772 .calibre9}All websites have pages
for displaying content. These pages include, for example, a privacy
policy, a generic About Us page, a blog, a product listing page, and a
newsroom where the company releases press statements. Hugo and the
Jamstack can help keep that content running at a low cost with high
availability and good performance. The server technology-based pages can
be delivered separately or can be built-in JavaScript, communicating
with the servers using APIs exposed by them. []{#CH01.htm#marker-1013777
.calibre9}[]{#CH01.htm#marker-1013780
.calibre9}[]{#CH01.htm#marker-1013782
.calibre9}[]{#CH01.htm#marker-1013784
.calibre9}[]{#CH01.htm#marker-1013786 .calibre9}

::: fm-sidebar-block
[]{#CH01.htm#pgfId-1032278 .calibre9}Exercise 1.5

[]{#CH01.htm#pgfId-1032279}True or False: Hugo-based websites require
the full setup to be present locally to write content.
:::

## []{#CH01.htm#pgfId-1013802}1.10 Cases that don't map to Hugo {#CH01.htm#sigil_toc_id_48 .fm-head}

[]{#CH01.htm#pgfId-1013819 .calibre9}[]{#CH01.htm#marker-1013813
.calibre9}[]{#CH01.htm#marker-1013815 .calibre9}Like all tools, Hugo has
its use cases. Apart from all the Jamstack limitations that apply to any
of the Jamstack frameworks, we need to understand that Hugo's focus is
on the markup portion of the Jamstack only. While Hugo provides the
fastest available JavaScript bundler and has good support for the npm
ecosystem, it takes a hands-off approach to the JavaScript and the API
layers of the Jamstack. If you want to build a tool which requires a lot
of JavaScript to intermingle with the static pages, or you want to have
an API that shares code with the website template, Hugo's approach of
having these pieces independent falls short.

[]{#CH01.htm#pgfId-1013824 .calibre9}Hugo might not be optimal when we
need some functionality that Hugo does not have, and we cannot achieve
that with an API. Hugo keeps its core inaccessible to the templates and
modules to maintain its flexibility and to keep its performance intact.
Hugo is likely not the right choice for developers wanting to build a
customized static site builder with lots of plugins catering to an
uncommon use case. For example, if we need to interact with the SOAP or
FTP protocols at compile time, that may not be possible with Hugo (as of
v0.91.2). []{#CH01.htm#marker-1013826
.calibre9}[]{#CH01.htm#marker-1013829 .calibre9}

## []{#CH01.htm#pgfId-1013835}1.11 How to be successful with Hugo and this book {#CH01.htm#sigil_toc_id_49 .fm-head}

[]{#CH01.htm#pgfId-1013852 .calibre9}[]{#CH01.htm#marker-1013846
.calibre9}[]{#CH01.htm#marker-1013848 .calibre9}In this book, we will
build the website for Acme Corporation, a leading manufacturer of
digital shapes. The website will have regular company pages, a blog with
support for dynamic comments and searches, a JavaScript-based shape
editor, and a storefront to purchase your shapes delivered over email.
The final version of the website that we will build in this book is
hosted at
[[https://chapter-13-09.hugoinaction.com/](https://chapter-13-09.hugoinaction.com/){.url}]{.fm-hyperlink}.

[]{#CH01.htm#pgfId-1013858 .calibre9}We will start with the markup layer
of the Jamstack, which Hugo excels in. We will talk about creating and
organizing markup-based documents in a Hugo website, how to use those to
render web pages, creating themes that share the web templates, and how
to use modules to create reusable content and template code. In the
second part of the book, we will delve into Hugo's support for the
JavaScript and API portions of the Jamstack. We will see how to call
APIs at compile time and run time, build simple Jamstack-based APIs, and
use JavaScript to enhance the user experience. We will also compile and
bundle a complex JavaScript application with a Hugo-based website.

[]{#CH01.htm#pgfId-1013864 .calibre9}To succeed with this book, you need
a machine with a modern operating system, access to the internet, a web
browser, and an understanding of tools and programming languages
familiar to a web developer. These include HTML, CSS, JavaScript, Git,
GitHub, any template engine such as Mustache, Jade, or Embedded Ruby
(ERB), and optionally npm. The code samples are all available on GitHub
and hosted at
[[https://hugoinaction.com](https://hugoinaction.com){.url}]{.fm-hyperlink}.
We recommended using the diff between the various files to compare the
changes done locally to those present in the code samples.
[]{#CH01.htm#marker-1013867 .calibre9}[]{#CH01.htm#marker-1013870
.calibre9}

::: fm-sidebar-block
[]{#CH01.htm#pgfId-1032260 .calibre9}Exercise 1.6

[]{#CH01.htm#pgfId-1032261}Hugo works on the
[\_\_\_\_\_\_\_]{.fm-code-in-text1} layer of the Jamstack.
:::

## []{#CH01.htm#pgfId-1013895}Summary {#CH01.htm#sigil_toc_id_50 .fm-head}

-   []{#CH01.htm#pgfId-1013905 .calibre9}Jamstack is an approach to web
    development where most content is stored along with the theme as
    files and compiled into the website during deployment.

-   []{#CH01.htm#pgfId-1013919 .calibre9}The static content in Jamstack
    is written in a markup language, which compiles to HTML. The dynamic
    pieces are available in the form of APIs accessed via JavaScript.

-   []{#CH01.htm#pgfId-1013929 .calibre9}The Jamstack architecture
    provides massive savings in cost, operations, and maintenance. We
    also get a fast website.

-   []{#CH01.htm#pgfId-1013939 .calibre9}Hugo is a framework to help
    build these so-called static websites, which provide outstanding
    build performance, and Hugo is available as a single binary.

-   []{#CH01.htm#pgfId-1013949 .calibre9}Hugo meets the promise of low
    ongoing maintenance and a great developer experience, and it scales
    to a large team.

-   []{#CH01.htm#pgfId-1013959 .calibre9}Hugo especially shines at
    places where the information flow is from the server to the client,
    such as personal or company websites, news posts, blogs,
    documentation, and so forth.

-   []{#CH01.htm#pgfId-1013969 .calibre9}For places where the
    information flow is from the client to the server or personalized
    based on the user, Hugo follows the Jamstack approach. The
    JavaScript layer is responsible for communicating with the servers
    over an API.

[]{#CH02.htm}

# []{#CH02.htm#pgfId-1020147}2 Live in 30 minutes: You now have a website {#CH02.htm#heading_id_2 .tochead}

[]{#CH02.htm#pgfId-1022409}This chapter covers

-   []{#CH02.htm#pgfId-1022439 .calibre9}Running the Hugo command line
-   []{#CH02.htm#pgfId-1022440 .calibre9}Setting up a Hugo website with
    themes and content
-   []{#CH02.htm#pgfId-1022441 .calibre9}Outlining the structure of a
    Hugo-based website
-   []{#CH02.htm#pgfId-1022442 .calibre9}Setting up a continuous
    deployment pipeline
-   []{#CH02.htm#pgfId-1022430 .calibre9}Measuring performance and
    analyzing website maintainability

[]{#CH02.htm#pgfId-1011814 .calibre9}Hugo is quick and easy to get
started with. You can download Hugo and get going using just a basic
text editor and a web browser. This chapter navigates through the entire
length of Jamstack's flow as figure 2.1 illustrates. We will create a
website for a company named Acme Corporation. Acme Corporation is a
leading manufacturer of shapes like lines, circles, squares, and
triangles in digital form. We will use the Hugo command line to
bootstrap the website (section 2.1) with a prebuilt theme (section 2.2)
and some ready-to-use content (section 2.3). We will also host the
website on the internet (section 2.4) and analyze the decisions made in
this chapter for performance and maintainability (section 2.5). Note
that we will enhance this website throughout the book.

![CH02_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F01_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1035353}Figure 2.1 This chapter runs through the
entire flow of the Jamstack---from the developer to the published
website.

[]{#CH02.htm#pgfId-1011830 .calibre9}Appendix A provides the information
to get up and running with Hugo. You can also use the official website
at [[https://gohugo.io/](https://gohugo.io/){.url}]{.fm-hyperlink} to
download Hugo as well as to refer to its documentation. Hugo is
available on all major platforms. For this book, you need Hugo with a
version greater than or equal to 0.91.2.

## []{#CH02.htm#pgfId-1011857}[]{#CH02.htm#marker-1023746}2.1 Your first Hugo website {#CH02.htm#sigil_toc_id_51 .fm-head}

[]{#CH02.htm#pgfId-1011867 .calibre9}[]{#CH02.htm#marker-1011868
.calibre9}Hugo offers an extensive command line that exposes all of its
functionality, including bootstrapping a new website. This section
introduces you to Hugo's command line.

### []{#CH02.htm#pgfId-1011876}[]{#CH02.htm#marker-1022969}[]{#CH02.htm#marker-1022968}2.1.1 The Hugo command line {#CH02.htm#sigil_toc_id_52 .fm-head1}

[]{#CH02.htm#pgfId-1011893 .calibre9}[]{#CH02.htm#marker-1011887
.calibre9}[]{#CH02.htm#marker-1011889 .calibre9}Hugo is a command-line
tool that's well designed and provides all of Hugo's functionality. It
helps by migrating data, creating placeholders, and analyzing
performance, along with the core task of building your website. The Hugo
command line has two distinct parts:

-   []{#CH02.htm#pgfId-1011976 .calibre9}*Commands*---Determine
    []{#CH02.htm#marker-1011915 .calibre9}tasks that you want Hugo to
    do. You can supply commands and subcommands by using
    [hugo]{.fm-code-in-text}
    [\[command\]]{.fm-code-in-text}[]{#CH02.htm#marker-1025893} on the
    command line. Hugo's commands are hierarchical. A plain
    [hugo]{.fm-code-in-text} call runs the default command to build the
    site. Issue [hugo]{.fm-code-in-text} [new]{.fm-code-in-text} to
    create new things. The default for [hugo]{.fm-code-in-text}
    [new]{.fm-code-in-text} creates new content pages. You can use
    [hugo]{.fm-code-in-text} [new]{.fm-code-in-text}
    [site]{.fm-code-in-text} to build a site skeleton, and
    [hugo]{.fm-code-in-text} [new]{.fm-code-in-text}
    [theme]{.fm-code-in-text} to generate a theme.

-   []{#CH02.htm#pgfId-1012021 .calibre9}*Flags (also called
    command-line parameters)*---Specify []{#CH02.htm#marker-1011998
    .calibre9}[]{#CH02.htm#marker-1012001 .calibre9}options that modify
    the result of the command by providing a different configuration.
    Flags are specific to the command, and each command can have
    independent flags. For example, [\--format]{.fm-code-in-text}
    [yaml]{.fm-code-in-text} in the [new site]{.fm-code-in-text} command
    changes []{#CH02.htm#marker-1012026 .calibre9}the metadata format
    from the default TOML to YAML.

[]{#CH02.htm#pgfId-1012157 .calibre9}An intuitive way to learn the Hugo
command line is to use []{#CH02.htm#marker-1012038 .calibre9}the
[\--help]{.fm-code-in-text} flag. Help with Hugo is hierarchical:
[hugo]{.fm-code-in-text} [\--help]{.fm-code-in-text} provides help for
the [hugo]{.fm-code-in-text} command and lists [hugo
new]{.fm-code-in-text} as a subcommand; [hugo]{.fm-code-in-text}
[new]{.fm-code-in-text} [\--help]{.fm-code-in-text} provides
documentation for []{#CH02.htm#marker-1012094 .calibre9}the
[new]{.fm-code-in-text} command and []{#CH02.htm#marker-1012110
.calibre9}mentions [site]{.fm-code-in-text} as a subcommand. Hugo's help
also shows all the flags available for each command. You can also
generate the Hugo command-line documentation in the man pages format (as
used by []{#CH02.htm#marker-1012126 .calibre9}the
[man]{.fm-code-in-text} command in UNIX-based operating systems). For
this, use [hugo]{.fm-code-in-text} [gen]{.fm-code-in-text}
[man]{.fm-code-in-text} or use [hugo]{.fm-code-in-text}
[gen]{.fm-code-in-text} [doc]{.fm-code-in-text} for Markdown files.

[]{#CH02.htm#pgfId-1012166 .calibre9}Let's see how all this fits
together by creating our first website. To create a new website in Hugo,
we'll use the command in the following listing.

[]{#CH02.htm#pgfId-1012223}Listing 2.1 Hugo command to create a new
website

``` programlisting
hugo new site acme-corporation --format yaml
```

[]{#CH02.htm#pgfId-1012301 .calibre9}This command creates the Hugo
skeleton folder structure with YAML as the metadata language in a
subfolder called acme-corporation in the current folder. The various
parts of this command are labeled in figure 2.2. Note that we'll use
YAML ([[https://yaml.org/](https://yaml.org/){.url}]{.fm-hyperlink})
instead of the default TOML
([[https://toml.io](https://toml.io){.url}]{.fm-hyperlink}) metadata
language for this book. YAML is more prevalent in the general
programming community, less verbose than TOML, and GitHub has better
support for it. It is an easier language to get started with and a
better choice for users new to the entire Hugo ecosystem. We will
discuss YAML as a metadata language for Hugo in chapter 3. Appendix B
discusses TOML as the metadata language option. Note that the official
Hugo documentation provides metadata in all supported languages.

![CH02_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F02_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1035394}Figure 2.2 The
[hugo]{.fm-code-in-figurecaption} command provides access to
[]{#CH02.htm#marker-1035395}the Hugo command line. We can use all of
Hugo's functionality via this command line. You can use it to compile
Hugo websites, run the development server, measure build performance,
and access modules.

::: fm-sidebar-block
[]{#CH02.htm#pgfId-1035425 .calibre9}Exercise 2.1

[]{#CH02.htm#pgfId-1035426}Which of the following allow you to get help
on Hugo?

1.  []{#CH02.htm#pgfId-1035427}[\--help]{.fm-code-in-text1} flag

2.  []{#CH02.htm#pgfId-1035428}[man]{.fm-code-in-text1} command

3.  []{#CH02.htm#pgfId-1035429}Hugo website

4.  []{#CH02.htm#pgfId-1035432}All of the
    above[]{#CH02.htm#marker-1035430}[]{#CH02.htm#marker-1035431}
:::

### []{#CH02.htm#pgfId-1012424}[]{#CH02.htm#marker-1023365}[]{#CH02.htm#marker-1023364}2.1.2 Adding to source control {#CH02.htm#sigil_toc_id_53 .fm-head1}

[]{#CH02.htm#pgfId-1012453 .calibre9}[]{#CH02.htm#marker-1012435
.calibre9}[]{#CH02.htm#marker-1012437 .calibre9}The first step in any
project is to commit the changes to a version control repository. The
command-line interface does not have native undo/redo support. If you
accidentally delete a file, it does not go to the recycle bin or to the
trash folders. Any running script has the potential to cause data loss,
including []{#CH02.htm#marker-1012442 .calibre9}the
[hugo]{.fm-code-in-text} command. There is no turning back unless you
have versioned the source code.

[]{#CH02.htm#pgfId-1012462 .calibre9}Version control systems allow for
recovering deleted files and reverting to older versions. The version
control system used in this book is Git. Git is the most popular system,
and GitHub has tight integration for it. This also includes GitHub
Pages, the most popular host for static websites on the internet. It is
a good idea to commit each checkpoint to version control. You can use
the [git]{.fm-code-in-text} command or []{#CH02.htm#marker-1025925
.calibre9}a GUI client like SourceTree or Fork to perform these tasks.
On the command line, you can perform this using multiple Git commands as
the following listing shows. To help with version control, take note of
the code checkpoints where you can pause to check your code.

[]{#CH02.htm#pgfId-1012552}Listing 2.2 Git commands to create a new
repository

``` programlisting
cd acme-corporation 
git init .                                 ❶
  
git add *                                  ❷
  
git commit -m "Create website skeleton"    ❸
```

[]{#CH02.htm#pgfId-1034561}[❶]{.fm-combinumeral} Creates an empty Git
repository

[]{#CH02.htm#pgfId-1034582}[❷]{.fm-combinumeral} Adds the files that we
just created []{#CH02.htm#marker-1034587}using the hugo command

[]{#CH02.htm#pgfId-1034600 .calibre9}[❸]{.fm-combinumeral} Checks in the
files to version control with a commit message

[]{#CH02.htm#pgfId-1012777 .calibre9}Even though we created a website
skeleton, that does not mean we have a working website. Most of the
skeleton folders created by []{#CH02.htm#marker-1012766 .calibre9}the
[hugo]{.fm-code-in-text} command are empty. At the bare minimum, we need
to provide some content and a theme to render it on our website.

[]{#CH02.htm#pgfId-1030192}[Code checkpoint]{.fm-callout-head}
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-01](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-01){.url}]{.fm-hyperlink}.

[]{#CH02.htm#pgfId-1012887}[Note]{.fm-callout-head} Extra files
(Readme.md, License.md, and .gitignore) were added to the repository on
the server for better GitHub support.

::: fm-sidebar-block
[]{#CH02.htm#pgfId-1035451 .calibre9}Migrating to Hugo

[]{#CH02.htm#pgfId-1035452}Hugo supports importing content from Jekyll
and automatically converts content from that format to a format that
Hugo understands. You can use the [hugo]{.fm-code-in-text1} [import
jekyll]{.fm-code-in-text1} [\<source]{.fm-code-in-text1}
[jekyll]{.fm-code-in-text1} [folder\>]{.fm-code-in-text1}
[\<target]{.fm-code-in-text1} [hugo]{.fm-code-in-text1}
[folder\>]{.fm-code-in-text1} command to import the
[folder]{.fm-code-in-text1}-equivalent content from Jekyll into a Hugo
website. This command does not provide synchronization, but we can use
it for a one-time import.
[]{#CH02.htm#marker-1035453}[]{#CH02.htm#marker-1035454}
:::

### []{#CH02.htm#pgfId-1012933}[]{#CH02.htm#marker-1023747}[]{#CH02.htm#marker-1023745}2.1.3 Structure of the Hugo source folder {#CH02.htm#sigil_toc_id_54 .fm-head1}

[]{#CH02.htm#pgfId-1012956 .calibre9}[]{#CH02.htm#marker-1012944
.calibre9}[]{#CH02.htm#marker-1012946 .calibre9}Before adding a theme or
some content, let's look at what makes up a Hugo website. A Hugo source
folder is more than templates and content. The [hugo]{.fm-code-in-text}
[new]{.fm-code-in-text} command generates []{#CH02.htm#marker-1012961
.calibre9}six folders, and we will create more as we use Hugo's
features. The critical folders in our website, as figure 2.3 shows,
include the following:

-   []{#CH02.htm#pgfId-1012971 .calibre9}*archetypes*---Contains the
    templates for the content files. Hugo tries to minimize the copy and
    paste work needed to create content. We can create templates for
    Markdown files or folders in this folder, and Hugo uses them to
    create a basic content file. We will get to archetypes in chapter 5.

-   []{#CH02.htm#pgfId-1013010 .calibre9}*content*---Contains all the
    content that traditionally goes into the database. We can organize
    the content into files and folders as we desire. By default, Hugo
    generates the website output directly, based on this folder's
    structure, although we can override that using the metadata in each
    file (called *front matter*, which we will discuss in chapter 3). We
    will work with the content folder throughout the book.

-   []{#CH02.htm#pgfId-1013019 .calibre9}*data*---Stores structured
    content in the form of YAML, TOML, CSV, or JSON files, which are
    made available as global variables throughout the website. A
    traditional database houses more than just web page content. There
    can be tables associated with structured data, which have no place
    in the content folder, so this folder comes in handy when we
    generate content from outside of Hugo and pass that information in
    as a JSON or a CSV file for Hugo to consume. We will read from the
    data folder in chapter 5.

-   []{#CH02.htm#pgfId-1013036 .calibre9}*layouts*---Overrides parts of
    the theme. Hugo gives us the flexibility to mix and match pages from
    themes and to write our own custom pages. In this folder, all
    customization of the theme occurs. We can use this directory to
    store these overridden theme layouts. The line between a theme and
    layout is blurred, and Hugo gives us total flexibility to create a
    theme slowly by overriding pages one by one. We will use the layouts
    folder to update the home page in this chapter and go into layouts
    in detail in chapters 6 and 7.

-   []{#CH02.htm#pgfId-1013053 .calibre9}*themes*---Contains the code
    that we use to make the content in the content folder presentable.
    We can use the Go template language to write themes. We will add
    themes in this chapter and create our own in chapter 7.

-   []{#CH02.htm#pgfId-1013070 .calibre9}*config*---Houses the website's
    configuration. This directory contains the metadata shared across
    the website, including the theme's name and any parameters that need
    to be passed to Hugo or to the theme to render content. By default,
    Hugo creates a single config.yaml file. Hugo supports splitting this
    configuration file into multiple files and having different
    environments for testing and production. That turns the
    configuration into a folder. We will go into the configuration in
    detail in chapter 4.

-   []{#CH02.htm#pgfId-1013087 .calibre9}*static*---Stores static
    content like fonts or PDF files. Hugo copies this content as is to
    the output directory. This folder is somewhat equivalent to the
    Apache/Nginx web server root folder, where you can place any HTML
    file for rendering. It is advisable to put as much content as
    possible in the content, data, themes, and layouts folders to have
    programmatic access to it and to benefit from Hugo's render
    pipeline. In the static folder, we can store binaries files like
    .pdf, .woff (for web fonts), and .zip files for downloadable content
    that does not belong anywhere else. We will put some files in the
    static folder in this chapter.

![CH02_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F03_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1035473}Figure 2.3 The website source code and
content in Hugo lies in the source folder. The [hugo
new]{.fm-code-in-figurecaption} command creates a basic set of folders,
which designates the various parts of a Hugo website: the archetypes
folder (for the content templates), the content folder (for the textual
content), the data folder (for structured content, and key-value pairs),
the layouts and themes folders (for templates and individual page
designs), and the static folder (for additional content that needs to be
hosted but does not fit into any other category). Other folders and
files that show up during usage include assets (for unprocessed images
and JS/CSS files), config (for settings and metadata, initially
generated as a single file), resources (for caching processed assets),
public (to hold the output), vendor and go.sum/mod (for Hugo Modules),
package\*.json and node_modules (for JavaScript), .github/netlify.toml
(for continuous integration), and api (for custom first-party APIs).

[]{#CH02.htm#pgfId-1013104 .calibre9}Of all these folders, the content
folder is where we usually spend the most time adding content to the
website. The themes folder contains the theme that the developer can
manage outside the website. In contrast, we change the other folders
(except for the data folder for the data-driven web pages) infrequently,
only when something significant needs to be added.

::: fm-sidebar-block
[]{#CH02.htm#pgfId-1035513 .calibre9}Exercise 2.2

[]{#CH02.htm#pgfId-1035514}Which of the following folders contains the
text displayed on a web page?

1.  []{#CH02.htm#pgfId-1035515}markup

2.  []{#CH02.htm#pgfId-1035516}markdown

3.  []{#CH02.htm#pgfId-1035517}content

4.  []{#CH02.htm#pgfId-1035518}data

5.  []{#CH02.htm#pgfId-1035519}text
:::

[]{#CH02.htm#pgfId-1013178 .calibre9}When building your Hugo-based
website, here are some other files and folders that you will encounter:

-   []{#CH02.htm#pgfId-1013184 .calibre9}*assets folder*---Places
    images, JavaScript, and CSS files as unprocessed source code to be
    consumed globally from the website. This folder allows us to process
    these files during compilation. Hugo can resize images, bundle and
    minify JavaScript files, and convert SCSS to CSS via its asset
    pipeline (Hugo Pipes). We will learn about image manipulation and
    asset bundling in chapter 6 and work with JavaScript assets in
    chapter 10.

-   []{#CH02.htm#pgfId-1013223 .calibre9}*public folder*---Hugo's
    default output directory, where the [hugo]{.fm-code-in-text} command
    generates the HTML output to be deployed and cached at the CDN.

-   []{#CH02.htm#pgfId-1013232 .calibre9}*resources folder*---When
    processing data, Hugo caches the results of heavy operations in this
    folder. We should put this folder into our version control and reuse
    its data across builds. This folder is one of the critical
    ingredients for getting outstanding performance with Hugo.
    Processing images is a CPU-intensive operation and takes time. Most
    assets don't change across builds, and caching the processed images
    for as long as they do not change provides Hugo with a significant
    performance boost.

-   []{#CH02.htm#pgfId-1013255 .calibre9}*go.mod and go.sum
    files*---Hugo Modules uses these files to synchronize project
    dependencies. We rarely look into these files, but we do need to put
    these files in version control. We will introduce these files in
    chapter 8.

-   []{#CH02.htm#pgfId-1013272 .calibre9}*vendor folder*---Stores
    third-party dependencies that we can include via Hugo Modules. We
    will create this folder while working with Hugo Modules in chapter
    8.

-   []{#CH02.htm#pgfId-1013289 .calibre9}*node\_\_modules, package.json,
    package-lock.json, and package.hugo.json files*---Associates and
    integrates Hugo with the JavaScript ecosystem. We will discuss using
    JavaScript with Hugo in detail in chapter 10.

-   []{#CH02.htm#pgfId-1013306 .calibre9}*.github folder and
    netlify.toml files*---Associates Hugo with the continuous
    integration services GitHub and Netlify. We will use these services
    throughout the book.

-   []{#CH02.htm#pgfId-1013323 .calibre9}*api folder*---Although not
    standard, we'll create this folder to house custom APIs in chapter
    11.

::: fm-sidebar-block
[]{#CH02.htm#pgfId-1035536 .calibre9}Exercise 2.3

[]{#CH02.htm#pgfId-1035537}Match the file type to the most likely folder
to place the file.

[]{#CH02.htm#pgfId-1035565}[]{#CH02.htm#marker-1035562}[]{#CH02.htm#marker-1035563}[]{#CH02.htm#marker-1035564} 

1\. YAML             a. assets

2\. Markdown     b. static

3\. PDF                c. content

4\. HTML             d. config

5\. CSS                e. themes
:::

## []{#CH02.htm#pgfId-1013383}[]{#CH02.htm#marker-1026952}2.2 Adding a theme {#CH02.htm#sigil_toc_id_55 .fm-head}

[]{#CH02.htm#pgfId-1013565 .calibre9}[]{#CH02.htm#marker-1013553
.calibre9}[]{#CH02.htm#marker-1013555 .calibre9}Coming back to Acme
Corporation's sample website, before that website can see the light of
the day, it needs a theme and some content. A *theme* in
[]{#CH02.htm#marker-1013570 .calibre9}Hugo represents all the logic that
converts markup documents into presentable web pages. It consists of
template code, JavaScript, and CSS assets and images used for common
elements like icons and backgrounds. Creating a Hugo theme is
time-consuming, and it is a good idea to try out some prebuilt themes to
begin with.

[]{#CH02.htm#pgfId-1013590}[Note]{.fm-callout-head} If you plan to use a
theme created by someone else, you may not need to learn the Go template
language to use Hugo.

[]{#CH02.htm#pgfId-1013596 .calibre9}You can create a website by
learning a markup language like Markdown and a metadata language like
YAML. You can always modify the theme to customize the UI, but if you
want to get a website up and focus on the content, you only need to know
a content markup and a metadata language. For Acme Corporation, we will
start with a prebuilt theme that's ready to use. There are multiple ways
to get a theme:

-   []{#CH02.htm#pgfId-1013602 .calibre9}*Use Hugo Modules to integrate
    the theme.* Hugo Modules is Hugo's package management system that
    allows themes to have dependencies. Hugo can automatically fetch
    dependencies required by a theme when building your site using Hugo
    Modules. Themes with dependencies will not work with other
    integration methods. Hugo Modules have setup requirements that we
    will discuss when introducing it in chapter 8.

-   []{#CH02.htm#pgfId-1013623 .calibre9}*Use Git Submodules to
    reference the theme in the themes folder.* The Git version
    management system can set this up for you. This allows one Git
    repository to include another repository as a module within it. The
    dependencies can be linked to another server location and built
    independently. While the submodule feature is a part of Git and
    needs no separate installation, it still needs to be set up.

-   []{#CH02.htm#pgfId-1013640 .calibre9}This feature is less potent
    than Hugo Modules. Theme authors who have not updated their themes
    to support Hugo Modules mention Git Modules as the integration
    method for their theme. However, over time, the use of Git
    Submodules will diminish in the Hugo world, and we do not recommend
    using it in newer themes and websites.

-   []{#CH02.htm#pgfId-1013646 .calibre9}*Download and copy the theme to
    the themes folder.* The download-and-copy approach is the simplest
    of techniques. Because the theme code is available locally, we can
    easily read it to understand what the theme is doing, modify it, and
    view our website's updates. When developing a new theme, this
    approach allows for making changes quickly and saves us from the
    overhead of managing different repositories. To simplify getting
    started, we will use the download-and-copy approach for the book's
    first seven chapters.

### []{#CH02.htm#pgfId-1013663}2.2.1 Adding a theme to the website {#CH02.htm#sigil_toc_id_56 .fm-head1}

[]{#CH02.htm#pgfId-1013680 .calibre9}[]{#CH02.htm#marker-1026117
.calibre9}[]{#CH02.htm#marker-1026118 .calibre9}We can find themes on
the Hugo website at
[[https://themes.gohugo.io/](https://themes.gohugo.io/){.url}]{.fm-hyperlink}.
While most themes work with the download-and-copy approach, some may
have dependencies for which Hugo Modules are necessary. We will use the
Eclectic theme, which has no such requirements. A copy of the Eclectic
theme is provided in the code samples accompanying this book
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/01](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/01){.url}]{.fm-hyperlink}).
It is also available at
[[https://github.com/hugoinaction/Eclectic](https://github.com/hugoinaction/Eclectic){.url}]{.fm-hyperlink}.

[]{#CH02.htm#pgfId-1013719 .calibre9}We need to download and paste the
Eclectic folder into the themes folder for our website for it to be made
available. The files are present in the proper subfolder so that you can
place them in the root folder of the website. Each listing comes with
the path to the file and the filename where the changes need to be made.
For loading Eclectic as the theme for our website, we need to specify it
in the website configuration file using []{#CH02.htm#marker-1013708
.calibre9}the [theme]{.fm-code-in-text} key. Listing 2.3 tells Hugo to
look for a folder named Eclectic in the themes folder and to load the
theme from that folder.

[]{#CH02.htm#pgfId-1013738}[Note]{.fm-callout-head} In the chapter
resources throughout the book, the files are provided in the proper
relative paths from the website root and need to be placed in the exact
same relative location for your website.

[]{#CH02.htm#pgfId-1013795}Listing 2.3 Updating the theme in the config
file (config.yaml)

``` programlisting
...                ❶
theme: Eclectic
```

[]{#CH02.htm#pgfId-1034493 .calibre9}[❶]{.fm-combinumeral} Existing data
that's generated by the hugo new command.

[]{#CH02.htm#pgfId-1030314}[Code checkpoint]{.fm-callout-head}
[[https://chapter-02-02.hugoinaction.com](https://chapter-02-02.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-02](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-02){.url}]{.fm-hyperlink}.

[]{#CH02.htm#pgfId-1013972}[Note]{.fm-callout-head} You can compare
various GitHub branches by navigating to
[[https://github.com/hugoinaction/hugoinaction/compare/chapter-02-01..chapter-02-02](https://github.com/hugoinaction/hugoinaction/compare/chapter-02-01..chapter-02-02){.url}]{.fm-hyperlink},
where chapter-02-01 and chapter-02-02 are branch names. The Readme file
at
[[https://github.com/hugoinaction/hugoinaction](https://github.com/hugoinaction/hugoinaction){.url}]{.fm-hyperlink}
provides every code checkpoint (along with its respective section), a
link to the hosted version, and the diff from the previous code
checkpoint. It is a good idea to view the hosted version of a code
checkpoint before reading the corresponding section of this book.
[]{#CH02.htm#marker-1030303}[]{#CH02.htm#marker-1030304}

### []{#CH02.htm#pgfId-1013985}2.2.2 Running the dev server {#CH02.htm#sigil_toc_id_57 .fm-head1}

[]{#CH02.htm#pgfId-1014046 .calibre9}[]{#CH02.htm#marker-1013996
.calibre9}[]{#CH02.htm#marker-1013998
.calibre9}[]{#CH02.htm#marker-1014000 .calibre9}We can run our Acme
website in development mode using the []{#CH02.htm#marker-1014005
.calibre9}command [hugo server]{.fm-code-in-text} on the command line
(we could also use [hugo]{.fm-code-in-text} [serve]{.fm-code-in-text}).
This command creates a development server that provides local content.
The development server mode compiles the code automatically when
changed. It has near real-time updates to the website's locally-hosted
version (popularly called *live reload*) with content changes. The
default port (the location in the machine where we can find the website)
for Hugo is 1313, and unless something else is running at that port (in
which case, it can be changed by [\--port]{.fm-code-in-text}
[\<number\>]{.fm-code-in-text} flag), the development mode website
should be available there. You can open http://localhost:1313 in your
browser to find the default website as figure 2.4 shows. The default
home page is unique to most themes but needs configuration to be used.

![CH02_F04_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F04_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1035584}Figure 2.4 Default website with the Eclectic
theme. When we chose the Eclectic theme for a Hugo-based website, Hugo
created an index page based on that theme, which the website can render
even if we provide no content for the page. (It will look better when we
configure the page, but it still works without anything.) This page can
be used as a starting point to develop the rest of the website.
(Background image by theglassdesk on Pixabay.)

[]{#CH02.htm#pgfId-1014069 .calibre9}Listing 2.4 shows how we can run
the Hugo development server by using []{#CH02.htm#marker-1014058
.calibre9}the [hugo server]{.fm-code-in-text} command. This command
hosts the Hugo-based website locally at http://localhost:1313/ by
default. It automatically rebuilds the server as the content changes so
that we can view it in the web browser.

[]{#CH02.htm#pgfId-1014130}Listing 2.4 Running the Hugo development
server

``` programlisting
> hugo server 
Start building sites ...
  
WARN 2021/04/06 22:51:34 Page.Hugo is deprecated 
and will be removed in a future release. Use the 
global hugo function.                                    ❶
  
                   | EN
-------------------+-----
  Pages            |  7                                  ❷
  Paginator pages  |  0
  Non-page files   |  0
  Static files     |  3
  Processed images |  2
  Aliases          |  0
  Sitemaps         |  1
  Cleaned          |  0
  
Built in 78 ms                                           ❸
Watching for changes in acme-corporation/ 
➥ {archetypes,content,data,layouts,static,themes}       ❹
Watching for config changes in 
➥ acme-corporation/config.yaml                          ❹
Environment: "development"                               ❺
Serving pages from memory                                ❻
Running in Fast Render Mode. For full rebuilds on 
➥ change: hugo server --disableFastRender               ❼
Web Server is available at http://localhost:1313/ 
➥ (bind address 127.0.0.1)                              ❽
Press Ctrl+C to stop                                     ❽
```

[]{#CH02.htm#pgfId-1033821}[❶]{.fm-combinumeral} Displays warnings when
you use any deprecated feature. This output also shows how to fix this.
(This warning may not be present when you run this command.)

[]{#CH02.htm#pgfId-1033845}[❷]{.fm-combinumeral} Indicates the number of
pages Hugo has compiled

[]{#CH02.htm#pgfId-1033862}[❸]{.fm-combinumeral} Gives the compilation
time

[]{#CH02.htm#pgfId-1033879}[❹]{.fm-combinumeral} Places where changes
will cause Hugo to rebuild automatically

[]{#CH02.htm#pgfId-1033896}[❺]{.fm-combinumeral} Configuration
environment Hugo uses for this compilation

[]{#CH02.htm#pgfId-1033913}[❻]{.fm-combinumeral} The output is not
updated in the public folder.

[]{#CH02.htm#pgfId-1033930}[❼]{.fm-combinumeral} Updates web pages only
if there are changes and they are actively being requested by a web
browser

[]{#CH02.htm#pgfId-1033947 .calibre9}[❽]{.fm-combinumeral} Information
on the dev server and where we can preview the website

[]{#CH02.htm#pgfId-1014582 .calibre9}If we run [hugo]{.fm-code-in-text}
without additional arguments, Hugo compiles the entire website and
places the files in the public folder. We also
[]{#CH02.htm#marker-1014507 .calibre9}refer to development mode
[]{#CH02.htm#marker-1014513 .calibre9}as *server mode* or *live reload
mode*. It listens to changes in the filesystem and rebuilds the website
with the update. Hugo also supports fast rendering in development mode,
which involves building only the page requested on demand. Because Hugo
is blazingly fast, we don't notice the delay in rebuilding the web page.
We can disable fast rendering or live reload if it interferes with the
JavaScript state by using []{#CH02.htm#marker-1014539 .calibre9}the
[]{#CH02.htm#marker-1014545 .calibre9}command-line flags
[\--disableFastRender]{.fm-code-in-text} and
[\--disableLiveReload]{.fm-code-in-text}, respectively. Note that you
can run the website's production version in development mode using
[]{#CH02.htm#marker-1014571 .calibre9}the
[\--environment]{.fm-code-in-text} command-line flag. Chapter 4
discusses the difference between the various build environments.

[]{#CH02.htm#pgfId-1014604 .calibre9}There is no need to quit the Hugo
development server through most of this book as it supports live reload
so we can easily switch content. But you are free to abort it at any
time by pressing Ctrl-C and running []{#CH02.htm#marker-1014593
.calibre9}the [hugo server]{.fm-code-in-text} command again.

[]{#CH02.htm#pgfId-1014623}[Tip]{.fm-callout-head} The Hugo development
server optimizes for refreshes with content changes. Theme changes
affecting multiple files are error-prone when reloading. If you change a
theme's contents, it's possible that caching in the browser or
incrementally building with the development server will get in the way
of viewing updates. Restart the dev server, clear the browser cache, and
use [hugo]{.fm-code-in-text1} [server]{.fm-code-in-text1}
[\--noHTTPCache]{.fm-code-in-text1}
[\--disableFastRender]{.fm-code-in-text1} to help in these cases.

::: fm-sidebar-block
[]{#CH02.htm#pgfId-1035616 .calibre9}Exercise 2.4

[]{#CH02.htm#pgfId-1035617}The default port for Hugo is
[\_\_\_\_\_\_\_\_\_]{.fm-code-in-text1}.
:::

[]{#CH02.htm#pgfId-1014657 .calibre9}When you run the website in
development mode for the first time, the images provided by the theme
and its JavaScript and CSS files are optimized by Hugo and cached in the
resources folder we discussed earlier in this chapter. This process may
cause a slower build. It is OK to commit the resources folder to source
control to prevent Hugo from generating it again.

[]{#CH02.htm#pgfId-1014697}[Note]{.fm-callout-head} Most Hugo themes
need some configuration and content to be functional. You might get a
blank screen if you try replacing Eclectic with a different theme and
have not provided Hugo with the appropriate configuration.
[]{#CH02.htm#marker-1014699}[]{#CH02.htm#marker-1014702}[]{#CH02.htm#marker-1014704}[]{#CH02.htm#marker-1014706}[]{#CH02.htm#marker-1014708}

## []{#CH02.htm#pgfId-1014714}[]{#CH02.htm#marker-1016033}2.3 Adding content {#CH02.htm#sigil_toc_id_58 .fm-head}

[]{#CH02.htm#pgfId-1014731 .calibre9}[]{#CH02.htm#marker-1014725
.calibre9}[]{#CH02.htm#marker-1014727 .calibre9}We will convert the
empty page generated with the Eclectic theme into a fully functional
website. This conversion includes configuring the theme by providing it
with some settings and metadata, adding pages like the privacy policy
and terms of use, and overriding the theme's landing page with a custom
version.

[]{#CH02.htm#pgfId-1014746}[Note]{.fm-callout-head} Custom data for a
theme is not portable. You will have to look at the theme's
documentation to figure out the theme-specific configuration. If you are
still judging the theme as you develop the website, it is recommended to
focus first on the standard template-based content pages (like posts)
rather than the unique pages (like the landing page and Contact Us).

::: fm-sidebar-block
[]{#CH02.htm#pgfId-1035634 .calibre9}Exercise 2.5

[]{#CH02.htm#pgfId-1035635}The
[\_\_\_\_\_\_\_\_\_\_\_\_]{.fm-code-in-text1} command runs Hugo in
development mode.
:::

### []{#CH02.htm#pgfId-1014771}[]{#CH02.htm#marker-1016031}[]{#CH02.htm#marker-1016028}2.3.1 Configuration {#CH02.htm#sigil_toc_id_59 .fm-head1}

[]{#CH02.htm#pgfId-1014802 .calibre9}[]{#CH02.htm#marker-1014782
.calibre9}[]{#CH02.htm#marker-1014784
.calibre9}[]{#CH02.htm#marker-1014786 .calibre9}The fact that the
website ran so well with two lines of code is the magic of the
well-thought-out defaults in Hugo. We can do better by passing it the
right options for our website. The configuration file has two distinct
parts: the top-level configuration, which is common across themes, and
the []{#CH02.htm#marker-1014791 .calibre9}theme-specific
[params]{.fm-code-in-text} section, which differs across themes. Let's
add some data to the configuration file, config.yaml. This is needed to
be successful with the Eclectic template in Hugo. These changes provide
the information to fill up the menus, the footers, copyright notices,
and the title and author information, per the requirements of the
Eclectic theme for Acme Corporation.

[]{#CH02.htm#pgfId-1014811 .calibre9}The updated configuration file is
present in the chapter 2 resources folder that accompanies this book
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/02](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/02){.url}]{.fm-hyperlink}).
You do not need to understand the entire file yet. We will be working
with these settings in the following chapters, where they will become
clearer. Listing 2.5 shows the configuration file that we'll use for the
Acme Corporation website. A typical Hugo configuration file contains:

-   []{#CH02.htm#pgfId-1014835 .calibre9}Configuration options that are
    standard across all themes (such as the URL of the website, its
    name, and language)

-   []{#CH02.htm#pgfId-1014849 .calibre9}Options for specific Hugo
    features (like [menu]{.fm-code-in-text})

-   []{#CH02.htm#pgfId-1014868 .calibre9}Theme-specific parameters (like
    [params]{.fm-code-in-text})

[]{#CH02.htm#pgfId-1014938}Listing 2.5 Setting up Acme Corporation's
configuration file (config.yaml)

``` programlisting
baseURL: http://example.org/                   ❶
languageCode: en-us                            ❷
title: Acme Corporation                        ❸
theme: Eclectic                                ❹
author:                                        ❺
  facebook: " https://facebook.com/example"    ❺
  twitter: " https://twitter.com/example"      ❺
  email: "contact@example.org"                 ❺
  name: "Acme Corporation"                     ❺
  location: New York                           ❺
  phone: (999) 999-9999                        ❺
  hours: "Mon-Fri: 9:00AM - 6:00PM, ET"        ❺
  
menu: 
  main:                                        ❻
    - identifier: about                        ❻
      name: About                              ❻
      url: /about                              ❻
      weight: 100                              ❻
    - identifier: contact                      ❻
      name: Contact                            ❻
      url: /contact                            ❻
      weight: 200                              ❻
params:                                        ❼
  color: "#4f46e5" 
  copyright: "Copyright &copy; 2022 Acme Corporation. 
    All Rights Reserved." 
  footer: 
    - title: About 
      content:  > 
        Acme Corporation is the world's leading 
        manufacturer of digital shapes. From squares and 
        circles to triangles and hexagons, we have it 
        all. Browse through our collection of various 
        forms with different thicknesses and line styles. 
        We shape the world. You live in it. 
  
  
    - title: Recent Blog Posts 
      recents: blog 
      recentCount: 7 
    - title: Contact Us 
      contact: true 
```

[]{#CH02.htm#pgfId-1032628}[❶]{.fm-combinumeral} URL of the website.
Change this to your website location.

[]{#CH02.htm#pgfId-1032649}[❷]{.fm-combinumeral} Website language. Hugo
supports multilingual websites so we should use this option when
building for only one language.

[]{#CH02.htm#pgfId-1032666}[❸]{.fm-combinumeral} Name of the website

[]{#CH02.htm#pgfId-1032686}[❹]{.fm-combinumeral} Name of the folder that
contains the theme

[]{#CH02.htm#pgfId-1032703}[❺]{.fm-combinumeral} Author section in Hugo,
a top-level section that applies to all themes. If there is one author,
this is the right place to provide author information.

[]{#CH02.htm#pgfId-1032720}[❻]{.fm-combinumeral} Main menu of the
website

[]{#CH02.htm#pgfId-1032737 .calibre9}[❼]{.fm-combinumeral} The theme
parameters

[]{#CH02.htm#pgfId-1015725 .calibre9}Hugo supports multiple authors via
a feature []{#CH02.htm#marker-1015688 .calibre9}called
*taxonomies*[]{#CH02.htm#marker-1029870} (discussed in section 4.4).
Hugo also provides a standard way to define menus. The
[menu]{.fm-code-in-text} section in []{#CH02.htm#marker-1015714
.calibre9}the configuration file has keys, each of which specifies a
menu name. Each menu has a list of entries, which can have a unique
identifier, a name to display, a URL, and a weight to sort menu items.
In the configuration file, the [params]{.fm-code-in-text} section is
theme-specific; its contents can differ across themes.

[]{#CH02.htm#pgfId-1015734 .calibre9}We wrote the configuration file in
listing 2.5 in the YAML metadata language, which we will discuss in
chapter 3. It provides structured information using keys and values
separated by colons. YAML is human-readable and case-sensitive, but
changes in spacing can cause problems with the YAML parser.

[]{#CH02.htm#pgfId-1015740 .calibre9}Hugo also supports the more
"spacing-friendly" TOML format. The resources with this book also
contain the TOML version of the configuration file. If you use that as
an alternative, config.yaml should be removed.

[]{#CH02.htm#pgfId-1015772}[Note]{.fm-callout-head} Update the actual
[baseURL]{.fm-code-in-text1} of the website instead of
[http://example.org/]{.fm-code-in-text1} in the configuration file
before publishing. Leaving the file example .org breaks absolute links
in the website.

[]{#CH02.htm#pgfId-1015781 .calibre9}The Eclectic theme allows us to
provide our logo and even control the website background image by
placing these in the assets/image folder (not in the themes/Eclectic/
assets/image folder). We will place logo.svg and background.svg in this
folder to personalize the website. We will need to create this folder if
it does not exist. (You may need to restart your development server for
the changes to take effect.) These files are present in the code bundle
for chapter 2 ([[https://github.com/hugoinaction/hugoinaction/
tree/chapter-02-resources/03](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/03){.url}]{.fm-hyperlink}).

[]{#CH02.htm#pgfId-1030426}[Code checkpoint]{.fm-callout-head}
[[https://chapter-02-03.hugoinaction.com, and
source](https://chapter-02-03.hugoinaction.com){.url}]{.fm-hyperlink}
code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-03.](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-03){.url}]{.fm-hyperlink}
↻ [Restart your dev server.]{.fm-hyperlink}

[]{#CH02.htm#pgfId-1015929 .calibre9}Hugo standardizes some previously
specified parts (like [menu]{.fm-code-in-text} and
[title]{.fm-code-in-text}) in the configuration file. We will cover
those parts in chapter 4. Other parts (like [params]{.fm-code-in-text})
are different for each theme. Even image locations like that of the
logo.svg are theme-specific.

::: fm-sidebar-block
[]{#CH02.htm#pgfId-1035652 .calibre9}Exercise 2.6

[]{#CH02.htm#pgfId-1035653}Which of the following is used to provide the
website endpoint for Hugo to compile?

1.  []{#CH02.htm#pgfId-1035654}baseURL

2.  []{#CH02.htm#pgfId-1035655}endpoint

3.  []{#CH02.htm#pgfId-1035656}website

4.  []{#CH02.htm#pgfId-1035657}url

5.  []{#CH02.htm#pgfId-1035658}host

6.  []{#CH02.htm#pgfId-1035659}domain

7.  []{#CH02.htm#pgfId-1035660}server
:::

[]{#CH02.htm#pgfId-1016026 .calibre9}You can see the impact of providing
the metadata on the Acme website instantly. With the configuration
mentioned previously, the site should look similar to figure 2.5.
[]{#CH02.htm#marker-1035705 .calibre9}[]{#CH02.htm#marker-1035706
.calibre9}[]{#CH02.htm#marker-1035707 .calibre9}

![CH02_F05_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F05_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1035679}Figure 2.5 The Acme Corporation website looks
much more complete after configuring the theme. Now the main menu and
the footer section added in the configuration file are available on all
pages. The logo and background images are updated as soon as we place
the image files. (Abstract vector created by BiZkettE1 at
[[www.freepik.com](https://www.freepik.com/){.url}]{.fm-hyperlink}.)

### []{#CH02.htm#pgfId-1016049}2.3.2 Content pages {#CH02.htm#sigil_toc_id_60 .fm-head1}

[]{#CH02.htm#pgfId-1016080 .calibre9}[]{#CH02.htm#marker-1016074
.calibre9}[]{#CH02.htm#marker-1016076 .calibre9}A website's objective is
to serve content, and we have none on our beautiful website so far. The
entries added at the top menu of the website link to pages that do not
exist! We need to create pages on the website to make it functional. We
will begin by adding content to the pages linked to in the menu in this
chapter and then will format the content in chapter 3.

[]{#CH02.htm#pgfId-1016085 .calibre9}We can create content pages as text
or markup files in the content folder. We can place a privacy.md file in
that folder with Markdown-based content to get the
https:[//]{.fm-hyperlink} localhost:1313/privacy URL. Similarly, we can
add the about.md, credits.md, terms.md, and contact.md pages
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/04](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/04){.url}]{.fm-hyperlink}).
Hugo automatically applies the theme, and the page should render as soon
as you add the document. This way, we can add as many pages as we desire
to generate the website's core structure. Markdown provides a variety of
formatting options that we will study in chapter 3.
[]{#CH02.htm#marker-1029571 .calibre9}[]{#CH02.htm#marker-1029572
.calibre9}

### []{#CH02.htm#pgfId-1016115}2.3.3 Index page {#CH02.htm#sigil_toc_id_61 .fm-head1}

[]{#CH02.htm#pgfId-1016194 .calibre9}[]{#CH02.htm#marker-1016126
.calibre9}[]{#CH02.htm#marker-1016128
.calibre9}[]{#CH02.htm#marker-1016130 .calibre9}The *index page* (also
called the *home page* or the *landing page*) is the
[]{#CH02.htm#marker-1016171 .calibre9}first []{#CH02.htm#marker-1016177
.calibre9}page of the website and is responsible for orienting the user
on what to expect. Its content is unique and different than all other
pages. A text-based content works well for some pages, but many websites
implement custom content for the index page. Websites even have
tailor-made carousels and sections with extensive imagery that would
need a custom implementation. Hugo recognizes this and provides a unique
template for the index page, which is called []{#CH02.htm#marker-1016183
.calibre9}the *index template*. In many themes, the index template is
customized in a theme-specific way, and the index page configuration is
not portable across themes.

[]{#CH02.htm#pgfId-1016213}[Note]{.fm-callout-head} Most Hugo themes
provide a folder called [exampleSite]{.fm-code-in-text1}, which contains
a starter website using that theme. This folder is extremely useful in
exploring theme-specific configurations and customization options.

[]{#CH02.htm#pgfId-1016219 .calibre9}Hugo's templates are HTML files,
but these can be in any text-based file format (for example, JSON, XML,
or even plain text), with additional template tags that participate in
the compilation step. For users trying to build custom Hugo templates,
it is a good idea to start with the index template because it impacts
only one page of the website. Hugo templates can be overridden using the
layouts folder. In this chapter, we will not be using any template tags
and will start with a plain HTML template that we will place as
layouts/index.html. It is still a Hugo template and has access to all
the variables, which are optional.

[]{#CH02.htm#pgfId-1016225 .calibre9}For Acme Corporation's index page,
we will override the theme's index page with a custom page, hardcoded in
HTML and CSS, as figure 2.6 shows. This page will contain the website
logo, title, subtitle, a button with a call to action (telling the
reader to explore more), and a footer with links to additional pages.

![CH02_F06_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F06_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1035733}Figure 2.6 We can create a custom landing
page in a Hugo website by placing a file called index.html in the
layouts folder. This page overrides the home page provided by the theme.
For Acme Corporation, we used a landing page with hardcoded HTML and CSS
and eschewed the theme-specific features of Eclectic to create pages
based on structured data.

[]{#CH02.htm#pgfId-1016241 .calibre9}In the layouts folder, we will
place a new file named index.html with custom HTML content
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/05](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/05){.url}]{.fm-hyperlink}).
Because we are not using Hugo's template language, we will be hardcoding
all paths and using relative locations to various support-hosting
locations.

[]{#CH02.htm#pgfId-1016279 .calibre9}We can override templates in a Hugo
theme by placing an HTML template file in the layouts folder as listing
2.6 demonstrates. Doing that provides someone who understands HTML with
a quick way to customize a website without learning Hugo. Custom HTML
can be unique to a particular website. Until we use Hugo's template
language, we have to be careful with the HTML we are writing as the
custom HTML page does not change automatically when the content it links
to changes.

[]{#CH02.htm#pgfId-1016336}Listing 2.6 Overriding Hugo's themes
(layouts/index.html)

``` programlisting
<!DOCTYPE html> 
<html lang="en"> 
  <head> 
    <meta charset="UTF-8"> 
    <meta name="description" content="Welcome to the 
      website of Acme Corporation, the leading creator
      of digital shapes on the planet, providing
      precise shape creations that are ready to use."> 
    <meta name="viewport" content="width=device-width, 
      initial-scale=1.0" /> 
    <link rel="stylesheet" href="./index.css">             ❶
    <title>Acme Corporation</title> 
  </head> 
  <body class="home"> 
    <section> 
      <img src="./image/logo.svg" alt="Acme Logo" 
        width="64"/>                                       ❷
      <h1>Acme Corporation</h1> 
      <h2>Shaping the world for you to live in</h2> 
      <a href="./blog">Explore</a> 
    </section> 
    <footer> 
        <a href="./about">About Us</a>                     ❸
        <a href="./privacy">Privacy Policy</a>             ❸
        <a href="./terms">Terms of Use</a>                 ❸
        <a href="./contact">Contact Us</a>                 ❸
    </footer> 
  </body> 
</html> 
```

[]{#CH02.htm#pgfId-1032304}[❶]{.fm-combinumeral} Relative paths for
resources. Absolute paths cause problems when we publish this code with
subfolders in a hosting environment.

[]{#CH02.htm#pgfId-1032325}[❷]{.fm-combinumeral} Assets from the static
folder. Assets referred to in the HTML should be provided in the static
folder for correct links in the final website.

[]{#CH02.htm#pgfId-1032342 .calibre9}[❸]{.fm-combinumeral} Hardcoded
menus. In plain HTML, we have to assume that the URLs of the menu
entries and their names match what is specified.

[]{#CH02.htm#pgfId-1017138}[Note]{.fm-callout-head} Hugo does not modify
the HTML provided inside the template.

[]{#CH02.htm#pgfId-1017144 .calibre9}The plain HTML file needs images
and an index file to function properly. The images in the assets folder,
which we placed for the Eclectic theme, require the use of Hugo Pipes.
(We will discuss Hugo Pipes in chapter 6.) For content that does not
need processing, we have to use the static folder. Until we start using
Hugo's assets-processing pipeline, we will need to place a second copy
of the assets in the static folder. This includes static/index.css,
static/image/background.svg, static/image/logo.svg, and
static/favicon.ico. These assets are provided with the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/06)](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/06){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH02.htm#pgfId-1035765 .calibre9}Exercise 2.7

[]{#CH02.htm#pgfId-1035766}For theme independence, it is advisable to
customize which page in plain HTML?

1.  []{#CH02.htm#pgfId-1035767}privacy

2.  []{#CH02.htm#pgfId-1035768}index

3.  []{#CH02.htm#pgfId-1035769}robots.txt

4.  []{#CH02.htm#pgfId-1035770}English

5.  []{#CH02.htm#pgfId-1035771}settings
:::

[]{#CH02.htm#pgfId-1030530}[Code checkpoint]{.fm-callout-head}
[[https://chapter-02-04.hugoinaction.com](https://chapter-02-04.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-04](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-04){.url}.]{.fm-hyperlink}
↻ Restart your dev server.

## []{#CH02.htm#pgfId-1017236}2.4 Continuous delivery {#CH02.htm#sigil_toc_id_62 .fm-head}

[]{#CH02.htm#pgfId-1017370 .calibre9}[]{#CH02.htm#marker-1017358
.calibre9}[]{#CH02.htm#marker-1017360 .calibre9}A huge benefit of Hugo
and the Jamstack is the ability to have low maintenance and cheap and
efficient hosting readily available. We get this power through
continuous delivery from the code repository. *Continuous delivery* is
[]{#CH02.htm#marker-1017375 .calibre9}the concept of deploying the
changes to our code in an ongoing manner. Good continuous delivery
pipelines are automated and require minimal manual effort.

[]{#CH02.htm#pgfId-1017385 .calibre9}There are many ways to achieve
continuous delivery with Hugo, such as writing a script to push our code
to a storage provider like Amazon S3 or to place it with Apache/Nginx at
the web server layer as with any other web stack. We will focus on the
approaches most popular within the Hugo community. You can find more
hosting information on the Hugo website
([[https://gohugo.io/hosting-and-deployment/](https://gohugo.io/hosting-and-deployment/){.url}]{.fm-hyperlink}),
which maintains a running list of various popular hosting providers and
scripts to set up Hugo-based hosting.

[]{#CH02.htm#pgfId-1017405 .calibre9}Although deploying a Hugo-based
website on a public cloud provides access to many other services and
immense power, the simplicity of Netlify and GitHub Pages is the best
approach to get started with learning Hugo. These approaches also
[]{#CH02.htm#marker-1017394 .calibre9}support *continuous deployment*,
where changes are made live as soon as we submit the code to the code
repository. We will focus on Netlify and GitHub Pages as our hosting
solution in this book.

[]{#CH02.htm#pgfId-1017424}[Note]{.fm-callout-head} The following
sections assume that the website's source code has been uploaded to
GitHub. Every code checkpoint in the book is a good time to commit
changes and deploy it to get a new build.

### []{#CH02.htm#pgfId-1017430}2.4.1 Netlify hosting {#CH02.htm#sigil_toc_id_63 .fm-head1}

[]{#CH02.htm#pgfId-1017449 .calibre9}[]{#CH02.htm#marker-1017441
.calibre9}[]{#CH02.htm#marker-1017443
.calibre9}[]{#CH02.htm#marker-1017445 .calibre9}Netlify, whose founder
coined the term Jamstack, is a leading hosting service for static
websites. Netlify provides deployment services with built-in support for
Hugo. Netlify takes care of continuous integration and provides APIs for
websites to utilize. We can connect our GitHub repository and get static
hosting on Netlify (even for private repositories) for free, until we
reach its bandwidth limits. Netlify provides a handy command-line tool
to perform tasks without leaving the terminal. We can also offer our
build instructions via a configuration file called netlify.toml. Netlify
additionally supports domain purchases, DNS, and CDN management with
things like custom headers.

[]{#CH02.htm#pgfId-1017464}[Tip]{.fm-callout-head} If you use Netlify,
make sure to check out the branch domain feature. Netlify builds and
hosts each pull request in a different website and can maintain
different versions via branches. We'll use this feature to host the
various versions of the website that we demonstrate in this book. You
can navigate to
[[https://chapter-02-04.hugoinaction.com](https://chapter-02-04.hugoinaction.com){.url}]{.fm-hyperlink}
to see a live website with content up to this chapter so far.

[]{#CH02.htm#pgfId-1017471 .calibre9}Once we sign up for Netlify
([[https://app.netlify.com/signup](https://app.netlify.com/signup){.url}]{.fm-hyperlink}),
it provides a step-by-step wizard to host our website. If we have
already pushed our website's source code to GitHub, we can click New
Site from Git as figure 2.7 shows, after signing into Netlify to begin
deployment.

![CH02_F07_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F07_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1035790}Figure 2.7 After signing up, Netlify presents
us with a screen that lists a summary of our Netlify usage and provides
the means to set up a new Netlify website. We can connect to a hosting
provider or upload our website directly. Connecting to a provider is
recommended to get continuous deployment when pushing code.

[]{#CH02.htm#pgfId-1017488 .calibre9}The New Site from Git button takes
us to
[[https://app.netlify.com/start](https://app.netlify.com/start){.url}]{.fm-hyperlink},
where we can connect with our hosting provider (figure 2.8). Once we
select the hosting provider, we need to log in and authorize Netlify to
access our code repositories.

![CH02_F08_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F08_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1035824}Figure 2.8 Netlify supports connections with
multiple hosting providers. Connecting to them is as simple as clicking
a button and then logging in.

[]{#CH02.htm#pgfId-1017519 .calibre9}Once we provide the credentials,
Netlify can browse our repository list and provide all repository names
in Netlify's UI for us to select the one we want to deploy (figure 2.9).
Note that Netlify does not read GitHub organizations by default, so we
need to configure Netlify by using a link on the bottom to provide
access.

![CH02_F09_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F09_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1035858}Figure 2.9 Once logged in, we can search for
the code repository for the code we want to host via Netlify.

[]{#CH02.htm#pgfId-1017579 .calibre9}Next, we can specify the branch to
build, the build command, and the output directory (figure 2.10). We
provide the website URL to Hugo with the command-line arguments
[hugo]{.fm-code-in-text} [\--minify]{.fm-code-in-text}
[\--baseURL]{.fm-code-in-text} [\$DEPLOY_PRIME_URL]{.fm-code-in-text}.
The [baseURL]{.fm-code-in-text} flag overrides
[]{#CH02.htm#marker-1017584 .calibre9}the setup in config.yaml with the
one Netlify uses for building branches. If we use pull request previews
and branch deploys, it might be better to give each deployment a proper
URL. We can also specify build parameters in a file called netlify.toml
([[https://docs.netlify.com/configure-builds/file-based-configuration](https://docs.netlify.com/configure-builds/file-based-configuration){.url}]{.fm-hyperlink}).

[]{#CH02.htm#pgfId-1017605}[Note]{.fm-callout-head} To specify the exact
version of Hugo, we can click the Show Advanced button when we specify
the build command and then add the environment variable
[HUGO_VERSION]{.fm-code-in-text1} with the correct value, which is the
version of Hugo we want to use (for example, 0.91.2). Netlify does not
guarantee setting up the latest version of Hugo if the version number is
not specified. It is better to have control over the build version by
providing it manually.
[]{#CH02.htm#marker-1017607}[]{#CH02.htm#marker-1017610}[]{#CH02.htm#marker-1017612}

![CH02_F10_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F10_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1035892}Figure 2.10 Specifying the branch for
continuous integration and providing the build command and the output
folder to deploy our website. We can designate the Hugo version to use
with advanced options by clicking the Show Advanced button.

### []{#CH02.htm#pgfId-1017628}[]{#CH02.htm#marker-1024868}[]{#CH02.htm#marker-1024867}[]{#CH02.htm#marker-1024866}2.4.2 GitHub Pages {#CH02.htm#sigil_toc_id_64 .fm-head1}

[]{#CH02.htm#pgfId-1017661 .calibre9}[]{#CH02.htm#marker-1017653
.calibre9}[]{#CH02.htm#marker-1017655
.calibre9}[]{#CH02.htm#marker-1017657 .calibre9}GitHub is the Swiss army
knife of development. With its extreme popularity in the developer
community and its ability to have unlimited free hosting for open source
code, GitHub is a perfect place to get started with static hosting. The
Pages service can render static HTML from a branch or a folder in our
source code repository. GitHub Actions perform continuous integration.
There are multiple actions available in the GitHub Actions marketplace
for Hugo. We will be using Hugo setup ([[https://github
.com/marketplace/actions/hugo-setup](https://github.com/marketplace/actions/hugo-setup){.url}]{.fm-hyperlink})
in this section.

[]{#CH02.htm#pgfId-1017667 .calibre9}The steps for hosting our
Hugo-based Acme Corporation website on GitHub Pages follow. Listing 2.7
provides the code for enabling GitHub Pages.

[]{#CH02.htm#pgfId-1017760}Listing 2.7 Enabling GitHub Pages
(.github/workflows/gh-pages.yml)

``` programlisting
name: GitHub Pages                               ❶
  
on: 
  push: 
      branches: 
        - main                                   ❷
  workflow_dispatch:                             ❸
  
jobs: 
  deploy: 
    runs-on: ubuntu-18.04 
    steps: 
      - uses: actions/checkout@v2                ❹
        with: 
          fetch-depth: 0 
  
      - name: Setup Hugo 
        uses: peaceiris/actions-hugo@v2 
        with: 
          hugo-version: '0.91.2'                 ❺
          extended: true 
  
      - name: Build 
        run: hugo --minify --baseURL=            ❻
--> https://hugoinaction.github.io/GitHubPages 
  
      - name: Deploy 
        uses: peaceiris/actions-gh-pages@v3      ❼
        with: 
          github_token: ${{ secrets.GITHUB_TOKEN }} 
          publish_dir: ./public 
```

[]{#CH02.htm#pgfId-1031838}[❶]{.fm-combinumeral} We can name this
workflow what we want.

[]{#CH02.htm#pgfId-1031874}[❷]{.fm-combinumeral} Triggers this workflow
when a push happens on the main branch

[]{#CH02.htm#pgfId-1031891}[❸]{.fm-combinumeral} Enables workflow
dispatch for manual triggers

[]{#CH02.htm#pgfId-1031908}[❹]{.fm-combinumeral} The checkout action
gets the source code. We use fetch-depth to keep some Git history for
Hugo's .Gitinfo (more on this in chapter 4).

[]{#CH02.htm#pgfId-1031932}[❺]{.fm-combinumeral} "true" specifies that
we want to use the extended flavor of Hugo version 0.91.2 for this
action, or you can use "latest" to get the latest version.

[]{#CH02.htm#pgfId-1031949}[❻]{.fm-combinumeral} Command to compile
code. We can specify the output page here.

[]{#CH02.htm#pgfId-1031839 .calibre9}[❼]{.fm-combinumeral} The Deploy
action pushes to the gh-pages branch for GitHub Pages to deploy.

1.  []{#CH02.htm#pgfId-1017673 .calibre9}Create the GitHub Actions file
    at .github/workflows/gh-pages.yml, which tells GitHub the actions to
    take
    ([[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/07](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/07){.url}]{.fm-hyperlink}).
    When these changes are pushed to GitHub, these actions automatically
    execute, creating the gh-pages branch with the compiled version of
    our website.

2.  []{#CH02.htm#pgfId-1018227 .calibre9}In the GitHub settings for the
    repository, enable GitHub Pages from the gh-pages branch repository
    (see figure 2.11). Once enabled, the URL of the website will be
    visible in the interface.

3.  []{#CH02.htm#pgfId-1018283 .calibre9}After deployment, change the
    base URL in the GitHub Actions file and in the config.yaml file from
    the sample value to the correct one provided in the GitHub Actions,
    then push it again. We can view the updates on the Actions tab on
    GitHub as figure 2.12 shows.

[]{#CH02.htm#pgfId-1018353 .calibre9}An example website using GitHub
Pages is hosted at
[[https://hugoinaction.github.io/GitHubPages/](https://hugoinaction.GitHub.io/GitHubPages/){.url}]{.fm-hyperlink}
with the source code at
[[https://github.com/hugoinaction/GitHubPages/](https://github.com/hugoinaction/GitHubPages/){.url}]{.fm-hyperlink}.
We can navigate to the Actions tab in the GitHub UI to see the results
of running GitHub Actions, which deploys the website.

![CH02_F11_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F11_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1035926}Figure 2.11 Options for GitHub Pages as a
host for a static website. Use the Branch: gh-pages option for Hugo.

![CH02_F12_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F12_Jain.png){.calibre1}\

Figure 2.12 The Actions tab on GitHub shows all executed actions. Each
code push can potentially run a GitHub action.

[]{#CH02.htm#pgfId-1018375 .calibre9}Now the website should be available
on the web, and we should be able to navigate to the link provided by
GitHub in the [pages]{.fm-code-in-text} section once it goes live.
GitHub provides a CDN that distributes websites across the planet and is
free for a website under its quota limits (size less than 1 GB, a
monthly bandwidth of 100 GBs, and around 10 builds per hour as of
writing this book). This is a good place for a personal website or for
test-driving the Jamstack. Many GitHub Pages document source code
already on GitHub, and Hugo is one popular tool for generating that.

::: fm-sidebar-block
[]{#CH02.htm#pgfId-1035958 .calibre9}Editing on the go

[]{#CH02.htm#pgfId-1035959}There is a popular misconception that
websites built with the Jamstack architecture are difficult to edit
unless you have the development environment set up. Most modern Jamstack
websites have a continuous environment setup, and we can push it to
production with a simple check-in. This system makes Jamstack more
flexible than a traditional database-based website stack. We can change
not only content but also designs, configurations, and even business
logic without setting up a development environment. With scaling not a
concern, it is easier to edit on the Jamstack than with the traditional
web stack.

\

[]{#CH02.htm#pgfId-1035960}In case of minor edits, GitHub's web
interface is a valuable tool that provides the ability to edit the
website from anywhere. There are applications like CodeHub, PocketHub,
or Working Copy (available on both mobile and tablet) to create or
modify Markdown documents from a Git repository. We can make our changes
anywhere we want, and the continuous integration system ensures they go
live within seconds of being committed. Unlike traditional stacks,
setting up the local development environment for the Jamstack is much
easier, and when we have to, it does not take days.
[]{#CH02.htm#marker-1035961}[]{#CH02.htm#marker-1035962}[]{#CH02.htm#marker-1035963}
:::

### []{#CH02.htm#pgfId-1018419}2.4.3 Vercel, Cloudflare, AWS Amplify, and other dedicated Jamstack hosts {#CH02.htm#sigil_toc_id_65 .fm-head1}

[]{#CH02.htm#pgfId-1018444 .calibre9}[]{#CH02.htm#marker-1018430
.calibre9}[]{#CH02.htm#marker-1018432
.calibre9}[]{#CH02.htm#marker-1018434
.calibre9}[]{#CH02.htm#marker-1018436
.calibre9}[]{#CH02.htm#marker-1018438
.calibre9}[]{#CH02.htm#marker-1018440 .calibre9}Like Netlify, other
dedicated Jamstack hosts provide similar feature sets like branch/
commit previews, automatic continuous integration and deployment, and
API creation support and management. Vercel provides robust support for
managing JavaScript and can be an advantage if our website is getting
JavaScript-heavy. Cloudflare Pages are built by one of the biggest CDNs
on the planet and provide unlimited bandwidth, better performance than
most other services, and a well-defined means to create our APIs (with
Cloudflare Workers and Cloudflare Workers KV). AWS Amplify is an AWS
service that provides excellent integration with the rest of AWS. The
Hugo hosting setup for Cloudflare, AWS Amplify, and Vercel is similar to
Netlify, and one cannot go wrong in choosing any of these providers.
[]{#CH02.htm#marker-1018445 .calibre9}[]{#CH02.htm#marker-1018448
.calibre9}[]{#CH02.htm#marker-1018450
.calibre9}[]{#CH02.htm#marker-1018452
.calibre9}[]{#CH02.htm#marker-1018454
.calibre9}[]{#CH02.htm#marker-1018456 .calibre9}

### []{#CH02.htm#pgfId-1018462}2.4.4 AWS, Azure, and Google Cloud file storage {#CH02.htm#sigil_toc_id_66 .fm-head1}

[]{#CH02.htm#pgfId-1018528 .calibre9}[]{#CH02.htm#marker-1018473
.calibre9}[]{#CH02.htm#marker-1018475
.calibre9}[]{#CH02.htm#marker-1018477
.calibre9}[]{#CH02.htm#marker-1018479
.calibre9}[]{#CH02.htm#marker-1018481 .calibre9}If you are using the
public cloud features for the other parts of the Jamstack or desire more
fine-grained control than that provided with standardized hosting,
deploying from Hugo to the cloud is also available. Hugo comes with a
[]{#CH02.htm#marker-1018486 .calibre9}built-in command, [hugo
deploy]{.fm-code-in-text}
([[https://gohugo.io/hosting-and-deployment/hugo-deploy/](https://gohugo.io/hosting-and-deployment/hugo-deploy/){.url}]{.fm-hyperlink}),
to deploy the website to an AWS S3 bucket, Google Cloud Storage, or
Azure Storage. Once we set up the authentication credentials on our
machine, we can specify the link to the specific service in the
[deployment.targets.URL]{.fm-code-in-text} section in the config.yaml
file. For example, to deploy to AWS S3, you would enter
[s3://\<Bucket]{.fm-code-in-text}
[Name\>?region=\<AWS]{.fm-code-in-text} [region\>]{.fm-code-in-text}.
Hugo automatically identifies the changes between the cloud and the
current build and synchronizes those when we run [hugo deploy \<target
name\>]{.fm-code-in-text}. We can also specify the caching policies that
the cloud exposes to the website's users in the same section.
[]{#CH02.htm#marker-1018533 .calibre9}[]{#CH02.htm#marker-1018536
.calibre9}[]{#CH02.htm#marker-1018538
.calibre9}[]{#CH02.htm#marker-1018540
.calibre9}[]{#CH02.htm#marker-1018542
.calibre9}[]{#CH02.htm#marker-1018544
.calibre9}[]{#CH02.htm#marker-1018546 .calibre9}

![CH02_F13_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F13_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1035982}Figure 2.13 Publishing with the Jamstack.
Alex does not give up on the Jamstack even after Bob gets additional
resources to continue with the existing stack.

## []{#CH02.htm#pgfId-1018562}2.5 Meeting the goals for performance and maintainability {#CH02.htm#sigil_toc_id_67 .fm-head}

[]{#CH02.htm#pgfId-1018593 .calibre9}[]{#CH02.htm#marker-1018587
.calibre9}[]{#CH02.htm#marker-1018589 .calibre9}Hugo and the Jamstack
promise solid performance and low ongoing maintenance. Both of these are
not absolutes in themselves. There is a gradient: we need to choose the
right balance of features, ease of development and use, maintenance, and
performance to get the best benefit. A website with no images would
likely be faster to load than one with hundreds of them, but that does
not mean that it would be the best website for all use cases. Therefore,
when analyzing performance and maintainability, we need to consider the
use case.

### []{#CH02.htm#pgfId-1018598}2.5.1 Performance {#CH02.htm#sigil_toc_id_68 .fm-head1}

[]{#CH02.htm#pgfId-1018617 .calibre9}[]{#CH02.htm#marker-1018609
.calibre9}[]{#CH02.htm#marker-1018611
.calibre9}[]{#CH02.htm#marker-1018613 .calibre9}Performance is one
notable metric that Hugo's development team uses to benchmark its
builds. We should be able to get good performance for a typical use case
without any significant difficulties. We are hosting all the web pages
for Acme Corporation on a CDN (prerendered), and the client does not
need to do much processing to display the site. While we should find the
website quick to load, it is vital to get the performance as a number
and tabulate that across builds to be able to compare changes and to fix
regressions.

[]{#CH02.htm#pgfId-1018622 .calibre9}The standard tool for measuring
performance is the Audit tool called Lighthouse
([[https://developers.google.com/web/tools/lighthouse/](https://developers.google.com/web/tools/lighthouse/){.url}]{.fm-hyperlink}).
It's built into Google's Chrome browser (figure 2.14). For Acme
Corporation, the About page represents a regular page of the website,
which we will measure for performance.

![CH02_F14_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F14_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1036016}Figure 2.14 Performance audit for the About
page for Acme Corporation using the Google Chrome Lighthouse performance
test.

[]{#CH02.htm#pgfId-1018639}[Note]{.fm-callout-head} Chrome regularly
updates the Lighthouse tool with new tests, so the measurement results
might not exactly match the screenshot shown.

[]{#CH02.htm#pgfId-1018655 .calibre9}It is essential to measure the
hosted site's performance on the CDN as the development server from Hugo
is not what the users get in production. It is built for development and
does not provide the right results. To measure the hosted site's
performance,

1.  []{#CH02.htm#pgfId-1018675 .calibre9}Go to the View \> Developer \>
    Developer Tools menu in Google Chrome to open the web inspector.

2.  []{#CH02.htm#pgfId-1018689 .calibre9}Go to the Lighthouse tab and
    run an audit. You should be able to achieve a decent audit score for
    performance on most Hugo websites.

[]{#CH02.htm#pgfId-1018699 .calibre9}Lighthouse may suggest issues in
the theme. If so, there is an option to clone the theme or to create a
bug for the theme developer to fix. []{#CH02.htm#marker-1018701
.calibre9}[]{#CH02.htm#marker-1018704
.calibre9}[]{#CH02.htm#marker-1018706 .calibre9}

### []{#CH02.htm#pgfId-1018712}2.5.2 Maintainability {#CH02.htm#sigil_toc_id_69 .fm-head1}

[]{#CH02.htm#pgfId-1018731 .calibre9}[]{#CH02.htm#marker-1018723
.calibre9}[]{#CH02.htm#marker-1018725
.calibre9}[]{#CH02.htm#marker-1018727 .calibre9}The maintainability of
the web setup is difficult to measure directly. There is no tool to tell
whether a stack is maintainable. One way to check how much effort it
would take to maintain a system is to list each of its dependencies and
figure out which dependencies require ongoing security updates, which
need to be abandoned by the developer, or which can become difficult to
update due to nested dependencies. We should also measure the effort to
remove a dependency in case it is not actively maintained. Luckily, for
the Hugo-based setup we just discussed, we have few dependencies. In our
measurement system, we can consider a rewrite, huge updates, or partial
rewrites as high risks, and tweaks that do not involve many changes as
medium risks. At the same time, a low risk would refer to no minimal
manual intervention. Let's try to assess this for the website we have
built so far, right after the next exercise.

::: fm-sidebar-block
[]{#CH02.htm#pgfId-1036055 .calibre9}Exercise 2.8

[]{#CH02.htm#pgfId-1036056}What is the primary reason to benchmark the
performance of a website?

1.  []{#CH02.htm#pgfId-1036057}Find overall performance issues.

2.  []{#CH02.htm#pgfId-1036058}Plot a graph to show on our website.

3.  []{#CH02.htm#pgfId-1036059}Compare performance across multiple
    builds of our website and multiple builds of Hugo to find faulty
    behavior.

4.  []{#CH02.htm#pgfId-1036060}Find bugs in our website.
:::

-   []{#CH02.htm#pgfId-1018794 .calibre9}*Our Acme Corporation's website
    created in this chapter depends on Hugo.* Hugo has had breaking
    changes in the past releases, but most of them have been minor. We
    do not need to update for security fixes because it is a
    development-only dependency. This could be rated as low in an
    ongoing effort if we are happy with the website or as medium for an
    upgrade.

-   []{#CH02.htm#pgfId-1018815 .calibre9}*The hosting on GitHub Pages
    requires no ongoing effort to maintain.* This is among the most
    critical services for developers on the internet. We can, therefore,
    rate both ongoing maintenance and upgrade as low. If we use Netlify,
    it manages the upkeep for us, and the effort there is also low.
    Because it is a lot less popular than GitHub, there is an inherent
    risk of Netlify pivoting to a new business model or shutting its
    doors. Migration to GitHub is easy for the type of website built
    here, and its overall risk is low.

-   []{#CH02.htm#pgfId-1018832 .calibre9}*The Eclectic theme chosen for
    Acme Corporation is dependent on a few JavaScript-based plugins.*
    These plugins are stable, however, and haven't had significant
    changes in years. Still, Eclectic is not heavily used, and if it
    gets abandoned, the team at Acme Corporation will have to pick up
    the task of adding fixes to support newer Hugo versions when they
    want to update the website. That would be a medium effort commitment
    (unless they want new features).

[]{#CH02.htm#pgfId-1018849 .calibre9}Overall, the ongoing work to keep
the website we built in this chapter alive is meager. If we need to
upgrade it, the effort would be low to medium, depending on the breaking
changes in Hugo and the theme developer's ability to adapt to those.
Note that as we progress further along with this book, we will add more
dependencies to our website, especially in part 2. This will increase
the maintenance overhead. While an attempt has been made to look for
dependencies that are self-contained, readers are advised to weigh the
pros and cons of adding dependencies independently every time something
is needed in their own projects. []{#CH02.htm#marker-1018851
.calibre9}[]{#CH02.htm#marker-1018854
.calibre9}[]{#CH02.htm#marker-1018856 .calibre9}

### []{#CH02.htm#pgfId-1018862}2.5.3 Choose the theme wisely {#CH02.htm#sigil_toc_id_70 .fm-head1}

[]{#CH02.htm#pgfId-1018881 .calibre9}[]{#CH02.htm#marker-1018873
.calibre9}[]{#CH02.htm#marker-1018875
.calibre9}[]{#CH02.htm#marker-1018877 .calibre9}The performance and
maintenance risks of a website depend heavily on the theme selected. If
the theme is not good, Hugo's hard work maintaining its performance will
not show in your website's build time. The main maintenance risk to a
Hugo-based website is the risk of depending on a theme that stops being
compatible with the newer versions of Hugo. We can continue to use the
older version of Hugo and the theme indefinitely without worrying too
much about security issues because the content is static. But if we ever
want to update Hugo and the theme is not supported anymore, we would be
on our own to maintain the theme. It is a good idea to be theme
agnostic, at least early on in a website project, so that if we find a
problem with the theme we are using, we can move to a different one
quickly.

[]{#CH02.htm#pgfId-1018886 .calibre9}Themes can also be an excellent
source for learning how to use Hugo best. Many developers using Hugo
choose the themes as the starting point rather than the absolute
solution. One big reason to choose Hugo is to customize everything, and
forking the theme is a powerful way to perform that task. We will be
moving out of the Eclectic theme into our custom theme by the end of
chapter 7.

[]{#CH02.htm#pgfId-1018892 .calibre9}If we want to continue to build our
website with a theme maintained by someone else, it is a good idea to
investigate portability. Hugo provides standardization across themes,
and switching Hugo themes is not difficult (see listing 2.8). We will be
adding another theme to Acme Corporation's website to make sure our code
is portable. We provide a copy of the Universal theme for Hugo in
chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/08](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/08){.url}]{.fm-hyperlink})
and also host it at [[github
.com/hugoinaction/Universal.](https://github.com/hugoinaction/Universal){.url}]{.fm-hyperlink}
You can copy that theme to the themes folder and enable it with the
website configuration. You may need to restart the development server.

[]{#CH02.htm#pgfId-1018967}Listing 2.8 Changing a theme to Universal
(config.yaml)

``` programlisting
theme: Universal 
```

[]{#CH02.htm#pgfId-1019025 .calibre9}While the previous code works and
renders the website, there is more configuration that we need to do to
get the maximum benefit of the Universal theme. For that, place logo.png
in the static/image/logo.png folder and update the configuration to
include the parameters in the following listing (below the existing
[params]{.fm-code-in-text} for [footer]{.fm-code-in-text}) for Universal
to be able to parse them
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/09](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/09){.url}]{.fm-hyperlink}).

[]{#CH02.htm#pgfId-1019104}Listing 2.9 Changes to support the Universal
theme (config.yaml)

``` programlisting
theme: Universal 
params: 
  footer: 
        ... 
  style: blue 
  logo: /image/logo.png 
  logo_small: /image/logo.png 
  about_us:  > 
    Acme Corporation is the world's leading manufacturer 
    of digital shapes. From squares and circles to 
    triangles and hexagons, we have it all. Browse through 
    our collection of various forms with different 
    thicknesses and line styles. We shape the world. 
    You live in it. 
  
  
  recent_posts: 
    enable: true 
```

[]{#CH02.htm#pgfId-1019236 .calibre9}The configuration file for
Universal is available in both TOML and YAML format in the code
resources with this book
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/10](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-resources/10){.url}]{.fm-hyperlink}).
Note that the configuration for Eclectic has not been removed, and we
can switch between the two themes easily.

[]{#CH02.htm#pgfId-1030587}[Code checkpoint]{.fm-callout-head}
[[https://chapter-02-05.hugoinaction.com](https://chapter-02-05.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-02-05](https://github.com/hugoinaction/hugoinaction/tree/chapter-02-05){.url}]{.fm-hyperlink}.

[]{#CH02.htm#pgfId-1019260 .calibre9}Because each theme has a unique
home page, switching themes will be considerably easier if we choose our
own customized HTML-based home page. That way, if we render now or with
a live reload, the home page remains the same. Because the About page is
styled, it will match the Universal theme (figure 2.15) if we switch to
that theme.

![CH02_F15_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH02_F15_Jain.png){.calibre1}\

[]{#CH02.htm#pgfId-1036079}Figure 2.15 Terms of Use page for Acme
Corporation in code (left), Eclectic (middle), and Universal (right).
When we switch themes in Hugo, most of the content that we provide as
Markdown still works. Only the parameters provided in places like the
configuration file need to be reworked.

[]{#CH02.htm#pgfId-1019368 .calibre9}We will be reverting to Eclectic
for the rest of the book. With a running website, it is time to add some
more content, so we will do that in chapter 3.
[]{#CH02.htm#marker-1019384 .calibre9}[]{#CH02.htm#marker-1019387
.calibre9}[]{#CH02.htm#marker-1019389
.calibre9}[]{#CH02.htm#marker-1019391
.calibre9}[]{#CH02.htm#marker-1019393 .calibre9}

## []{#CH02.htm#pgfId-1019399}Summary {#CH02.htm#sigil_toc_id_71 .fm-head-1-notoc}

-   []{#CH02.htm#pgfId-1019409 .calibre9}Hugo is available for
    installation in most major package managers on Linux, macOS, and
    Windows.

-   []{#CH02.htm#pgfId-1019423 .calibre9}Hugo has extensive command-line
    functionality to minimize the work that its users need to do. It has
    handy options that help build all parts of a website, from adding
    module dependencies to creating new Markdown-based documents.

-   []{#CH02.htm#pgfId-1019433 .calibre9}A Hugo project consists of
    folders beyond the content and themes folders: static for static
    content, data for structured data, layouts for theme overrides,
    resources for Hugo's internal caching, assets for images,
    JavaScript, and CSS files, and public for the generated output. It
    also includes archetypes for posted templates and a configuration
    file for global settings.

-   []{#CH02.htm#pgfId-1019443 .calibre9}Hugo themes can be added in
    various ways, the simplest of which is to directly copy a theme to
    the themes folder. We need to configure these with standard and
    theme-specific parameters and file placements before using.

-   []{#CH02.htm#pgfId-1019453 .calibre9}Content can be added as
    Markdown, theme-specific structured data, or in an overridden HTML
    template.

-   []{#CH02.htm#pgfId-1019463 .calibre9}Hugo websites can be hosted
    easily across the planet via GitHub Pages and Netlify, which provide
    continuous delivery support without making the developer do much
    work.

-   []{#CH02.htm#pgfId-1019473 .calibre9}We can switch themes, but if we
    use a lot of theme-specific data (like data supplied via
    [params]{.fm-code-in-text} in the configuration), then that work
    needs to be redone. We should investigate theme switching early on
    so that we can switch out quickly if the Hugo theme gets abandoned.

-   []{#CH02.htm#pgfId-1019492 .calibre9}We can use Google Chrome's
    Lighthouse feature for measuring performance. We should also do a
    full dependency audit to check maintainability.

-   []{#CH02.htm#pgfId-1019502 .calibre9}Every website needs to be
    monitored for maintainability and performance regularly during
    development to ensure quality. Hugo offers excellent performance and
    has a small set of dependencies, but the website performance and
    maintainability still depend on the chosen theme.

[]{#CH03.htm}

# []{#CH03.htm#pgfId-1021263}3 Using markup for content {#CH03.htm#heading_id_2 .tochead}

[]{#CH03.htm#pgfId-1025820}This chapter covers

-   []{#CH03.htm#pgfId-1025852 .calibre9}Creating content using Markdown
-   []{#CH03.htm#pgfId-1025853 .calibre9}Using Hugo's extensions to
    Markdown
-   []{#CH03.htm#pgfId-1025854 .calibre9}Understanding the markup
    languages supported by Hugo
-   []{#CH03.htm#pgfId-1025855 .calibre9}Using YAML for metadata in a
    Hugo-based website
-   []{#CH03.htm#pgfId-1025841 .calibre9}Playing with the various
    elements of the front matter

[]{#CH03.htm#pgfId-1011814 .calibre9}Most documents in the content
folder of a Hugo website consist of textual content in a markup language
and its associated metadata in a metadata language. Markdown is the most
popular markup language and the most widely used. YAML is among the most
popular languages for writing key-value configurations, where human
readability is essential.

[]{#CH03.htm#pgfId-1011820 .calibre9}Figure 3.1 (top) shows the focus
area for this chapter. In sections 3.1 to 3.3, we will focus on the
Markdown language to provide content, and from section 3.4 onward, we
will study the YAML language that adds the metadata. We will also look
at the typical metadata entries in the front matter of a website. In
this chapter, we will format the pages we created for the website we
built for Acme Corporation in chapter 2.

![CH03_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F01_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1036887}Figure 3.1 Most content documents in a
Hugo-based website consist of markup in some metadata language like
Markdown and structured metadata in a metadata language like YAML. The
focus of this chapter is to format a single Markdown document (on the
top). The bottom shows a comparison of database storage versus
file-based storage for our content.

[]{#CH03.htm#pgfId-1011839 .calibre9}In the traditional web stack, the
content of a web page is stored in a single database cell, whereas the
associated metadata fills up other columns in the content table or other
tables in the database. In the Jamstack, the content
[]{#CH03.htm#marker-1011828 .calibre9}(called the *front matter*) is of
prime importance and is placed in a separate file with the rest of the
metadata moved from the header section (as figure 3.1 shows on the
bottom).

## []{#CH03.htm#pgfId-1011858}[]{#CH03.htm#marker-1026826}[]{#CH03.htm#marker-1026822}3.1 Writing content in Markdown {#CH03.htm#sigil_toc_id_72 .fm-head}

[]{#CH03.htm#pgfId-1011889 .calibre9}[]{#CH03.htm#marker-1011883
.calibre9}[]{#CH03.htm#marker-1011885 .calibre9}So far, we have used
plain text to provide content for our web pages. With plain text,
however, we get no structure, and a blob of text is not fun to read.
Markdown is a lightweight document format for writing easy-to-read and
easy-to-write documents with support for basic formatting and for
structuring content using text-based constructs. In 2004, John Gruber
and Aaron Swartz created Markdown as a human-readable, text-based
formatting language. It standardizes on a text-based mechanism for
specifying formatting. Although a compiler and a renderer improve
readability, the language is easy enough to understand without it. This
readability has made Markdown popular as a formatting language from the
command line to Git commit messages, README files, plain text boxes, and
chat pods.

[]{#CH03.htm#pgfId-1011894 .calibre9}Original Markdown had a limited set
of features, extended by CommonMark
([[https://commonmark.org/](https://commonmark.org/){.url}]{.fm-hyperlink})
and further developed []{#CH03.htm#marker-1011897 .calibre9}as GitHub
Flavored Markdown (GFM), which is the popular variant (see
[[https://github.github.com/gfm/](https://github.github.com/gfm/){.url}]{.fm-hyperlink}).
Hugo supports most of GFM and extends it even further. Hugo parses files
created with the filename extension .md or .markdown as Markdown. The
privacy, credits, terms, and about files in chapter 2 already have the
.md extension and are ready to use with Markdown's formatting
capabilities.

::: fm-sidebar-block
[]{#CH03.htm#pgfId-1036926 .calibre9}Markdown editors

[]{#CH03.htm#pgfId-1036927}Markdown is a language that can be read and
written in a plain-text editor without any support for this format. Many
users don't have a special editor for Markdown. Simple text editors like
Sublime Text and VS Code provide color coding to help identify special
formatting in Markdown. They also support a live preview of Markdown
content in the output format.

\

[]{#CH03.htm#pgfId-1036929}If you are looking for a dedicated Markdown
editor, tools like Typora
([[https://typora.io/](https://typora.io/){.url}]{.fm-hyperlink}) and iA
Writer
([[https://ia.net/writer](https://ia.net/writer){.url}]{.fm-hyperlink})
provide many capabilities for helping create good Markdown documents.
These tools support keyboard shortcuts and inline as well as live
previews. Online tools like Dropbox Paper ([[https://www.dropbox
.com/paper](https://www.dropbox.com/paper){.url}]{.fm-hyperlink}) also
support a subset of Markdown. Apart from these, pandoc
([[https://pandoc.org/](https://pandoc.org/){.url}]{.fm-hyperlink}) can
take many file formats including Microsoft Office, Open Office, Latex,
and MediaWiki and convert them to Markdown.
:::

### []{#CH03.htm#pgfId-1011934}[]{#CH03.htm#marker-1032846}3.1.1 Paragraphs in Markdown {#CH03.htm#sigil_toc_id_73 .fm-head1}

[]{#CH03.htm#pgfId-1011959 .calibre9}[]{#CH03.htm#marker-1011945
.calibre9}[]{#CH03.htm#marker-1011947
.calibre9}[]{#CH03.htm#marker-1011949 .calibre9}Markdown already formats
blobs of text with an empty line between paragraphs (the
[\<p\>]{.fm-code-in-text} tag in HTML). The various pages we provided in
chapter 2 did not look very ugly because of this feature. Figure 3.2
shows how the paragraph and line break elements render.

[]{#CH03.htm#pgfId-1011968 .calibre9}If we provide more than two line
breaks, rendering content collapses them. The rendering also ignores
single line breaks during this process. We can also use Markdown in text
boxes where automatic text wrapping is not available, and we can add
line breaks without impacting output, thereby keeping readability
intact. To create a regular line break ([\<br\>]{.fm-code-in-text} tag
in HTML), add two spaces at the end of the line and then add a new line
character using the Enter (Return) key. []{#CH03.htm#marker-1011979
.calibre9}[]{#CH03.htm#marker-1011982
.calibre9}[]{#CH03.htm#marker-1011984 .calibre9}

![CH03_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F02_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1036951}Figure 3.2 Elements in Markdown, part 1:
Paragraphs and line breaks

### []{#CH03.htm#pgfId-1012000}[]{#CH03.htm#marker-1032849}[]{#CH03.htm#marker-1032847}[]{#CH03.htm#marker-1032845}3.1.2 Headings, lists, and other block elements {#CH03.htm#sigil_toc_id_74 .fm-head1}

[]{#CH03.htm#pgfId-1012037 .calibre9}[]{#CH03.htm#marker-1012025
.calibre9}[]{#CH03.htm#marker-1012027
.calibre9}[]{#CH03.htm#marker-1012029
.calibre9}[]{#CH03.htm#marker-1012031
.calibre9}[]{#CH03.htm#marker-1012033 .calibre9}We need headings, lists,
and other block elements to provide proper structure for the Terms of
Use and the Privacy Policy pages for the Acme Corporation website.
Figure 3.3 shows these elements and how they are rendered in the
browser. To create top-level headings,

-   []{#CH03.htm#pgfId-1012103 .calibre9}*Before the heading text, use a
    hash mark (*[\#]{.fm-code-in-text}*).* The single
    [\#]{.fm-code-in-text} sign creates a level 1 (H1) heading, and two
    [\##]{.fm-code-in-text} signs make the level 2 (H2) headings. We can
    use hash marks like this to reach six levels of headings in most
    parsers ([\##]{.fm-code-in-text}, [\###]{.fm-code-in-text}, and so
    forth).

-   []{#CH03.htm#pgfId-1012112 .calibre9}*Under the heading text, add a
    row of equal signs for a level 1 heading or add hyphens (dashes) for
    the next level headings (H2, H3, and so forth).* This underlining
    (created from the equal signs and dashes) highlights the headings,
    making them not only more readable but also easier to locate.

[]{#CH03.htm#pgfId-1012129 .calibre9}GFM requires a space after the hash
mark to be considered a proper heading to distinguish between hashtags
that have become popular for labeling issues. For headings, hashes need
to begin the start of a new line, preceding the text that we want to use
for the heading. The in-between text (from one heading to the next) does
not create headings but, rather, is our content.

![CH03_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F03_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1036985}Figure 3.3 Elements in Markdown, part 2:
Headings, lists, and horizontal lines

[]{#CH03.htm#pgfId-1012201 .calibre9}We can add bulleted lists (the
[\<ul\>]{.fm-code-in-text} block element) by using either
[\*]{.fm-code-in-text}, [-]{.fm-code-in-text}, or [+]{.fm-code-in-text}
at the start of the sentence. Sublists are added by inserting four
spaces before the bullet character. A number followed by a dot
([.]{.fm-code-in-text}) or a closing parenthesis ([)]{.fm-code-in-text})
creates numbered or ordered lists (the [\<OL\>]{.fm-code-in-text} block
element). We can nest different lists in Markdown.

[]{#CH03.htm#pgfId-1012226 .calibre9}We can create horizontal lines (the
[\<hr\>]{.fm-code-in-text} tag) using a series of dashes or asterisks
(with a minimum of three). To add a blockquote, we prefix the text with
[\>]{.fm-code-in-text} as the first element in the line. Any text
starting with four spaces or a tab character is considered a
preformatted code block, which displays exactly as you write it with no
line wrapping.

![CH03_F04_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F04_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037048}Figure 3.4 Addition of headings and lists and
the corresponding block elements to the Terms of Use page for the Acme
Corporation website

[]{#CH03.htm#pgfId-1012245 .calibre9}Figure 3.4 shows the Terms of Use
page for Acme Corporation (on the left) with the corresponding block
elements for headings and lists (on the right). The block elements
highlighted in the image are an exercise for the reader. For that, the
reader should update the Privacy Policy page with these elements. You
can tally your changes with those provided in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-03-resources/01](https://github.com/hugoinaction/hugoinaction/tree/chapter-03-resources/01){.url}]{.fm-hyperlink}).

[]{#CH03.htm#pgfId-1032765}[Code checkpoint]{.fm-callout-head}
[[https://chapter-03-01.hugoinaction.com](https://chapter-03-01.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-03-01](https://github.com/hugoinaction/hugoinaction/tree/chapter-03-01){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH03.htm#pgfId-1037017 .calibre9}Exercise 3.1

[]{#CH03.htm#pgfId-1037018}Which symbols from the following list can
help identify a heading in Markdown? (Select all that apply.)

1.  []{#CH03.htm#pgfId-1037019}Asterisk ([\*]{.fm-code-in-text1})

2.  []{#CH03.htm#pgfId-1037020}Underscore ([\_]{.fm-code-in-text1})

3.  []{#CH03.htm#pgfId-1037021}Hyphen/dash ([-]{.fm-code-in-text1})

4.  []{#CH03.htm#pgfId-1037022}Equals sign ([=]{.fm-code-in-text1})

5.  []{#CH03.htm#pgfId-1037023}Plus sign ([+]{.fm-code-in-text1})

6.  []{#CH03.htm#pgfId-1037029}Hash mark
    ([\#]{.fm-code-in-text1})[]{#CH03.htm#marker-1037024}[]{#CH03.htm#marker-1037025}[]{#CH03.htm#marker-1037026}[]{#CH03.htm#marker-1037027}[]{#CH03.htm#marker-1037028}
:::

### []{#CH03.htm#pgfId-1012541}3.1.3 Formatting, inline links, code, and images {#CH03.htm#sigil_toc_id_75 .fm-head1}

[]{#CH03.htm#pgfId-1012562 .calibre9}[]{#CH03.htm#marker-1012552
.calibre9}[]{#CH03.htm#marker-1012554
.calibre9}[]{#CH03.htm#marker-1012556
.calibre9}[]{#CH03.htm#marker-1012558 .calibre9}While block elements
give the page its structure, inline elements emphasize vital parts of
the page. Figure 3.5 shows these inline elements (on the left) and how
they are rendered in the browser (on the right).

![CH03_F05_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F05_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037082}Figure 3.5 Elements in Markdown, part 3:
Inline elements including bold, italics, underline, links, and images

[]{#CH03.htm#pgfId-1012593 .calibre9}Note that Hugo automatically
formats hyperlinks on the page and converts them to HTML anchor tags.
This auto-linking is a feature provided by Hugo's Markdown parser, so we
do not need to write anything special to enable it. We can also create
links using a [\[visible]{.fm-code-in-text}
[text\](http://example.org/path/to/file)]{.fm-code-in-text} format. We
can also use the [\[visible]{.fm-code-in-text} [text\](http://link
\"Title\")]{.fm-code-in-text} format, where
[\"Title\"]{.fm-code-in-text} is available as a tooltip.

[]{#CH03.htm#pgfId-1012638 .calibre9}We can share links across text by
writing a reference to them as [\[visible text\]\[target
1\]]{.fm-code-in-text} and then adding a footnote with the value of the
reference by using the format [\[target 1\]:]{.fm-code-in-text}
[https://example.org/path/to/target]{.fm-code-in-text}. Shared links
also work in footnote locations directly; for example, [\[target
1\]]{.fm-code-in-text} autolinks to the [target 1]{.fm-code-in-text}
link that we just set.

[]{#CH03.htm#pgfId-1012703 .calibre9}Markdown provides basic formatting
support using text-based markers. We can surround the desired text with
an [\_]{.fm-code-in-text}(underscore) or an
[\*]{.fm-code-in-text}(asterisk) for italics, or a
[\_\_]{.fm-code-in-text}(double underscore) for boldface. For both bold
and italics, we can use [\*\*\_\<text\>\_\*\*]{.fm-code-in-text} or
[\_\_\*\<text\>\*\_\_]{.fm-code-in-text}. Double tildes
([\~\~]{.fm-code-in-text}) are used for strikethroughs.

[]{#CH03.htm#pgfId-1012728 .calibre9}We can specify inline code by
surrounding it with backticks like this, [\`inline
code\`]{.fm-code-in-text}, and we can place it in free-flowing content.
It gets formatted with a monospace font in the HTML
[\<code\>]{.fm-code-in-text} tag.

[]{#CH03.htm#pgfId-1012773 .calibre9}Markdown creates
[\<img\>]{.fm-code-in-text} tags to show images inline with the content.
There is no support for specifying block images, image dimensions, or
other details; that is left to the theme to implement. We can inline
images using a similar syntax to links and prefix those with an
[!]{.fm-code-in-text} (exclamation mark, commonly called a *bang*). To
render an image inline in the text, we'd write
[!\[alt]{.fm-code-in-text} [text\](/path/to/image]{.fm-code-in-text}
[\"optional]{.fm-code-in-text} [tooltip\")]{.fm-code-in-text}. We can
use relative paths in the image tag as well.

[]{#CH03.htm#pgfId-1012792 .calibre9}Using these features, we can
properly format salient parts of the privacy policy for the Acme
Corporation website. The formatted Privacy Policy page looks much more
complete and professional now. Figure 3.6 shows a part of the completed
Privacy Policy page on the right with the inline elements marked on the
left. Updating the Privacy Policy page to match this design is an
exercise for the reader. The completed Privacy Policy page is available
in the code checkpoint as well as provided in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-03-resources/02](https://github.com/hugoinaction/hugoinaction/tree/chapter-03-resources/02){.url}]{.fm-hyperlink}).

![CH03_F06_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F06_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037111}Figure 3.6 The Privacy Policy page for Acme
Corporation using block elements, inline links, and other formatting.
Note that HTML uses [mailto]{.fm-code-in-figurecaption} URLs for email
links such as [contact@example.org]{.fm-code-in-figurecaption} and
[tel:]{.fm-code-in-figurecaption} for phone numbers. The image only
labels inline elements but the headings also need to be labeled.

[]{#CH03.htm#pgfId-1032869}[Code checkpoint]{.fm-callout-head}
[[https://chapter-03-02.hugoinaction.com](https://chapter-03-02.hugoinaction.com){.url}]{.fm-hyperlink},
[]{#CH03.htm#marker-1032956}and
[]{#CH03.htm#marker-1032941}source[]{#CH03.htm#marker-1032971}
[]{#CH03.htm#marker-1032926}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-03-02.](https://github.com/hugoinaction/hugoinaction/tree/chapter-03-02){.url}]{.fm-hyperlink}
↻ Restart your dev server.

### []{#CH03.htm#pgfId-1012974}3.1.4 HTML {#CH03.htm#sigil_toc_id_76 .fm-head1}

[]{#CH03.htm#pgfId-1013023 .calibre9}[]{#CH03.htm#marker-1012999
.calibre9}[]{#CH03.htm#marker-1013001
.calibre9}[]{#CH03.htm#marker-1013003 .calibre9}While we can do a lot in
plain Markdown, pure HTML and CSS are even more powerful. There is no
way to represent a lot of HTML features with Markdown. Fortunately,
Markdown recognizes this problem. If a Markdown document contains an
HTML tag, the Markdown parser outputs the HTML tag as-is, and it will be
present in the generated output. For example, if we use
[bold]{.fm-code-in-text} [with]{.fm-code-in-text}
[\<em\>emphasis\</em\>]{.fm-code-in-text}, it's converted to
[\<strong\>bold]{.fm-code-in-text} [with]{.fm-code-in-text}
[\<em\>emphasis\</em\>\</strong\>]{.fm-code-in-text}. Markdown,
therefore, is a superset of HTML.

[]{#CH03.htm#pgfId-1013032 .calibre9}Technically, any valid HTML is also
valid Markdown. We can use HTML tags with Markdown to pass those tags to
our content. We can also write Unicode characters using the escape
syntax common in HTML and XML documents. This feature provides access to
the entire set of Unicode characters, including localization letters,
emojis, symbols, and so on. Figure 3.7 shows these elements and how they
are rendered in the browser.

![CH03_F07_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F07_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037153}Figure 3.7 Elements in Markdown, part 4:
Escaping HTML and inline HTML

[]{#CH03.htm#pgfId-1013038 .calibre9}Although we can use any HTML to
provide additional features that are unavailable with Markdown, it is
not a great practice to do so. In fact, *it is strongly advised to
minimize the use of embedded HTML in Markdown content.* Inline HTML can
turn into a security risk if we do not trust the content creators
because they can add arbitrary JavaScript and CSS. Having little control
of the embedded HTML in the hands of the theme creator can turn into a
big problem when attempting to update a theme. Additionally, when we
have the freedom to be creative with HTML, adding layouts, alignment,
color, and other stylistic features to the content, it becomes difficult
to clean up.

[]{#CH03.htm#pgfId-1013072 .calibre9}Hugo disables inline HTML by
default. We can enable it in Markdown via the
[]{#CH03.htm#marker-1013055 .calibre9}[unsafe]{.fm-code-in-text} key in
the [markup/goldmark/renderer]{.fm-code-in-text} section) of the
config.yaml file as the following listing shows. Note that Unicode
characters are not disabled. Also, there is little need for inline HTML
with the shortcodes feature that we will discuss in chapter 5.

[]{#CH03.htm#pgfId-1013132}Listing 3.1 Enabling inline HTML for Hugo's
Goldmark renderer (config.yaml)

``` programlisting
markup:
  goldmark:
    renderer:
      unsafe: true
```

[]{#CH03.htm#pgfId-1013167 .calibre9}When we created the configuration
file for Acme Corporation's website, we specified the copyright
directive as [Copyright &copy;]{.fm-code-in-text}. In figure 3.7, you
can see the escaped HTML for the Unicode-based copyright symbol. The
text that is entered for any key in config.yaml is plain text by
default, but the theme authors have the option of treating that as
Markdown (more details on this in chapter 6). Many themes support
Markdown-based configuration parameters, giving us the power to
customize formatting for our content.

[]{#CH03.htm#pgfId-1013198 .calibre9}In the Privacy Policy page, we used
[TM]{.fm-code-in-text} in the first line to indicate Acme Corporation's
trademark. Now would be a good time to replace it with
[&trade;]{.fm-code-in-text} to get the HTML trademark symbol. Note that
you can also insert direct Unicode characters like ™ for the trademark
symbol. []{#CH03.htm#marker-1013203
.calibre9}[]{#CH03.htm#marker-1013206
.calibre9}[]{#CH03.htm#marker-1013208 .calibre9}

### []{#CH03.htm#pgfId-1013224}3.1.5 Tables, task lists, and code blocks {#CH03.htm#sigil_toc_id_77 .fm-head1}

[]{#CH03.htm#pgfId-1013261 .calibre9}[]{#CH03.htm#marker-1013249
.calibre9}[]{#CH03.htm#marker-1013251
.calibre9}[]{#CH03.htm#marker-1013253
.calibre9}[]{#CH03.htm#marker-1013255
.calibre9}[]{#CH03.htm#marker-1013257 .calibre9}Hugo supports the
extensions to Markdown popularized by GitHub as GFM, including the
syntax for tables, task lists, and code blocks. Figure 3.8 shows these
extensions and how they are rendered in your browser.

[]{#CH03.htm#pgfId-1013322 .calibre9}To create tables, we can write one
row per line, separating each column with the pipe
([\|]{.fm-code-in-text}) character. We can write a row of dashes
([-]{.fm-code-in-text}) to underscore the table header row. Hugo also
supports a shorter form of Markdown tables where we can ignore the pipe
characters at the outer edges of the rows. You can use colons and dashes
in the table to define the column alignment. For example,
[:\--]{.fm-code-in-text} is left-aligned, [:-:]{.fm-code-in-text} is
center-aligned, [\--:]{.fm-code-in-text} is right-aligned, and
[\-\--]{.fm-code-in-text} is undefined (the default is based on language
and theme).

[]{#CH03.htm#pgfId-1013357 .calibre9}Task lists follow the GitHub style,
where we write a dash ([-]{.fm-code-in-text}) followed by square braces
([\[\]]{.fm-code-in-text}) to declare a task. You can even add a cross
([x]{.fm-code-in-text}) between the brackets for a completed job. Task
lists in Hugo render as disabled; there is no automatic enabling because
updating content by clicking the "checkbox" is impossible without
involving a server to edit the files.

![CH03_F08_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F08_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037187}Figure 3.8 Elements in Markdown, part 5:
Tables, task lists, and code blocks

[]{#CH03.htm#pgfId-1013399 .calibre9}Markdown supports blocks of code
using three back ticks (\`\`\`), popularly []{#CH03.htm#marker-1013368
.calibre9}called *code fences*, at the start and end of the code block.
The language name can follow the beginning code fence to get
language-specific code highlighting. Hugo does not enable line numbers
in code by default. We can allow these by setting
[markup/highlight/lineNos]{.fm-code-in-text} in the global configuration
file to [true]{.fm-code-in-text} as the following listing shows.

[]{#CH03.htm#pgfId-1013459}Listing 3.2 Enabling line number highlighting
in Hugo (config.yaml)

``` programlisting
markup:
  highlight:
    lineNos: true
```

[]{#CH03.htm#pgfId-1013494 .calibre9}Hugo supports highlighting code
snippets or overriding code sections by passing additional options to
code fences. For example, passing [{linenos=true,
hl_lines=\[2,\"4-6\"\],linenostart=199}]{.fm-code-in-text} tells Hugo to
override the line number configuration, allowing those to be present, to
start the line numbers at 199, and to highlight lines 2, 4, 5 and 6.
[]{#CH03.htm#marker-1013505 .calibre9}[]{#CH03.htm#marker-1013508
.calibre9}[]{#CH03.htm#marker-1013510
.calibre9}[]{#CH03.htm#marker-1013512
.calibre9}[]{#CH03.htm#marker-1013514 .calibre9}

### []{#CH03.htm#pgfId-1013530}[]{#CH03.htm#marker-1026825}[]{#CH03.htm#marker-1032848}[]{#CH03.htm#marker-1026824}[]{#CH03.htm#marker-1026823}[]{#CH03.htm#marker-1026821}3.1.6 Emojis, IDs, and other Hugo extensions {#CH03.htm#sigil_toc_id_78 .fm-head1}

[]{#CH03.htm#pgfId-1013581 .calibre9}[]{#CH03.htm#marker-1013555
.calibre9}[]{#CH03.htm#marker-1013557
.calibre9}[]{#CH03.htm#marker-1013559
.calibre9}[]{#CH03.htm#marker-1013561 .calibre9}Hugo extends Markdown
with added features that make our day-to-day use of Markdown easier and
more fun. *Emojis* or *emoticons* are []{#CH03.htm#marker-1013586
.calibre9}symbols used to depict an idea or emotion. Emojis are not
enabled by default, and you need to add an entry in the configuration
file to use them. The following listing shows how to enable these.

[]{#CH03.htm#pgfId-1013647}Listing 3.3 Enabling emojis in the Hugo
configuration (config.yaml)

``` programlisting
... 
theme: Eclectic 
enableEmoji: true 
```

[]{#CH03.htm#pgfId-1013711 .calibre9}With this change in config.yaml, we
can use emojis in our content by surrounding the emoji name with colons
(for example, [:smile:]{.fm-code-in-text}). The syntax is similar in
Slack, GitHub, Basecamp, Trello, Gitter, and Bitbucket, and Hugo
supports the same set of emojis. You can use the emoji cheat sheet from
[[https://www.unicode.org/emoji/charts/emoji-list.html](https://www.unicode.org/emoji/charts/emoji-list.html){.url}]{.fm-hyperlink}
for a list of supported emojis.

[]{#CH03.htm#pgfId-1013749 .calibre9}Hugo automatically converts headers
to IDs so that we can link directly to them. We can add custom classes,
IDs, or attributes to any Markdown element by supplying them after the
text in curly braces (for example, [\## heading {#id .className
attribute=\"value\"}]{.fm-code-in-text} creates a second-level heading
with the []{#CH03.htm#marker-1026740 .calibre9}text "heading", the
[id]{.fm-code-in-text} attribute as "id", the CSS class "className", and
a custom attribute named "attribute" whose value is "value").

[]{#CH03.htm#pgfId-1013781 .calibre9}Hugo also supports
[]{#CH03.htm#marker-1013760 .calibre9}HTML *definition lists*, another
type of list in HTML (besides ordered and unordered) that are relatively
less used. To declare a definition list, you can specify the term on one
line, followed by a [:]{.fm-code-in-text}(colon), and a definition on
the next line. Figure 3.9 shows these elements and how they are rendered
in the browser. Apart from this, Hugo supports custom shortcodes by
which we can extend Markdown by adding custom elements that render HTML,
which we will discuss in chapter 4. You can read more about Hugo's
extensions to Markdown on the official website at
[[https://gohugo.io/getting-started/configuration-markup](https://gohugo.io/getting-started/configuration-markup){.url}]{.fm-hyperlink}.

![CH03_F09_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F09_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037221}Figure 3.9 Elements in Markdown, part 6:
Emojis, smart conversions, and definition lists

[]{#CH03.htm#pgfId-1013801}[Note]{.fm-callout-head} Not all themes have
support for all Markdown features. If you plan on relying on something
from a third party, we advise that you first check for support for all
the Markdown features that you want to use. To figure out Markdown
support in a new theme, the markdown.md in the code content with this
book can act as a good sample of all Markdown features.

::: fm-sidebar-block
[]{#CH03.htm#pgfId-1037253 .calibre9}Exercise 3.2

[]{#CH03.htm#pgfId-1037254}Which of the following features is not
supported natively in Hugo's Markdown?

1.  []{#CH03.htm#pgfId-1037255}Bold

2.  []{#CH03.htm#pgfId-1037256}Smaller font size

3.  []{#CH03.htm#pgfId-1037257}Italics

4.  []{#CH03.htm#pgfId-1037258}Table

5.  []{#CH03.htm#pgfId-1037259}Headings

6.  []{#CH03.htm#pgfId-1037266}Horizontal
    lines[]{#CH03.htm#marker-1037260}[]{#CH03.htm#marker-1037261}[]{#CH03.htm#marker-1037262}[]{#CH03.htm#marker-1037263}[]{#CH03.htm#marker-1037264}[]{#CH03.htm#marker-1037265}
:::

## []{#CH03.htm#pgfId-1013923}3.2 Markdown in action {#CH03.htm#sigil_toc_id_79 .fm-head}

[]{#CH03.htm#pgfId-1013933 .calibre9}Using all these content features,
we will now update the About Us page for the Acme Corporation website to
make it more presentable. Figure 3.10 shows the completed page. The core
elements of the About page are already present in the sample text from
chapter 2. The following changes will make the page more presentable.

1.  []{#CH03.htm#pgfId-1013939 .calibre9}Block elements

    1.  []{#CH03.htm#pgfId-1013970 .calibre9}[]{#CH03.htm#marker-1013958
        .calibre9}[]{#CH03.htm#marker-1013960 .calibre9}Add a top-level
        title with the text [About Us]{.fm-code-in-text}.

    2.  []{#CH03.htm#pgfId-1013979 .calibre9}Make Manufacturing,
        Products, and Team second-level headings.

    3.  []{#CH03.htm#pgfId-1013989 .calibre9}Make the following a
        blockquote: We shape the world. You live in it.

    4.  []{#CH03.htm#pgfId-1013999 .calibre9}There is a numbered list in
        the Manufacturing section. Make some bulleted sublists for it.
        []{#CH03.htm#marker-1014008
        .calibre9}[]{#CH03.htm#marker-1014010 .calibre9}

2.  []{#CH03.htm#pgfId-1014016 .calibre9}Inline elements

    1.  []{#CH03.htm#pgfId-1014041 .calibre9}[]{#CH03.htm#marker-1014035
        .calibre9}[]{#CH03.htm#marker-1014037 .calibre9}Format the text
        "three different" and the item names in the numbered list in the
        Manfacturing section as bold.

    2.  []{#CH03.htm#pgfId-1014046 .calibre9}Format the text "200
        shapes" in the Products section as both bold and italicized.

    3.  []{#CH03.htm#pgfId-1014056 .calibre9}Convert text in the
        Products table to links. []{#CH03.htm#marker-1014065
        .calibre9}[]{#CH03.htm#marker-1014067 .calibre9}

3.  []{#CH03.htm#pgfId-1014073 .calibre9}Inline HTML and character codes

    1.  []{#CH03.htm#pgfId-1014100 .calibre9}[]{#CH03.htm#marker-1014092
        .calibre9}[]{#CH03.htm#marker-1014094
        .calibre9}[]{#CH03.htm#marker-1014096 .calibre9}Add a trademark
        sign after Acme Corporation at the top of the page.

    2.  []{#CH03.htm#pgfId-1014125 .calibre9}The character code for a
        circle is [○]{.fm-code-in-text} and for a triangle it's
        [△]{.fm-code-in-text}. Add these to the Design column of the
        Products table. Note that two dashes automatically convert to a
        line.

    3.  []{#CH03.htm#pgfId-1014134 .calibre9}Add the embedded HTML for a
        right-floating image with a 20 px margin pointing to
        /image/draw.jpg in the Manufacturing section. (You'll find
        draw.jpg in the resources for this chapter, but you need to move
        it to the static/image folder.) []{#CH03.htm#marker-1014143
        .calibre9}[]{#CH03.htm#marker-1014145
        .calibre9}[]{#CH03.htm#marker-1014147 .calibre9}

4.  []{#CH03.htm#pgfId-1014153 .calibre9}Tables

    1.  []{#CH03.htm#pgfId-1014178 .calibre9}[]{#CH03.htm#marker-1014172
        .calibre9}[]{#CH03.htm#marker-1014174 .calibre9}Convert the
        comma-separated list to the Products table.
        []{#CH03.htm#marker-1014179
        .calibre9}[]{#CH03.htm#marker-1014184 .calibre9}

5.  []{#CH03.htm#pgfId-1014190 .calibre9}Emojis and definition lists

    1.  []{#CH03.htm#pgfId-1014225 .calibre9}[]{#CH03.htm#marker-1014209
        .calibre9}[]{#CH03.htm#marker-1014211
        .calibre9}[]{#CH03.htm#marker-1014213
        .calibre9}[]{#CH03.htm#marker-1014215 .calibre9}Convert the text
        "smiles" to the emoji ([:smile:]{.fm-code-in-text}).

    2.  []{#CH03.htm#pgfId-1014234 .calibre9}Convert the description of
        team members in the Team area to an HTML definition list.

![CH03_F10_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F10_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037285}Figure 3.10 The About Us page for Acme
Corporation using advanced Markdown features: 1) block elements like
headings and lists, 2) inline elements like bold, italics, and links, 3)
inline HTML and character codes, 4) the tables, and 5) definition lists
and an emoticon. (Font by Peax Webdesign; image under Creative Commons
CC0 from PxHere.)

[]{#CH03.htm#pgfId-1014244 .calibre9}The completed About page is
provided in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-03-resources/03](https://github.com/hugoinaction/hugoinaction/tree/chapter-03-resources/03){.url}]{.fm-hyperlink})
and as a code checkpoint for comparison.

[]{#CH03.htm#pgfId-1032991}[Code checkpoint]{.fm-callout-head}
[[https://chapter-03-03.hugoinaction.com](https://chapter-03-03.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-03-03.](https://github.com/hugoinaction/hugoinaction/tree/chapter-03-03){.url}]{.fm-hyperlink}
↻ Restart your dev server.

## []{#CH03.htm#pgfId-1014278}3.3 Other markup languages {#CH03.htm#sigil_toc_id_80 .fm-head}

[]{#CH03.htm#pgfId-1014427 .calibre9}[]{#CH03.htm#marker-1014412
.calibre9}Hugo natively supports Markdown and HTML for content markup.
The parsers for these languages are written in Go and are embedded in
Hugo, receiving the love and care from the Hugo team to ensure
outstanding performance. Hugo also supports AsciiDoc, pandoc, and
reStructuredText for providing content. These languages are not
available natively in Hugo but instead are supported
[]{#CH03.htm#marker-1014416 .calibre9}via *external helpers*. External
helpers are software programs that Hugo calls over the command line to
get some content parsed. Because they are outside Hugo, Hugo cannot
guarantee their performance. Table 3.1 compares the different markup
languages supported by Hugo.

[]{#CH03.htm#pgfId-1027107}Table 3.1 Content markup languages in Hugo

+----------+----------+----------+----------+----------+----------+
| []{#     | []{      | []{#CH0  | []{      | []{      | []{      |
| CH03.htm | #CH03.ht | 3.htm#pg | #CH03.ht | #CH03.ht | #CH03.ht |
| #pgfId-1 | m#pgfId- | fId-1027 | m#pgfId- | m#pgfId- | m#pgfId- |
| 027119}  | 1027121} | 123}HTML | 1027125} | 1027127} | 1027129} |
|          | Markdown |          | AsciiDoc | pandoc's | reStruct |
|          |          |          |          | Markdown | uredText |
+==========+==========+==========+==========+==========+==========+
| [        | [        | [        | []{      | []{      | []{      |
| ]{#CH03. | ]{#CH03. | ]{#CH03. | #CH03.ht | #CH03.ht | #CH03.ht |
| htm#pgfI | htm#pgfI | htm#pgfI | m#pgfId- | m#pgfId- | m#pgfId- |
| d-102713 | d-102713 | d-102713 | 1027137} | 1027139} | 1027141} |
| 1}**Hugo | 3}Native | 5}Native | External | External | External |
| s        |          |          |          |          |          |
| upport** |          |          |          |          |          |
+----------+----------+----------+----------+----------+----------+
| []       | []{#CH0  | []{#CH0  | []{#CH0  | []{#CH0  | []{#CH0  |
| {#CH03.h | 3.htm#pg | 3.htm#pg | 3.htm#pg | 3.htm#pg | 3.htm#pg |
| tm#pgfId | fId-1027 | fId-1027 | fId-1027 | fId-1027 | fId-1027 |
| -1027143 | 145}Fast | 147}Fast | 149}Slow | 151}Slow | 153}Slow |
| }**Perfo |          |          |          |          |          |
| rmance** |          |          |          |          |          |
+----------+----------+----------+----------+----------+----------+
| []       | []{#CH0  | []{#CH   | []{#CH0  | []{#CH0  | []{#CH0  |
| {#CH03.h | 3.htm#pg | 03.htm#p | 3.htm#pg | 3.htm#pg | 3.htm#pg |
| tm#pgfId | fId-1027 | gfId-102 | fId-1027 | fId-1027 | fId-1027 |
| -1027155 | 157}Good | 7159}Bad | 161}Good | 163}Good | 165}Good |
| }**Human |          |          |          |          |          |
| reada    |          |          |          |          |          |
| bility** |          |          |          |          |          |
+----------+----------+----------+----------+----------+----------+
| []{#     | []       | []{      | []{#     | []       | []{#CH0  |
| CH03.htm | {#CH03.h | #CH03.ht | CH03.htm | {#CH03.h | 3.htm#pg |
| #pgfId-1 | tm#pgfId | m#pgfId- | #pgfId-1 | tm#pgfId | fId-1027 |
| 027167}* | -1027169 | 1027171} | 027173}L | -1027175 | 177}Code |
| *Primary | }Regular | Browser- | ong-form | }Regular | docum    |
| target** | d        | readable | d        | d        | entation |
|          | ocuments | content  | ocuments | ocuments |          |
+----------+----------+----------+----------+----------+----------+

-   []{#CH03.htm#pgfId-1014492 .calibre9}*Markdown* trades simplicity
    and ease of use over features. It is the perfect language for
    website content that does not span beyond a couple of pages. Hugo's
    Markdown parser is fast and powerful. For users new to Hugo, it is
    recommended to begin with the Markdown format unless they already
    know a different markup language.

-   []{#CH03.htm#pgfId-1032058 .calibre9}*HTML (HyperText Markup
    Language)* is also a markup language. Because this is the format
    that web browsers understand, no translation is needed when we
    provide content in this language. HTML is more human-readable in its
    native form than a format like DOC or PDF, and it offers more power
    than most other markup languages. We can write HTML directly in Hugo
    and still take advantage of Hugo's template features that we will
    discuss in the upcoming chapters.

-   []{#CH03.htm#pgfId-1032073 .calibre9}Writing plain HTML does come at
    a disadvantage, though. While writing basic HTML, we tend to mix up
    the page layouts and structure with content. Languages like Markdown
    force us to focus on content, but a strict disciplinarian can eke
    out better performance by using plain HTML with Hugo.

-   []{#CH03.htm#pgfId-1014458 .calibre9}*AsciiDoc* focuses on documents
    with hundreds of pages and is the most popular of the markup
    languages among book authors. It provides more features than
    Markdown, although that comes at the cost of not supporting many
    programming languages and frameworks. The source code for this book
    is in AsciiDoc.

-   []{#CH03.htm#pgfId-1014482 .calibre9}*pandoc* is a file format
    converter that supports a superset of Markdown, which Hugo can
    convert to HTML using its command line.

-   []{#CH03.htm#pgfId-1014472 .calibre9}*reStructuredText* focuses on
    generating documentation projects. It is formally defined and has a
    stricter language providing easier parsing at the cost of
    simplicity.

[]{#CH03.htm#pgfId-1014871 .calibre9}Note that Hugo constantly adds
support for new formats. As of writing this book, there were active
discussions to support AsciiDoc in Hugo natively. With native support,
AsciiDoc would get a performance boost, and we will have an option for
choosing that language for content with minimal downsides.
[]{#CH03.htm#marker-1014873 .calibre9}

## []{#CH03.htm#pgfId-1014880}3.4 Metadata {#CH03.htm#sigil_toc_id_81 .fm-head}

[]{#CH03.htm#pgfId-1014899 .calibre9}[]{#CH03.htm#marker-1014891
.calibre9}[]{#CH03.htm#marker-1014893
.calibre9}[]{#CH03.htm#marker-1014895 .calibre9}By embellishing the raw
textual data with formatting elements and structure, the pages
individually look complete when rendered with the Eclectic theme, which
forms the template and code associated with the Markdown data. While
there is ample content on the pages to form a website, we need to
provide information that we can use to organize content and structure it
in lists, menus, and so forth. Markdown is not the best language to
offer structured data for this. Hugo supports another set of languages
that we call metadata languages. We can use these languages to provide
this information. One of these is
YAML[]{#CH03.htm#marker-1030916}[]{#CH03.htm#marker-1030023}[]{#CH03.htm#marker-1030920}[]{#CH03.htm#marker-1030918}
([[https://yaml.org/](https://yaml.org/){.url}]{.fm-hyperlink}), which
we use in this book. It is a popular language for software configuration
and the easiest to read among the metadata languages.

[]{#CH03.htm#pgfId-1014931 .calibre9}YAML stands for *YAML Ain't Markup
Language* (the *Y* of the YAML stands for YAML, recursive acronym). It
is a language for structured data with keys and values separated by a
colon ([:]{.fm-code-in-text}). The definition of YAML highlights the
fact that the core use case of YAML is around structured data and not
marking data like we do in Markdown or HTML. YAML is sensitive to
spaces. We use YAML for the configuration file for the Acme Corporation
website. YAML supports plain key-value pairs as its primary data
structure and also has support for individual data elements and lists.
In this section, we will go over the syntax and features supported by
YAML in detail.

### []{#CH03.htm#pgfId-1014940}3.4.1 Comments {#CH03.htm#sigil_toc_id_82 .fm-head1}

[]{#CH03.htm#pgfId-1014967 .calibre9}[]{#CH03.htm#marker-1014951
.calibre9}[]{#CH03.htm#marker-1014953
.calibre9}[]{#CH03.htm#marker-1014955
.calibre9}[]{#CH03.htm#marker-1014957 .calibre9}We use hash marks
([\#]{.fm-code-in-text}) for comments in YAML. Comments are single lines
and can appear anywhere in a YAML document. The following listing shows
the syntax for YAML comments. []{#CH03.htm#marker-1014972
.calibre9}[]{#CH03.htm#marker-1014975
.calibre9}[]{#CH03.htm#marker-1014977
.calibre9}[]{#CH03.htm#marker-1014979 .calibre9}

[]{#CH03.htm#pgfId-1015036}Listing 3.4 Adding YAML comments

``` programlisting
# This is a comment. 
```

### []{#CH03.htm#pgfId-1015071}[]{#CH03.htm#marker-1030022}[]{#CH03.htm#marker-1030021}[]{#CH03.htm#marker-1030020}3.4.2 Basic data types {#CH03.htm#sigil_toc_id_83 .fm-head1}

[]{#CH03.htm#pgfId-1015104 .calibre9}[]{#CH03.htm#marker-1027222
.calibre9}[]{#CH03.htm#marker-1027223
.calibre9}[]{#CH03.htm#marker-1027224
.calibre9}[]{#CH03.htm#marker-1027225 .calibre9}For human readability,
YAML automatically guesses data types based on content. It supports
strings, numbers, and Boolean data types. It also supports
[]{#CH03.htm#marker-1027227 .calibre9}nil (also called *null*) types. If
a key or a value is true or false, YAML automatically coerces it to the
Boolean data type. It guesses numbers as numbers, and everything else
becomes a string. The following listing provides examples of YAML's data
types.

[]{#CH03.htm#pgfId-1015164}Listing 3.5 Basic data types in YAML

``` programlisting
key: value     ❶
key2: 12.0     ❷
key3: 10       ❸
key4: "10"     ❹
key5: 
   "hello"     ❺
key6:          ❻
key7: false    ❼
```

[]{#CH03.htm#pgfId-1036016}[❶]{.fm-combinumeral} YAML guesses this type
to be a string.

[]{#CH03.htm#pgfId-1036040}[❷]{.fm-combinumeral} Pressing Enter and the
same indentation declares new keys. This field has a float value.

[]{#CH03.htm#pgfId-1036057}[❸]{.fm-combinumeral} YAML auto-coerces
numerical types. This field is an int.

[]{#CH03.htm#pgfId-1036074}[❹]{.fm-combinumeral} Wrap values in quotes
to declare strings.

[]{#CH03.htm#pgfId-1036091}[❺]{.fm-combinumeral} Because "hello" is
indented, YAML treats it as a value (not a key).

[]{#CH03.htm#pgfId-1036108}[❻]{.fm-combinumeral} A nil value

[]{#CH03.htm#pgfId-1036125}[❼]{.fm-combinumeral} Boolean false (coerced)
[]{#CH03.htm#marker-1036129}[]{#CH03.htm#marker-1036130}[]{#CH03.htm#marker-1036131}[]{#CH03.htm#marker-1036132}

### []{#CH03.htm#pgfId-1015491}[]{#CH03.htm#marker-1030333}3.4.3 Multiline strings {#CH03.htm#sigil_toc_id_84 .fm-head1}

[]{#CH03.htm#pgfId-1015528 .calibre9}[]{#CH03.htm#marker-1015502
.calibre9}[]{#CH03.htm#marker-1015504
.calibre9}[]{#CH03.htm#marker-1015506
.calibre9}[]{#CH03.htm#marker-1015508 .calibre9}YAML is sensitive to
indentation, and newline characters define the beginning of a new YAML
key-value pair. We can use the pipe character ([\|]{.fm-code-in-text})
to create multiline strings that honor new lines and the greater than
sign ([\>]{.fm-code-in-text} ) to create multiline strings insensitive
to new lines. The following listing provides examples of this.

[]{#CH03.htm#pgfId-1015588}Listing 3.6 Using multiline strings with YAML

``` programlisting
key1: |                               ❶
    This is a multiline string 
    where enter keys are valid 
  
    This is another para. The string ends with two 
    empty lines. 
  
  
key2: >                               ❷
    This is a multiline string where new lines 
    will be merged back in. 
  
    Again we need two blank lines to close it. 
```

[]{#CH03.htm#pgfId-1035856}[❶]{.fm-combinumeral} Declares a multiline
string with newline characters

[]{#CH03.htm#pgfId-1035877}[❷]{.fm-combinumeral} Because we use \>, YAML
ignores the newlines and joins the strings into a single line.

### []{#CH03.htm#pgfId-1015705}[]{#CH03.htm#marker-1030332}[]{#CH03.htm#marker-1030331}[]{#CH03.htm#marker-1030330}3.4.4 Lists {#CH03.htm#sigil_toc_id_85 .fm-head1}

[]{#CH03.htm#pgfId-1015742 .calibre9}[]{#CH03.htm#marker-1015716
.calibre9}[]{#CH03.htm#marker-1015718
.calibre9}[]{#CH03.htm#marker-1015720
.calibre9}[]{#CH03.htm#marker-1015722 .calibre9}We can declare lists in
YAML using dashes ([-]{.fm-code-in-text}) or square brackets
([\[\]]{.fm-code-in-text}). The following listing shows how to add
lists.

[]{#CH03.htm#pgfId-1015802}Listing 3.7 Representing lists in YAML

``` programlisting
key1:               ❶
  - a               ❶
  - b               ❶
  - c               ❷
key2: [d, e, f ]    ❷
```

[]{#CH03.htm#pgfId-1035659}[❶]{.fm-combinumeral} Adds a list using a
dash

[]{#CH03.htm#pgfId-1035680}[❷]{.fm-combinumeral} Adds a list using
square brackets
[]{#CH03.htm#marker-1035685}[]{#CH03.htm#marker-1035686}[]{#CH03.htm#marker-1035687}[]{#CH03.htm#marker-1035688}

### []{#CH03.htm#pgfId-1015959}3.4.5 Dictionaries {#CH03.htm#sigil_toc_id_86 .fm-head1}

[]{#CH03.htm#pgfId-1016002 .calibre9}[]{#CH03.htm#marker-1015970
.calibre9}[]{#CH03.htm#marker-1015972
.calibre9}[]{#CH03.htm#marker-1015974
.calibre9}[]{#CH03.htm#marker-1015976 .calibre9}Dictionaries, also
[]{#CH03.htm#marker-1015981 .calibre9}called *maps* or *objects*, are
[]{#CH03.htm#marker-1016007 .calibre9}key-value pairs. The top-level
YAML object is also a dictionary. We can create dictionaries and
subdictionaries in YAML, and they can contain all types. The next
listing shows how to add dictionaries with YAML.

[]{#CH03.htm#pgfId-1016068}Listing 3.8 Representing dictionaries in YAML

``` programlisting
key1:                     ❶
   key11: value13         ❷
   key12:                 ❸
     - List Item 1 
     - List Item 2 
   key13: 10              ❹
key14: {key14: value14}   ❺
```

[]{#CH03.htm#pgfId-1035352}[❶]{.fm-combinumeral} Dictionary key-value
pair

[]{#CH03.htm#pgfId-1035376}[❷]{.fm-combinumeral} The order of elements
in the dictionary does not matter . . .

[]{#CH03.htm#pgfId-1035393}[❸]{.fm-combinumeral} . . . but indentation
does.

[]{#CH03.htm#pgfId-1035410}[❹]{.fm-combinumeral} Keys and values can be
of any type.

[]{#CH03.htm#pgfId-1035427}[❺]{.fm-combinumeral} Alternate dictionary

::: fm-sidebar-block
[]{#CH03.htm#pgfId-1037324 .calibre9}Exercise 3.3

[]{#CH03.htm#pgfId-1037325}YAML does not support which of the following
data types?

1.  []{#CH03.htm#pgfId-1037326}Date

2.  []{#CH03.htm#pgfId-1037327}Boolean

3.  []{#CH03.htm#pgfId-1037328}Map

4.  []{#CH03.htm#pgfId-1037329}List

5.  []{#CH03.htm#pgfId-1037334}Numbers[]{#CH03.htm#marker-1037330}[]{#CH03.htm#marker-1037331}[]{#CH03.htm#marker-1037332}[]{#CH03.htm#marker-1037333}
:::

### []{#CH03.htm#pgfId-1016389}[]{#CH03.htm#marker-1030921}[]{#CH03.htm#marker-1030919}[]{#CH03.htm#marker-1030917}[]{#CH03.htm#marker-1030915}3.4.6 Revisiting config.yaml {#CH03.htm#sigil_toc_id_87 .fm-head1}

[]{#CH03.htm#pgfId-1016438 .calibre9}[]{#CH03.htm#marker-1016400
.calibre9}[]{#CH03.htm#marker-1016402
.calibre9}[]{#CH03.htm#marker-1016404
.calibre9}[]{#CH03.htm#marker-1016406 .calibre9}Now would be a good time
to revisit config.yaml, which we created in chapter 2 and have been
modifying since. It contains key-value pairs for
[]{#CH03.htm#marker-1016411 .calibre9}elements
[]{#CH03.htm#marker-1016417 .calibre9}such as
[baseURL]{.fm-code-in-text} and [title]{.fm-code-in-text}. The order of
these does not matter.

[]{#CH03.htm#pgfId-1016579 .calibre9}The [author]{.fm-code-in-text},
[menu]{.fm-code-in-text}, and [params]{.fm-code-in-text} elements
[]{#CH03.htm#marker-1016478 .calibre9}are []{#CH03.htm#marker-1016484
.calibre9}dictionaries, while [footer]{.fm-code-in-text} and
[main]{.fm-code-in-text} are []{#CH03.htm#marker-1016510 .calibre9}lists
[]{#CH03.htm#marker-1016516 .calibre9}in the [params]{.fm-code-in-text}
and [menu]{.fm-code-in-text} dictionaries. Because
[]{#CH03.htm#marker-1016542 .calibre9}types []{#CH03.htm#marker-1016548
.calibre9}are automatically inferred, [recentCount]{.fm-code-in-text} is
a number, [recents]{.fm-code-in-text} is a string, and
[true]{.fm-code-in-text} automatically converts to a Boolean. Listing
3.9 shows the most recent use of YAML elements in the configuration
file.

[]{#CH03.htm#pgfId-1016614}[Note]{.fm-callout-head} The dashes before
[identifier]{.fm-code-in-text1} in the [main]{.fm-code-in-text1} section
in config.yaml are needed because the main menu is a list, where each
list item is a dictionary.

[]{#CH03.htm#pgfId-1016674}Listing 3.9 YAML configuration for Acme
Corporation (config.yaml)

``` programlisting
baseURL: http://example.org/                ❶
languageCode: en-us 
title: Acme Corporation 
theme: Eclectic 
author:                                     ❷
  facebook: "https://facebook.com/example" 
  twitter: "https://twitter.com/example" 
  email: "contact@example.org" 
  name: "Acme Corporation"                  ❸
  location: New York                        ❸
  phone: (999) 999-9999 
  hours: "*Mon-Fri*: 9:00AM - 6:00PM, ET" 
menu: 
  main:                                     ❹
    - identifier: about                     ❹
      name: About 
      url: /about 
      weight: 100 
    - identifier: contact 
      name: Contact 
      url: /contact 
      weight: 200 
params: 
  color: 
  copyright: "Copyright &copy; 2022 Acme Corporation. 
--> All Rights Reserved." 
  footer: 
    - title: About 
      content: >                            ❺
        Acme Corporation is the world's leading 
        manufacturer of digital shapes. From squares and 
        circles to triangles and hexagons, we have it all. 
        Browse through our collection of various forms with 
        different thicknesses and line styles. We shape 
        the world. You live in it. 
  
  
    - title: Recent Blog Posts 
      recents: blog 
      recentCount: 7                        ❻
    - title: Contact Us 
      contact: true                         ❼
  style: blue 
  logo: /image/logo.png 
  logo_small: /image/logo.png               ❽
  about_us:  > 
    Acme Corporation is the world's leading manufacturer 
    of digital shapes. From squares and circles to 
    triangles and hexagons, we have it all. Browse through 
    our collection of various forms with different 
    thicknesses and line styles. We shape the world. 
    You live in it. 
  
  
  recent_posts: 
    enable: true 
  
markup: 
  goldmark: 
    renderer: 
      unsafe: true 
  highlight: 
    lineNos: true 
enableEmoji: true 
```

[]{#CH03.htm#pgfId-1034678}[❶]{.fm-combinumeral} Key-value pair for the
top-level dictionary

[]{#CH03.htm#pgfId-1034699}[❷]{.fm-combinumeral} Subdictionary

[]{#CH03.htm#pgfId-1034726}[❸]{.fm-combinumeral} Quotes are optional.

[]{#CH03.htm#pgfId-1034743}[❹]{.fm-combinumeral} Main is a list where
each element is a dictionary.

[]{#CH03.htm#pgfId-1034760}[❺]{.fm-combinumeral} Multiline string

[]{#CH03.htm#pgfId-1034777}[❻]{.fm-combinumeral} Numeric values
(integral)

[]{#CH03.htm#pgfId-1034794}[❼]{.fm-combinumeral} Boolean values

[]{#CH03.htm#pgfId-1034811}[❽]{.fm-combinumeral} URL and paths are
strings.
[]{#CH03.htm#marker-1034815}[]{#CH03.htm#marker-1034816}[]{#CH03.htm#marker-1034817}[]{#CH03.htm#marker-1034818}[]{#CH03.htm#marker-1034819}[]{#CH03.htm#marker-1034820}[]{#CH03.htm#marker-1034821}

## []{#CH03.htm#pgfId-1017503}3.5 Other metadata languages {#CH03.htm#sigil_toc_id_88 .fm-head}

[]{#CH03.htm#pgfId-1017522 .calibre9}[]{#CH03.htm#marker-1017514
.calibre9}[]{#CH03.htm#marker-1017516
.calibre9}[]{#CH03.htm#marker-1017518 .calibre9}YAML also has the same
tradeoff as Markdown: human readability over a strict specification.
This tradeoff comes with complexities in parsers and weird edge cases
that might not be easy to understand. We have chosen YAML in this book
for the configuration file due to its popularity and ease of
readability. Hugo supports TOML and JSON as other metadata languages
apart from YAML. Appendix B goes over TOML and JSON in detail, and table
3.2 provides a quick comparison of their features.

[]{#CH03.htm#pgfId-1027635}Table 3.2 Metadata language comparison

+-----------------+-----------------+-----------------+-----------------+
| []{#CH03.htm#   | ![yaml_new]     | ![toml_new]     | ![JSON_new]     |
| pgfId-1027643}  | (vertopal_8097d | (vertopal_8097d | (vertopal_8097d |
|                 | 56a5e0b4a329554 | 56a5e0b4a329554 | 56a5e0b4a329554 |
|                 | 5dc13bbc2bee/Im | 5dc13bbc2bee/Im | 5dc13bbc2bee/Im |
|                 | ages/yaml_new.p | ages/toml_new.p | ages/JSON_new.p |
|                 | ng){.calibre1}\ | ng){.calibre1}\ | ng){.calibre1}\ |
|                 | []{#CH03.htm    | []{#CH03.htm    | []{#CH03.htm    |
|                 | #pgfId-1027645} | #pgfId-1027647} | #pgfId-1027649} |
+=================+=================+=================+=================+
| []{#C           | [               | [               | [               |
| H03.htm#pgfId-1 | ]{#CH03.htm#pgf | ]{#CH03.htm#pgf | ]{#CH03.htm#pgf |
| 027651}**Name** | Id-1027653}YAML | Id-1027655}TOML | Id-1027657}JSON |
+-----------------+-----------------+-----------------+-----------------+
| []{#CH          | []{             | []{#CH03.htm#pg | [               |
| 03.htm#pgfId-10 | #CH03.htm#pgfId | fId-1027663}Low | ]{#CH03.htm#pgf |
| 27659}**Overall | -1027661}Medium |                 | Id-1027665}High |
| popularity**    |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| []{#            | []{#CH03.htm#pg | [               | []{#CH03.htm#pg |
| CH03.htm#pgfId- | fId-1027669}Low | ]{#CH03.htm#pgf | fId-1027673}Low |
| 1027667}**Usage |                 | Id-1027671}High |                 |
| in Hugo         |                 |                 |                 |
| community**     |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| []{#CH03.htm    | [               | []{             | []{             |
| #pgfId-1027675} | ]{#CH03.htm#pgf | #CH03.htm#pgfId | #CH03.htm#pgfId |
| **Readability** | Id-1027677}High | -1027679}Medium | -1027681}Medium |
+-----------------+-----------------+-----------------+-----------------+
| []{#C           | []{#            | []{             | []{             |
| H03.htm#pgfId-1 | CH03.htm#pgfId- | #CH03.htm#pgfId | #CH03.htm#pgfId |
| 027683}**GitHub | 1027685}Present | -1027687}Absent | -1027689}Absent |
| support with    |                 |                 |                 |
| Markdown**      |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| []{#CH03.h      | []              | []{#CH03.htm#pg | []{#CH03        |
| tm#pgfId-102769 | {#CH03.htm#pgfI | fId-1027695}One | .htm#pgfId-1027 |
| 1}**Objective** | d-1027693}Human | way of doing    | 697}Information |
|                 | readability     | things          | interchange     |
+-----------------+-----------------+-----------------+-----------------+
| []{             | []{#            | []{#            | []{#            |
| #CH03.htm#pgfId | CH03.htm#pgfId- | CH03.htm#pgfId- | CH03.htm#pgfId- |
| -1027699}**Data | 1027701}number, | 1027703}number, | 1027705}number, |
| types           | string,         | string,         | string,         |
| supported**     | boolean, null,  | boolean, date,  | boolean, null,  |
|                 | list,           | list,           | list,           |
|                 | dictionary      | dictionary      | dictionary      |
|                 |                 |                 | []{#CH03.       |
|                 |                 |                 | htm#marker-1032 |
|                 |                 |                 | 280}[]{#CH03.ht |
|                 |                 |                 | m#marker-103228 |
|                 |                 |                 | 1}[]{#CH03.htm# |
|                 |                 |                 | marker-1032282} |
+-----------------+-----------------+-----------------+-----------------+

-   []{#CH03.htm#pgfId-1017527 .calibre9}*TOML (Tom's Obvious Minimal
    Language) has the objective of ensuring that there is one standard
    way of writing a particular data item.*[]{#CH03.htm#marker-1017541
    .calibre9} YAML's automatic guessing of data types makes it easier
    to read but can lead to cases where YAML infers a wrong type. For
    example, plain text is a string, but if the plain text is the word
    true, it becomes a Boolean. TOML avoids that confusion with a
    strongly defined system where we have to enclose every string in
    quotes.

-   []{#CH03.htm#pgfId-1017554 .calibre9}*JSON (JavaScript Object
    Notation) is a popular format for exchanging information and is much
    easier than YAML and TOML for generation and machine
    parsing.*[]{#CH03.htm#marker-1017564 .calibre9} The most significant
    advantage of JSON is the availability of high-performance parsers in
    most programming languages and familiarity with this format among
    developers. Graphical editors and CMS solutions typically use JSON
    for Hugo interaction.

[]{#CH03.htm#pgfId-1017587}[Note]{.fm-callout-head} You will find a lot
of resources from the Hugo community in the TOML format. TOML is more
straightforward to copy and paste due to its nonstrict spacing policy.
If you happen to write a parser, TOML will be much easier to parse. For
an advanced Hugo user, TOML is an excellent language to know.

## []{#CH03.htm#pgfId-1018073}3.6 Front matter {#CH03.htm#sigil_toc_id_89 .fm-head}

[]{#CH03.htm#pgfId-1018090 .calibre9}[]{#CH03.htm#marker-1018084
.calibre9}[]{#CH03.htm#marker-1018086 .calibre9}Apart from the global
site-wide configuration, we also need page-specific metadata like
creation date, tags, URLs, author name, and so forth. Hugo needs this
information to organize the page in the website and to provide
information about this page to the broader internet, such as search
engines and social networks. We can also show some metadata in the
sidebar of the page.

[]{#CH03.htm#pgfId-1018153 .calibre9}To provide page-specific metadata,
Hugo has the concept of front matter. The *front matter* is a set of
key-value pairs that define the metadata for the content provided right
before the content. With the front matter, we can provide metadata on
the same file as the main content. The front matter is also called the
*page metadata section* (*page metadata* or *metadata* in short) as
[]{#CH03.htm#marker-1018136 .calibre9}well []{#CH03.htm#marker-1018142
.calibre9}as the *page configuration*. Those terms are used
interchangeably in this book.

[]{#CH03.htm#pgfId-1018162 .calibre9}To place YAML content in the front
matter of a page, we need to wrap it with three dashes
([\-\--]{.fm-code-in-text}) and place it at the top of the page. The
following listing shows how to use the three-dash format to identify
YAML as the content metadata language.

[]{#CH03.htm#pgfId-1018228}Listing 3.10 Identifying the YAML metadata
for a markup page in Hugo

``` programlisting
---                                    ❶
  
# Note that the file extension is .md 
<metadata section in YAML> 
---                                    ❶
<data section in Markdown> 
```

[]{#CH03.htm#pgfId-1034525}[❶]{.fm-combinumeral} Wraps a YAML grouping
block

[]{#CH03.htm#pgfId-1018330 .calibre9}Hugo is clever with the metadata
and provides a reasonable set of defaults. That is why we have been able
to get along so far, providing little metadata and still being able to
render content. By default, Hugo receives the information from the
filename, the Git version control system (if used), and the OS
attributes like the modified date. We need to deal in the front matter
only if we need to do something that Hugo cannot guess itself or need to
override it to perform specific tasks.

::: fm-sidebar-block
[]{#CH03.htm#pgfId-1037351 .calibre9}Metadata before content

[]{#CH03.htm#pgfId-1037352}The concept of having metadata before the
content has been present in computers since the beginning of
programming. Pascal represents strings by a length followed by raw
binary data of that length. Many binary file formats start with a
signature that is the metadata associated with the file. For example, if
you open a .pdf file in a text editor, it starts with
[%PDF]{.fm-code-in-text1}, a .png file begins with
[.PNG]{.fm-code-in-text1}, and a .gif file with
[GIF]{.fm-code-in-text1}. Jekyll, the first modern static site builder,
introduced metadata in the front matter for all static site builders,
and Hugo adopted the concept.
:::

### []{#CH03.htm#pgfId-1018381}[]{#CH03.htm#marker-1028574}[]{#CH03.htm#marker-1028573}[]{#CH03.htm#marker-1028572}3.6.1 Common metadata elements in the front matter {#CH03.htm#sigil_toc_id_90 .fm-head1}

[]{#CH03.htm#pgfId-1018400 .calibre9}[]{#CH03.htm#marker-1018392
.calibre9}[]{#CH03.htm#marker-1018394
.calibre9}[]{#CH03.htm#marker-1018396 .calibre9}The front matter
consists of all the metadata properties that are associated with the
specific page. Just like a website has a configuration file
(config.yaml), we can place page-specific YAML content on the page
itself. We can override these properties in the front matter. Table 3.3
presents some of the most common properties.

[]{#CH03.htm#pgfId-1028046}Table 3.3 Common front matter properties in
Hugo. Examples shown are for the About Us page in Acme Corporation's
website.

+------+--------------------+--------------------+--------------------+
| []{  | []{#CH03.htm#pgf   | []{#CH03.htm       | []{#CH03.htm#pgf   |
| #CH0 | Id-1028056}Default | #pgfId-1028058}Use | Id-1028060}Example |
| 3.ht |                    |                    |                    |
| m#pg |                    |                    |                    |
| fId- |                    |                    |                    |
| 1028 |                    |                    |                    |
| 054} |                    |                    |                    |
| Name |                    |                    |                    |
+======+====================+====================+====================+
| [    | []{#CH03.htm#      | []{#CH03.htm#      | []{#CH03.htm#p     |
| ]{#C | pgfId-1028064}Name | pgfId-1028066}Used | gfId-1028068}About |
| H03. | of the file        | in summary pages   | Us                 |
| htm# | []{#CH03.h         | and RSS feeds      |                    |
| pgfI | tm#marker-1028171} | provided to search |                    |
| d-10 |                    | engines. We may    |                    |
| 2806 |                    | want to show these |                    |
| 2}[t |                    | properties on the  |                    |
| itle |                    | page itself.       |                    |
| ]{.f |                    |                    |                    |
| m-co |                    |                    |                    |
| de-i |                    |                    |                    |
| n-fi |                    |                    |                    |
| gure |                    |                    |                    |
| capt |                    |                    |                    |
| ion} |                    |                    |                    |
+------+--------------------+--------------------+--------------------+
| []{  | []{#CH03.htm#pgf   | []{#CH03.htm#pgfI  | []{#CH03.htm#pgf   |
| #CH0 | Id-1028072}\<empty | d-1028074}Provided | Id-1028076}World's |
| 3.ht | string\>           | []{#CH03.htm       | leading            |
| m#pg |                    | #marker-1028177}to | manufacturer of    |
| fId- |                    | search engines;    | digital shapes. We |
| 1028 |                    | can be used in     | shape the world.   |
| 070} |                    | listing pages.     | You live in it.    |
| [des |                    |                    |                    |
| crip |                    |                    |                    |
| tion |                    |                    |                    |
| ]{.f |                    |                    |                    |
| m-co |                    |                    |                    |
| de-i |                    |                    |                    |
| n-fi |                    |                    |                    |
| gure |                    |                    |                    |
| capt |                    |                    |                    |
| ion} |                    |                    |                    |
+------+--------------------+--------------------+--------------------+
| []{# | []{                | []{#CH03.htm       | []{#CH03.htm#pgf   |
| CH03 | #CH03.htm#pgfId-10 | #pgfId-1028082}The | Id-1028084}January |
| .htm | 28080}Git-modified | date is associated | 01, 2020           |
| #pgf | []{#CH03.htm#m     | with this page.    |                    |
| Id-1 | arker-1028181}date | This field helps   |                    |
| 0280 | if                 | in sorting the     |                    |
| 78}[ | [enabl             | pages by the       |                    |
| date | eGitInfo]{.fm-code | creation date.     |                    |
| ]{.f | -in-figurecaption} |                    |                    |
| m-co | is                 |                    |                    |
| de-i | [true]{.fm-code    |                    |                    |
| n-fi | -in-figurecaption} |                    |                    |
| gure | in config.yaml,    |                    |                    |
| capt | otherwise it's     |                    |                    |
| ion} | January 1, 01 AD.  |                    |                    |
+------+--------------------+--------------------+--------------------+
| []{# | []{#CH03.htm#pgf   | []{#CH03.htm#pgfI  | []{#CH03.htm#      |
| CH03 | Id-1028088}\<empty | d-1028090}Keywords | pgfId-1028092}Acme |
| .htm | list\>             | []{#CH03.htm#m     | Corporation, Acme  |
| #pgf |                    | arker-1028187}used | Line Company,      |
| Id-1 |                    | in the metadata    | Circle, Line,      |
| 0280 |                    | passed on to bots  | Triangle           |
| 86}[ |                    | and search         |                    |
| keyw |                    | engines.           |                    |
| ords |                    |                    |                    |
| ]{.f |                    |                    |                    |
| m-co |                    |                    |                    |
| de-i |                    |                    |                    |
| n-fi |                    |                    |                    |
| gure |                    |                    |                    |
| capt |                    |                    |                    |
| ion} |                    |                    |                    |
+------+--------------------+--------------------+--------------------+
| []{# | []{#CH03.htm#      | []{#CH03.htm#pgf   | [                  |
| CH03 | pgfId-1028096}Name | Id-1028098}Content | ]{#CH03.htm#pgfId- |
| .htm | []{#CH03.htm       | type for the       | 1028100}\<absent\> |
| #pgf | #marker-1028191}of | theme. Each type   |                    |
| Id-1 | the subfolder      | can render         |                    |
| 0280 | containing the     | differently (we    |                    |
| 94}[ | current file;      | discuss content    |                    |
| type | default if this    | types in chapter   |                    |
| ]{.f | file is present    | 6).                |                    |
| m-co | directly in the    |                    |                    |
| de-i | content folder.    |                    |                    |
| n-fi |                    |                    |                    |
| gure |                    |                    |                    |
| capt |                    |                    |                    |
| ion} |                    |                    |                    |
+------+--------------------+--------------------+--------------------+
| []{# | []                 | []{#CH03.htm       | [                  |
| CH03 | {#CH03.htm#pgfId-1 | #pgfId-1028106}The | ]{#CH03.htm#pgfId- |
| .htm | 028104}\<folder\>/ | []{#CH03.htm#      | 1028108}\<absent\> |
| #pgf | \<title or         | marker-1028197}URL |                    |
| Id-1 | filename if not    | of the file in the |                    |
| 0281 | title\>            | web browser. Hugo  |                    |
| 02}[ |                    | also provides the  |                    |
| slug |                    | [url]{.fm-code     |                    |
| ]{.f |                    | -in-figurecaption} |                    |
| m-co |                    | field for this     |                    |
| de-i |                    | task. The          |                    |
| n-fi |                    | [slug]{.fm-code    |                    |
| gure |                    | -in-figurecaption} |                    |
| capt |                    | is the final part  |                    |
| ion} |                    | of the URL and     |                    |
|      |                    | honors the         |                    |
|      |                    | localization for   |                    |
|      |                    | multi-language     |                    |
|      |                    | content as the URL |                    |
|      |                    | ignores it. If we  |                    |
|      |                    | use                |                    |
|      |                    | [slug]{.fm-code    |                    |
|      |                    | -in-figurecaption} |                    |
|      |                    | and later add      |                    |
|      |                    | languages, the     |                    |
|      |                    | page may get the   |                    |
|      |                    | language prefix.   |                    |
+------+--------------------+--------------------+--------------------+
| [    | []{#CH03.htm#p     | []{#CH0            | [                  |
| ]{#C | gfId-1028112}false | 3.htm#pgfId-102811 | ]{#CH03.htm#pgfId- |
| H03. |                    | 4}[draft]{.fm-code | 1028116}\<absent\> |
| htm# |                    | -in-figurecaption} |                    |
| pgfI |                    | marks              |                    |
| d-10 |                    | []{#CH03.htm#mark  |                    |
| 2811 |                    | er-1028294}content |                    |
| 0}[d |                    | that is committed  |                    |
| raft |                    | but is not         |                    |
| ]{.f |                    | complete. Hugo     |                    |
| m-co |                    | does not render    |                    |
| de-i |                    | draft content by   |                    |
| n-fi |                    | default. We can    |                    |
| gure |                    | set [buildDrafts:  |                    |
| capt |                    | true]{.fm-code     |                    |
| ion} |                    | -in-figurecaption} |                    |
|      |                    | or pass in         |                    |
|      |                    | [bui               |                    |
|      |                    | ldDrafts]{.fm-code |                    |
|      |                    | -in-figurecaption} |                    |
|      |                    | to build these     |                    |
|      |                    | pages (which we    |                    |
|      |                    | can do in the Acme |                    |
|      |                    | project in         |                    |
|      |                    | development mode). |                    |
+------+--------------------+--------------------+--------------------+
| []{  | []{#CH03.htm#      | []{#CH03.htm#pgfId | [                  |
| #CH0 | pgfId-1028120}\[\] | -1028122}Alternate | ]{#CH03.htm#pgfId- |
| 3.ht |                    | URLs can           | 1028124}\<absent\> |
| m#pg |                    | []{#CH03.htm#ma    |                    |
| fId- |                    | rker-1028207}point |                    |
| 1028 |                    | to the same        |                    |
| 118} |                    | content, allowing  |                    |
| [ali |                    | us to retain our   |                    |
| ases |                    | links. Use for     |                    |
| ]{.f |                    | migration from an  |                    |
| m-co |                    | old system to      |                    |
| de-i |                    | Hugo.              |                    |
| n-fi |                    |                    |                    |
| gure |                    |                    |                    |
| capt |                    |                    |                    |
| ion} |                    |                    |                    |
+------+--------------------+--------------------+--------------------+
| []   | []                 | []{#CH03.htm#      | [                  |
| {#CH | {#CH03.htm#pgfId-1 | pgfId-1028130}This | ]{#CH03.htm#pgfId- |
| 03.h | 028128}\<depends\> | []{#CH03.htm#ma    | 1028132}\<absent\> |
| tm#p |                    | rker-1028212}field |                    |
| gfId |                    | marks the layout   |                    |
| -102 |                    | that Hugo uses to  |                    |
| 8126 |                    | render the page. A |                    |
| }[la |                    | single page has a  |                    |
| yout |                    | single layout,     |                    |
| ]{.f |                    | while an index     |                    |
| m-co |                    | page with a list   |                    |
| de-i |                    | of pages has a     |                    |
| n-fi |                    | list layout. We    |                    |
| gure |                    | will go into       |                    |
| capt |                    | layouts in chapter |                    |
| ion} |                    | 7.                 |                    |
+------+--------------------+--------------------+--------------------+
| []{  | [                  | []{#CH03.htm#      | [                  |
| #CH0 | ]{#CH03.htm#pgfId- | pgfId-1028138}Lets | ]{#CH03.htm#pgfId- |
| 3.ht | 1028136}\<absent\> | us set a front     | 1028140}\<absent\> |
| m#pg |                    | matter property on |                    |
| fId- |                    | all child pages in |                    |
| 1028 |                    | a folder. Chapter  |                    |
| 134} |                    | 7 discusses        |                    |
| [cas |                    | cascade in detail. |                    |
| cade |                    |                    |                    |
| ]{.f |                    |                    |                    |
| m-co |                    |                    |                    |
| de-i |                    |                    |                    |
| n-fi |                    |                    |                    |
| gure |                    |                    |                    |
| capt |                    |                    |                    |
| ion} |                    |                    |                    |
+------+--------------------+--------------------+--------------------+
| []{  | []{#CH03.htm#pg    | []{#CH03.htm       | [                  |
| #CH0 | fId-1028144}\<gets | #pgfId-1028146}The | ]{#CH03.htm#pgfId- |
| 3.ht | from config\>      | []{#CH03.htm#mark  | 1028148}\<absent\> |
| m#pg |                    | er-1028221}formats |                    |
| fId- |                    | this page needs to |                    |
| 1028 |                    | be rendered in     |                    |
| 142} |                    | HTML or JSON, for  |                    |
| [out |                    | example. We will   |                    |
| puts |                    | use outputs in     |                    |
| ]{.f |                    | chapter 9.         |                    |
| m-co |                    |                    |                    |
| de-i |                    |                    |                    |
| n-fi |                    |                    |                    |
| gure |                    |                    |                    |
| capt |                    |                    |                    |
| ion} |                    |                    |                    |
+------+--------------------+--------------------+--------------------+
| []{# | [                  | []{#CH03.htm#      | [                  |
| CH03 | ]{#CH03.htm#pgfId- | pgfId-1028154}Used | ]{#CH03.htm#pgfId- |
| .htm | 1028152}\<absent\> | to                 | 1028156}\<absent\> |
| #pgf |                    | []{#CH03.htm#mar   |                    |
| Id-1 |                    | ker-1028226}supply |                    |
| 0281 |                    | tags with the      |                    |
| 50}[ |                    | default Hugo       |                    |
| tags |                    | config. There can  |                    |
| ]{.f |                    | be multiple keys   |                    |
| m-co |                    | that may or may    |                    |
| de-i |                    | not include        |                    |
| n-fi |                    | [tags]{.fm-code-   |                    |
| gure |                    | in-figurecaption}. |                    |
| capt |                    | We will discuss    |                    |
| ion} |                    | taxonomies and     |                    |
|      |                    | tags in chapter 4. |                    |
+------+--------------------+--------------------+--------------------+
| [    | [                  | []{#C              | [                  |
| ]{#C | ]{#CH03.htm#pgfId- | H03.htm#pgfId-1028 | ]{#CH03.htm#pgfId- |
| H03. | 1028160}\<absent\> | 162}Theme-specific | 1028164}\<absent\> |
| htm# |                    | parameters for the |                    |
| pgfI |                    | page.              |                    |
| d-10 |                    |                    |                    |
| 2815 |                    |                    |                    |
| 8}** |                    |                    |                    |
| \<ot |                    |                    |                    |
| hers |                    |                    |                    |
| \>** |                    |                    |                    |
+------+--------------------+--------------------+--------------------+

[]{#CH03.htm#pgfId-1019532 .calibre9}To update these properties in the
About Us page for the Acme Corporation website, we can add the code in
listing 3.11 to the top of the page
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-03-resources/04](https://github.com/hugoinaction/hugoinaction/tree/chapter-03-resources/04){.url}]{.fm-hyperlink}).
We can supply the front matter in YAML format, enclosing it in three
dashes ([\-\--]{.fm-code-in-text}).

[]{#CH03.htm#pgfId-1019617}Listing 3.11 Adding front matter to the About
page (content/about.md)

``` programlisting
--- 
title: About Us 
date: 2020-01-01T00:00:00Z 
description: World's leading manufacturer of digital shapes. 
    We shape the world. You live in it. 
draft: false 
--- 
  
<page content> 
```

[]{#CH03.htm#pgfId-1033045}The Eclectic theme places the title on the
page so we do not need to add it manually. Other than that, there seems
to be no significant changes. You should see the updated description and
the document title should also show up in the tab bar (see figure 3.11),
when you view the generated HTML (see figure 3.12).

![CH03_F11_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F11_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037373}Figure 3.11 Address bar update with the front
matter content

![CH03_F12_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F12_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037407}Figure 3.12 Metadata updates with the front
matter content

[]{#CH03.htm#pgfId-1037365}[Code checkpoint]{.fm-callout-head}
[[https://chapter-03-04.hugoinaction.com](https://chapter-03-04.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-03-04](https://github.com/hugoinaction/hugoinaction/tree/chapter-03-04){.url}]{.fm-hyperlink}.

[]{#CH03.htm#pgfId-1019861}[Note]{.fm-callout-head} The rest of this
book discusses more front matter entries and use cases. One crucial
feature missing in this chapter is the [cascade]{.fm-code-in-text1}
front matter entry addressed in chapter 7.

::: fm-sidebar-block
[]{#CH03.htm#pgfId-1037437 .calibre9}Exercise 3.4

[]{#CH03.htm#pgfId-1037438}We can use the
[\_\_\_\_\_\_]{.fm-code-in-text1} front matter entry in Hugo to define a
custom URL endpoint for the web page.
:::

[]{#CH03.htm#pgfId-1019895 .calibre9}We can enable only some of the
features such as [draft]{.fm-code-in-text} via the front matter. The
front matter will get more important once we start getting into
taxonomies in chapter 4. The front matter and the content form the
updates that a content creator has to work on regularly. With a working
knowledge of these two areas, we can design as many pages of content as
we want in a website. GitHub supports rendering front matter and
Markdown when we use YAML in the front matter, making it easy to
navigate the content. Figure 3.13 shows the About Us page on GitHub.

![CH03_F13_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F13_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037457}Figure 3.13 GitHub's default rendering of the
front matter along with Markdown

::: fm-sidebar-block
[]{#CH03.htm#pgfId-1037489 .calibre9}Front matter language conversion

[]{#CH03.htm#pgfId-1037490}Hugo supports all metadata languages in
parallel. Different documents can use other metadata languages, and Hugo
parses these correctly. Hugo can also convert content between metadata
languages. We can use the Hugo command line to convert the content to
TOML by entering [hugo]{.fm-code-in-text1} [convert]{.fm-code-in-text1}
[toTOML]{.fm-code-in-text1} [\<content]{.fm-code-in-text1}
[file\>]{.fm-code-in-text1}. We can similarly convert to JSON/YAML by
updating the command with [toJSON]{.fm-code-in-text1} and
[toYAML]{.fm-code-in-text1}, respectively.

\

[]{#CH03.htm#pgfId-1037491}There is no real reason to do this conversion
because Hugo supports all of these languages in the front matter. Most
users stick with the choice of metadata language they began with, but
there is a straightforward command-line interface available if you need
to switch to a different one.
[]{#CH03.htm#marker-1037492}[]{#CH03.htm#marker-1037493}[]{#CH03.htm#marker-1037494}
:::

### []{#CH03.htm#pgfId-1019992}3.6.2 Data-driven landing page using the front matter {#CH03.htm#sigil_toc_id_91 .fm-head1}

[]{#CH03.htm#pgfId-1020013 .calibre9}[]{#CH03.htm#marker-1020003
.calibre9}[]{#CH03.htm#marker-1020005
.calibre9}[]{#CH03.htm#marker-1020007
.calibre9}[]{#CH03.htm#marker-1020009 .calibre9}Front matter is not just
for metadata; we can use it to specify the data of the page. The theme
authors are free to use the structured data supplied in the front matter
with any page. Some elements like carousels benefit from structured
data. We can provide individual pages for the carousel as key-value
pairs. Theme authors can embed these in the right places in the template
much more easily than they can do with Markdown, which acts as one big
blob.

[]{#CH03.htm#pgfId-1020018 .calibre9}The Eclectic theme, for example,
has support for photo and text carousels, icon-based lists,
testimonials, client icons, etc., all driven by data that we can provide
in the page's front matter. You can place the provided data-driven.md
file
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-03-resources/05](https://github.com/hugoinaction/hugoinaction/tree/chapter-03-resources/05){.url}]{.fm-hyperlink})
in the content folder to try out this feature. You can view the
corresponding page at http:[//]{.fm-hyperlink}
localhost:1313/data-driven to get a page similar to that shown in figure
3.14.

[]{#CH03.htm#pgfId-1033111}[Code checkpoint]{.fm-callout-head}
[[https://chapter-03-05.hugoinaction.com](https://chapter-03-05.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-03-05](https://github.com/hugoinaction/hugoinaction/tree/chapter-03-05){.url}]{.fm-hyperlink}.

![CH03_F14_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F14_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037515}Figure 3.14 A carousel for the Acme
Corporation website that makes use of the data-driven approach and uses
the front matter with the Eclectic theme. We can place data-driven.md in
the content folder to get this page.

[]{#CH03.htm#pgfId-1020149 .calibre9}Some themes (like the Universal
theme) can also take the information in the global config.yaml or read
it from the data folder. You should read the documentation for your
theme to figure out how to use these features.

[]{#CH03.htm#pgfId-1020169 .calibre9}The approach of providing
structured metadata in the front matter, as a global configuration, or
in the data folder comes at a cost. Because structured data is specific
to the theme, your custom data does not get picked up automatically if
you switch themes. For many users, using a prebuilt theme and providing
structured data are best suited to their needs because they likely chose
that theme for those features. It is also easier to maintain data in a
format like YAML rather than plain HTML.

[]{#CH03.htm#pgfId-1020175 .calibre9}Themes provide many built-in
features and complicated logic to enable compatibility across screen
sizes when presenting our data. We will create our structured data-based
web pages in chapter 6. []{#CH03.htm#marker-1020177
.calibre9}[]{#CH03.htm#marker-1020180
.calibre9}[]{#CH03.htm#marker-1020182
.calibre9}[]{#CH03.htm#marker-1020184
.calibre9}[]{#CH03.htm#marker-1020186
.calibre9}[]{#CH03.htm#marker-1020188 .calibre9}

::: fm-sidebar-block
[]{#CH03.htm#pgfId-1037545 .calibre9}Exercise 3.5

[]{#CH03.htm#pgfId-1037546}True or False: Theoretically, we could build
a Hugo website with all the content in the front matter and nothing in
the Markdown body of the web pages.
:::

## []{#CH03.htm#pgfId-1020204}3.7 Benefits of using markup and metadata languages {#CH03.htm#sigil_toc_id_92 .fm-head}

[]{#CH03.htm#pgfId-1020214 .calibre9}[]{#CH03.htm#marker-1020215
.calibre9}In the Jamstack, we use markup and metadata languages across
multiple files to replace the role of the database in the traditional
web stack. The benefit of giving up on the database is not obvious when
we move to the Jamstack. Databases have been optimized for over 30 years
and provide vast storage optimizations and querying capabilities.
Databases (both SQL and NoSQL) require some structure to the data they
store. Databases expect some schema, even if it is different in every
document. They are not very useful if there is no schema/structure at
all, as in the case of formatted text.

[]{#CH03.htm#pgfId-1020223 .calibre9}In most database-oriented content
management systems, the formatted content of the web page gets shoved
into a single column or assigned to a single key. With textual content
stored as files on disk, we get access to a massive set of utilities
that work on text files, from standard bash tools like grep to
general-purpose software like version management systems (Git).

### []{#CH03.htm#pgfId-1020229}3.7.1 Content versioning {#CH03.htm#sigil_toc_id_93 .fm-head1}

[]{#CH03.htm#pgfId-1020248 .calibre9}[]{#CH03.htm#marker-1020240
.calibre9}[]{#CH03.htm#marker-1020242
.calibre9}[]{#CH03.htm#marker-1020244 .calibre9}When we write and commit
text content alongside code using a version control system, we inherit
the robust versioning scheme built for source code and can use it for
versioning content. With Markdown, the formatting updates are easy to
understand in the diff view. We get full support for forks, branches,
and pull requests for content. We can have a proper software life cycle
for the website content, including staging, branch views, and versioned
content releases. If we want, we can write scripts to validate content,
check spellings, or fix structure, which can trigger code commits, just
like we built the website for GitHub deployment in chapter 2.

[]{#CH03.htm#pgfId-1020253 .calibre9}This support is present not only in
Hugo but in the entire Jamstack. Jamstack enables this by moving content
from databases to markup. We can see the diff view in action on GitHub
by navigating to the commit pages for the changes we make to the Acme
Corporation website. A sample diff view is shown in figure 3.15.
[]{#CH03.htm#marker-1020255 .calibre9}[]{#CH03.htm#marker-1020258
.calibre9}

![CH03_F15_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F15_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037565}Figure 3.15 A sample diff view for the About
page on GitHub. We can view, review, and manage each content change as
code.[]{#CH03.htm#marker-1020260}

![CH03_F16_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F16_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037599}Figure 3.16 Content language over web forms:
Gabby, the lead editor for the Acme Corporation website, tries to
understand what moving from a web form to a document for content entry
entails.

### []{#CH03.htm#pgfId-1020300}3.7.2 Theme independence {#CH03.htm#sigil_toc_id_94 .fm-head1}

[]{#CH03.htm#pgfId-1020331 .calibre9}[]{#CH03.htm#marker-1020325
.calibre9}[]{#CH03.htm#marker-1020327 .calibre9}A lot of moving of the
website from Markdown to the configuration is standardized. Content
authors put things like text colors and HTML spacing in Markdown. The
elements that we move make the content stable across multiple themes. We
can switch themes and see our page render almost correctly. While Hugo
generates the correct HTML for all Markdown, it is still up to the theme
author to provide good styling for all of the Markdown features.

[]{#CH03.htm#pgfId-1020336 .calibre9}If you are interested in checking
the portability of your code across themes, it is not a bad idea to try
out the functionality across themes. The About Us page for the Acme
Corporation website (figure 3.17) does not look shabby in the Universal
theme.

[]{#CH03.htm#pgfId-1033214}[Code checkpoint]{.fm-callout-head}
[[https://chapter-03-06.hugoinaction.com](https://chapter-03-06.hugoinaction.com){.url}]{.fm-hyperlink},
and source []{#CH03.htm#marker-1033277}[]{#CH03.htm#marker-1033278}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-03-06](https://github.com/hugoinaction/hugoinaction/tree/chapter-03-06){.url}]{.fm-hyperlink}.

![CH03_F17_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH03_F17_Jain.png){.calibre1}\

[]{#CH03.htm#pgfId-1037633}Figure 3.17 The About Us page for Acme
Corporation website rendered using the Universal theme for Hugo

### []{#CH03.htm#pgfId-1020455}3.7.3 Cleanliness {#CH03.htm#sigil_toc_id_95 .fm-head1}

[]{#CH03.htm#pgfId-1020486 .calibre9}[]{#CH03.htm#marker-1020480
.calibre9}[]{#CH03.htm#marker-1020482 .calibre9}The HTML markup
generated by []{#CH03.htm#marker-1020487 .calibre9}the WYSIWYG (what you
see is what you get) editors present in tools like WordPress can be
overly complicated and unreadable. We are also at risk of the WYSIWYG
creators pasting arbitrary JavaScript into the content, which can turn
into a security issue. Markdown is a much cleaner language than HTML.
The likelihood of extra tags and mistakes is much lower when we write
readable text. Similarly, with Markdown, we have forms to enter metadata
in traditional content management systems. There are many websites where
the admin section is shoddily prepared, and a plain-text metadata
language provides more flexibility and power than any of those forms
ever could. []{#CH03.htm#marker-1020493
.calibre9}[]{#CH03.htm#marker-1020496
.calibre9}[]{#CH03.htm#marker-1020498 .calibre9}

## []{#CH03.htm#pgfId-1020504}Summary {#CH03.htm#sigil_toc_id_96 .fm-head}

-   []{#CH03.htm#pgfId-1020514 .calibre9}Markdown has all the features
    that we need for formatting regular web pages and blog posts.

-   []{#CH03.htm#pgfId-1020528 .calibre9}Markdown supports block
    elements like headings, various types of lists, and sublists.

-   []{#CH03.htm#pgfId-1020538 .calibre9}We can provide inline images,
    links, basic formatting, and code blocks to Markdown-based content
    using text-based constructs.

-   []{#CH03.htm#pgfId-1020548 .calibre9}GitHub Flavored Markdown (GFM)
    is supported by Hugo, which adds task lists and tables to Markdown.

-   []{#CH03.htm#pgfId-1020558 .calibre9}Hugo's rendering engine also
    supports features like emoticons, automatic fractions, and
    definition lists.

-   []{#CH03.htm#pgfId-1020568 .calibre9}Hugo supports multiple
    languages for content, including AsciiDoc for long-form content,
    pandoc for extended Markdown, and reStructuredText for
    documentation.

-   []{#CH03.htm#pgfId-1020578 .calibre9}Apart from data, a web page
    also needs metadata supplied in Hugo using YAML, TOML, and JSON.

-   []{#CH03.htm#pgfId-1020588 .calibre9}YAML is easy to read and
    provides a mechanism to deliver structured data to Hugo.

-   []{#CH03.htm#pgfId-1020598 .calibre9}While Hugo has sensible
    defaults, and we can build websites without writing a single
    metadata item, Hugo provides the ability to override most metadata
    items like the title, description, date, and theme-specific
    parameters.

-   []{#CH03.htm#pgfId-1020608 .calibre9}Most of the Markdown features
    are native to Hugo and can be used across all themes.

-   []{#CH03.htm#pgfId-1020618 .calibre9}With the approach of managing
    content as files instead of as databases and the readability of
    Markdown, we get sensible diff views and versioning support for
    content using a code versioning software like Git.

[]{#CH04.htm}

# []{#CH04.htm#pgfId-1021275}4 Content management with Hugo {#CH04.htm#heading_id_2 .tochead}

[]{#CH04.htm#pgfId-1023550}This chapter covers

-   []{#CH04.htm#pgfId-1023582 .calibre9}Organizing pages into sections
    and menus in a Hugo website
-   []{#CH04.htm#pgfId-1023583 .calibre9}Grouping related content using
    Hugo taxonomies
-   []{#CH04.htm#pgfId-1023584 .calibre9}Bundling page contents into a
    page bundle
-   []{#CH04.htm#pgfId-1023571 .calibre9}Using Hugo's built-in and
    community-provided shortcodes for more Markdown features

[]{#CH04.htm#pgfId-1011804 .calibre9}A website is not just a bundle of
web pages scattered at random URL locations. The pages need to be
discoverable, organized into meaningful sections, and there needs to be
a way to navigate to them for a reader to be successful. Content in most
websites is laid out with a strategy; grouped, tagged, and navigation
cues are present in pages for the reader to navigate to others.

[]{#CH04.htm#pgfId-1011858 .calibre9}There are two distinct roles in a
website's development team: the content owner and the theme developer.
The *content owner* decides []{#CH04.htm#marker-1011821 .calibre9}the
content that shows up on the website, and the *theme developer* focuses
[]{#CH04.htm#marker-1011837 .calibre9}on surfacing content. In this
chapter, we will be playing the role of the content owner (also called
*author* or *website editor*) for the Acme Corporation website.

[]{#CH04.htm#pgfId-1011867 .calibre9}We will look into content
organization and management in this chapter (see figure 4.1). In section
4.1, we will organize the configuration in the config folder. In
sections 4.2 to 4.4, we will discuss the means to manage and associate
content on a Hugo website. Section 4.5 will go into shortcodes, which
live in the layouts folder. *Shortcodes* provide
[]{#CH04.htm#marker-1011878 .calibre9}the means to extend Markdown and
share content between different pages in Hugo.

![CH04_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH04_F01_Jain.png){.calibre1}\

[]{#CH04.htm#pgfId-1035641}Figure 4.1 The author and the developer
organize the website's contents into files and folders that are then
stored in the content directory. This chapter focuses on the
organization of the content directory for optimal resource management.
We will also organize the configurations in the config folder and will
create shortcodes in the layouts folder to extend Markdown.

## []{#CH04.htm#pgfId-1011898}4.1 Customizing with the Hugo configurations {#CH04.htm#sigil_toc_id_97 .fm-head}

[]{#CH04.htm#pgfId-1011929 .calibre9}[]{#CH04.htm#marker-1011923
.calibre9}[]{#CH04.htm#marker-1011925 .calibre9}On the Acme Corporation
website, so far we have had only one configuration file, config.yaml,
where we have been piling our configurations. If we look at the Hugo
documentation, we notice that many configuration parameters can be
changed, which can quickly get overwhelming. A single configuration file
is bound to become a bottleneck.

[]{#CH04.htm#pgfId-1011947 .calibre9}Another problem with our
configuration file is that we cannot have different settings for
development and production in one file. An essential practice for web
development is to have different environments. This way, many teams can
contribute independently. To debug easily, a web developer needs HTML
that has not []{#CH04.htm#marker-1011936 .calibre9}gone through
*minification* (processing to reduce the file size for faster serving
over the internet). In a testing environment, we may need more logging
to enable the development team to reproduce issues quickly and to fix
bugs. The content team needs a website as stable as the production team.

[]{#CH04.htm#pgfId-1011956 .calibre9}Hugo recognizes these problems and
supports splitting the configuration files with environment-specific
overrides to the base configuration via a config folder. In this
section, we will split the configuration file into multiple files,
building separate files that override the default configuration. To do
that, we will create a folder called config and add a folder called
\_default in the config folder and move the Acme Corporation website to
those folders. The \_default folder is special; Hugo refers to the
default content in that folder. This name is used not only for
configurations but also for templates, as we will see in chapter 7.

[]{#CH04.htm#pgfId-1011994 .calibre9}If we move the config.yaml file to
the config/\_default folder, the website will continue to behave the
same. But now that its contents are in a folder, we can divide the
configuration file into multiple files for multiple properties. We can
now move the [author]{.fm-code-in-text} section in the configuration
file to config/\_default/author.yaml, and we []{#CH04.htm#marker-1011973
.calibre9}can move the [params]{.fm-code-in-text} and the
[markup]{.fm-code-in-text} sections to separate files. The filename is
automatically mapped to a key when Hugo parses the configuration. This
way, this information is isolated and more manageable. We will also
split the menu in menu.yaml and extend this in section 4.2. The split
files are also provided in the resources for this chapter
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/01](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/01){.url}]{.fm-hyperlink}).

[]{#CH04.htm#pgfId-1012022 .calibre9}Hugo supports environment-specific
configuration overrides using folders for each environment in the config
folder. These environments take the values from the \_default folder and
override the environment-specific values. We can now create a folder
called production and put production-specific overrides in the
configuration parameters in that folder. Similarly, we can add a folder
called development for development-specific configurations. Listing 4.1
provides the code to split the configuration directory for the Acme
Corporation website. (The listing's .yaml file document icon is by
IYIKON from the Noun Project; the folder icon is from flaticon.)

[]{#CH04.htm#pgfId-1012060 .calibre9}When Hugo runs with a live reload
server via [hugo server]{.fm-code-in-text}, it defaults to the
development configuration (the names "development" and "production" are
hardcoded in Hugo as defaults). When built by
[]{#CH04.htm#marker-1012039 .calibre9}the [hugo]{.fm-code-in-text}
command, by default, the mode changes to production. We can override the
configuration to any name we want by specifying it in the environment
variable [HUGO_ENV]{.fm-code-in-text} or using the
[\--environment]{.fm-code-in-text} flag in []{#CH04.htm#marker-1012065
.calibre9}the Hugo command line. This override can be used, for example,
to debug production-only bugs in the development server mode.

[]{#CH04.htm#pgfId-1012132}Listing 4.1 Splitting the config.yaml file
into multiple files

``` programlisting
🗁 config 
├── 🗁 _default
│   ├──  author.yaml
│   ├──  config.yaml
│   ├──  markup.yaml
│   ├──  menu.yaml
│   └──  params.yaml
├── 🗁 development
│   └──  config.yaml
└── 🗁 production
    └──  config.yaml
```

::: fm-sidebar-block
[]{#CH04.htm#pgfId-1035682 .calibre9}The world of environments

[]{#CH04.htm#pgfId-1035683}Most hosted software has the concept of
environments. If we need to ensure that there is no downtime as we
develop, we need to have a methodology to ensure only stable releases go
live. It is crucial to label stable builds and move them to a higher
environment tier for further testing before going live. The number of
environments depends on the number of people involved and the degree of
independence needed for independent tasks. A standard set of
environments in a large project can include:

-   []{#CH04.htm#pgfId-1035685}*Development*[]{#CH04.htm#marker-1024462}---This
    []{#CH04.htm#marker-1035684}is where active development happens.
    Developers may have separate branches or branch-specific
    environments, but we need a shared branch where all development
    teams merge their code and resolve conflicts. Development mode is
    the default when Hugo runs in live server mode.

-   []{#CH04.htm#pgfId-1035687}*Testing*[]{#CH04.htm#marker-1024464}---An
    []{#CH04.htm#marker-1035686}environment with all completed features
    currently under automated and manual testing.

-   []{#CH04.htm#pgfId-1035688}*Staging /Alpha*---Stabler environment
    for testing across teams in the company. The companies might also
    provide access to this environment to some selected customers who
    are helping to fine-tune the software.

-   []{#CH04.htm#pgfId-1035689}*Beta*---A public prerelease that is
    ready to go live, and the company invites everyone to verify their
    workflows.

-   []{#CH04.htm#pgfId-1035691}*Production*---[]{#CH04.htm#marker-1024468}The
    []{#CH04.htm#marker-1035690}current live/active environment served
    to the end users. Production is the default environment when you run
    Hugo without the live server.

[]{#CH04.htm#pgfId-1035692}Each team is different and can decide to use
a different set of environments. Hugo provides total flexibility to name
the environments and to have settings specific to them. The code changes
for features under development should be managed by a version control
system like Git.
:::

[]{#CH04.htm#pgfId-1012387 .calibre9}In the development environment,
let's update the settings to disable minification by setting
[minify]{.fm-code-in-text} to [false]{.fm-code-in-text}. (You can
control minification settings for individual file types using this
setting as well.) Additionally, the Eclectic theme supports a debug bar
(created initially by JugglerX), which provides the front matter in a
visible section on the web page as figure 4.2 shows. We can enable this
by setting [DebugMenu]{.fm-code-in-text} to [true]{.fm-code-in-text} in
[]{#CH04.htm#marker-1012376 .calibre9}the [params]{.fm-code-in-text}
section for development and can be launched by clicking the red wrench
icon on the bottom right in the debug bar. In chapter 8, we will show
you how to integrate this debug bar in other websites using Hugo
Modules.

![CH04_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH04_F02_Jain.png){.calibre1}\

[]{#CH04.htm#pgfId-1035713}Figure 4.2 The debug bar in Eclectic (only
when running in the development environment)

[]{#CH04.htm#pgfId-1012396 .calibre9}Listing 4.2 sets the overrides for
the development environment to enable the debug bar, to disable
minification, and to build drafts. Then listing 4.3 sets the overrides
for the production environment to enable robots.txt and minification.

[]{#CH04.htm#pgfId-1012453}Listing 4.2 Enabling the debug bar
(config/development/config.yaml)

``` programlisting
buildDrafts: true 
minify: false 
params: 
  DebugMenu: true          ❶
```

[]{#CH04.htm#pgfId-1035219}[❶]{.fm-combinumeral} Enables the Debug menu
via params

[]{#CH04.htm#pgfId-1012606}Listing 4.3 Enabling robots and minification
(config/production/config.yaml)

``` programlisting
enableRobotsTXT: true 
minify: true 
```

[]{#CH04.htm#pgfId-1012668 .calibre9}Defaults in Hugo are specific to
the environment; Hugo understands development and production natively.
Therefore, many websites that use Hugo do not need separate
environment-specific configurations.

[]{#CH04.htm#pgfId-1031393}[Code checkpoint]{.fm-callout-head}
[[https://chapter-04-01.hugoinaction.com](https://chapter-04-01.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-01](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-01){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH04.htm#pgfId-1035745 .calibre9}Exercise 4.1

[]{#CH04.htm#pgfId-1035746}The two default environments in Hugo are
development and \_\_\_\_\_\_\_\_.
:::

[]{#CH04.htm#pgfId-1012799 .calibre9}You can also use environment
variables to provide configuration options for Hugo. For example, if you
set the environment variable [HUGO_ENABLEGITINFO]{.fm-code-in-text} to
[true]{.fm-code-in-text}, that overrides the
[enableGitInfo]{.fm-code-in-text} configuration setting in
[]{#CH04.htm#marker-1031374 .calibre9}the Hugo configuration, forcing it
to be [true]{.fm-code-in-text}. We can use the ability to override the
configuration settings using environment variables to set up Hugo on the
build server via a configuration system outside of Hugo. Note that
environment variables are different from command-line flags. These can
be set in the running shell and are accessible to all programs that run
after they have been set. You can read more about environment variables
at
[[https://help.ubuntu.com/community/EnvironmentVariables](https://help.ubuntu.com/community/EnvironmentVariables){.url}]{.fm-hyperlink}.
[]{#CH04.htm#marker-1031376 .calibre9}[]{#CH04.htm#marker-1031377
.calibre9}

![CH04_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH04_F03_Jain.png){.calibre1}\

[]{#CH04.htm#pgfId-1035765}Figure 4.3 Configuration as code. Bob learns
that, due to its expense, configuration as code is not as flexible as
the actual code.

## []{#CH04.htm#pgfId-1012836}4.2 Organizing content with sections and menus {#CH04.htm#sigil_toc_id_98 .fm-head}

[]{#CH04.htm#pgfId-1012860 .calibre9}[]{#CH04.htm#marker-1012861
.calibre9}The essential tool to lay out content is the desired structure
of the website that we will create from it. If we can physically
represent the content we want to express on the sitemap logically, it
makes our lives easier. This section provides some insights on how to go
about laying out your content.

### []{#CH04.htm#pgfId-1012869}[]{#CH04.htm#marker-1026475}[]{#CH04.htm#marker-1026474}4.2.1 Sections {#CH04.htm#sigil_toc_id_99 .fm-head1}

[]{#CH04.htm#pgfId-1012934 .calibre9}[]{#CH04.htm#marker-1012880
.calibre9}[]{#CH04.htm#marker-1012882 .calibre9}When a website has a lot
of content, placing all of that in top-level pages makes managing the
content challenging. Therefore, we can classify content
[]{#CH04.htm#marker-1012887 .calibre9}into *sections* like blog, news,
or products. We can use the path component of a web page's URL to
identify its section. For example, in the URL
[https://example.org/blog/community/welcome]{.fm-code-in-text}, the page
named welcome belongs to the community subsection of the blog section of
the website example.org. A *subsection* is []{#CH04.htm#marker-1012923
.calibre9}not really a special construct in Hugo; it's just a section in
a section. Sections also have an index page like
[https://example.org/blog]{.fm-code-in-text} that introduces the
sections and provide a list of subsections and pages in them.

[]{#CH04.htm#pgfId-1012988 .calibre9}We can list all the areas in the
website in the main menu or on the home page. To create a section in
Hugo, we create a subfolder in the content folder. You can have nested
subfolders for nested sections. Technically, the content
[]{#CH04.htm#marker-1012945 .calibre9}folder (also called *content
root*) that []{#CH04.htm#marker-1012961 .calibre9}contains the home page
(also called the *root page* or the *index page*) for the entire website
is also a section, and all website sections are subsections of the
content root. We can override the front matter of the home page using
the content/\_index.md file. The content root is the only section whose
\_index.md is optional. Because we override the index template with a
plain HTML file in the Acme Corporation website, adding front matter
specific to the page in content/\_index.md has no effect.

[]{#CH04.htm#pgfId-1013007}[Note]{.fm-callout-head} We need to create a
markup file named \_index.md, even if empty, at the root of every
section. Hugo uses this file to identify a website section. Hugo does
not consider a folder to be a section without this file and might not
display its contents.

[]{#CH04.htm#pgfId-1013013 .calibre9}Each section can have multiple
pages that form its content. The sections have a template for the index
page where we have access to all the pages and subsections. We use the
section's index page to help the user navigate the section. Custom
parameters and data can customize the index template via the \_index.md
file in the section folder. We are free to choose the organization of
pages as we desire to get the content structure we want.

[]{#CH04.htm#pgfId-1013019 .calibre9}Let's add a news and a blog section
to Acme Corporation's website. In the blog section, let's also add a
community subsection for blog posts from community members using Acme
products. Also, we will enable the automatic setting for the Git author
dates for the content by setting [enableGitInfo: true]{.fm-code-in-text}
in the configuration file. The following listing enables access to Git
commit information while building the website.

[]{#CH04.htm#pgfId-1013085}Listing 4.4 Accessing Git commit information
(config/\_default/config.yaml)

``` programlisting
... 
enableGitInfo: true 
```

[]{#CH04.htm#pgfId-1013139 .calibre9}The content for these sections is
provided in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/02](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/02){.url}]{.fm-hyperlink}).
Figure 4.4 shows the corresponding Blog page. The sections present on
the Acme Corporation website are shown on the right as filenames. The
following listing provides the code for organizing the content in
sections for the Acme Corporation website. (The listing's Markdown icon
is from octoicons; the folder icons are from flaticons.)

![CH04_F04_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH04_F04_Jain.png){.calibre1}\

[]{#CH04.htm#pgfId-1035822}Figure 4.4 The blog for Acme Corporation's
website showing summaries from the different pages (top) and the
subsections (bottom)

[]{#CH04.htm#pgfId-1013220}Listing 4.5 Organizing content in sections

``` programlisting
🗁 content                     ❶
├──  YY about.md
├── 🗁 blog                    ❷
│   ├──  _index.md 
│   ├──  building-squares.md
│   ├── 🗁 community           ❸
│   │   ├──  _index.md
│   │   ├──  circle.md
│   │   └──  curve.md
│   ├──  process-1.md
│   ├──  process-2.md
│   ├──  process-3.md
│   ├──  process-4.md
│   └──  tropical triangles.md
├──  contact.md
├──  credits.md
├──  data-driven.md
├──  markdown.md
├── 🗁 news                   ❹                 
│   ├──  _index.md
│   ├──  shaper.md
│   └──  square-license.md
├──  privacy.md
└──  terms.md
```

[]{#CH04.htm#pgfId-1034954}[❶]{.fm-combinumeral} The full website

[]{#CH04.htm#pgfId-1034975}[❷]{.fm-combinumeral} The blog section

[]{#CH04.htm#pgfId-1034992}[❸]{.fm-combinumeral} The community
subsection of the blog section

[]{#CH04.htm#pgfId-1035009}[❹]{.fm-combinumeral} The news section

[]{#CH04.htm#pgfId-1013402 .calibre9}We can navigate to
http:[//]{.fm-hyperlink}localhost:1313/blog to view the entries in the
blog section, to http:[//]{.fm-hyperlink}localhost:1313/blog/community
to see the posts in the subsection for community-provided entries, and
to http:[//]{.fm-hyperlink}localhost:1313/news to see those in the news
section.

[]{#CH04.htm#pgfId-1013421}[Note]{.fm-callout-head} You need to commit
the files to a Git repository for the dates to be read from Git by Hugo.

[]{#CH04.htm#pgfId-1013437 .calibre9}We can use the \_index.md file in
the blog folder to provide the settings and the content that show up on
the /blog page. We can also add Markdown content for the index page to
pick up and then use the front matter to override the settings. The
index page has access to all the pages and subsections in the blog
section.

[]{#CH04.htm#pgfId-1031488}[Code checkpoint]{.fm-callout-head}
[[https://chapter-04-02.hugoinaction.com](https://chapter-04-02.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-02](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-02){.url}]{.fm-hyperlink}.
**Note:** The changes are not reachable from the home page yet.

::: fm-sidebar-block
[]{#CH04.htm#pgfId-1035857 .calibre9}Content summary

[]{#CH04.htm#pgfId-1035858}The index pages of the sections in the Acme
Corporation website automatically provide a summary and titles of the
posts in the section. Hugo generates the summary information
automatically if we do not provide it. Although the index pages are the
most common places where we can use a post's summary, it can also be
used elsewhere by the theme. Here are the ways to provide the summary:

-   []{#CH04.htm#pgfId-1035859}*Automatic*---By default, Hugo picks up
    the first 70 words of the content as the summary for the theme. The
    [summaryLength]{.fm-code-in-text1} variable in the website
    configuration file controls the number of words in the default
    summary.

-   []{#CH04.htm#pgfId-1035860}*Manual*---We can specify the summary
    length with the marker [\<!\--more\--\>]{.fm-code-in-text1} at a
    location in the content to clip the summary if desired. Note that
    [\<!\--more\--\>]{.fm-code-in-text1} is matched verbatim by Hugo.
    Adding spaces, changing to uppercase, or not having a proper HTML
    comment is not understood by Hugo. You can see this in use in the
    content/blog/tropical triangles/index.md file.

-   []{#CH04.htm#pgfId-1035862}*Front matter*---We can use the
    [summary]{.fm-code-in-text1} variable[]{#CH04.htm#marker-1026468} in
    []{#CH04.htm#marker-1035861}the front matter to supply the summary
    text.

[]{#CH04.htm#pgfId-1035865}Note that the [summary]{.fm-code-in-text1}
variable is []{#CH04.htm#marker-1035863}different than
[]{#CH04.htm#marker-1035864}the
[description]{.fm-code-in-text1}[]{#CH04.htm#marker-1026471} variable.
The [summary]{.fm-code-in-text1} variable in Hugo is a teaser into the
content, while the [description]{.fm-code-in-text1} variable is
[]{#CH04.htm#marker-1035866}more about the content sent to search
engines. The [description]{.fm-code-in-text1} field can only be supplied
via the front matter and does not have an automatic value based on
content. Some themes like Eclectic give a higher priority to
[description]{.fm-code-in-text1} and fall back to
[summary]{.fm-code-in-text1} in the index pages.
[]{#CH04.htm#marker-1035867}[]{#CH04.htm#marker-1035868}
:::

### []{#CH04.htm#pgfId-1013770}4.2.2 Menus {#CH04.htm#sigil_toc_id_100 .fm-head1}

[]{#CH04.htm#pgfId-1013787 .calibre9}[]{#CH04.htm#marker-1013781
.calibre9}[]{#CH04.htm#marker-1013783 .calibre9}The sections that we
added to Acme Corporations's website are not linked and, therefore, not
discoverable from the home page or from any content pages. Hugo provides
a generic way to enable content to show up in the menus. We can include
multiple menus on a website, and each theme defines its own set of menus
and submenus. Each menu has a name, like main for the main menu, in the
Eclectic and Universal themes. Each menu consists of a list of entries
that form the whole of the menu.

[]{#CH04.htm#pgfId-1013792 .calibre9}We have already split the menu
created in chapter 2 in the configuration file in section 4.1. Listing
4.6 shows the configuration that we created in menu.yaml. Let's go over
some of the fields in that configuration. Each menu entry has multiple
fields:

-   []{#CH04.htm#pgfId-1013798 .calibre9}The
    [identifier]{.fm-code-in-text} field uniquely defines the menu so
    Hugo can find it.

-   []{#CH04.htm#pgfId-1013821 .calibre9}The [weight]{.fm-code-in-text}
    field orders the entries.

-   []{#CH04.htm#pgfId-1013840 .calibre9}The [url]{.fm-code-in-text}
    field provides the relative path to the page from the website's base
    URL defined in the configuration.

[]{#CH04.htm#pgfId-1013885 .calibre9}Hugo is flexible with the other
fields and their purpose. Some themes use the [name]{.fm-code-in-text}
field for the menu's display text, and others use the
[title]{.fm-code-in-text} field. To create a submenu, we need to provide
the [parent]{.fm-code-in-text} field with the identifier of the parent
menu (see listing 4.9 for an example submenu).

[]{#CH04.htm#pgfId-1013945}Listing 4.6 Menu entries in the config file
(config/\_default/menu.yaml)

``` programlisting
main: 
  - identifier: about 
    name: About 
    url: /about 
    weight: 100 
  - identifier: contact 
    name: Contact 
    url: /contact 
    weight: 200 
```

[]{#CH04.htm#pgfId-1014087 .calibre9}Hugo provides two ways to include
pages in the website menus. First, we can add menu items for the page in
the configuration file. This approach helps localize and tightly monitor
the menu. The second way is to specify the page menus in the front
matter. This way, the menu becomes more dynamic and controlled by the
content. If we delete a page, the menu automatically gets trimmed, and
we do not have to worry about cleaning up stale links. The choice of
which approach to use depends on our use case. If the objective is to
have the menu in one place, the configuration file is the way to go. If
we want to split the ownership of menus among the owners of different
content sections for the website, then using the front matter is the way
to go. Both can be mixed and matched as needed.

[]{#CH04.htm#pgfId-1014093 .calibre9}The Eclectic theme has two menus:
the main menu and the footer menu. So far, we have only used the main
menu. Let's add a menu entry in the front matter of the \_index.md file
for the [blog]{.fm-code-in-text} section to []{#CH04.htm#marker-1014104
.calibre9}allow the blog to show up in the main and the footer menus.
Listing 4.7 shows the configuration for this. We will also add a News
submenu to the main menu. Listing 4.8 shows this configuration, and
figure 4.5 shows the result of enabling all the menus.

[]{#CH04.htm#pgfId-1014165}Listing 4.7 Menus for the
[blog]{.fm-code-in-listingcaption} section (content/blog/\_index.md)

``` programlisting
--- 
menu: 
  main: 
    name: Blog 
    identifier: blog 
    weight: 110 
  footer: 
    name: Blog 
    weight: 100 
--- 
```

[]{#CH04.htm#pgfId-1014363}Listing 4.8 Menu for the
[news]{.fm-code-in-listingcaption} section (content/news/\_index.md)

``` programlisting
--- 
menu: 
  main: 
    name: News 
    identifier: news 
    weight: 120 
--- 
```

![CH04_F05_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH04_F05_Jain.png){.calibre1}\

[]{#CH04.htm#pgfId-1035887}Figure 4.5 The Blog page for Acme
Corporation's website showing the main menu, a submenu, and the footer
menu

[]{#CH04.htm#pgfId-1014470 .calibre9}The community section's \_index.md
enables a submenu for that section in the Blog menu. The following
listing shows its configuration.

[]{#CH04.htm#pgfId-1014527}Listing 4.9 Menu for the community blog
(content/blog/community/\_index.md)

``` programlisting
--- 
menu: 
  main: 
    name: Community 
    parent: blog 
--- 
```

[]{#CH04.htm#pgfId-1014601 .calibre9}We also need to add the terms of
use and privacy policy to the footer menu. The following two listings
show these configurations.

[]{#CH04.htm#pgfId-1014658}Listing 4.10 Menu for the terms of use
(content/terms.md)

``` programlisting
--- 
menu: 
  footer: 
    name: Terms of Use 
    weight: 200 
--- 
```

[]{#CH04.htm#pgfId-1014793}Listing 4.11 Menu for the privacy policy
(content/privacy.md)

``` programlisting
--- 
menu: 
  footer: 
    name: Privacy Policy 
    weight: 300 
--- 
```

[]{#CH04.htm#pgfId-1014893 .calibre9}While the footer menu has content,
Eclectic does not show it until we explicitly enable it by adding [menu:
true]{.fm-code-in-text} in the config/\_default/params.yaml file for the
[footer]{.fm-code-in-text} section. The following listing shows how to
do that. Note that you may need to restart your development server for
these changes to take effect.

[]{#CH04.htm#pgfId-1014953}Listing 4.12 Enabling the footer menu
(config/\_default/params.yaml)

``` programlisting
... 
footer: 
  ... 
  - title: Contact Us 
    contact: true 
  - title: Important Links 
    menu: true 
... 
```

[]{#CH04.htm#pgfId-1015104 .calibre9}Because the home page does not use
a menu yet, we will need to manually update the website's home page to
change the Explore button to link to the Blog page and then add an entry
for the Blog and News pages in the footer in layouts/index.html. The
following listing enables direct []{#CH04.htm#marker-1015083
.calibre9}links to the [blog]{.fm-code-in-text} and
[news]{.fm-code-in-text} section in []{#CH04.htm#marker-1015109
.calibre9}the website footer and changes the Explore button to link to
the Blog page in the index page of the website.

[]{#CH04.htm#pgfId-1015170}Listing 4.13 Enabling direct links and
changing a button (layouts/index.html)

``` programlisting
... 
<a href="./blog">Explore</a> 
... 
  
<footer> 
  <a href="./blog">Blog</a> 
  <a href="./news">News</a> 
... 
</footer>   
```

[]{#CH04.htm#pgfId-1031569}[Code checkpoint]{.fm-callout-head}
[[https://chapter-04-03.hugoinaction.com](https://chapter-04-03.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH04.htm#marker-1031626}[]{#CH04.htm#marker-1031627}[]{#CH04.htm#marker-1031628}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-03.](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-03){.url}]{.fm-hyperlink}
↻ Restart your dev server.

::: fm-sidebar-block
[]{#CH04.htm#pgfId-1035919 .calibre9}Exercise 4.2

[]{#CH04.htm#pgfId-1035920}Which menu placement is better if we want to
cut and paste pages from one Hugo website to another?

1.  []{#CH04.htm#pgfId-1035921}Layouts

2.  []{#CH04.htm#pgfId-1035922}Front matter

3.  []{#CH04.htm#pgfId-1035923}Theme

4.  []{#CH04.htm#pgfId-1035924}Config
:::

::: fm-sidebar-block
[]{#CH04.htm#pgfId-1035939 .calibre9}Content management with a GUI

[]{#CH04.htm#pgfId-1035940}For authors and editors that require a
graphical environment to manage content without losing performance
benefits with static site builders like Hugo, there are wrappers like
Forestry.io, Hokus CMS, and Netlify CMS. These content management
systems have graphical forms instead of YAML and Markdown. Tools like
these can help teams with a diverse set of requirements to come on board
and get the benefits of using Hugo. Nontechnical team members who prefer
a graphical form can benefit from the Jamstack with a comfortable GUI on
top. These forms place the files in suitable locations and update the
appropriate entries in the front matter and the configuration files. We
can use them interchangeably, along with directly editing the files.

\

[]{#CH04.htm#pgfId-1035941}Appendix C goes over integrating Netlify CMS
with your website as the administrative interface for the content
management system. The corresponding changes are present in all code
checkpoints from chapter-04-03 onward.
:::

## []{#CH04.htm#pgfId-1015430}4.3 Better together with page bundles {#CH04.htm#sigil_toc_id_101 .fm-head}

[]{#CH04.htm#pgfId-1015560 .calibre9}[]{#CH04.htm#marker-1015548
.calibre9}[]{#CH04.htm#marker-1015550 .calibre9}A common problem with
website source code is the scattering of the content across databases,
filesystems, and third-party locations. Additionally, the images
associated with the page live in a different place. That makes it
difficult to properly clean up after we remove a page from the website.
Because pages are not portable across websites, the authors need access
to multiple places to create them. Hugo, however, attempts to make the
contents of a web page more self-contained. The [menu]{.fm-code-in-text}
field in the front matter (that we just learned about) is one of the
features that Hugo uses to do this.

[]{#CH04.htm#pgfId-1015569 .calibre9}Front matter menus allow each page
to own its menu entries and lets us add and remove them independently.
Another feature to enable this independence is page bundles. *Page
bundles* are a collection of resources, both textual and nontextual
(like images, PDF files, and fonts), which are sufficient to represent
individual or a group of related pages. Page bundles can be
independently placed or removed from a Hugo website to add the
associated web pages. They help content authors localize changes to a
web page or section to a specific folder on disk. There are two main
types of page bundles: the leaf bundle and the branch bundle. Apart from
these, we also have the less commonly used headless bundles.

### []{#CH04.htm#pgfId-1015584}[]{#CH04.htm#marker-1031713}[]{#CH04.htm#marker-1031712}[]{#CH04.htm#marker-1031711}4.3.1 Leaf bundles {#CH04.htm#sigil_toc_id_102 .fm-head1}

[]{#CH04.htm#pgfId-1015605 .calibre9}[]{#CH04.htm#marker-1015595
.calibre9}[]{#CH04.htm#marker-1015597
.calibre9}[]{#CH04.htm#marker-1015599 .calibre9}*Leaf bundles* are a
collection of textual and nontextual elements needed to independently
represent the core contents of a single web page. The folder for leaf
bundles contains the markup, the metadata, and the resources (images,
PDF files, etc.) specific to the page. These may also include
page-specific CSS and JS files.

[]{#CH04.htm#pgfId-1015614 .calibre9}We can convert any web page in Hugo
to a leaf bundle by creating a folder at the same location as the markup
file and with the same name (without the extension), then moving the
markup file in this new folder and renaming it to index.md. We should
move all the specific resources to the web page in this folder as well.
The web page can use any assets in this folder and its subfolders,
including images, PDF files, and metadata (YAML, TOML, or JSON) files.

[]{#CH04.htm#pgfId-1015620 .calibre9}We can move a leaf bundle
independently to a different Hugo website, which provides everything
needed to render it correctly. A leaf bundle can have multiple markup
files, but during the rendering process, it's treated as a single web
page and will not have direct access to any other markup files from the
bundle apart from index.md.

::: fm-sidebar-block
[]{#CH04.htm#pgfId-1035960 .calibre9}index.md vs. \_index.md

[]{#CH04.htm#pgfId-1035961}While \_index.md and index.md are similar
names, they are two very different files: index.md represents the
content of a *single web page*, and \_index.md represents a section's
root, which is []{#CH04.htm#marker-1035962}a
[]{#CH04.htm#marker-1026814}*set of web pages*. To understand this
better, let's look at an example.

\

[]{#CH04.htm#pgfId-1035963}Think of a website with the following URL
endpoints: / (the root), /about, /blog, /terms, /blog/process-1, and
/blog/process-2. In this website, the /about, /terms, /blog/process-1,
and /blog/process-2 pages do not have child pages and represent
individual web pages. These pages can be represented by index.md. The /
and /blog endpoints have child pages and, therefore, need to be
represented by \_index.md.

\

[]{#CH04.htm#pgfId-1035964}Note that for single-page endpoints like
/about, we can create about.md if we do not want to use page bundles.
For /blog and /, we do not have such a choice.
:::

[]{#CH04.htm#pgfId-1015679 .calibre9}The independence of the leaf bundle
provides content creation and management capabilities that are not
present in most other static site builders. Two authors can work on
content independently in their branches, and the likelihood of a merge
conflict is minimal. A stripped-down version of the website can easily
be created by emptying the content folder and then using it for content
creation with minimal compilation overhead and full support for
previewing. Contractors can be assigned to develop content using a
generic Hugo theme, and they can submit their leaf bundle to the main
website. The integration effort would be minimal.

[]{#CH04.htm#pgfId-1015701 .calibre9}The About page in the Acme
Corporation website is the perfect page to turn into a leaf bundle. The
draw.jpg image is used in the page, not anywhere else, and we should
localize it to that page. We will create a subfolder named about in the
content folder and move draw.jpg from the static/image folder and
about.md from the content folder to this about folder, renaming about.md
to index.md. For a proper page bundle, the image should now be relative
to the web page, and we should refer to it from the page. The path in
the [img]{.fm-code-in-text} tag[]{#CH04.htm#marker-1037425} needs
[]{#CH04.htm#marker-1015706 .calibre9}to be replaced with the local one:
from /image/draw.jpg to draw.jpg. We could have alternatively created an
image folder in the leaf bundle and set the path to image/draw.jpg if we
want to keep the image resources in such a folder. We can navigate to
http:[//]{.fm-hyperlink}localhost:1313/about and verify that the page
looks the same as before.

[]{#CH04.htm#pgfId-1015717 .calibre9}Leaf bundles don't need to have any
files other than index.md. We can convert any page to a page bundle by
creating a folder, moving the .md file to it, and renaming the file
index.md. For example, we can convert content/blog/tropical triangles.md
to a page bundle by creating a folder and moving the original file as
index.md to the folder.

[]{#CH04.htm#pgfId-1031648}[Code checkpoint]{.fm-callout-head}
[[https://chapter-04-04.hugoinaction.com](https://chapter-04-04.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-04](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-04){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH04.htm#pgfId-1035981 .calibre9}Which image files go where

[]{#CH04.htm#pgfId-1035982}We have already mentioned three places to
store images: a page bundle and two folders called static and assets.
This can get confusing early on when we try to decide which image goes
where. The decision is actually straightforward. The images specific to
a page bundle belong to the page bundle. As we create more web pages, we
should try to stay in the content folder and rarely update anything
outside of this folder. The images used by the theme to render the
website do not belong in that folder.

\

[]{#CH04.htm#pgfId-1035983}The folders static and assets are similar in
their type of content with just one difference: images in the assets
folder can be preprocessed and optimized by Hugo (via Hugo Pipes, which
we'll cover in chapter 6). We need to use the images in the static
folder as-is. Ideally, we should move as many images as possible to the
assets folder to utilize the complete set of Hugo's image optimization
features for these files. The static folder, in this case, should only
be used for images that are accessed directly from HTML without being
processed by Hugo.
[]{#CH04.htm#marker-1035984}[]{#CH04.htm#marker-1035985}[]{#CH04.htm#marker-1035986}
:::

### []{#CH04.htm#pgfId-1015854}4.3.2 Branch bundles {#CH04.htm#sigil_toc_id_103 .fm-head1}

[]{#CH04.htm#pgfId-1015899 .calibre9}[]{#CH04.htm#marker-1031301
.calibre9}[]{#CH04.htm#marker-1031302
.calibre9}[]{#CH04.htm#marker-1031303 .calibre9}*Branch bundles* form a
collection of both textual and nontextual resources that represent a
website section. Technically, the section folder created for the blog,
the [news]{.fm-code-in-text} section for []{#CH04.htm#marker-1031305
.calibre9}the Acme Corporation website with its subpages, and an \_index
file fit the definition of a branch bundle. To meet the definition in
spirit, however, all the resources required by the index page should
also be present in the folder. An ideal branch bundle contains page
bundles for all the pages in the section, the \_index file, and the
resources referred to in the index page.

[]{#CH04.htm#pgfId-1015914 .calibre9}The objective of the independent
branch bundle is the same as that of a leaf bundle: to allow sections to
be dropped into the website and to become functional with no other
change in the site. A branch bundle should ideally set its menu entries
and provide all the assets referred to in the branch and then be good to
go. Figure 4.6 shows the various branch and leaf bundles in the Acme
Corporation website so far.

::: fm-sidebar-block
[]{#CH04.htm#pgfId-1036003 .calibre9}Reusing page bundles

[]{#CH04.htm#pgfId-1036004}Page bundles are meant for isolation and not
reuse. If the desire is to reuse images, we need to place them in the
top-level assets folder or the static folder. We can use page bundles
along with shared images. One-off images used for specific pages should
be present in page bundles, and we should ideally place the shared
images (used across a vast set of pages) in the top-level folders.
Sharing resources leads to extra cleanup and integration effort,
however, but reusing these resources provides both bandwidth and storage
savings. The tradeoff is a choice left to the web developer, who should
evaluate this on a case-by-case basis.
:::

![CH04_F06_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH04_F06_Jain.png){.calibre1}\

[]{#CH04.htm#pgfId-1036023}Figure 4.6 Branch and leaf bundles in Hugo.
On the left is the folder structure after creating page bundles. The
right side shows the sitemap. Branch bundles show up as nodes with
children in the sitemap (rounded corners), while leaf bundles are end
nodes in the sitemap, just like a regular page.

[]{#CH04.htm#pgfId-1015949 .calibre9}We do not have any resources on any
of the \_index.md pages for Acme Corporation's website. We will add an
image (news.png) to []{#CH04.htm#marker-1027046 .calibre9}the
[news]{.fm-code-in-text} section and turn that into a proper branch
bundle by referencing it. The images and the corresponding \_index.md
for the news section are provided in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/03](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/03){.url}]{.fm-hyperlink}).
Note that we cannot add subfolders for assets associated with a branch
bundle. For this exercise, we will force the news image to center on the
News page using Markdown attributes. The following listing shows how to
add this image.

[]{#CH04.htm#pgfId-1016028}Listing 4.14 Adding an image to the news
section (content/news/\_index.md)

``` programlisting
--- 
menu: 
  main: 
    name: News 
    identifier: news 
    weight: 120 
--- 
![News](news.png){style="text-align:_center_"} 
--------------------------------------------- 
```

[]{#CH04.htm#pgfId-1016142 .calibre9}Branch bundles are places from
where the website branches into one or more pages. Note that in an edge
case, where a branch bundle is yet to add pages, it will show up in a
sitemap as a leaf, although Hugo treats it as a branch and shows an
empty list of child pages when it renders. See table 4.1 for a
comparison of branch and leaf bundles.

::: fm-sidebar-block
[]{#CH04.htm#pgfId-1036055 .calibre9}Exercise 4.3

[]{#CH04.htm#pgfId-1036056}Which of the following files are suitable to
be placed in a page bundle?

1.  []{#CH04.htm#pgfId-1036057}The logo of a section

2.  []{#CH04.htm#pgfId-1036058}A unique border image used in the theme

3.  []{#CH04.htm#pgfId-1036059}The website logo

4.  []{#CH04.htm#pgfId-1036060}The website font
:::

[]{#CH04.htm#pgfId-1031731}[Code checkpoint]{.fm-callout-head}
[[https://chapter-04-05.hugoinaction.com](https://chapter-04-05.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-05](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-05){.url}]{.fm-hyperlink}.

[]{#CH04.htm#pgfId-1027239}Table 4.1 Branch vs. leaf bundles

+----------------------+----------------------+----------------------+
| []{#CH04.htm#pg      | []{#CH04.htm#pgfI    | []{#CH04.htm#pg      |
| fId-1027245}**Area** | d-1027247}**Branch** | fId-1027249}**Leaf** |
+======================+======================+======================+
| []{#CH04.htm#        | []{#CH04.htm#p       | []{#CH04.htm#        |
| pgfId-1027251}**Used | gfId-1027253}Section | pgfId-1027255}Single |
| for**                |                      | web page             |
+----------------------+----------------------+----------------------+
| []{#CH04.htm#pgfId-  | []{#CH04.htm#        | []{#CH04.htm#pg      |
| 1027257}**Contents** | pgfId-1027259}Header | fId-1027261}Contents |
|                      | and (as a part of    | of the web page      |
|                      | the theme) a list of |                      |
|                      | pages in the section |                      |
+----------------------+----------------------+----------------------+
| []{#CH04.htm#p       | []{#CH04.htm#pgfI    | []{#CH04.htm#pg      |
| gfId-1027263}**Index | d-1027265}\_index.md | fId-1027267}index.md |
| Page**               |                      |                      |
+----------------------+----------------------+----------------------+
| []{#CH04.htm#pgfI    | []{#CH04.htm#pgf     | []{#CH04.htm#pgfId   |
| d-1027269}**Template | Id-1027271}list.html | -1027273}single.html |
| layout page**        |                      | []{#                 |
| (chapter 6)          |                      | CH04.htm#marker-1031 |
|                      |                      | 927}[]{#CH04.htm#mar |
|                      |                      | ker-1031928}[]{#CH04 |
|                      |                      | .htm#marker-1031929} |
+----------------------+----------------------+----------------------+

### []{#CH04.htm#pgfId-1016530}4.3.3 Headless bundles {#CH04.htm#sigil_toc_id_104 .fm-head1}

[]{#CH04.htm#pgfId-1016577 .calibre9}[]{#CH04.htm#marker-1027519
.calibre9}[]{#CH04.htm#marker-1027520
.calibre9}[]{#CH04.htm#marker-1027521 .calibre9}*Headless bundles* are
leaf bundles where the index file's front matter has the
[]{#CH04.htm#marker-1027522 .calibre9}property
[headless]{.fm-code-in-text} set to [true]{.fm-code-in-text}. Headless
pages do not have separate URLs, and Hugo does not render these bundles.
Some themes use these for storing shared data. For example, instead of
choosing the parameters for a structured footer, the theme author can
use a headless page bundle for a more unstructured footer. The headless
page with the name footer could store the markup-based content for it
and its associated assets. This bundle provides the advantage of having
assets associated with the footer together with the markup. Not many
themes use headless page bundles, and we will not be investing in them
for the Acme Corporation website.

[]{#CH04.htm#pgfId-1031950}[Code checkpoint]{.fm-callout-head}
[[https://chapter-04-06.hugoinaction.com](https://chapter-04-06.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH04.htm#marker-1032043}[]{#CH04.htm#marker-1032044}[]{#CH04.htm#marker-1032045}[]{#CH04.htm#marker-1032028}[]{#CH04.htm#marker-1032013}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-06](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-06){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH04.htm#pgfId-1036074 .calibre9}Clever uses for page bundles

[]{#CH04.htm#pgfId-1036075}The page-specific assets linked in page
bundles allow for the theme to standardize on the naming convention for
these assets, which lets us use them without writing code. Eclectic
supports creating a file called cover.png (or cover.jpg) in the page
bundle and picks this up to use as the cover image for the page. This,
however, does not provide any less discoverability of the front matter
entry ([banner]{.fm-code-in-text1}, for example) than themes like
Universal use. To make things easier, we can put a default image in the
archetypes (discussed in chapter 5) for a page.

\

[]{#CH04.htm#pgfId-1036076}The cover images for all the pages on the
Acme Corporation website are included in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter
-04-resources/04](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/04){.url}]{.fm-hyperlink}).
You can use these to make your blog posts presentable. Note that the
version of the Universal theme provided with this book supports cover
images via page bundles, but this is not standard in Hugo, and most
themes do not support it.
:::

## []{#CH04.htm#pgfId-1016635}[]{#CH04.htm#marker-1029871}4.4 More than tags: Taxonomies {#CH04.htm#sigil_toc_id_105 .fm-head}

[]{#CH04.htm#pgfId-1016757 .calibre9}[]{#CH04.htm#marker-1027553
.calibre9}[]{#CH04.htm#marker-1027554 .calibre9}To organize content into
sections in Hugo, we need to physically organize the files. It is easier
to have individual files for each web page neatly organized into folders
and subfolders. In many cases, the logical organization of the website
matches the physical organization on the disk. That is why Hugo, by
default, generates the URLs with the section name as a part of the URL.
But that alone may not be enough for good content discovery. There are
infinite ways to organize content, and each use case is different.

[]{#CH04.htm#pgfId-1016762 .calibre9}As we organize content, we quickly
realize the need to group pages such that the same page is a part of
multiple categories. For example, we can place a web page about the
differences between iPhone and Android in both the iPhone and Android
sections. Having two copies is terrible for maintenance. Two different
URLs would cause many problems because we will need to synchronize
comments, social media appearances, and search engine content. In this
case, it would be ideal to have one URL for the actual content, which
could show up in the index pages for both the iPhone and Android
categories.

[]{#CH04.htm#pgfId-1016768 .calibre9}Apart from categories, there may be
other needs to have groups with unique index pages. Our users need
support for tags to find similar content. Websites may need pages that
have links to all the author's posts. There could be a series where
readers should read the posts in a specific order that's predefined by
the author.

[]{#CH04.htm#pgfId-1016774 .calibre9}Hugo understands the need for
infinite ways to organize content and provides a generic solution. At
the top level of content organization, Hugo allows us to define what is
called *taxonomies*. Taxonomies are higher-level constructs that we can
use to group the pages that describe relationships between web pages. In
chapter 1, we moved the content from the database to the markup files.
We gained the ability to represent unstructured content better but lost
some of the capabilities to provide structured relationships. Taxonomies
attempt to build relationships between web pages.

[]{#CH04.htm#pgfId-1016789 .calibre9}Figure 4.7 shows the mapping of
concepts between a relational database approach of defining
relationships and Hugo's approach. In a relational database, the content
lives in table cells. These tables have an identifier cell. Identifiers
from two tables are placed together in a third table to build
many-to-many relationships between the content in those tables. In Hugo,
each row in a table corresponds to a separate file in the filesystem. To
define a relationship, we can provide the names (which act as the
identifiers) of the related files in the front matter of the content
files, and Hugo takes care of creating those relationships. We do not
have to create a join query to get these relationships. They are
available as variables in both pages.

![CH04_F07_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH04_F07_Jain.png){.calibre1}\

[]{#CH04.htm#pgfId-1036100}Figure 4.7 Mapping from the traditional
database structure to a Hugo taxonomy to define relationships between
web pages

[]{#CH04.htm#pgfId-1016835 .calibre9}Taxonomies have two parts: the
lists and the terms. Each *taxonomy list* is a collection of *taxonomy
terms*. A page can be associated with many taxonomy terms, and a
taxonomy term can be associated with many pages. Hugo builds
many-to-many relationships between pages and taxonomies. We are free to
define taxonomies and have our content organized by whatever field we
desire. For example, if we are building a website about movies, we would
want pages with a list of movies in groups like genre or actor names. We
would also want to list movies by director, actors, music director, and
so forth. In Hugo, these would turn into taxonomy lists, where each
particular genre or actor name becomes a taxonomy term with its index
page.

[]{#CH04.htm#pgfId-1016844 .calibre9}By default, Hugo defines categories
and tags as taxonomy lists. We can group content into categories and
tags. Because tags and categories are logical constructs (they do not
match with the filesystem), we can have web pages in numerous categories
with multiple tags. Note that we do not need to create separate pages
for every taxonomy list or term we use if we have no additional content
to supply. During compilation, Hugo figures out the lists and terms used
in the website and create pages for them.

::: fm-sidebar-block
[]{#CH04.htm#pgfId-1036132 .calibre9}Multiple renditions of a single
page

[]{#CH04.htm#pgfId-1036133}A page can have multiple URLs. Aliasing using
the front matter allows us to render the same content many times.
Template authors can implement the user interface (UI) for the page
differently for different renditions. The power to have multiple copies
of a page does not mean it is a good idea:

-   []{#CH04.htm#pgfId-1036134}Search engines penalize copies.

-   []{#CH04.htm#pgfId-1036135}Comments from one page do not flow into
    another.

-   []{#CH04.htm#pgfId-1036136}There is confusion among users about the
    absolute correct page of the website.

[]{#CH04.htm#pgfId-1036137}We should use this feature to have multiple
renditions for cases like backward compatibility. If you are coming from
a different URL scheme or something that supported various URLs in the
past and would like to maintain links, then aliases come in handy. Theme
creators provide canonical references in their theme's head section to
prevent the search engine penalty across these aliases. The other
management problems with multiple copies of content remain, but Hugo
provides a mechanism to have a unique template for each handle even
though it may not be present in many themes. Note that we do not advise
creating multiple copies of a single page.
:::

[]{#CH04.htm#pgfId-1016906 .calibre9}Let's work on taxonomies for the
Acme Corporation website. First, we'll add tags and categories for its
posts. We can add these directly in the front matter of the page. This
addition would auto-populate tags in the content and also generate a
Categories page. In the index.md for tropical triangles, we will add the
tags and categories to get a view similar to figure 4.8. The following
listing shows the syntax for this.

[]{#CH04.htm#pgfId-1016963}Listing 4.15 Adding tags and categories
(content/blog/tropical triangles/index.md)

``` programlisting
--- 
title: Tropical triangles 
tags: [triangle, shape, product] 
categories: [shape, design] 
--- 
```

[]{#CH04.htm#pgfId-1017047 .calibre9}The Eclectic theme displays the
tags in the bottom right of the page and the categories in the index
page with the summary. Hugo also creates an index page (e.g.,
/tags/shape) for every tag on the website and a top-level /tags web page
that lists all the tags on the website. The corresponding files are
available in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/05](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/05){.url}]{.fm-hyperlink}).

[]{#CH04.htm#pgfId-1032371}[Code checkpoint]{.fm-callout-head}
[[https://chapter-04-07.hugoinaction.com](https://chapter-04-07.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-07](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-07){.url}]{.fm-hyperlink}.

![CH04_F08_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH04_F08_Jain.png){.calibre1}\

[]{#CH04.htm#pgfId-1036171}Figure 4.8 Elements of a page after adding
tags. The figure shows the cover image, the page title, its contents,
and the tags. (Image by Alexandr Nebesyuk on Pixabay.)

[]{#CH04.htm#pgfId-1017173 .calibre9}We will also add the top-level
Categories page to the footer menu. Although we can do this using the
configuration file, we can create a branch bundle for the Categories
taxonomy list to keep this information isolated. The following listing
creates a top-level Categories page that shows up in the footer menu.

[]{#CH04.htm#pgfId-1017244}Listing 4.16 A top-level Categories page
(content/categories/\_index.md)

``` programlisting
--- 
title: Categories 
menu: 
  footer: 
    weight: 150 
    name: Categories 
--- 
  
At Acme corporation, we produce shapes and love to talk about them. 
Here are the various categories of content we have at Acme. 
```

[]{#CH04.htm#pgfId-1017338 .calibre9}The corresponding file is present
in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/06](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/06){.url}]{.fm-hyperlink}).
The generated Categories page should look like that shown in figure 4.9.
You might need to restart your dev server for the changes to take
effect.

![CH04_F09_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH04_F09_Jain.png){.calibre1}\

[]{#CH04.htm#pgfId-1036205}Figure 4.9 Categories taxonomy list page for
Acme Corporation, which lists all the available categories and their
pages in the website

[]{#CH04.htm#pgfId-1017362 .calibre9}We can also create Markdown pages
for each category. We can use these pages to provide Markdown content
that describes the category. For this, we'll create a branch bundle at
content/categories/\<term\>. By placing the \_index.md file in the
content/ categories/design folder, we can provide information to the
page generated for the Design category.

[]{#CH04.htm#pgfId-1032466}[Code checkpoint]{.fm-callout-head}
[[https://chapter-04-08.hugoinaction.com](https://chapter-04-08.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-08](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-08){.url}]{.fm-hyperlink}.
↻ Restart your dev server.

[]{#CH04.htm#pgfId-1017506 .calibre9}Tags and categories are the default
taxonomies. For our example website, Acme Corporation has a series of
posts around its manufacturing process. We need to migrate this to the
new website. For that, we need to create a new taxonomy called
[series]{.fm-code-in-text} (see figure 4.10). To create a new taxonomy,
we can modify the [taxonomies]{.fm-code-in-text} option in the site
configuration (config.yaml) or create a new file called taxonomies.yaml
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/07](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/07){.url}]{.fm-hyperlink})
in the config/\_default folder with the content in the following
listing.

![CH04_F10_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH04_F10_Jain.png){.calibre1}\

[]{#CH04.htm#pgfId-1036241}Figure 4.10 The
[series]{.fm-code-in-figurecaption} taxonomy for Acme Corporation lists
all the series available on the Acme Corporation website.

[]{#CH04.htm#pgfId-1017585}Listing 4.17 Creating taxonomies
(config/\_default/taxonomies.yaml)

``` programlisting
category: categories 
series: series 
tag: tags 
```

[]{#CH04.htm#pgfId-1017647 .calibre9}Hugo requires both plural and
singular values for taxonomies[]{#CH04.htm#marker-1029870}. With this
information, Hugo creates pages at \<domain\>/\<plural value\> for the
index page and at \<domain\>/ \<plural value\>/\<term\> for the
individual terms in the taxonomy list. Hugo uses the singular value in
the template when rendering it.

[]{#CH04.htm#pgfId-1017653 .calibre9}We can update the manufacturing
process-related posts on the Acme Corporation website and assign them
the manufacturing series. Once we add [series:]{.fm-code-in-text}
[\[manufacturing\]]{.fm-code-in-text} to the front matter for the posts,
we can see the index page for a series at
http:[//]{.fm-hyperlink}localhost:1313/series and the manufacturing
series at http:[//]{.fm-hyperlink}localhost:1313/ series/manufacturing/.
(You may need to restart the live server to view this.) We can add as
many series to the website as needed. It is as valid a construct for
grouping content as are tags and categories.

[]{#CH04.htm#pgfId-1032537}[Code checkpoint]{.fm-callout-head}
[[https://chapter-04-09.hugoinaction.com](https://chapter-04-09.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-09](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-09){.url}]{.fm-hyperlink}.
↻ Restart your dev server.

::: fm-sidebar-block
[]{#CH04.htm#pgfId-1036273 .calibre9}Exercise 4.4

[]{#CH04.htm#pgfId-1036274}In a multi-author website, we want to
represent the author using Hugo taxonomies. Which of the following
options are best suited to list the works of a single author?

1.  []{#CH04.htm#pgfId-1036275}Taxonomy list

2.  []{#CH04.htm#pgfId-1036276}Taxonomy term

3.  []{#CH04.htm#pgfId-1036277}Single post page

4.  []{#CH04.htm#pgfId-1036278}A list/index page

5.  []{#CH04.htm#pgfId-1036279}The website index

6.  []{#CH04.htm#pgfId-1036282}We need to create a new
    page[]{#CH04.htm#marker-1036280}[]{#CH04.htm#marker-1036281}
:::

## []{#CH04.htm#pgfId-1017883}4.5 YouTube, Gists, and other snippets via shortcodes {#CH04.htm#sigil_toc_id_106 .fm-head}

[]{#CH04.htm#pgfId-1017910 .calibre9}[]{#CH04.htm#marker-1017894
.calibre9}[]{#CH04.htm#marker-1017896
.calibre9}[]{#CH04.htm#marker-1017898
.calibre9}[]{#CH04.htm#marker-1017900 .calibre9}As powerful as Markdown
is, it does not have all the possible features that we might require in
our content pages. Elements like those required for YouTube videos,
GitHub Gists, Tweets, etc., are not a part of plain Markdown. While we
can add these as HTML, Hugo provides a better, cleaner
solution---shortcodes. *Shortcodes* are snippets of templates that we
can include in the content files. These get replaced with the actual
contents at compile time. They are equivalent to functions in the
programming world.

[]{#CH04.htm#pgfId-1017919 .calibre9}With shortcodes, we can wrap
reusable pieces of HTML into functions compiled during the page
compilation. This way, content creators do not have to deal with the
generation of the perfect HTML for a particular case that the shortcode
author handles. Shortcodes can take arguments that can be processed in
the template code. Shortcode authors have access to the entire website
configuration and all its variables, Hugo's built-in functions, and the
entire theme to generate the HTML.

[]{#CH04.htm#pgfId-1017947 .calibre9}Shortcodes can be used in markup
using double curly braces followed by HTML-like angle brackets: ([{{\<
\... \>}}]{.fm-code-in-text}). The space between the angle brackets and
the content inside is optional. Shortcodes take the name of the
shortcode, followed by some arguments. Shortcodes support both named
arguments (if supported by the shortcode) or unnamed arguments. The
following listing shows how we call a shortcode
[]{#CH04.htm#marker-1017936 .calibre9}called
[myshortcode]{.fm-code-in-text}.

[]{#CH04.htm#pgfId-1018007}Listing 4.18 Using custom shortcodes in a
Hugo website

``` programlisting
{{< myshortcode arg1 arg2 >}}           ❶
  
{{<myshortcode name1=arg1 name2=arg2>}} ❷
```

[]{#CH04.htm#pgfId-1034840}[❶]{.fm-combinumeral} Creates a shortcode
using angle brackets and unnamed arguments

[]{#CH04.htm#pgfId-1034861}[❷]{.fm-combinumeral} Uses named arguments

[]{#CH04.htm#pgfId-1018234 .calibre9}The Acme Corporation website has a
teaser video that the company wants to incorporate in the About page. In
the About page, we can add [{{\< youtube nLAVanlu5js
\>}}]{.fm-code-in-text} or [{{\< youtube id=\"nLAVanlu5js\"
\>}}]{.fm-code-in-text} to get a YouTube video with the embedded ID,
[nLAVanlu5js]{.fm-code-in-text}. Fortunately, Hugo provides a built-in
shortcode to render a YouTube video. Note that a YouTube video's ID is
available as the parameter after *v* in the YouTube URL (e.g.,
[[https://www.youtube.com/watch?v=nLAVanlu5js](https://www.youtube.com/watch?v=nLAVanlu5js){.url}]{.fm-hyperlink}
is the URL for the Acme Corporation video). You can also pass parameters
[]{#CH04.htm#marker-1018223 .calibre9}like [autoplay]{.fm-code-in-text}
to the YouTube shortcode (see figure 4.11).

[]{#CH04.htm#pgfId-1018282}[Note]{.fm-callout-head} There are active
discussions to move shortcodes built into Hugo out of Hugo's core into a
separate repository. That will allow us to link to specific versions of
the shortcodes and to update outside of a Hugo release cycle. You'll
find a copy of the bundled shortcodes []{#CH04.htm#marker-1018261}like
[youtube]{.fm-code-in-text1} and [highlight]{.fm-code-in-text1} used in
this book in the layouts/shortcodes folder for the Acme Corporation
website
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/08](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/08){.url}]{.fm-hyperlink})
to prevent incompatibility issues.

[]{#CH04.htm#pgfId-1032603}[Code checkpoint]{.fm-callout-head}
[[https://chapter-04-10.hugoinaction.com](https://chapter-04-10.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-10](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-10){.url}]{.fm-hyperlink}.

![CH04_F11_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH04_F11_Jain.png){.calibre1}\

[]{#CH04.htm#pgfId-1036301}Figure 4.11 There are multiple ways to use
built-in shortcodes in Hugo. You can directly call the
[youtube]{.fm-code-in-figurecaption} shortcode, pass
[]{#CH04.htm#marker-1036302}content to the
[highlight]{.fm-code-in-figurecaption} shortcode, or nest shortcodes.

### []{#CH04.htm#pgfId-1018310}[]{#CH04.htm#marker-1030003}[]{#CH04.htm#marker-1030002}4.5.1 Shortcodes with content {#CH04.htm#sigil_toc_id_107 .fm-head1}

[]{#CH04.htm#pgfId-1018419 .calibre9}[]{#CH04.htm#marker-1018413
.calibre9}[]{#CH04.htm#marker-1018415 .calibre9}Shortcodes can also take
content as an argument that the shortcode author can process using the
Go template language. This way, shortcode creators can do processing on
the passed content before rendering the final HTML. The content we give
to a Hugo shortcode can be in the form of HTML or markup.

[]{#CH04.htm#pgfId-1018424 .calibre9}We can use HTML-like opening and
closing angle braces inside the double curly braces to provide the
opening and closing tags for the shortcodes. Hugo passes the content in
the boundaries of the shortcode as-is to the shortcode, and the
shortcode author can then do any processing on the supplied content as
they wish.

[]{#CH04.htm#pgfId-1018459 .calibre9}One popular shortcode used in Hugo
is []{#CH04.htm#marker-1018432 .calibre9}the
[highlight]{.fm-code-in-text} shortcode, which provides syntax
highlighting. This shortcode is an alternative to code fences and
provides the same functionality (see figure 4.11). The following listing
shows the syntax to add []{#CH04.htm#marker-1018448 .calibre9}the
[highlight]{.fm-code-in-text} shortcode.

[]{#CH04.htm#pgfId-1018555}Listing 4.19 Using
[]{#CH04.htm#marker-1018544}the [highlight]{.fm-code-in-listingcaption}
shortcode

``` programlisting
{{< highlight js 
    "linenos=table,hl_lines=3-4,linenostart=1080" >}}   ❶
  
if (!tired()) { 
    keepCoding(); 
}  
else { 
    drinkCoffee(); 
} 
{{</ highlight >}}                                      ❷
```

[]{#CH04.htm#pgfId-1034694}[❶]{.fm-combinumeral} Opens shortcode

[]{#CH04.htm#pgfId-1034715}[❷]{.fm-combinumeral} Closes shortcode
[]{#CH04.htm#marker-1034719}[]{#CH04.htm#marker-1034720}

### []{#CH04.htm#pgfId-1018798}4.5.2 Nested shortcodes {#CH04.htm#sigil_toc_id_108 .fm-head1}

[]{#CH04.htm#pgfId-1018839 .calibre9}[]{#CH04.htm#marker-1018809
.calibre9}[]{#CH04.htm#marker-1018811
.calibre9}[]{#CH04.htm#marker-1018813 .calibre9}We can build nested
shortcodes by inserting a shortcode in another. The innermost shortcode
is processed first, and its results pass on to the outermost shortcode.
One clever use of this feature is to see the result of shortcode
processing by passing it to []{#CH04.htm#marker-1018818 .calibre9}the
[highlight]{.fm-code-in-text} shortcode. The following listing shows how
to do this. Note that [{{\</\* \... \*/\>}}]{.fm-code-in-text} is the
comment syntax for Hugo shortcodes; Hugo does not process the content in
this block as a shortcode (see figure 4.11).

[]{#CH04.htm#pgfId-1018899}Listing 4.20 Using nested shortcode to
highlight the generated code

``` programlisting
{{< highlight html "linenos=table,hl_lines=3-4,linenostart=1080" >}} 
     
{{</* youtube nLAVanlu5js */>}}   ❶
    {{< youtube nLAVanlu5js >}}   ❷
{{</ highlight >}} 
```

[]{#CH04.htm#pgfId-1034578}[❶]{.fm-combinumeral} Generated YouTube
source code for a video (passed as a comment)

[]{#CH04.htm#pgfId-1034609}[❷]{.fm-combinumeral} Output
[]{#CH04.htm#marker-1034613}[]{#CH04.htm#marker-1034614}[]{#CH04.htm#marker-1034615}

### []{#CH04.htm#pgfId-1019121}4.5.3 Built-in shortcodes {#CH04.htm#sigil_toc_id_109 .fm-head1}

[]{#CH04.htm#pgfId-1019154 .calibre9}[]{#CH04.htm#marker-1019146
.calibre9}[]{#CH04.htm#marker-1019148
.calibre9}[]{#CH04.htm#marker-1019150 .calibre9}Hugo comes with its own
built-in generic shortcodes. Some themes may come bundled with
shortcodes for the users. We also have community-built shortcodes
available that we can add to our website and use as needed. We are free
to create custom shortcodes in the shortcodes subfolder within the
layouts folder. Some of the built-in Hugo shortcodes include the
following:

-   []{#CH04.htm#pgfId-1019159
    .calibre9}[gist]{.fm-code-in-text}---Takes
    []{#CH04.htm#marker-1019176 .calibre9}the user and gist ID as
    parameters and renders a GitHub gist. You can also pass a filename
    if the gist has multiple files.

-   []{#CH04.htm#pgfId-1019220 .calibre9}[ref]{.fm-code-in-text}---Takes
    []{#CH04.htm#marker-1019199 .calibre9}a file path in the Hugo
    website and provides an absolute link to that file. If the
    [url]{.fm-code-in-text} or [slug]{.fm-code-in-text} is overridden in
    the front matter of a page, the ref shortcode follows the newly
    provided location.

-   []{#CH04.htm#pgfId-1019229
    .calibre9}[relref]{.fm-code-in-text}---Provides
    []{#CH04.htm#marker-1019242 .calibre9}the relative link to the file
    in the Hugo website. This shortcode works similar to ref.

-   []{#CH04.htm#pgfId-1019252
    .calibre9}[figure]{.fm-code-in-text}---Renders
    []{#CH04.htm#marker-1019265 .calibre9}an image with a caption.

-   []{#CH04.htm#pgfId-1019275
    .calibre9}[tweet]{.fm-code-in-text}---Renders
    []{#CH04.htm#marker-1019288 .calibre9}a Tweet with the given ID.

-   []{#CH04.htm#pgfId-1019298
    .calibre9}[instagram]{.fm-code-in-text}---Embeds
    []{#CH04.htm#marker-1019311 .calibre9}an Instagram image with the
    given ID.

-   []{#CH04.htm#pgfId-1019321
    .calibre9}[vimeo]{.fm-code-in-text}---Renders
    []{#CH04.htm#marker-1019334 .calibre9}a Vimeo video with the given
    ID.

-   []{#CH04.htm#pgfId-1019344
    .calibre9}[youtube]{.fm-code-in-text}---Renders
    []{#CH04.htm#marker-1019357 .calibre9}a YouTube video with the given
    ID.

-   []{#CH04.htm#pgfId-1019367
    .calibre9}[highlight]{.fm-code-in-text}---Adds
    []{#CH04.htm#marker-1019380 .calibre9}syntax highlighting for the
    provided source code.

-   []{#CH04.htm#pgfId-1019390
    .calibre9}[param]{.fm-code-in-text}---Prints
    []{#CH04.htm#marker-1019403 .calibre9}a passed parameter (useful for
    debugging purposes as well). []{#CH04.htm#marker-1019409
    .calibre9}[]{#CH04.htm#marker-1019412
    .calibre9}[]{#CH04.htm#marker-1019414
    .calibre9}[]{#CH04.htm#marker-1019416
    .calibre9}[]{#CH04.htm#marker-1019418
    .calibre9}[]{#CH04.htm#marker-1019420
    .calibre9}[]{#CH04.htm#marker-1019422 .calibre9}

## []{#CH04.htm#pgfId-1019428}4.6 Content sharing using custom shortcodes {#CH04.htm#sigil_toc_id_110 .fm-head}

[]{#CH04.htm#pgfId-1019447 .calibre9}[]{#CH04.htm#marker-1019439
.calibre9}[]{#CH04.htm#marker-1019441
.calibre9}[]{#CH04.htm#marker-1019443 .calibre9}While sharing
complicated logic is one use of shortcodes, we can also use shortcodes
to minimize our copy and paste efforts and to keep our content clean.
Shortcodes can be as simple as snippets of HTML or even Markdown content
that needs to be shared to prevent duplication. With one source of
truth, managing content gets a lot easier. While creating content, if we
find that we are copying and pasting some text repeatedly, it is a good
idea to wrap that text up in a shortcode, then call the shortcode to
provide the content. For content sharing, we can create two types of
shortcodes as described in the following sections.

### []{#CH04.htm#pgfId-1019452}4.6.1 HTML shortcodes {#CH04.htm#sigil_toc_id_111 .fm-head1}

[]{#CH04.htm#pgfId-1019473 .calibre9}[]{#CH04.htm#marker-1019463
.calibre9}[]{#CH04.htm#marker-1019465
.calibre9}[]{#CH04.htm#marker-1019467
.calibre9}[]{#CH04.htm#marker-1019469 .calibre9}We can use custom
shortcodes for placing inline HTML in our Markdown files by adding an
HTML file in the layouts/shortcodes folder. Then we can use that
filename as the shortcode to render it in the document.

[]{#CH04.htm#pgfId-1019478 .calibre9}We will embellish the About page
for the Acme Corporation website by adding dividers via a shortcode
(figure 4.12). To do that, we'll create a file named divider.html in the
layout folder and add the content provided in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/09](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/09){.url}]{.fm-hyperlink})
to create a beautiful divider in plain HTML. Then we can use this file
anywhere in our website to place a divider on the page. The following
listing shows how to add this divider to multiple places on the About
page. Note that you may need to restart your dev server for the changes
to take effect.

[]{#CH04.htm#pgfId-1019553}Listing 4.21 The divider shortcode
(layouts/shortcodes/divider.html)

``` programlisting
<div style="background-image: 
    linear-gradient(to right, transparent, #4f46e5, transparent); 
    margin:15px 0;height:2px;position:relative"> 
  <!-- Additional trick: We can add Unicode 
  characters as-is in HTML to render them.--> 
  <span style="position:absolute; 
    left:calc(50% - 10px); 
    line-height:2px; 
    font-size:30px; 
    padding: 0 5px; 
    background: white; 
    color:#4f46e5">☺</span> 
</div>  
```

[]{#CH04.htm#pgfId-1032694}[Code checkpoint]{.fm-callout-head}
[[https://chapter-04-11.hugoinaction.com](https://chapter-04-11.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-11](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-11){.url}]{.fm-hyperlink}.
↻ Restart your dev server.

![CH04_F12_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH04_F12_Jain.png){.calibre1}\

[]{#CH04.htm#pgfId-1036336}Figure 4.12 Using custom shortcodes in the
About page for Acme Corporation to create a personalized divider

### []{#CH04.htm#pgfId-1019962}4.6.2 Markup-based shortcodes {#CH04.htm#sigil_toc_id_112 .fm-head1}

[]{#CH04.htm#pgfId-1020013 .calibre9}[]{#CH04.htm#marker-1019987
.calibre9}[]{#CH04.htm#marker-1019989
.calibre9}[]{#CH04.htm#marker-1019991
.calibre9}[]{#CH04.htm#marker-1019993 .calibre9}While most shortcodes
are HTML, we have the option to write shortcodes in markup languages
like Markdown. Hugo converts the Markdown shortcodes to HTML if we call
them using percent signs ([%]{.fm-code-in-text}) instead of angle
brackets ([\<\>]{.fm-code-in-text}) as we do in regular shortcodes. This
way, we can move data in a shared place and then use that from
everywhere it is needed.

::: fm-sidebar-block
[]{#CH04.htm#pgfId-1036368 .calibre9}Exercise 4.5

[]{#CH04.htm#pgfId-1036369}Shortcodes are declared in the
\_\_\_\_\_\_\_\_ top-level folder in a Hugo website and consumed in
\_\_\_\_\_\_\_\_.
:::

[]{#CH04.htm#pgfId-1020051 .calibre9}We can move the product information
table from the About page into a shortcode and share it in the blog post
about the manufacturing process on the Acme Corporation website. Let's
create a file named productInfo.md in the layouts/shortcodes folder and
move the contents of the product information to this page. Then we can
place the string [{{%]{.fm-code-in-text} [productInfo]{.fm-code-in-text}
[%}}]{.fm-code-in-text} anywhere in our content to get the product
information table. Let's do that for the About page and the
manufacturing process page on the Acme Corporation website
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/10](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-resources/10){.url}]{.fm-hyperlink}).

[]{#CH04.htm#pgfId-1032803}[Code checkpoint]{.fm-callout-head}
[[https://chapter-04-12.hugoinaction.com](https://chapter-04-12.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH04.htm#marker-1032868}[]{#CH04.htm#marker-1032869}[]{#CH04.htm#marker-1032870}[]{#CH04.htm#marker-1032871}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-04-12](https://github.com/hugoinaction/hugoinaction/tree/chapter-04-12){.url}]{.fm-hyperlink}.

### []{#CH04.htm#pgfId-1020085}4.6.3 Inline shortcodes {#CH04.htm#sigil_toc_id_113 .fm-head1}

[]{#CH04.htm#pgfId-1020215 .calibre9}[]{#CH04.htm#marker-1020199
.calibre9}[]{#CH04.htm#marker-1020201
.calibre9}[]{#CH04.htm#marker-1020203
.calibre9}[]{#CH04.htm#marker-1020205 .calibre9}We have built shortcodes
in a separate file (like productInfo.md), which is available globally
and shared in the entire website. Alternatively, if we want to have a
shortcode specific to the page, we can declare the shortcode in the
Markdown content of the page and use it in that page. This shortcode can
do everything a regular shortcode can. This does not create variables
outside the page and, therefore, speeds up compilation along with
keeping the global list of shortcodes clean. These shortcodes are called
*inline shortcodes* because they are declared inline in the file where
we invoke them.

[]{#CH04.htm#pgfId-1020240 .calibre9}Inline shortcodes are disabled by
default because shortcodes can access the entire website configuration.
If all content is coming from a trusted source, this is not an issue. We
can enable inline shortcodes by creating a security configuration file
(config/ \_default/security.yaml) with the setting
[enableInlineShortcodes:]{.fm-code-in-text} [true]{.fm-code-in-text}.
Once we do that, we can declare a shortcode in our content using
[.inline]{.fm-code-in-text} after the name we want to give to the
shortcode.

[]{#CH04.htm#pgfId-1020249 .calibre9}Inline shortcodes execute as soon
as they are declared and *cannot* be nested. We can generate both HTML
and markup-based inline shortcodes. The following listing shows how to
use inline shortcodes. Unlike regular shortcodes, we declare these
inline with the content.

[]{#CH04.htm#pgfId-1020315}Listing 4.22 Using inline shortcodes in Hugo

``` programlisting
{{< reuse.inline >}}        ❶
 
Reused _content_ here       ❶
{{< /reuse.inline >}}       ❶
  
{{< reuse.inline />}}       ❷
  
{{% reuse.inline /%}}       ❸
```

[]{#CH04.htm#pgfId-1034338}[❶]{.fm-combinumeral} Declares an inline
shortcode and its first use that's executed as HTML. We can also declare
it with % to run as Markdown.

[]{#CH04.htm#pgfId-1034378}[❷]{.fm-combinumeral} Shortcode usage as HTML

[]{#CH04.htm#pgfId-1034343}[❸]{.fm-combinumeral} Shortcode usage as
markup

[]{#CH04.htm#pgfId-1020500 .calibre9}There is a lot more we can do with
shortcodes, so we will explore some advanced shortcodes in chapter 5.
This chapter concludes the usage of Hugo as a content management system.
Using the features discussed so far and relying on an existing theme
like Eclectic, we can build and maintain complicated websites.

[]{#CH04.htm#pgfId-1020506 .calibre9}Many Hugo users do not cross beyond
this point in their journey to learn Hugo. While we can do a lot within
the bounds of a Hugo theme, more power awaits in the Hugo template
system. In the next set of chapters, we will build pieces of an
independent theme that takes data in various ways, including from the
front matter, separate files, or over the internet to create custom web
pages. Moreover, we're not through with Hugo's content management
features just yet. We will introduce some features like the
[cascade]{.fm-code-in-text} property in the following chapters.
[]{#CH04.htm#marker-1030872 .calibre9}[]{#CH04.htm#marker-1030873
.calibre9}[]{#CH04.htm#marker-1030874
.calibre9}[]{#CH04.htm#marker-1030875
.calibre9}[]{#CH04.htm#marker-1030876
.calibre9}[]{#CH04.htm#marker-1030877
.calibre9}[]{#CH04.htm#marker-1030878 .calibre9}

## []{#CH04.htm#pgfId-1020536}Summary {#CH04.htm#sigil_toc_id_114 .fm-head-1-notoc}

-   []{#CH04.htm#pgfId-1020546 .calibre9}Hugo offers the flexibility to
    override global configuration variables and to manage them via
    multiple files and in various environments. By moving configuration
    from a single file to a folder, we can choose options based on
    numerous conditions.

-   []{#CH04.htm#pgfId-1020560 .calibre9}We can organize web pages in
    Hugo into sections by placing the corresponding markup content into
    folders. These sections can be nested and typically match the URL
    scheme for the website.

-   []{#CH04.htm#pgfId-1020570 .calibre9}We can make the content
    accessible using index pages for various sections and add those
    pages to menus.

-   []{#CH04.htm#pgfId-1020580 .calibre9}To enable the portability of
    content across websites, Hugo offers the capability to have
    self-contained and isolated data. We can achieve this isolation by
    placing the menu entries in the front matter and by using page
    bundles.

-   []{#CH04.htm#pgfId-1020590 .calibre9}With leaf and branch bundles,
    we keep all assets closer to the content. We can bundle
    page-specific images and files in the same folder as the markup
    content for the page.

-   []{#CH04.htm#pgfId-1020600 .calibre9}Hugo offers the ability to
    logically organize the content in any way desired via taxonomies.
    Each taxonomy consists of terms, and a page can be present in
    multiple taxonomies and have numerous terms.

-   []{#CH04.htm#pgfId-1020610 .calibre9}Taxonomies create list pages
    and provide support for many-to-many mappings between pages and
    taxonomy terms. We can define as many taxonomies as needed.

-   []{#CH04.htm#pgfId-1020620 .calibre9}Shortcodes are a means to
    provide snippets that we can use to extend Markdown with new
    features. Hugo comes bundled with shortcodes for various use cases,
    from YouTube videos to syntax highlighting.

-   []{#CH04.htm#pgfId-1020630 .calibre9}We can define custom shortcodes
    in both markup and HTML formats and in line with the content to
    prevent the need to copy and paste rendering logic.

[]{#CH05.htm}

# []{#CH05.htm#pgfId-1027035}5 Custom pages and customized content with the Go template language {#CH05.htm#heading_id_2 .tochead}

[]{#CH05.htm#pgfId-1029387}This chapter covers

-   []{#CH05.htm#pgfId-1029424 .calibre9}Customizing pages and
    shortcodes
-   []{#CH05.htm#pgfId-1029425 .calibre9}Rendering content and accessing
    variables and functions in the Go template language
-   []{#CH05.htm#pgfId-1029426 .calibre9}Accessing Hugo's configuration
    and front matter in code
-   []{#CH05.htm#pgfId-1029427 .calibre9}Reading from the filesystem
-   []{#CH05.htm#pgfId-1029415 .calibre9}Creating reusable page
    templates called archetypes

[]{#CH05.htm#pgfId-1011814 .calibre9}One strength of Hugo is its clear
separation of concerns between content (Markdown) and presentation
(HTML/CSS/JavaScript). When we create content, we rarely have to deal
with HTML. Team members who are not well versed in HTML or CSS can be
successful with Hugo as a content management system using features we've
discussed so far in this book. However, we can unlock a lot more power
by digging deeper into layouts and HTML generation.

[]{#CH05.htm#pgfId-1011820 .calibre9}Chapter 2 has a section where we
step out of the theme to create the home page in pure HTML. In doing so,
we eschewed the role of the content creator and went into web developer
mode, while primarily supplying content for the other pages. In this
chapter, we will get first-hand experience with Hugo's template language
and its rendering mechanism as we improve the home page for the Acme
Corporation website. In addition, we will add some features based on the
content that a static HTML page cannot provide.

[]{#CH05.htm#pgfId-1011826 .calibre9}The pure HTML index page we
currently have for the Acme Corporation website has an intermingling of
content and layout. This approach has a massive set of problems:

-   []{#CH05.htm#pgfId-1011832 .calibre9}We cannot share parts, HTML
    fragments, or data between pages.

-   []{#CH05.htm#pgfId-1011846 .calibre9}Data and layout are
    interspersed in the HTML file so changing the textual content needs
    an understanding of HTML.

-   []{#CH05.htm#pgfId-1011856 .calibre9}HTML is not as easily
    human-readable as is Markdown and YAML.

-   []{#CH05.htm#pgfId-1011866 .calibre9}HTML does not have variables,
    conditionals, and loops, making it difficult to manage pages with a
    repetition of content.

[]{#CH05.htm#pgfId-1011876 .calibre9}Even for a single page, writing
using the template logic is better than using plain HTML. We can
simplify the maintainability of a website by using a template instead of
simple HTML. One significant benefit of Hugo is the blurriness of the
boundary between the theme and the content. Hugo provides the power to
use a theme partially and override parts of web pages or to write our
custom pages using all the features available to themes. In the
following two chapters, we will move away from the Eclectic theme.
Because we do this in a piecemeal manner, our website will still be
functional the whole time.

![CH05_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH05_F01_Jain.png){.calibre1}\

[]{#CH05.htm#pgfId-1042945}Figure 5.1 Hugo compiles the template file
provided in the layouts folder in combination with the markup content to
generate the HTML content for the web page. The developer provides the
template file and uses some content to ensure that the Hugo build
process generates the content for a web page correctly. This chapter
goes through the program logic that the developer needs to create
between the template and the content to generate a single web page.

[]{#CH05.htm#pgfId-1011882 .calibre9}This chapter deals with a
single-page template as illustrated in figure 5.1. In section 5.1, we
will split the layout and the content for the index page of the Acme
Corporation website. In section 5.2, we will enhance the index page with
information generated by Hugo based on the content of the rest of the
website. Section 5.3 provides a glimpse of data-driven web pages built
using structured front matter and data files. Finally, in section 5.4,
we will use the teachings in this chapter to help our content editor by
contributing as developers to provide some content automation.

## []{#CH05.htm#pgfId-1011898}[]{#CH05.htm#marker-1031696}[]{#CH05.htm#marker-1031694}[]{#CH05.htm#marker-1031692}[]{#CH05.htm#marker-1031689}5.1 Separating data and design {#CH05.htm#sigil_toc_id_115 .fm-head}

[]{#CH05.htm#pgfId-1011933 .calibre9}[]{#CH05.htm#marker-1011923
.calibre9}[]{#CH05.htm#marker-1011925
.calibre9}[]{#CH05.htm#marker-1011927
.calibre9}[]{#CH05.htm#marker-1011929 .calibre9}To control the website's
index page with a markup document, we need to create the markup document
first. The content folder is the branch bundle for the entire website.
We need to place \_index.md
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/01](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/01){.url}]{.fm-hyperlink})
in that folder to represent the /index.html web page. Note that if we
use index.md instead, the website's root becomes a leaf bundle and will
not use the template we provide in the layouts folder. With the markup
document present, we can move the data currently hardcoded in index.html
into the front matter of this markup document. The following listing
shows the contents of the index page using Markdown as the markup
language. We'll use this information in the index.html page.

[]{#CH05.htm#pgfId-1012008}Listing 5.1 The contents of the index page in
Markdown (content/\_index.md)

``` programlisting
--- 
title: Acme Corporation 
description: Welcome to the website of Acme Corporation, the 
    leading creator of digital shapes on the planet, providing 
    precise shape creations that are ready to use. 
subtitle: shaping the world for you to live in 
explore: blog 
--- 
```

### []{#CH05.htm#pgfId-1012082}5.1.1 Accessing the Go template language {#CH05.htm#sigil_toc_id_116 .fm-head1}

[]{#CH05.htm#pgfId-1012127 .calibre9}[]{#CH05.htm#marker-1012093
.calibre9}[]{#CH05.htm#marker-1012095
.calibre9}[]{#CH05.htm#marker-1012097
.calibre9}[]{#CH05.htm#marker-1012099
.calibre9}[]{#CH05.htm#marker-1012101 .calibre9}Hugo uses the Go
template language, which is different than the Go programming language,
for creating templates. The Go template language can be accessed with
the HTML in the template pages by using double curly braces
([{{]{.fm-code-in-text} [\...]{.fm-code-in-text}
[}}]{.fm-code-in-text}), which are also []{#CH05.htm#marker-1012116
.calibre9}called *mustache* tags.

[]{#CH05.htm#pgfId-1012136 .calibre9}Appendix D provides a short
overview of the Go template language. The resources for this chapter
also include a folder named template-playground that we can place in the
layouts folder and play around with Hugo's template technology. The
corresponding changes can be viewed from the /template endpoint if we
place template.md in the content folder
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/02](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/02){.url}]{.fm-hyperlink}).
While this book introduces most of Hugo's commonly used features, if you
are looking for a more comprehensive list of its features (outside of
the appendix), Hugo's official documentation at
[[https://gohugo.io/documentation/](https://gohugo.io/documentation/){.url}]{.fm-hyperlink}
does a great job of listing these.

[]{#CH05.htm#pgfId-1012161 .calibre9}Hugo treats the content outside of
the mustache tags as a raw string that we can pass in to the final HTML
as is. All the information present in the content folder is also
available via variables in the template. Hugo provides a few top-level
variables to access content, including:

-   []{#CH05.htm#pgfId-1012242 .calibre9}[\$]{.fm-code-in-text}*---This
    variable represents the top-level context of the template.* In
    []{#CH05.htm#marker-1012193 .calibre9}[]{#CH05.htm#marker-1012196
    .calibre9}the case of a page template, this variable represents the
    current page. Page-level metadata like the title is available as
    [\$.Title]{.fm-code-in-text}, and the description is available
    []{#CH05.htm#marker-1012211 .calibre9}as
    [\$.Description]{.fm-code-in-text}. A page-level variable links to
    itself via the [Page]{.fm-code-in-text} property, and we can
    therefore write the website's title as
    [\$.Page.Title]{.fm-code-in-text}.

-   []{#CH05.htm#pgfId-1012304
    .calibre9}[site]{.fm-code-in-text}*---This variable provides data
    for the whole website.* We []{#CH05.htm#marker-1012273 .calibre9}can
    use this variable to access configurations in config.yaml, to
    navigate the website's pages via [site.Pages]{.fm-code-in-text}, to
    move through the taxonomies using
    [site.Taxonomies]{.fm-code-in-text}, and to view custom parameters
    with [site.Params]{.fm-code-in-text}.

-   []{#CH05.htm#pgfId-1012356
    .calibre9}[hugo]{.fm-code-in-text}*---This variable provides access
    to the Hugo compiler.* The []{#CH05.htm#marker-1012335
    .calibre9}compiler includes methods like
    [hugo.IsProduction]{.fm-code-in-text} (to detect if we are building
    for production) and [hugo.Version]{.fm-code-in-text} (to inform us
    about the Hugo version).

::: fm-sidebar-block
[]{#CH05.htm#pgfId-1042982 .calibre9}Exercise 5.1

[]{#CH05.htm#pgfId-1042983}A shortcode in Hugo also allows for Go
templates. What would the top-level context \$ represent in a shortcode?

1.  []{#CH05.htm#pgfId-1042984}The shortcode

2.  []{#CH05.htm#pgfId-1042985}The containing page

3.  []{#CH05.htm#pgfId-1042986}The entire site

4.  []{#CH05.htm#pgfId-1042987}None of the above
:::

[]{#CH05.htm#pgfId-1012484 .calibre9}The metadata provided in the front
matter is available in the page-level variable accessible as
[\$]{.fm-code-in-text} or [\$.Page]{.fm-code-in-text}. In addition, the
page-level variable has multiple properties and subproperties that we
can use to access user-supplied and Hugo-generated metadata about the
page. We can use these in the template for the index page (layouts/
index.html) by using the []{#CH05.htm#marker-1012453
.calibre9}page-level variables [\$.Title]{.fm-code-in-text} and
[\$.Description]{.fm-code-in-text}. The following listing provides the
page-level variables that we'll use to fill the website's
[\<head\>]{.fm-code-in-text} section.

[]{#CH05.htm#pgfId-1012544}Listing 5.2 Using page variables
(layouts/index.html)

``` programlisting
<head> 
  <meta charset="UTF-8"> 
  <meta name="description" content="{{$.Description}} "> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
  <link rel="stylesheet" href="./index.css"> 
  <title>{{$.Title}}</title> 
</head> 
```

[]{#CH05.htm#pgfId-1012811 .calibre9}We can reuse the page title in the
body of the index page. That way, we do not need to repeat this
information across web pages. The following listing shows how to access
the same parameter multiple times in a Hugo template to reuse the page
title.

[]{#CH05.htm#pgfId-1012868}Listing 5.3 Accessing the same parameter
(layouts/index.html)

``` programlisting
<h1>{{$.Title}}</h1> 
```

[]{#CH05.htm#pgfId-1013035 .calibre9}Hugo standardizes the title and
description properties of the web page. These are available in the
top-level page object. The custom []{#CH05.htm#marker-1012932
.calibre9}metadata item [subtitle]{.fm-code-in-text} is not available at
the top level in Hugo. To access the []{#CH05.htm#marker-1012948
.calibre9}[subtitle]{.fm-code-in-text} variable, we need to
[]{#CH05.htm#marker-1012960 .calibre9}use the [Params]{.fm-code-in-text}
object in the page. That way []{#CH05.htm#marker-1012976 .calibre9}the
[Params]{.fm-code-in-text} object holds all the user-defined metadata in
the front matter. By moving all the custom metadata to
[]{#CH05.htm#marker-1012992 .calibre9}the [Params]{.fm-code-in-text}
object, the Hugo team was able to add more properties to the page
variable without breaking compatibility with older websites. The
following listing shows how to access []{#CH05.htm#marker-1013008
.calibre9}the [subtitle]{.fm-code-in-text} variable in
[]{#CH05.htm#marker-1013024 .calibre9}the [Params]{.fm-code-in-text}
object.

[]{#CH05.htm#pgfId-1013095}Listing 5.4 Accessing nonstandard parameters
(layouts/index.html)

``` programlisting
<h2>{{$.Params.Subtitle}}</h2> 
```

[]{#CH05.htm#pgfId-1013230}[Note]{.fm-callout-head} Although we defined
the []{#CH05.htm#marker-1013169}metadata item as
[subtitle]{.fm-code-in-text1}, in the listing, we accessed it as
[Subtitle]{.fm-code-in-text1}. Variables in
[\$.Params]{.fm-code-in-text1} are *not* case-sensitive. The supplied
title also exists in [Params]{.fm-code-in-text1} and can be accessed as
[\$.Params.Title]{.fm-code-in-text1}.

[]{#CH05.htm#pgfId-1037409}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-01.hugoinaction.com](https://chapter-05-01.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH05.htm#marker-1037472}[]{#CH05.htm#marker-1037473}[]{#CH05.htm#marker-1037474}[]{#CH05.htm#marker-1037475}[]{#CH05.htm#marker-1037476}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-01](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-01){.url}]{.fm-hyperlink}.

### []{#CH05.htm#pgfId-1013239}5.1.2 Existence checks {#CH05.htm#sigil_toc_id_117 .fm-head1}

[]{#CH05.htm#pgfId-1013367 .calibre9}[]{#CH05.htm#marker-1013355
.calibre9}[]{#CH05.htm#marker-1013357
.calibre9}[]{#CH05.htm#marker-1013359
.calibre9}[]{#CH05.htm#marker-1013361
.calibre9}[]{#CH05.htm#marker-1013363 .calibre9}Although our code
provides the data needed, there are edge cases where the code will fail.
One rule of thumb when writing markup-driven websites is to assume all
properties are optional. That enables all the content to be portable. If
the user switches from a different theme to a more current one, they
have an intense desire that the website remains functional at all times.
They can slowly provide the data to support theme-specific features. If
we do not provide any metadata, the home page we just created renders
empty strings in place of all the custom data. But we can do better by
providing default values and running existence checks.

[]{#CH05.htm#pgfId-1013448 .calibre9}Listing 5.5 provides one way to do
an existence check using the [if]{.fm-code-in-text} statement in Hugo.
In the listing, the [if]{.fm-code-in-text} statement checks its
arguments for a truthful value for the title, description, and subtitle.
When the supplied argument is [true]{.fm-code-in-text}, the
[if]{.fm-code-in-text} statement executes the template code inside the
[if]{.fm-code-in-text} block. Additionally, the container HTML tags are
not present if we do not provide the inner content. The values that fail
the [if]{.fm-code-in-text} check include [false]{.fm-code-in-text},
[0]{.fm-code-in-text}, a nonexistent variable ([nil]{.fm-code-in-text}),
a slice, a map, or a string of length zero.

[]{#CH05.htm#pgfId-1013514}Listing 5.5 Using existence checks
(layouts/index.html)

``` programlisting
... 
{{if $.Description}} 
<meta name="description" content="{{$.Description}}"> 
{{end}} 
... 
{{if $.Title}}<title>{{$.Title}}</title>{{end}} 
... 
{{if $.Title}}<h1>{{$.Title}}</h1>{{end}} 
{{if $.Params.Subtitle}}<h2>{{$.Params.Subtitle}}</h2>{{end}} 
... 
```

[]{#CH05.htm#pgfId-1037496}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-02.hugoinaction.com](https://chapter-05-02.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH05.htm#marker-1037559}[]{#CH05.htm#marker-1037560}[]{#CH05.htm#marker-1037561}[]{#CH05.htm#marker-1037562}[]{#CH05.htm#marker-1037563}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-02](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-02){.url}]{.fm-hyperlink}.

### []{#CH05.htm#pgfId-1013849}5.1.3 Using site variables for defaults {#CH05.htm#sigil_toc_id_118 .fm-head1}

[]{#CH05.htm#pgfId-1014009 .calibre9}[]{#CH05.htm#marker-1013965
.calibre9}[]{#CH05.htm#marker-1013967
.calibre9}[]{#CH05.htm#marker-1013969
.calibre9}[]{#CH05.htm#marker-1013971
.calibre9}[]{#CH05.htm#marker-1013973 .calibre9}The page title is also
optional. If we do not provide the title for the home page, we can fall
back to the website title supplied in the config.yaml file. The
following listing shows how we can achieve this by using
[]{#CH05.htm#marker-1013978 .calibre9}the [site.Title]{.fm-code-in-text}
variable for the content if the page title is unavailable. We can use
the [else]{.fm-code-in-text} logic for falling back to
[site.Title]{.fm-code-in-text}.

[]{#CH05.htm#pgfId-1014069}Listing 5.6 Falling back to the website's
title (layouts/index.html)

``` programlisting
{{if $.Title}} 
  <title>{{$.Title}}</title> 
{{else if site.Title}} 
  <title>{{site.Title}}</title> 
{{end}} 
```

[]{#CH05.htm#pgfId-1037582}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-03.hugoinaction.com](https://chapter-05-03.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-03](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-03){.url}]{.fm-hyperlink}.

[]{#CH05.htm#pgfId-1014347 .calibre9}We can also use
[\$.Site]{.fm-code-in-text} for the [site]{.fm-code-in-text} variable.
Because [site]{.fm-code-in-text} is available globally in the Hugo
templates to access all the site variables, it is advisable to use
[site]{.fm-code-in-text} instead of [\$.Site]{.fm-code-in-text}. That's
because [\$.Site]{.fm-code-in-text} may not be available across all
template types. []{#CH05.htm#marker-1014352
.calibre9}[]{#CH05.htm#marker-1014355
.calibre9}[]{#CH05.htm#marker-1014357
.calibre9}[]{#CH05.htm#marker-1014359
.calibre9}[]{#CH05.htm#marker-1014361 .calibre9}

### []{#CH05.htm#pgfId-1014367}5.1.4 Creating variables for simplification {#CH05.htm#sigil_toc_id_119 .fm-head1}

[]{#CH05.htm#pgfId-1014402 .calibre9}[]{#CH05.htm#marker-1014378
.calibre9}[]{#CH05.htm#marker-1014380
.calibre9}[]{#CH05.htm#marker-1014382
.calibre9}[]{#CH05.htm#marker-1014384
.calibre9}[]{#CH05.htm#marker-1014386 .calibre9}Although the page title
is needed twice on the home page, that is an unnecessary repetition. We
could store the title in a variable []{#CH05.htm#marker-1014391
.calibre9}called [\$title]{.fm-code-in-text} and use that instead as the
following listing demonstrates.

[]{#CH05.htm#pgfId-1014462}Listing 5.7 Declaring
[\$title]{.fm-code-in-listingcaption} with a default value
(layouts/index.html)

``` programlisting
{{$title := $.Title}}     ❶
```

[]{#CH05.htm#pgfId-1042561 .calibre9}[❶]{.fm-combinumeral} Declares a
variable []{#CH05.htm#marker-1042565 .calibre9}called \$title

[]{#CH05.htm#pgfId-1014598 .calibre9}Note that all user-defined
variables start with a dollar sign ([\$]{.fm-code-in-text}). A
declaration also requires [:=]{.fm-code-in-text} for assignment. We can
use a single equals sign ([=]{.fm-code-in-text}) for future assignment
as well. If needed, the following listing shows how we can provide a
fallback value to a Hugo variable.

[]{#CH05.htm#pgfId-1014658}Listing 5.8 Using
[if]{.fm-code-in-listingcaption} to provide a fallback value
(layouts/index.html)

``` programlisting
... 
{{if not $title}} 
{{$title = site.Title}} 
{{end}} 
```

[]{#CH05.htm#pgfId-1014777 .calibre9}In the listing, [if
not]{.fm-code-in-text} checks if the page title is not truthful and, if
so, resets []{#CH05.htm#marker-1014756 .calibre9}the
[\$title]{.fm-code-in-text} variable to the website title. In the Go
template language, [not]{.fm-code-in-text} is
[]{#CH05.htm#marker-1014782 .calibre9}a Boolean function. It takes a
parameter and flips its truthfulness.

[]{#CH05.htm#pgfId-1014848 .calibre9}Note that we can use
[=]{.fm-code-in-text} to reset an existing variable and
[:=]{.fm-code-in-text} to declare a new one. Hugo scopes variables to
the code block where they are present. In other words, a variable
declared inside an [if]{.fm-code-in-text} block is not accessible
outside of it. Because we defined [\$title]{.fm-code-in-text} with a
default value earlier, we did not need the [else]{.fm-code-in-text}
statement to match the [if]{.fm-code-in-text} statement in the previous
listing.

[]{#CH05.htm#pgfId-1014880 .calibre9}Also note that we cannot use
variables without declaring them. Using a variable before declaration
fails. Because we declared []{#CH05.htm#marker-1014859 .calibre9}the
[title]{.fm-code-in-text} variable in listing 5.7, we can now use
[\$title]{.fm-code-in-text} wherever we need the page title with the
site title as a fallback. The following listing shows this usage.

[]{#CH05.htm#pgfId-1014940}Listing 5.9 Providing the web page title
(layouts/index.html)

``` programlisting
{{if $title}}<title>{{$title}}</title>{{end}} 
```

[]{#CH05.htm#pgfId-1037648}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-04.hugoinaction.com](https://chapter-05-04.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH05.htm#marker-1037703}[]{#CH05.htm#marker-1037704}[]{#CH05.htm#marker-1037705}[]{#CH05.htm#marker-1037706}[]{#CH05.htm#marker-1037707}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-04](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-04){.url}]{.fm-hyperlink}.

### []{#CH05.htm#pgfId-1015022}5.1.5 Using standard library functions to reduce the code size {#CH05.htm#sigil_toc_id_120 .fm-head1}

[]{#CH05.htm#pgfId-1015162 .calibre9}[]{#CH05.htm#marker-1015138
.calibre9}[]{#CH05.htm#marker-1015140
.calibre9}[]{#CH05.htm#marker-1015142
.calibre9}[]{#CH05.htm#marker-1015144
.calibre9}[]{#CH05.htm#marker-1015146 .calibre9}Although we are not
doing anything special to get the title, our code can be needlessly
lengthy and challenging to write and understand. Hugo has predefined
functions for common code patterns in its websites. These can
significantly reduce the complexity of the templates and their code
size. We got a taste of Hugo's functions by using
[]{#CH05.htm#marker-1015151 .calibre9}the [not]{.fm-code-in-text}
function in listing 5.8. Let's look at another Hugo function next.

[]{#CH05.htm#pgfId-1015215 .calibre9}We can use the
[default]{.fm-code-in-text} function to []{#CH05.htm#marker-1015182
.calibre9}provide a default value if a value is absent. We can replace
the [if]{.fm-code-in-text} check with the usage of the
[]{#CH05.htm#marker-1015198 .calibre9}[default]{.fm-code-in-text}
function. The following listing uses [default]{.fm-code-in-text} as a
shortcut to provide a default title for our website.

[]{#CH05.htm#pgfId-1015275}Listing 5.10 Declaring a default title
(layouts/index.html)

``` programlisting
{{$title:= default site.Title $.Title}} 
```

[]{#CH05.htm#pgfId-1015397 .calibre9}Hugo functions separate their
parameters with spaces. Function calls can be wrapped with parentheses,
[()]{.fm-code-in-text}. Unless we use multiple nested functions where
there is ambiguity, parentheses are optional when invoking Hugo
functions. We can write []{#CH05.htm#marker-1015356 .calibre9}the
[not]{.fm-code-in-text} call in listing 5.7 as [if (not
\$.Title)]{.fm-code-in-text}, and the bracketed version of the
[default]{.fm-code-in-text} call would be [(default site.Title
\$.Title)]{.fm-code-in-text}.

[]{#CH05.htm#pgfId-1015571 .calibre9}The first argument to
[]{#CH05.htm#marker-1015408 .calibre9}the [default]{.fm-code-in-text}
function is the default value, while the second is the value to be
checked and used if it exists. One difference between
[default]{.fm-code-in-text} and the []{#CH05.htm#marker-1015434
.calibre9}regular [if]{.fm-code-in-text} check is that
[default]{.fm-code-in-text} checks for the existence of a value, whereas
[if]{.fm-code-in-text} verifies the value's truthfulness. Empty strings,
[false]{.fm-code-in-text}, and [0]{.fm-code-in-text} will not pass the
truthfulness test. The [if]{.fm-code-in-text} statement will also check
the [else]{.fm-code-in-text} code block if such is available. (This is
only valid for the subtitle field. Note that Hugo provides
[Title]{.fm-code-in-text} as a string property and coerces
[false]{.fm-code-in-text} to the string [\"false\"]{.fm-code-in-text},
which is truthful for [\$.Title]{.fm-code-in-text}). To match the
default behavior with the [if]{.fm-code-in-text} statement, we should
use []{#CH05.htm#marker-1015560 .calibre9}the [isset]{.fm-code-in-text}
function. The following listing uses this function to check if a
variable is not undefined.

[]{#CH05.htm#pgfId-1015667}Listing 5.11 Using
[]{#CH05.htm#marker-1015656}the [isset]{.fm-code-in-listingcaption}
function (layouts/index.html)

``` programlisting
{{if isset $.Params "subtitle"}}<h2>{{$.Params.subtitle}}</h2>{{end}} 
```

[]{#CH05.htm#pgfId-1015761 .calibre9}If we pass
[false]{.fm-code-in-text} as the subtitle of the web page (by setting
[subtitle: false]{.fm-code-in-text} in the front matter of the
[.md]{.fm-code-in-text} file), Hugo still renders the web page.

[]{#CH05.htm#pgfId-1015855 .calibre9}Another function worth mentioning
[]{#CH05.htm#marker-1015772 .calibre9}here is
[\$.Param]{.fm-code-in-text}. This function is tied to
[]{#CH05.htm#marker-1015788 .calibre9}the [\$]{.fm-code-in-text} object
because it accesses [site.Params]{.fm-code-in-text} and
[\$.Params]{.fm-code-in-text}. The pattern of accessing the page
variable and falling back to the site variable is so common that Hugo
has a built-in method to do this. We can use
[\$.Param]{.fm-code-in-text} when passing just the subtitle call to
access the title. The following listing shows how to declare
[]{#CH05.htm#marker-1015834 .calibre9}the [\$.Param]{.fm-code-in-text}
function to provide the subtitle. The [\$.Param]{.fm-code-in-text}
function provides []{#CH05.htm#marker-1015860 .calibre9}the page
subtitle and falls back to the site subtitle if the page subtitle is not
present.

[]{#CH05.htm#pgfId-1015957}Listing 5.12 Using
[]{#CH05.htm#marker-1015946}the [\$.Param]{.fm-code-in-listingcaption}
function (layouts/index.html)

``` programlisting
{{$.Param "subtitle"}}
```

[]{#CH05.htm#pgfId-1037727}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-05.hugoinaction.com](https://chapter-05-05.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH05.htm#marker-1037789}[]{#CH05.htm#marker-1037790}[]{#CH05.htm#marker-1037791}[]{#CH05.htm#marker-1037792}[]{#CH05.htm#marker-1037793}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-05](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-05){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH05.htm#pgfId-1043004 .calibre9}Exercise 5.2

[]{#CH05.htm#pgfId-1043005}It is a good practice to continue to render a
website even if certain front matter properties are absent. The
\_\_\_\_\_\_\_\_ function allows us to fill in a custom fallback value
if the front matter entry does not exist.
:::

### []{#CH05.htm#pgfId-1016102}[]{#CH05.htm#marker-1038010}[]{#CH05.htm#marker-1038009}[]{#CH05.htm#marker-1038008}[]{#CH05.htm#marker-1038007}[]{#CH05.htm#marker-1038006}5.1.6 Using a context switch via the with conditional for simplifying further checks {#CH05.htm#sigil_toc_id_121 .fm-head1}

[]{#CH05.htm#pgfId-1016157 .calibre9}[]{#CH05.htm#marker-1016113
.calibre9}[]{#CH05.htm#marker-1016115
.calibre9}[]{#CH05.htm#marker-1016117
.calibre9}[]{#CH05.htm#marker-1016119
.calibre9}[]{#CH05.htm#marker-1016121 .calibre9}Having deeply nested
properties in objects []{#CH05.htm#marker-1016126 .calibre9}like
[site.Params]{.fm-code-in-text} makes the template lengthy and difficult
to read (and write). This verbosity discourages users from properly
grouping their keys, which impacts website maintainability. For example,
we provided [site.Params.Footer\[0\].title]{.fm-code-in-text} as a
property to the Eclectic theme. One can easily imagine why we would not
want to write this line five times in code. Hugo provides a special
context variable, a dot ([.]{.fm-code-in-text}), to solve this problem.

[]{#CH05.htm#pgfId-1016189 .calibre9}The context variable can be loosely
compared to []{#CH05.htm#marker-1016168 .calibre9}the
[this]{.fm-code-in-text} variable in object-oriented programming
languages, which becomes the method's object. When rendering a page, the
context variable represents a page, but if we are rendering a taxonomy,
it becomes that taxonomy. If we render a shortcode, the context variable
becomes that shortcode. When working in the context of a property, we
can override the context variable with that property and access that
property with the [.]{.fm-code-in-text} variable.

[]{#CH05.htm#pgfId-1016361 .calibre9}Hugo provides
[]{#CH05.htm#marker-1016200 .calibre9}the [with]{.fm-code-in-text}
conditional, which overrides the context variable in its code block.
Using [with]{.fm-code-in-text}, we can write a less verbose existence
check. That's because [with]{.fm-code-in-text} calls its inner code
block if the variable is supplied with a value. We can pass a variable
or an expression to [with]{.fm-code-in-text}. If it evolves to a
truthful value (not [nil]{.fm-code-in-text}, [0]{.fm-code-in-text},
[false]{.fm-code-in-text}, or an empty slice, dictionary, or string)
that value is set as the value of [.]{.fm-code-in-text} (the dot) inside
the block contained in the [with]{.fm-code-in-text} statement. In case
the value is not true, the [with]{.fm-code-in-text} block is skipped.
The following listing shows how to override the context variable using
[with]{.fm-code-in-text}. The [.]{.fm-code-in-text} represents the value
of the variable passed to [with]{.fm-code-in-text}.

[]{#CH05.htm#pgfId-1016421}Listing 5.13 Overriding the context variable
(layouts/index.html)

``` programlisting
{{with $title}}<title>{{.}}</title>{{end}} 
```

[]{#CH05.htm#pgfId-1016551 .calibre9}Inside the [with]{.fm-code-in-text}
code block, the context variable [.]{.fm-code-in-text} was replaced with
the value of the []{#CH05.htm#marker-1037968
.calibre9}[\$title]{.fm-code-in-text} variable. Note that if we do not
set [\$title]{.fm-code-in-text}, this code does not execute. However, if
we provide an [else]{.fm-code-in-text} code block in the
[with]{.fm-code-in-text} block, Hugo runs that code instead.

[]{#CH05.htm#pgfId-1037859}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-06.hugoinaction.com](https://chapter-05-06.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-06](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-06){.url}]{.fm-hyperlink}.

[]{#CH05.htm#pgfId-1016692 .calibre9}[\$]{.fm-code-in-text} is by
[]{#CH05.htm#marker-1037991 .calibre9}default the top-level context
variable, but we can remove an unnecessary [\$]{.fm-code-in-text} sign
from our code to convert it into something that a typical Hugo theme
developer would write. [\$]{.fm-code-in-text} is only needed if we need
to access the top-level context in the [with]{.fm-code-in-text} block.

::: fm-sidebar-block
[]{#CH05.htm#pgfId-1043024 .calibre9}Exercise 5.3

[]{#CH05.htm#pgfId-1043025}When should [with]{.fm-code-in-text1} be used
in a Hugo template?

1.  []{#CH05.htm#pgfId-1043026}[with]{.fm-code-in-text1} is among the
    "bad" parts of Hugo, having a vast negative performance impact, and
    should not be used.

2.  []{#CH05.htm#pgfId-1043027}[with]{.fm-code-in-text1} can be used to
    check the existence of a value and provide a default behavior or
    value if one is absent.

3.  []{#CH05.htm#pgfId-1043028}[with]{.fm-code-in-text1} can be used to
    update the context to write less code if it relies only on the
    subproperties of a variable.

4.  []{#CH05.htm#pgfId-1043029}[with]{.fm-code-in-text1} can be used to
    provide inline handling of map properties without having to write a
    nested function like [index]{.fm-code-in-text1} to access the
    property.

5.  []{#CH05.htm#pgfId-1043030}both b and c.

6.  []{#CH05.htm#pgfId-1043031}both c and d.

7.  []{#CH05.htm#pgfId-1043037}b, c, and
    d.[]{#CH05.htm#marker-1043032}[]{#CH05.htm#marker-1043033}[]{#CH05.htm#marker-1043034}[]{#CH05.htm#marker-1043035}[]{#CH05.htm#marker-1043036}
:::

### []{#CH05.htm#pgfId-1016846}5.1.7 Adding content processing {#CH05.htm#sigil_toc_id_122 .fm-head1}

[]{#CH05.htm#pgfId-1016881 .calibre9}[]{#CH05.htm#marker-1016857
.calibre9}[]{#CH05.htm#marker-1016859
.calibre9}[]{#CH05.htm#marker-1016861
.calibre9}[]{#CH05.htm#marker-1016863
.calibre9}[]{#CH05.htm#marker-1016865 .calibre9}In this section, we will
enhance the home page with more Hugo features to make it match the
design shown in figure 5.2. The subtitle field we have rendered so far
is in plain text. We want to start that with a capital letter and
provide the capabilities to use Markdown-based formatting for the
subtitle. Because the subtitle is already available in a variable, this
task involves passing the subtitle to an appropriate function to do
further processing. To enable the subtitle to start with a capital
letter, we can give this to []{#CH05.htm#marker-1016870 .calibre9}the
[humanize]{.fm-code-in-text} function as the following listing shows.

[]{#CH05.htm#pgfId-1016941}Listing 5.14 Adding the
[humanize]{.fm-code-in-listingcaption} function (layouts/index.html)

``` programlisting
{{with .Param "subtitle"}}<h2>{{humanize .}}</h2>{{end}} 
```

[]{#CH05.htm#pgfId-1017066 .calibre9}After "humanizing" the subtitle, we
can further use Markdown processing by passing the data through the
Markdown parser via []{#CH05.htm#marker-1017045 .calibre9}the
[markdownify]{.fm-code-in-text} function. In section 3.1.4, we discussed
how the theme authors can parse Markdown from front matter data;
[markdownify]{.fm-code-in-text} is []{#CH05.htm#marker-1017071
.calibre9}the function to do this. The following listing shows how to
add this function for future Markdown support.

[]{#CH05.htm#pgfId-1017168}Listing 5.15 Adding
[]{#CH05.htm#marker-1017157}the
[markdownify]{.fm-code-in-listingcaption} function (layouts/index.html)

``` programlisting
{{with .Param "subtitle"}}<h2>{{markdownify (humanize .)}}</h2>{{end}}  
```

![CH05_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH05_F02_Jain.png){.calibre1}\

[]{#CH05.htm#pgfId-1043056}Figure 5.2 The Acme Corporation home page,
where we used Markdown on the subtitle, and markup to control the
index.html page in the layouts folder

[]{#CH05.htm#pgfId-1017262 .calibre9}Although calling nested functions
using parentheses is a perfectly valid approach, Hugo also supports the
pipe operator ([\|]{.fm-code-in-text}) for a more functional programming
style. This allows us to take the output of the previous function and
pass it to the next one. The following listing shows how to pipe though
functions.

[]{#CH05.htm#pgfId-1017328}Listing 5.16 Using the pipe operator
(layouts/index.html)

``` programlisting
{{with .Param "subtitle"}}<h2>{{. | humanize | markdownify}}</h2>{{end}} 
```

[]{#CH05.htm#pgfId-1017462 .calibre9}The functional programming-style
approach is easier to read and is preferred when the function takes just
one argument. We will use this as an opportunity to make the words
"world" and "live in" bold in the subtitle by wrapping them with double
stars ([\*\*]{.fm-code-in-text}) as the following listing shows. We also
need to link the Explore button using []{#CH05.htm#marker-1037954
.calibre9}the [explore]{.fm-code-in-text} option in the front matter for
the index page to make that page data driven.

[]{#CH05.htm#pgfId-1017522}Listing 5.17 Highlighting parts of the
subtitle (content/\_index.md)

``` programlisting
subtitle: shaping the **world** for you to **live in**    ❶
explore: blog                                             ❷
```

[]{#CH05.htm#pgfId-1042404}[❶]{.fm-combinumeral} Highlighting parts of
the subtitle using Markdown

[]{#CH05.htm#pgfId-1042432 .calibre9}[❷]{.fm-combinumeral} The explore
option (already in the front matter) for the data-driven Explore button
configuration

[]{#CH05.htm#pgfId-1017672 .calibre9}The [ref]{.fm-code-in-text}
function in []{#CH05.htm#marker-1017651 .calibre9}Hugo takes a file or
folder name and provides the corresponding URL for this content. We can
also use [relref]{.fm-code-in-text} for a relative path. The following
listing calls the [ref]{.fm-code-in-text} function to
[]{#CH05.htm#marker-1017677 .calibre9}convert a file to the
corresponding URL.

[]{#CH05.htm#pgfId-1017774}Listing 5.18 Using
[]{#CH05.htm#marker-1017763}the [ref]{.fm-code-in-listingcaption}
function (layouts/index.html)

``` programlisting
<a href="{{ref . (.Param "explore")}}" 
>Explore</a>  
```

[]{#CH05.htm#pgfId-1038027}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-07.hugoinaction.com](https://chapter-05-07.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH05.htm#marker-1038056}[]{#CH05.htm#marker-1038057}[]{#CH05.htm#marker-1038058}[]{#CH05.htm#marker-1038059}[]{#CH05.htm#marker-1038060}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-07](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-07){.url}]{.fm-hyperlink}.

### []{#CH05.htm#pgfId-1017889}[]{#CH05.htm#marker-1031695}[]{#CH05.htm#marker-1031693}[]{#CH05.htm#marker-1031691}[]{#CH05.htm#marker-1031690}[]{#CH05.htm#marker-1031688}5.1.8 Adding Markdown content {#CH05.htm#sigil_toc_id_123 .fm-head1}

[]{#CH05.htm#pgfId-1018065 .calibre9}[]{#CH05.htm#marker-1018019
.calibre9}[]{#CH05.htm#marker-1018021
.calibre9}[]{#CH05.htm#marker-1018023
.calibre9}[]{#CH05.htm#marker-1018025
.calibre9}[]{#CH05.htm#marker-1018027
.calibre9}[]{#CH05.htm#marker-1018029 .calibre9}We have Markdown content
in the content file. This content is available in its HTML form via
[]{#CH05.htm#marker-1018034 .calibre9}the [.Content]{.fm-code-in-text}
variable on the root context ([\$]{.fm-code-in-text}) variable. We can
place this anywhere on the page using [{{.Content}}]{.fm-code-in-text}
in our template to enable a new section on the home page as figure 5.3
illustrates.

![CH05_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH05_F03_Jain.png){.calibre1}\

[]{#CH05.htm#pgfId-1043088}Figure 5.3 Adding Markdown content to the
home page. (Photo for the about image by Angela Pencheva on Unsplash;
photo for the contact image by Cristofer Jeschkeon on Unsplash.)

[]{#CH05.htm#pgfId-1018074 .calibre9}Let's add some Markdown data to the
Acme Corporation's website's home page
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/03](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/03){.url}]{.fm-hyperlink}).
The following listing provides the data for the index page.

[]{#CH05.htm#pgfId-1018149}Listing 5.19 Adding descriptive content in
Markdown (content/\_index.md)

``` programlisting
Acme is the **best** 
================== 
  
![about us](about.jpg) 
  
The finest in this field 
------------------------ 
  
Acme Corporation&trade; is the _ world's leading manufacturer 
of digital shapes_. From squares and circles to triangles and 
hexagons, we have it all. Browse through our collection of various 
forms with different thicknesses and line styles. 
  
[About Us](./about) 
  
* * * 
  
![contact us](contact.jpg) 
  
Personalized especially for you 
------------------------------- 
  
We convert dreams into designs. Our artists are one of a kind. 
We provide full support for customizing your designs with multiple contact 
sessions to understand your problems and get a satisfying result. 
  
[Talk to us today](./contact) 
```

[]{#CH05.htm#pgfId-1018200 .calibre9}To use this content, we will also
need two images, contact.jpg and about.jpg, which can be placed in the
page bundle for the website index in the content folder. To fit the
design of the current website, we will add the ID
[intro]{.fm-code-in-text} to the current section and create a new
section with the ID [description]{.fm-code-in-text} in the Markdown
content. The following listing shows how this is done.

[]{#CH05.htm#pgfId-1018266}Listing 5.20 Rendering the Markdown content
(layouts/index.html)

``` programlisting
<section id="intro"> 
  ... 
</section> 
<section id="description"> 
  {{.Content}} 
</section> 
```

[]{#CH05.htm#pgfId-1038079}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-08.hugoinaction.com](https://chapter-05-08.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-08](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-08){.url}]{.fm-hyperlink}.

[]{#CH05.htm#pgfId-1018414 .calibre9}Hugo automatically runs this
content provided in the Markdown file through the Markdown parser and
provides an HTML string to place directly in the document.

::: fm-sidebar-block
[]{#CH05.htm#pgfId-1043120 .calibre9}Customizing the generated HTML from
Markdown

[]{#CH05.htm#pgfId-1043121}While generating HTML from Markdown, Hugo
provides the developer with the flexibility to customize the HTML
generated for a specific element. Special
[]{#CH05.htm#marker-1043122}templates, called *render hook
templates*[]{#CH05.htm#marker-1031681}, can control exactly how this
rendering happens. For example, we can use the custom templates at
layouts/\_default/\_markup/render-image .html,
layouts/\_default/\_markup/render-link.html, or
layouts/\_default/\_markup/ render-heading.html, and then decide on how
to render the inline images, links, and headings provided in Markdown.

\

[]{#CH05.htm#pgfId-1043125}These templates have access to the entire set
of page and site variables, along []{#CH05.htm#marker-1043123}with
[]{#CH05.htm#marker-1043124}unique []{#CH05.htm#marker-1043126}variables
like [.Level]{.fm-code-in-text1}[]{#CH05.htm#marker-1031682},
[.Text]{.fm-code-in-text1}[]{#CH05.htm#marker-1031683},
[.Title]{.fm-code-in-text1}[]{#CH05.htm#marker-1031684}, and
[.Destination]{.fm-code-in-text1}[]{#CH05.htm#marker-1031686} for
[]{#CH05.htm#marker-1043127}the HTML headings, display text, appended
title, and the provided URL in Markdown. In chapter 6, we will create
custom render hooks to control Markdown rendering.

\

[]{#CH05.htm#pgfId-1043128}Note that the templates in the \_default
folder apply to the whole website. We can limit these to a set of pages
by moving these templates to a specific content type. We will discuss
content types in chapter 7. Developers can further process the generated
HTML string using methods like [findRE]{.fm-code-in-text1} to replace
certain substrings.
[]{#CH05.htm#marker-1043129}[]{#CH05.htm#marker-1043130}[]{#CH05.htm#marker-1043131}[]{#CH05.htm#marker-1043132}[]{#CH05.htm#marker-1043133}[]{#CH05.htm#marker-1043134}[]{#CH05.htm#marker-1043135}[]{#CH05.htm#marker-1043136}[]{#CH05.htm#marker-1043137}
:::

## []{#CH05.htm#pgfId-1018662}5.2 Using external data to add content {#CH05.htm#sigil_toc_id_124 .fm-head}

[]{#CH05.htm#pgfId-1018683 .calibre9}[]{#CH05.htm#marker-1018673
.calibre9}[]{#CH05.htm#marker-1018675
.calibre9}[]{#CH05.htm#marker-1018677
.calibre9}[]{#CH05.htm#marker-1018679 .calibre9}While we can obtain most
web page data from the markup document, we can also get some of it
outside the markup document. This data includes menus, other sections,
and pages of the website and content generated by Hugo from the website
or web page data.

### []{#CH05.htm#pgfId-1018688}[]{#CH05.htm#marker-1034506}[]{#CH05.htm#marker-1034505}[]{#CH05.htm#marker-1034504}[]{#CH05.htm#marker-1034503}5.2.1 Adding the menu {#CH05.htm#sigil_toc_id_125 .fm-head1}

[]{#CH05.htm#pgfId-1018709 .calibre9}[]{#CH05.htm#marker-1018699
.calibre9}[]{#CH05.htm#marker-1018701
.calibre9}[]{#CH05.htm#marker-1018703
.calibre9}[]{#CH05.htm#marker-1018705 .calibre9}The links for the main
pages on the home page break the independence of those pages. If we
delete one of those pages, we will have a dangling link. Adding a link
to that page involves copying and pasting content and then changing the
text in an HTML file. This solution is not scalable. A better and more
scalable solution is to have a menu for this content. This way, the
pages can independently get assigned to a menu with the configuration or
with the front matter.

[]{#CH05.htm#pgfId-1018727 .calibre9}While we can create a new menu for
this information, a better idea for the Acme Corporation website is to
render the main menu used throughout the website on the home page. The
main menu is already present in []{#CH05.htm#marker-1018716
.calibre9}the [site.Menus.main]{.fm-code-in-text} variable. We can loop
through this to create anchor tags for the various menu entries on the
home page. Listing 5.21 adds a new section for the menu under the
current context area with this information. Later, we will enhance the
menu to match figure 5.4.

![CH05_F04_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH05_F04_Jain.png){.calibre1}\

[]{#CH05.htm#pgfId-1043156}Figure 5.4 Our new section in the home page
with a rendering for the main menu as a section on the home page

[]{#CH05.htm#pgfId-1018787}Listing 5.21 Rendering the menu on the home
page (layouts/index.html)

``` programlisting
{{with site.Menus.main }}                        ❶
  
<section id="menu"> 
<h1>Website sections</h1> 
  <h2>This website has these major areas</h2> 
  <ul> 
    {{ range . }} 
    <li> 
      <a href="{{.URL}}">                        ❷
        <i class="icon-{{.Identifier}}"></i>     ❸
        {{.Name | humanize}}                     ❹
      </a> 
    </li> 
    {{ else }}                                   ❺
    {{/* Log for the website editor/developer */}} 
    <!-- No menu entries present --> 
    {{end}} 
  </ul> 
</section> 
{{end}} 
```

[]{#CH05.htm#pgfId-1042032}[❶]{.fm-combinumeral} The outer with
statement ensures that Hugo does not render the section if the main menu
is not present.

[]{#CH05.htm#pgfId-1042053}[❷]{.fm-combinumeral} Uses the URL of the
menu entry to navigate

[]{#CH05.htm#pgfId-1042070}[❸]{.fm-combinumeral} The CSS file provides
icons based on the identifier.

[]{#CH05.htm#pgfId-1042087}[❹]{.fm-combinumeral} The name is humanized
for proper appearance.

[]{#CH05.htm#pgfId-1042104 .calibre9}[❺]{.fm-combinumeral} range
supports an else block for cases where the array (slice) is empty.

[]{#CH05.htm#pgfId-1019253 .calibre9}In listing 5.21,
[range]{.fm-code-in-text} is []{#CH05.htm#marker-1019206 .calibre9}the
primary looping function in the Go template language. The
[range]{.fm-code-in-text} function updates []{#CH05.htm#marker-1019222
.calibre9}the context ([.]{.fm-code-in-text}) in each run for the next
menu entry. If there are no entries, Hugo does not process the code
block inside the range. If needed, we can supply the
[else]{.fm-code-in-text} code block for this. The
[range]{.fm-code-in-text} function also []{#CH05.htm#marker-1019258
.calibre9}has an alternate form to fill variables instead of updating
context with a value and providing the index. Still, the context update
version is more popular.

[]{#CH05.htm#pgfId-1019308 .calibre9}[site.Menus]{.fm-code-in-text} is
[]{#CH05.htm#marker-1019277 .calibre9}a Hugo-generated object with
subproperties for each menu on the website, which internally contains
all the menu entries sorted on the supplied weight. Each menu entry
provides the [Name]{.fm-code-in-text} and [URL]{.fm-code-in-text}
subproperties. Note that the main menu has submenus, which we are
ignoring in this case. We can use the [humanize]{.fm-code-in-text}
function to []{#CH05.htm#marker-1019313 .calibre9}capitalize the first
letter of the name, thereby transparently dealing with all lowercase
entries.

[]{#CH05.htm#pgfId-1019323 .calibre9}The [else]{.fm-code-in-text} code
block introduces comments in the Go template language. We are free to
use HTML comments for this, but they do have some gotchas:

-   []{#CH05.htm#pgfId-1019338 .calibre9}HTML comments are generated and
    exposed in the output. Unless we strip them out during minification,
    they will increase the page size.

-   []{#CH05.htm#pgfId-1019352 .calibre9}Hugo executes any Go Template
    code in mustaches ([{{\...}}]{.fm-code-in-text}), even in the HTML
    comment block.

[]{#CH05.htm#pgfId-1019371 .calibre9}HTML comments are suitable for the
theme or page developer to send messages to the content author for the
web page. On the other hand, Go template comments are stripped at
compile time and are helpful for the theme or layout developer only.

[]{#CH05.htm#pgfId-1019416 .calibre9}While a menu needs only the name,
identifier, and weight, we []{#CH05.htm#marker-1019379 .calibre9}can
[]{#CH05.htm#marker-1019385 .calibre9}add custom [pre]{.fm-code-in-text}
and [post]{.fm-code-in-text} properties to the menu entry to supply
additional data to the template that it can use before or after the
menu. In the chapter resources, we've added a [post]{.fm-code-in-text}
property to []{#CH05.htm#marker-1019421 .calibre9}the main menu
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/04](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/04){.url}]{.fm-hyperlink})
that can be used to populate the content. We can now use this property
in our template as the following listing shows, updating the rendering
of the main menu on the home page.

[]{#CH05.htm#pgfId-1019507}Listing 5.22 Adding a post section to the
main menu (layouts/index.html)

``` programlisting
<li> 
  <a href="{{.URL}}"> 
    <i class="icon-{{.Identifier}}"></i> 
    {{.Name | humanize}} 
  </a> 
  {{with .Post}}<p>{{.}}</p>{{end}}     ❶
</li> 
```

[]{#CH05.htm#pgfId-1041975}[❶]{.fm-combinumeral} Wraps .Post in a with
statement to allow the template to render even if .Post is absent

::: fm-sidebar-block
[]{#CH05.htm#pgfId-1043239 .calibre9}Creating a new menu

[]{#CH05.htm#pgfId-1043240}There is nothing special that we need to do
to create a new menu in Hugo. All we need to do is to assign pages to
the menu. For example, we could add the following to the About page to
create a separate home menu:

``` programlisting
menu: 
  home: 
    name: About 
    identifier: about 
    weight: -500 
```

[]{#CH05.htm#pgfId-1043246}With this, instead of looping through
[site.Menus.main]{.fm-code-in-text1}, we can run the
[range]{.fm-code-in-text1} loop through
[site.Menus.home]{.fm-code-in-text1} and leave the rest of the code
as-is.
:::

[]{#CH05.htm#pgfId-1019874 .calibre9}We can also generate the header for
the web page using the same main menu. We will move the website logo
from the intro section to the header and render it as in figure 5.5.
Listing 5.23 provides the code to set up the header.

![CH05_F05_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH05_F05_Jain.png){.calibre1}\

[]{#CH05.htm#pgfId-1043283}Figure 5.5 Adding a header with another copy
of the main menu to the home page.

[]{#CH05.htm#pgfId-1019931}Listing 5.23 Setting up a header for Acme
Corporation (layouts/index.html)

``` programlisting
<header> 
   
<a href="{{ site.BaseURL | absLangURL }}"> 
    <img src="./image/logo.svg" alt="Acme Logo" 
        height="36" width="48" /> 
    Acme Corporation 
  </a> 
  {{with site.Menus.main }} 
    <nav> 
      <button class="hamburger">☰</button> 
      <ul> 
        {{range .}} 
          <li> 
            <a href="{{.URL}}">{{.Name | humanize}}</a> 
          </li> 
        {{end}} 
      </ul> 
    </nav> 
  {{end}} 
</header> 
```

[]{#CH05.htm#pgfId-1020355 .calibre9}Note that when we develop the home
page, we can use [.Permalink]{.fm-code-in-text} to link to the current
page. Using [site.BaseURL]{.fm-code-in-text} as the link to the home
page ensures that we can reuse this header in other pages (we will do
this in the next chapter). We can also update the footer to the website
to use a footer menu instead of hardcoded text in a similar fashion.
Finally, the [absLangURL]{.fm-code-in-text} function converts
[]{#CH05.htm#marker-1020360 .calibre9}the URL to an absolute link for
the current language. This function will come in handy when we convert
to a multilingual website in chapter 13.

::: fm-sidebar-block
[]{#CH05.htm#pgfId-1043314 .calibre9}Exercise 5.4

[]{#CH05.htm#pgfId-1043315}Build the footer for the Acme Corporation
website to match the view in figure 5.6 by generating the HTML that
matches
[[https://chapter-05-09.hugoinaction.com](https://chapter-05-09.hugoinaction.com){.url}]{.fm-hyperlink}.

1.  []{#CH05.htm#pgfId-1043317}To fill the social media icons, use the
    author information supplied in the configuration.

2.  []{#CH05.htm#pgfId-1043318}The copyright information is present in
    the website parameters.

3.  []{#CH05.htm#pgfId-1043319}The footer menu is already available in
    the website content, and you should use it.

![CH05_F06_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH05_F06_Jain.png){.calibre1}\

[]{#CH05.htm#pgfId-1043338}The updated footer of the Acme Corporation
website home page (shown in the light color scheme). Using menus allows
the content author to update the header and footer without diving into
the template code.
:::

[]{#CH05.htm#pgfId-1020532 .calibre9}The CSS file makes a light-colored
footer by default, but we can make it darker by adding
[]{#CH05.htm#marker-1020505 .calibre9}the [dark]{.fm-code-in-text} class
to []{#CH05.htm#marker-1020521 .calibre9}the [footer]{.fm-code-in-text}
tag. We will use the dark footer in the rest of the website. We will
also take this opportunity to add the link to the Credits page in the
footer. In credits.md, add the following:

``` programlisting
--- 
menu: 
  footer: 
    name: Credits 
    identifier: credits 
    weight: 400 
--- 
---    
```

[]{#CH05.htm#pgfId-1038147}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-09.hugoinaction.com](https://chapter-05-09.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-09](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-09){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH05.htm#pgfId-1043370 .calibre9}Section pages as menus

[]{#CH05.htm#pgfId-1043371}Writing a menu entry with links to index
pages in the sections of a website is such a common task that Hugo has
defined this with an easier default. If we add, for example,
[sectionPagesMenu: sections]{.fm-code-in-text1} to our configuration
parameter [sectionPagesMenu: \<name\>]{.fm-code-in-text1}
([[https://gohugo.io/templates/menu-templates/#section-menu-for-lazy-bloggers](https://gohugo.io/templates/menu-templates/#section-menu-for-lazy-bloggers){.url}]{.fm-hyperlink}),
then a menu named Sections is automatically created with an entry for
each section in the website. We do not need any references to the
sections menu in our content and can just use [sectionPagesMenu:
sections]{.fm-code-in-text1} in our configuration to populate the
Sections menu with a link to the index page of each section.
[]{#CH05.htm#marker-1043373}[]{#CH05.htm#marker-1043374}[]{#CH05.htm#marker-1043375}[]{#CH05.htm#marker-1043376}
:::

### []{#CH05.htm#pgfId-1020757}5.2.2 Adding recent blog posts {#CH05.htm#sigil_toc_id_126 .fm-head1}

[]{#CH05.htm#pgfId-1020778 .calibre9}[]{#CH05.htm#marker-1034677
.calibre9}[]{#CH05.htm#marker-1034678
.calibre9}[]{#CH05.htm#marker-1034679
.calibre9}[]{#CH05.htm#marker-1034680 .calibre9}The data added so far is
mostly static and does not change frequently and, therefore, provides
little benefit when using templates. A major benefit of static-site
frameworks is auto-updating pages with data that changes. We will add a
list of recent blog posts to the home page of the Acme Corporation
website, which will auto-update with new entries as we add more blog
posts. To do this, we will create one more section on the website's home
page with a list of recent blog posts
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/06](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/06){.url}]{.fm-hyperlink}).
Figure 5.6 shows the output of this section.

![CH05_F08_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH05_F08_Jain.png){.calibre1}\

[]{#CH05.htm#pgfId-1043397}Figure 5.6 Recent blog posts section on the
Acme Corporation website home page

[]{#CH05.htm#pgfId-1020802 .calibre9}To provide content, we will get a
list of child pages for the website belonging to the blog section and
then render them in a small card layout with the title and the summary
(manual or auto-generated). We will add images to the blog posts in the
next chapter. Listing 5.24 provides the changes that we'll make on the
home page of the Acme Corporation website. These involve filtering the
website pages for blog posts and getting the first three. The most
interesting code in the template is the filtering logic, which is
described in detail in figure 5.7.

[]{#CH05.htm#pgfId-1020859}Listing 5.24 Changing the recent file list
(layouts/index.html)

``` programlisting
{{with (where site.RegularPages ".Section" "blog")}}      ❶
<section id="blog"> 
    <h1>From our blog</h1> 
    <ul class="posts"> 
      {{range first 3 .}}                                ❷
      <li class="post" > 
        <a href="#{{.Permalink}}">                       ❸
          <h2> 
            {{.Title}} 
          </h2> 
          <article> 
            {{.Summary}}                                 ❹
          </article> 
          <div>Read More</div> 
        </a> 
      </li> 
      {{end}} 
    </ul> 
</section> 
{{end}} 
```

[]{#CH05.htm#pgfId-1041665}[❶]{.fm-combinumeral} Filters the page based
on whether the section is a blog (more on this shortly)

[]{#CH05.htm#pgfId-1041689}[❷]{.fm-combinumeral} Loops through the first
three pages from the context slice supplied by the first function

[]{#CH05.htm#pgfId-1041706}[❸]{.fm-combinumeral} .Permalink provides the
URL of the page.

[]{#CH05.htm#pgfId-1041723}[❹]{.fm-combinumeral} .Summary provides the
auto-generated or the manually provided summary of the web page.

![CH05_F07_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH05_F07_Jain.png){.calibre1}\

[]{#CH05.htm#pgfId-1043431}Figure 5.7 The filtering logic to find the
blog entries to showcase

[]{#CH05.htm#pgfId-1021407 .calibre9}In the listing, we filtered the
page with the [where]{.fm-code-in-text} statement content coming from
[]{#CH05.htm#marker-1021334 .calibre9}the
[RegularPages]{.fm-code-in-text} property on the website. This property
gives us a list of all content pages, excluding support pages like
taxonomies and indexes, sorted by the date field in descending order.
While we can change the sort order with []{#CH05.htm#marker-1021350
.calibre9}the [sort]{.fm-code-in-text} function, descending order by
date is usually the desired behavior, and we do not need to change it.
The [where]{.fm-code-in-text} function takes []{#CH05.htm#marker-1021376
.calibre9}a slice (list), a key, and a value. It filters the list based
on elements whose value at the provided key
([.Section]{.fm-code-in-text}) matches the value
([blog]{.fm-code-in-text}). While the default operator is equality
([=]{.fm-code-in-text}), we can override it by passing the custom
operator before the value.

[]{#CH05.htm#pgfId-1021442}[Note]{.fm-callout-head} Because
[site]{.fm-code-in-text1} is global,
[site.RegularPages]{.fm-code-in-text1} is available across all
templates.

[]{#CH05.htm#pgfId-1021477 .calibre9}The outer [with]{.fm-code-in-text}
statement performs two tasks: it updates the context variable so that we
do not need to duplicate the [where]{.fm-code-in-text} check twice and
ensures that there is content in the blog section if that section is
present. Hugo's template engine is smart enough to identify an empty
slice in a [with]{.fm-code-in-text} statement and does not render in
this case.

[]{#CH05.htm#pgfId-1021520 .calibre9}While the filtering code we are
using is functional, we have hardcoded the key [blog]{.fm-code-in-text}
in []{#CH05.htm#marker-1021545 .calibre9}the template. If we have a
website layout with a different section name, this would become a
problem. Hugo has a standardized key for this scenario, whose default
value Hugo auto-generates.

[]{#CH05.htm#pgfId-1021577 .calibre9}We can use
[site.Params.mainSections]{.fm-code-in-text} to get the main sections
within the website. By default, it contains the section with the maximum
number of pages, but we can override this variable to support multiple
sections or to add or remove them. Because it is a list, the default
equality checks for where the operation does not work, and we will need
to supply []{#CH05.htm#marker-1021566 .calibre9}the
[in]{.fm-code-in-text} operator for this. The following listing updates
the page filtering logic to look for the main section rather than the
hardcoded blog section.

[]{#CH05.htm#pgfId-1021637}Listing 5.25 Updating the page filtering
logic (layouts/index.html)

``` programlisting
{{with                                          ❶
  (where site.RegularPages                      ❷
  ".Section" "in" site.Params.mainSections)     ❸
}} 
```

[]{#CH05.htm#pgfId-1041391}[❶]{.fm-combinumeral} Hugo supports multiline
template code.

[]{#CH05.htm#pgfId-1041412}[❷]{.fm-combinumeral} Filters regular pages

[]{#CH05.htm#pgfId-1041429 .calibre9}[❸]{.fm-combinumeral} Uses the
extended where format, where the "in" operator is specified

[]{#CH05.htm#pgfId-1038214}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-10.hugoinaction.com](https://chapter-05-10.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH05.htm#marker-1038279}[]{#CH05.htm#marker-1038280}[]{#CH05.htm#marker-1038281}[]{#CH05.htm#marker-1038282}[]{#CH05.htm#marker-1038283}[]{#CH05.htm#marker-1038284}[]{#CH05.htm#marker-1038285}[]{#CH05.htm#marker-1038286}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-10](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-10){.url}]{.fm-hyperlink}.

## []{#CH05.htm#pgfId-1021799}5.3 Playing with structured data {#CH05.htm#sigil_toc_id_127 .fm-head}

[]{#CH05.htm#pgfId-1021931 .calibre9}[]{#CH05.htm#marker-1021921
.calibre9}[]{#CH05.htm#marker-1021923
.calibre9}[]{#CH05.htm#marker-1021925
.calibre9}[]{#CH05.htm#marker-1021927 .calibre9}There are two general
types of data in a web page: unstructured, free-flowing text
(represented by a Markdown document), and structured or grouped data
(represented by keys and values or rows and columns traditionally
defined in a database). For example, in a shopping cart application, the
product description should be unstructured, but if we put the price
field in Markdown, extracting the price to show in multiple places would
be tedious. There are multiple ways to provide structured data
separately. One approach is to read a file from the disk. Another option
is to use the front matter to provide structured data along with the
metadata.

### []{#CH05.htm#pgfId-1021936}5.3.1 Using front matter for structured data {#CH05.htm#sigil_toc_id_128 .fm-head1}

[]{#CH05.htm#pgfId-1021987 .calibre9}[]{#CH05.htm#marker-1021947
.calibre9}[]{#CH05.htm#marker-1021949
.calibre9}[]{#CH05.htm#marker-1021951
.calibre9}[]{#CH05.htm#marker-1021953
.calibre9}[]{#CH05.htm#marker-1021955 .calibre9}The
[.Params]{.fm-code-in-text} object in []{#CH05.htm#marker-1021970
.calibre9}the site and the page-level variables belongs to the theme.
The theme authors are free to decide what to add to these variables to
provide structured data. Let's put the concept to use for the Acme
Corporation website home page. We will add a list of testimonials on the
website's home page using the front matter as shown in figure 5.8. Then,
in listing 5.26, we will add a field []{#CH05.htm#marker-1021976
.calibre9}called [testimonials]{.fm-code-in-text} in the front matter
and place all the testimonials there
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/07](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/07){.url}]{.fm-hyperlink}).

![CH05_F09_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH05_F09_Jain.png){.calibre1}\

[]{#CH05.htm#pgfId-1043475}Figure 5.8 Testimonial section on the Acme
Corporation website home page

::: fm-sidebar-block
[]{#CH05.htm#pgfId-1043502 .calibre9}Exercise 5.5

[]{#CH05.htm#pgfId-1043503}Which of the following are examples of
structured data that will benefit from moving outside the Markdown
content to structured data and into the front matter or separate files?
(Select all that apply.)

1.  []{#CH05.htm#pgfId-1043504}Music playlists

2.  []{#CH05.htm#pgfId-1043505}Author biography

3.  []{#CH05.htm#pgfId-1043506}Reviews of physical products

4.  []{#CH05.htm#pgfId-1043507}List of top ten most liked blog posts

5.  []{#CH05.htm#pgfId-1043508}Affiliate link to the product in review
:::

[]{#CH05.htm#pgfId-1022134}Listing 5.26 Text for data-driven
testimonials (content/\_index.md)

``` programlisting
testimonials: 
  - author: Brad 
    from: Fictional Incorporated 
    content: > 
              We have been using the shapes from Acme 
              in our products for ages. They are 
              precise, smooth, and very well built. 
  
  
  - author: Random 
    from: Random Education 
    content: > 
             Sharp and sturdy - Just like you want them. 
  
  
  - author: Richter 
    from: Richter Measures 
    content: > 
             Undoubted accuracy. Safety guarantee. 
             We love what Acme delivers. 
```

[]{#CH05.htm#pgfId-1022341 .calibre9}Now we can read this variable on
the page and render it appropriately. Listing 5.27 provides the changes
to display the testimonials. This type of logic enables data-driven
custom elements in the HTML, which use structured data provided as a
parameter. It is good practice to check for their existence and to not
create HTML tags surrounding a list if the list is empty. If it is not
empty, we can loop through it []{#CH05.htm#marker-1022298 .calibre9}and
[]{#CH05.htm#marker-1022304 .calibre9}access []{#CH05.htm#marker-1022310
.calibre9}inner properties like [Content]{.fm-code-in-text},
[From]{.fm-code-in-text}, and [Author]{.fm-code-in-text}.

[]{#CH05.htm#pgfId-1022401}Listing 5.27 Changes to the testimonials
(layouts/index.html)

``` programlisting
{{with .Param "testimonials"}}       ❶
   
<section id="testimonials"> 
  <h1>Customer endorsement</h1> 
  <div> 
    <ol> 
      {{range .}}                    ❷
        <li> 
            <p>{{.content}}</p> 
            <div> 
              <h2>{{.author}}</h2> 
              <h3>{{.from}}</h3> 
            </div> 
        </li> 
      {{end}} 
    </ol> 
  </div> 
  </section> 
{{end}} 
```

[]{#CH05.htm#pgfId-1041263}[❶]{.fm-combinumeral} The with statement
provides the outer existence check and context update. It uses the
.Param function to read from the front matter, falling back to the site
config.

[]{#CH05.htm#pgfId-1041284 .calibre9}[❷]{.fm-combinumeral} Content loop

[]{#CH05.htm#pgfId-1038305}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-11.hugoinaction.com](https://chapter-05-11.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-11](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-11){.url}]{.fm-hyperlink}.

[]{#CH05.htm#pgfId-1022715 .calibre9}In listing 5.27, the top-level
[with]{.fm-code-in-text} call ensures that we add nothing if there is no
testimonial section provided in the front matter. However, if it is
present, we loop through the list of testimonials and print each of
those in the HTML.

[]{#CH05.htm#pgfId-1022832 .calibre9}We used the same technique in
section 3.6.2 to build a data-driven landing page using the Eclectic
template. Theme authors have used structured data to create sidebars,
carousels, accordions, and other advanced user interface elements.
[]{#CH05.htm#marker-1022848 .calibre9}[]{#CH05.htm#marker-1022851
.calibre9}[]{#CH05.htm#marker-1022853
.calibre9}[]{#CH05.htm#marker-1022855
.calibre9}[]{#CH05.htm#marker-1022857 .calibre9}

### []{#CH05.htm#pgfId-1022863}5.3.2 Parsing files for data {#CH05.htm#sigil_toc_id_129 .fm-head1}

[]{#CH05.htm#pgfId-1022886 .calibre9}[]{#CH05.htm#marker-1022874
.calibre9}[]{#CH05.htm#marker-1022876
.calibre9}[]{#CH05.htm#marker-1022878
.calibre9}[]{#CH05.htm#marker-1022880
.calibre9}[]{#CH05.htm#marker-1022882 .calibre9}For interoperability
with other systems, a file-based approach to data gathering is extremely
useful. Hugo supports parsing structured content that we can use to
provide raw data from CSV-based spreadsheets, JSON-based API output, or
individual YAML files. We can convert this data to slices (arrays) and
dictionaries (maps) in Hugo and then use those to present the data as
HTML. This feature is extremely useful in creating websites based on
another system that provides output in a machine-readable format.

[]{#CH05.htm#pgfId-1022944 .calibre9}There are many ways to access
files. For example, you can drop a JSON, CSV, YAML, or TOML file into
the data folder in parallel with the content folder. The data in the
file is available as a dictionary in []{#CH05.htm#marker-1033596
.calibre9}the [site.Data]{.fm-code-in-text} variable. We can also put
the file at a fixed location and use [readFile]{.fm-code-in-text} to get
its contents and then use [transform.Unmarshal]{.fm-code-in-text} to
convert it from raw text to a dictionary. Page bundles can also be used
for these files, where we can use
[\$.Page.Resources.Get]{.fm-code-in-text} followed by
[transform.Unmarshal]{.fm-code-in-text}.

[]{#CH05.htm#pgfId-1022953 .calibre9}For Acme Corporation, we have a
file called products.csv, which lists the product information for the
products sold by the company. A separate inventory management system
manages and exports the Excel-supported CSV format. We need to render
this as a table in the home page of the website (figure 5.9).

![CH05_F10_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH05_F10_Jain.png){.calibre1}\

[]{#CH05.htm#pgfId-1043529}Figure 5.9 Products list on the index page
via parsing a CSV file from disk

[]{#CH05.htm#pgfId-1022959 .calibre9}We can place products.csv in the
root of the content folder to make it a part of the branch bundle for
the index page
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/08](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/08){.url}]{.fm-hyperlink}).
The code in the following listing loops through the products.csv file
and prints the values in a table. We will mark the first row of the
table as a header.

[]{#CH05.htm#pgfId-1023034}Listing 5.28 Looping through products.csv
(layouts/index.html)

``` programlisting
{{with .Resources.GetMatch "products.csv"}}      ❶
  
<section id="products"> 
  <h1>Our Products</h1> 
  {{with . | transform.Unmarshal 
       (dict "delimiter" ",")}}                  ❷
    <table> 
      {{range $i, $value := .}}                  ❸
        {{if eq $i 0}}<thead>{{end}}             ❹
          <tr> 
            {{range $value}}                     ❺
            <td>{{.}}</td>                       ❻
            {{end}} 
          </tr> 
          {{if eq $i 0}}</thead>{{end}}          ❹
        {{end}} 
    </table> 
  {{end}} 
  <a download href="{{.Permalink}}" >            ❼
    Download listing 
  </a> 
</section> 
{{end}} 
```

[]{#CH05.htm#pgfId-1040773}[❶]{.fm-combinumeral} Looks for a file named
products.csv

[]{#CH05.htm#pgfId-1040794}[❷]{.fm-combinumeral} Parses the file using a
comma as a delimiter and updates the context

[]{#CH05.htm#pgfId-1040811}[❸]{.fm-combinumeral} Alternate range
statement that loops through each row and keeps the row index in
variable \$i

[]{#CH05.htm#pgfId-1040828}[❹]{.fm-combinumeral} Marks the first row as
the title row

[]{#CH05.htm#pgfId-1040868}[❺]{.fm-combinumeral} Inner loop through each
column in the current row

[]{#CH05.htm#pgfId-1040885}[❻]{.fm-combinumeral} Prints the contents of
the row-column combination

[]{#CH05.htm#pgfId-1040902 .calibre9}[❼]{.fm-combinumeral} Provides a
link to download the resource

[]{#CH05.htm#pgfId-1038365}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-12.hugoinaction.com](https://chapter-05-12.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-12](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-12){.url}]{.fm-hyperlink}.

[]{#CH05.htm#pgfId-1023639 .calibre9}We can use the resources API to
find the products.csv file in the page bundle for the current page. The
resources APIs are a powerful way to access resources and process,
manage, and transform them. We will delve more into resource APIs with
Hugo Pipes in chapter 6.

[]{#CH05.htm#pgfId-1023799 .calibre9}In the previous listing, we took
the file and parsed it using a comma ([,]{.fm-code-in-text}) as the
delimiter for CSV, which returns a slice of slices (nested array)
representing a two-dimensional array. In the outer loop, we used the
alternative form of []{#CH05.htm#marker-1023748 .calibre9}the
[range]{.fm-code-in-text} expression. Instead of setting the context
variable [.]{.fm-code-in-text}, the corresponding value,
[\$value]{.fm-code-in-text}, in the range is returned along with its
index [\$i]{.fm-code-in-text}. Next, we used the index to identify the
header row. Finally, we looped through the entries with an inner
[range]{.fm-code-in-text} to create the table for all rows. At the
bottom of the section, we provided a downloadable link to the CSV file
using the same resources API. []{#CH05.htm#marker-1023804
.calibre9}[]{#CH05.htm#marker-1023807
.calibre9}[]{#CH05.htm#marker-1023809
.calibre9}[]{#CH05.htm#marker-1023811
.calibre9}[]{#CH05.htm#marker-1023813
.calibre9}[]{#CH05.htm#marker-1023815
.calibre9}[]{#CH05.htm#marker-1023817
.calibre9}[]{#CH05.htm#marker-1023819
.calibre9}[]{#CH05.htm#marker-1023821 .calibre9}

## []{#CH05.htm#pgfId-1023837}5.4 Enhancing life with the Go template language {#CH05.htm#sigil_toc_id_130 .fm-head}

[]{#CH05.htm#pgfId-1023870 .calibre9}[]{#CH05.htm#marker-1023862
.calibre9}[]{#CH05.htm#marker-1023864
.calibre9}[]{#CH05.htm#marker-1023866 .calibre9}We can do a lot more
with the template language than just build web page templates. We can
use the Go template language at various places to remove repetitive work
and enhance the day-to-day workflows dealing with content. We can invent
new shortcodes that enhance Markdown to provide a new feature. We can
create archetypes or templates for content so that when we start to
write the content later, we have a page with the essential metadata
prefilled.

### []{#CH05.htm#pgfId-1023875}5.4.1 Template code in shortcodes {#CH05.htm#sigil_toc_id_131 .fm-head1}

[]{#CH05.htm#pgfId-1023908 .calibre9}[]{#CH05.htm#marker-1023886
.calibre9}[]{#CH05.htm#marker-1023888
.calibre9}[]{#CH05.htm#marker-1023890
.calibre9}[]{#CH05.htm#marker-1023892 .calibre9}Shortcodes (which we
used in chapter 4) are not just snippets of HTML. They are snippets of
templates that have access to the complete template functionality. We
can access all the variables of the site in them and can use those along
with the passed parameters and the inner content to write our logic to
render the shortcode.

[]{#CH05.htm#pgfId-1023933 .calibre9}Using the Go template language
skills we have developed so far, we can write a shortcode that takes a
product name, parses the price, and renders it to the website. For the
shortcode to work in the whole website, we will need to move
products.csv to a more accessible location, such as the assets folder.
(The assets folder is the global folder for the content accessible
through the Go template language.) Note that we will also need to update
the index page template to use this new location (using
[resources.get]{.fm-code-in-text} instead of
[.Resources.Get]{.fm-code-in-text}). The following listing provides the
custom shortcode to perform these tasks
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/09](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/09){.url}]{.fm-hyperlink}).

[]{#CH05.htm#pgfId-1024012}Listing 5.29 Shortcode for the product price
(layouts/shortcodes/price.html)

``` programlisting
{{- $product := default (.Get 0) (.Get "product") -}}   ❶
{{- if $product -}} 
  {{- $products := resources.GetMatch 
           "products.csv" -}}                           ❷
  {{- $parsedProducts := $products | 
    transform.Unmarshal (dict "delimiter" ",") -}}      ❸
  {{- range $r := $parsedProducts -}}                   ❹
    {{- if eq (index $r 0) $product -}}                 ❺
      $ {{- trim (index $r 2) " " -}}                   ❻
    {{- end -}} 
  {{- end -}} 
{{- end -}} 
```

[]{#CH05.htm#pgfId-1040325}[❶]{.fm-combinumeral} If the shortcode in the
context variable is passed, named arguments get the product argument,
falling back to the first argument given.

[]{#CH05.htm#pgfId-1040346}[❷]{.fm-combinumeral} Reads the file
products.csv from the global assets; resources (a lowercase "r") refers
to global assets.

[]{#CH05.htm#pgfId-1040363}[❸]{.fm-combinumeral} Parses as CSV with a
comma as the delimiter

[]{#CH05.htm#pgfId-1040380}[❹]{.fm-combinumeral} Loops through the rows
of the CSV

[]{#CH05.htm#pgfId-1040397}[❺]{.fm-combinumeral} If the first column
(index 0) for any row is the exact text as the passed product, prints
the third column (index 2) of that row

[]{#CH05.htm#pgfId-1040414 .calibre9}[❻]{.fm-combinumeral} The trim
function removes any spaces we get from the CSV.

[]{#CH05.htm#pgfId-1038454}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-13.hugoinaction.com](https://chapter-05-13.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-13](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-13){.url}]{.fm-hyperlink}.

[]{#CH05.htm#pgfId-1024658 .calibre9}The main thing to notice in listing
5.29 is that the context variable, [.]{.fm-code-in-text}, is different
in a shortcode. That's because it refers to the shortcode and not to the
page rendering it. Also, in the listing, we use [{{-]{.fm-code-in-text}
[-}}]{.fm-code-in-text} instead of the standard [{{]{.fm-code-in-text}
[}}]{.fm-code-in-text} Go template mustaches (mustache is another common
name for double curly braces). The reason for using
[{{-]{.fm-code-in-text} [-}}]{.fm-code-in-text} (dashed mustaches) is
that they remove all whitespace from both sides of the string output. We
do not need aggressive space trimming in most cases because we do need a
single space, and HTML ignores additional spaces.

[]{#CH05.htm#pgfId-1024700 .calibre9}In a case like the current example,
where we need absolute zero spaces to allow complete space control in
the Markdown document, dashed mustaches and []{#CH05.htm#marker-1024669
.calibre9}the [trim]{.fm-code-in-text} function are handy. We can also
have single dashed mustaches like [{{-]{.fm-code-in-text}
[\...]{.fm-code-in-text} [}}]{.fm-code-in-text} or
[{{]{.fm-code-in-text} [\...]{.fm-code-in-text} [-}}]{.fm-code-in-text}
to trim spaces from the left and the right, respectively.

[]{#CH05.htm#pgfId-1024755 .calibre9}We can use the
[index]{.fm-code-in-text} function in Hugo to access the value from a
list at a specific index. We can use this shortcode by calling it with
the parameter [{{\<]{.fm-code-in-text} [price]{.fm-code-in-text}
[\"Square\"\>}}]{.fm-code-in-text} or with named parameters like [{{\<
price product= \"Square\"\>}}]{.fm-code-in-text}. We will add this to
the Building Squares and the Circle blog posts as the following code
snippet shows. Additionally, by using
[resources.GetMatch]{.fm-code-in-text} instead of
[.Resources.GetMatch]{.fm-code-in-text}, we target the global assets
folder for content. []{#CH05.htm#marker-1024760
.calibre9}[]{#CH05.htm#marker-1024763
.calibre9}[]{#CH05.htm#marker-1024765
.calibre9}[]{#CH05.htm#marker-1024767 .calibre9}

``` programlisting
{{< price "Circle" >}}          $4 
{{< price product="Square" >}}  $2 
```

![CH05_F11_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH05_F11_Jain.png){.calibre1}\

[]{#CH05.htm#pgfId-1043563}Figure 5.10 A developer's gotta do what a
developer's gotta do. At coffee, Alex and Bob discuss the most
complicated pieces of their codebase.

### []{#CH05.htm#pgfId-1024832}5.4.2 Inner content in shortcodes {#CH05.htm#sigil_toc_id_132 .fm-head1}

[]{#CH05.htm#pgfId-1024883 .calibre9}[]{#CH05.htm#marker-1032745
.calibre9}[]{#CH05.htm#marker-1032746
.calibre9}[]{#CH05.htm#marker-1032747
.calibre9}[]{#CH05.htm#marker-1032748 .calibre9}Shortcodes can also take
inner content (discussed in section 4.5.1). We can access this and do
any processing we need with this information using the Go template
language. For example, the shortcode in the following listing repeats
the inner content *n* times, where *n* is supplied as a parameter
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/10](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/10){.url}]{.fm-hyperlink}).

[]{#CH05.htm#pgfId-1024962}Listing 5.30 Shortcode to repeat a message
(layouts/shortcodes/repeat.html)

``` programlisting
{{$count := default 5 (default 
     (.Get 0) (.Get "count"))}}      ❶
{{/* Preprocess to speed up */}} 
{{$inner := .Inner | markdownify}}   ❷
{{if gt $count 0}} 
<ul> 
  {{ range seq $count}}              ❸
  <li>{{$inner}}</li> 
  {{end}} 
</ul> 
{{end}} 
```

[]{#CH05.htm#pgfId-1040122}[❶]{.fm-combinumeral} Like the product
argument in the price shortcode, looks for the count. If nothing is
present, it defaults to 5 instead of nil.

[]{#CH05.htm#pgfId-1040162}[❷]{.fm-combinumeral} Uses markdownify to
convert the supplied inner data from Markdown to HTML. We are
preprocessing for better performance.

[]{#CH05.htm#pgfId-1040127 .calibre9}[❸]{.fm-combinumeral} seq takes a
number and generates a slice from 0 to that number. We use that to loop
\$count times to print \$inner in an HTML unordered list.

[]{#CH05.htm#pgfId-1038526}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-14.hugoinaction.com](https://chapter-05-14.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-14](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-14){.url}]{.fm-hyperlink}.

[]{#CH05.htm#pgfId-1025461 .calibre9}The code in the previous listing
should not be difficult to understand. The critical thing to remember
with []{#CH05.htm#marker-1025430 .calibre9}the
[repeat]{.fm-code-in-text} shortcode is the performance cost of looping.
We should avoid heavy processing in a loop and precalculate (like
running the Markdown parser in this case) wherever possible. We can use
this approach in the about section of the website to remind the team, by
repeating five times, "The customer is our \*\*number 1\*\* priority."
The following listing uses the [repeat]{.fm-code-in-text} shortcode to
[]{#CH05.htm#marker-1025466 .calibre9}add this reminder.
[]{#CH05.htm#marker-1025472 .calibre9}[]{#CH05.htm#marker-1025475
.calibre9}[]{#CH05.htm#marker-1025477
.calibre9}[]{#CH05.htm#marker-1025479 .calibre9}

[]{#CH05.htm#pgfId-1025572}Listing 5.31 Adding
[]{#CH05.htm#marker-1025561}the [repeat]{.fm-code-in-listingcaption}
shortcode (content/about/index.md)

``` programlisting
Input 
  
{{< repeat 5 >}} 
Customer is our **number 1** priority. 
{{< / repeat }} 
Nothing else. 
  
  
Output 
<ul> 
  <li>The customer is our <strong>number 1</strong> priority.</li> 
  <li>The customer is our <strong>number 1</strong> priority.</li> 
  <li>The customer is our <strong>number 1</strong> priority.</li> 
  <li>The customer is our <strong>number 1</strong> priority.</li> 
  <li>The customer is our <strong>number 1</strong> priority.</li> 
</ul> 
Nothing else. 
```

### []{#CH05.htm#pgfId-1025650}5.4.3 Save some time with archetypes {#CH05.htm#sigil_toc_id_133 .fm-head1}

[]{#CH05.htm#pgfId-1025671 .calibre9}[]{#CH05.htm#marker-1025661
.calibre9}[]{#CH05.htm#marker-1025663
.calibre9}[]{#CH05.htm#marker-1025665
.calibre9}[]{#CH05.htm#marker-1025667 .calibre9}The set of steps
involved in writing content is repetitive. It consists of creating
folders, filling in front matter and, in many cases, placing cover
images. While these tasks are repetitive, they are unique to the theme
and its layout. Whatever can be generalized across all websites has
already been done by setting good default values for most front matter
and other variables in Hugo.

[]{#CH05.htm#pgfId-1025692 .calibre9}As websites grow complex and more
features are added, setting up content for a web page gets complicated.
While we started with placing Markdown files in the content folder, we
have already moved to page bundles. In the foreseeable future, we can
imagine dense front matter with fields like [date]{.fm-code-in-text},
[draft]{.fm-code-in-text}, etc., which can become required fields.

[]{#CH05.htm#pgfId-1025725 .calibre9}*Archetypes* are templates for a
Hugo post that we can use to automatically create the folder structure,
fill in the front matter, and supply placeholder images for content so
that we can get to writing quickly. When we use [hugo new
\<filename\>]{.fm-code-in-text}, a placeholder file is created in the
content folder. When we made the website for Acme Corporation, the [hugo
new site]{.fm-code-in-text} command in []{#CH05.htm#marker-1025730
.calibre9}chapter 2 created a default archetype. We can use this as a
template to generate blog posts by issuing the following command:

``` programlisting
hugo new blog/line.md 
```

[]{#CH05.htm#pgfId-1025795 .calibre9}This command creates a line.md file
in the content folder, which is marked as [draft]{.fm-code-in-text}. We
can start adding content, and when we are ready to publish this page, we
can remove the [draft]{.fm-code-in-text} field from the front matter. We
can preview draft pages using [hugo server
\--buildDrafts]{.fm-code-in-text}.

[]{#CH05.htm#pgfId-1025804 .calibre9}While the default archetype fills
in the essentials, we can add more to the blog template. For regular
Markdown posts, we can create a new file, for example, blog.md
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/11](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/11){.url}]{.fm-hyperlink})
in the archetype folder with the content shown in the following listing.

[]{#CH05.htm#pgfId-1025879}Listing 5.32 Contents of the blog archetype
(archetypes/blog.md)

``` programlisting
--- 
date: {{ .Date }} 
title: "{{ replace .Name "-" " " | title }}" 
draft: true 
tags: 
  - unknown 
categories: 
  - general 
--- 
  
Provide an awesome introduction here 
  
<!--more--> 
  
Here goes the main content. 
```

[]{#CH05.htm#pgfId-1025983 .calibre9}We can now delete
content/blog/line.md and generate a new one. This time Hugo
automatically picks up the blog template for the content in the blog
section.

::: fm-sidebar-block
[]{#CH05.htm#pgfId-1043595 .calibre9}Exercise 5.6

[]{#CH05.htm#pgfId-1043596}Archetypes are a means for the \_\_\_\_\_\_
to help the \_\_\_\_\_\_ with a great set of defaults.
:::

[]{#CH05.htm#pgfId-1025999 .calibre9}We can also create page bundles in
the archetypes. To add page bundles, create a subfolder named blog in
the archetypes folder and move blog.md to it, renaming the file
index.md. We can also add a cover image if we so desire
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/12](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/12){.url}]{.fm-hyperlink}).
Now we can create a page bundle for the line blog post by
[]{#CH05.htm#marker-1036346 .calibre9}using the [kind]{.fm-code-in-text}
flag []{#CH05.htm#marker-1036347 .calibre9}in the
[new]{.fm-code-in-text} command. To do that, we remove line.md and run
the command in the following listing.

[]{#CH05.htm#pgfId-1026106}Listing 5.33 Creating a new blog post by
specifying [kind]{.fm-code-in-listingcaption}

``` programlisting
hugo new blog/line --kind blog 
```

[]{#CH05.htm#pgfId-1026198}[Note]{.fm-callout-head} Both blog.md and the
blog folder should not exist simultaneously.

[]{#CH05.htm#pgfId-1038596}[Code checkpoint]{.fm-callout-head}
[[https://chapter-05-15.hugoinaction.com](https://chapter-05-15.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-15](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-15){.url}]{.fm-hyperlink}.

[]{#CH05.htm#pgfId-1026312 .calibre9}Now the blog will have a folder
named line with the index.md in it. If we add an image to the archetype
page bundle, Hugo copies it to the template. This way, we can define
complicated templates with placeholder data for content creators to get
started quickly. For example, the Line page shows up when we run Hugo in
development mode because we set [buildDrafts]{.fm-code-in-text} to
[true]{.fm-code-in-text} in our development configuration. Using these
features, we can make custom pages or ease our day-to-day activities in
a Hugo website by moving repetitive work to shortcodes and archetypes.
[]{#CH05.htm#marker-1026317 .calibre9}[]{#CH05.htm#marker-1026320
.calibre9}[]{#CH05.htm#marker-1026322
.calibre9}[]{#CH05.htm#marker-1026324
.calibre9}[]{#CH05.htm#marker-1026326
.calibre9}[]{#CH05.htm#marker-1026328
.calibre9}[]{#CH05.htm#marker-1026330 .calibre9}

## []{#CH05.htm#pgfId-1026336}Summary {#CH05.htm#sigil_toc_id_134 .fm-head-1-notoc}

-   []{#CH05.htm#pgfId-1026346 .calibre9}The Go template language has
    full support for variables, functions, conditionals, and loops.

-   []{#CH05.htm#pgfId-1026360 .calibre9}We can use variables to access
    the site and page metadata, including information like menus and all
    the pages in the website.

-   []{#CH05.htm#pgfId-1026370 .calibre9}Hugo can get structured
    metadata from the front matter as well as from files on disk.
    Structured data allows for easier use of individual values as
    variables.

-   []{#CH05.htm#pgfId-1026380 .calibre9}We can use the Go template
    language in shortcodes programmatically to create new features for
    Markdown.

-   []{#CH05.htm#pgfId-1026390 .calibre9}Archetypes are templates to the
    content files that can be used to prepopulate specific front matter
    fields, create the correct folder structure, and provide
    placeholders for content creators.

[]{#CH06.htm}

# []{#CH06.htm#pgfId-1030630}6 Structuring web pages {#CH06.htm#heading_id_2 .tochead}

[]{#CH06.htm#pgfId-1033285}This chapter covers

-   []{#CH06.htm#pgfId-1033317 .calibre9}Organizing the template for
    better understanding and reuse
-   []{#CH06.htm#pgfId-1033318 .calibre9}Using layouts and partials to
    structure code and improve compilation speeds
-   []{#CH06.htm#pgfId-1033319 .calibre9}Using content types to organize
    templates
-   []{#CH06.htm#pgfId-1033320 .calibre9}Manipulating assets using Hugo
    Pipes
-   []{#CH06.htm#pgfId-1033306 .calibre9}Using templates bundled with
    Hugo

[]{#CH06.htm#pgfId-1011814 .calibre9}With the Go template language in
Hugo, we can build templates for markup-controlled HTML pages in as much
detail as needed. In this chapter, we will enable multiple types of
pages, sharing template code and snippets between them (figure 6.1). We
will also look at how Hugo can help with the JavaScript, images, and CSS
files using Hugo Pipes. We will build our foundation to move away from
the Eclectic theme and have more control over the entire website
rendering using custom template code.

![CH06_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH06_F01_Jain.png){.calibre1}\

[]{#CH06.htm#pgfId-1049376}Figure 6.1 Chapter 6 focuses on getting
multiple pages to work together, sharing the right set of snippets
between them, and using assets like images, CSS files, and HTML
optimally.

## []{#CH06.htm#pgfId-1011830}6.1 Using content types, base templates, and blocks to structure templates {#CH06.htm#sigil_toc_id_135 .fm-head}

[]{#CH06.htm#pgfId-1011861 .calibre9}[]{#CH06.htm#marker-1011855
.calibre9}[]{#CH06.htm#marker-1011857 .calibre9}So far, we have focused
on creating index.html for the home page using the Go template language.
While we don't have a large and unmanageable file yet, it can quickly
get out of hand if we keep adding code to this file. Also, with one
file, we cannot share template code between various web pages that are
slightly different.

[]{#CH06.htm#pgfId-1011866 .calibre9}In this section, we will start to
build a template for accessibility beyond the index page. As we make the
new template system, we will still have a functional website, albeit
with two template designs: one with Eclectic and the other that we are
building in parallel. We will migrate the website to the new code slowly
to ensure minimum breakage. To do this, we will create a new content
type with all the custom template code we are building and will allow
the pages to switch between Eclectic and the new template. Then we will
create a base layout for code sharing for the reusable pieces between
the index page and the data pages using the Terms of Use as a sample
page to migrate to the new content type.

### []{#CH06.htm#pgfId-1011872}[]{#CH06.htm#marker-1034361}[]{#CH06.htm#marker-1034360}[]{#CH06.htm#marker-1034359}6.1.1 Encapsulating templates with different content types {#CH06.htm#sigil_toc_id_136 .fm-head1}

[]{#CH06.htm#pgfId-1011897 .calibre9}[]{#CH06.htm#marker-1011883
.calibre9}[]{#CH06.htm#marker-1011885
.calibre9}[]{#CH06.htm#marker-1011887 .calibre9}A Hugo *content type* is
[]{#CH06.htm#marker-1011902 .calibre9}a collection of templates that can
render pages from markup according to a unique design. Conceptually, a
content type is similar to a theme, but instead of being the entire
website's design, a content type only renders to a section. Each website
can have multiple content types, each of which can display content
differently. For example, in a typical website, we can have a design for
a page associated with news posts and a different one for blog posts,
and yet another design for a privacy policy page. We can model each type
of page (blog, news, general text, etc.) with its distinct content type.
Each content type can have an independent rendering template.

[]{#CH06.htm#pgfId-1011934 .calibre9}A *theme* is
[]{#CH06.htm#marker-1011923 .calibre9}a collection of multiple content
types that link to different parts of a website. Not all pages in a
website need to look exactly similar, and content types allow for that
variety. Each theme defines the default [type]{.fm-code-in-text} that
all pages revert to, unless they use custom content types defined by the
theme for various sections within the website. By placing a file named
index.html within the layouts directory, we can override the index
template for the default type as defined by the theme. Hugo supports
overriding any template in a theme by creating a file at the exact
location in the layouts directory as was present within the theme. Hugo
redirects all the code paths to the new file.

[]{#CH06.htm#pgfId-1011943 .calibre9}Unless we study the theme internals
and make sure we are not breaking rendering for any code path, there is
a high probability of causing unexpected behavior somewhere. We should
avoid overriding templates directly, unless we are doing minor bug fixes
to the theme. It is much safer to place our template changes within a
new content type that does not interfere with the theme. Then we can
slowly move all our pages to that type and decommission the theme from
the website when our pages no longer use it. This approach allows us to
incrementally move from one theme to another or to customized code (like
we are doing), thus enabling more control. A new content type defines a
new type of rendering for markup-based content different than the theme.

[]{#CH06.htm#pgfId-1011965 .calibre9}Before adding more template code to
the website, we will create a new content type to isolate our changes.
We can choose any name for the content type that is unused by the theme
to safeguard against collisions. We will name this content type modern
(for the modern design) and will move the index page to this type
definition. To perform this task, let's create a folder named modern
within the layouts directory and move index.html to that folder. Next,
in the index file for the home page, which is content/ \_index.md, we
will update the [type]{.fm-code-in-text} to [modern]{.fm-code-in-text}
as the following listing shows.

[]{#CH06.htm#pgfId-1012025}Listing 6.1 Updating the content type
(content/\_index.md)

``` programlisting
type: modern
```

[]{#CH06.htm#pgfId-1012090}[Note]{.fm-callout-head} Hugo uses the
default template provided by the theme to render content for the index
page unless []{#CH06.htm#marker-1033958}the [type]{.fm-code-in-text1}
field []{#CH06.htm#marker-1034358}is present.

[]{#CH06.htm#pgfId-1042623}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-01.hugoinaction.com](https://chapter-06-01.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-01](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-01){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH06.htm#pgfId-1049415 .calibre9}Hugo's clever template lookup order

[]{#CH06.htm#pgfId-1049416}Hugo cleverly assigns a suitable template
based on the intent of the website developer. For example, if we create
a folder named blog in the content directory, Hugo sets the content type
for all files in the folder as [blog]{.fm-code-in-text1}. Then if we
create a folder named blog in the layouts folder and begin to define
templates for those pages, they will automatically get picked up by the
blog section in the website. On the other hand, if no such content type
is specified, the default templates are automatically loaded.

\

[]{#CH06.htm#pgfId-1049417}This content type selection is made possible
by a well-designed template lookup order in Hugo. When Hugo needs to
render the page, it goes through an ordered list of files and executes
the first one as the template for the web page. This list is huge due to
backward compatibility, and it provides many ways to name template
files. However, we strongly advise sticking to the straightforward
type-to-folder convention in our code with manual overrides using the
[type]{.fm-code-in-text1} field in []{#CH06.htm#marker-1049418}the front
matter. Hugo's website provides the template lookup order at
[[https://gohugo.io/templates/lookup-order/](https://gohugo.io/templates/lookup-order/){.url}]{.fm-hyperlink}.
[]{#CH06.htm#marker-1049420}[]{#CH06.htm#marker-1049421}[]{#CH06.htm#marker-1049422}
:::

### []{#CH06.htm#pgfId-1012241}6.1.2 Providing the base template for reuse {#CH06.htm#sigil_toc_id_137 .fm-head1}

[]{#CH06.htm#pgfId-1012296 .calibre9}[]{#CH06.htm#marker-1012252
.calibre9}[]{#CH06.htm#marker-1012254
.calibre9}[]{#CH06.htm#marker-1012256 .calibre9}Most web pages have a
similar HTML structure. There is a head section with metadata and a
[header]{.fm-code-in-text}, [main]{.fm-code-in-text}, and
[footer]{.fm-code-in-text} that define the interface where the header
and the footer reside across the whole website. Hugo has the concept of
a base template that can hold these common elements shared across the
entire website. The *base template* holds the skeleton of the website.
It contains default HTML for the common parts of a web page, which can
be overridden for specialized cases if needed. All templates in a type
can inherit from and customize the base template for that type. If a
type does not provide the base template, we can use the default base
template for the entire website.

[]{#CH06.htm#pgfId-1012318 .calibre9}The base template in Hugo is named
baseof.html. Let's create a basic baseof.html file in the modern folder.
This file stores the Acme Corporation web page skeleton that we will use
across all pages that use []{#CH06.htm#marker-1012307 .calibre9}the
[modern]{.fm-code-in-text} type. By creating baseof.html, we have
severed ties to the template provided by Eclectic and can focus on our
custom theme. []{#CH06.htm#marker-1012323
.calibre9}[]{#CH06.htm#marker-1012326
.calibre9}[]{#CH06.htm#marker-1012328 .calibre9}

### []{#CH06.htm#pgfId-1012334}6.1.3 Defining blocks of code {#CH06.htm#sigil_toc_id_138 .fm-head1}

[]{#CH06.htm#pgfId-1012369 .calibre9}[]{#CH06.htm#marker-1034399
.calibre9}[]{#CH06.htm#marker-1034400
.calibre9}[]{#CH06.htm#marker-1034401 .calibre9}Let's create a skeleton
in the base file, baseof.html. The [\<head\>]{.fm-code-in-text} tag in
the index page is not specific to the home page, so we can move it to
the base template. The content in the [\<body\>]{.fm-code-in-text} tag
is page-specific, and we will retain it within the index.html specified
template. Then, in baseof.html, we will place the base template
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/01](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/01){.url}]{.fm-hyperlink}).

[]{#CH06.htm#pgfId-1012397 .calibre9}A *block* defines
[]{#CH06.htm#marker-1034406 .calibre9}content that we can override in
specialized templates. The base template uses blocks for pieces of
content that can be overridden by the child templates. We can provide a
default value for non-overridden templates. Hugo executes the code
inside the block of the base template if the template used by a
particular page does not override this block. We can have as many blocks
as we desire in a template, including nested blocks. The following
listing shows the syntax for creating a block in Hugo.

[]{#CH06.htm#pgfId-1012469}Listing 6.2 Understanding a block in Hugo
(don't add this to your website)

``` programlisting
<!-- Block creation --> 
<!-- In baseof.html --> 
{{block "blockname" blockArgument}} 
{{end}} 
  
<!-- In derived template --> 
{{define "blockname"}} 
<!-- The dot (.) refers to the supplied block argument here --> 
<!-- We can still access $ if we need the top-level 
     template (page) variable access --> 
{{end}} 
```

[]{#CH06.htm#pgfId-1012579 .calibre9}The block has two arguments: the
block's name and the context variable to pass to the block. Passing the
value of context variable replaces the value of [.]{.fm-code-in-text} in
the block. We will give the current context (which is also the global
context [\$]{.fm-code-in-text}) to the block from the base template.

[]{#CH06.htm#pgfId-1012588 .calibre9}As we add blocks to allow
overriding customizable portions of the template, we also need to ensure
that the pages derived from the base template can load properly from all
URLs. In listing 6.3, we change the URL to index.css and base it on the
website base URL rather than relative to the current page's URL. Note
that the base template should be as generic as possible to work with all
content in the specific type. Also note that all blocks should have
reasonable default values, and all parameters should be optional.

[]{#CH06.htm#pgfId-1012645}Listing 6.3 Adding the content type base file
(layouts/modern/baseof.html)

``` programlisting
<!DOCTYPE html> 
<html lang="en"> 
  <head> 
    <meta charset="UTF-8"> 
    {{with default .Summary .Description}}                 ❶
      <meta name="description" content="{{.}}"> 
    {{end}} 
    <meta name="viewport" 
      content="width=device-width, initial-scale=1.0" /> 
    <link rel="stylesheet" 
      href="{{ site.BaseURL }}/index.css" >                ❷
    {{$title := default site.Title .Title}} 
    {{with $title}}<title>{{.}}</title>{{end}} 
  </head> 
  <body class="home"> 
    {{block "body" .}}                                     ❸
      <main> 
        {{with .Title}}                                    ❹
          <h1> 
            {{.}} 
          </h1> 
        {{end}} 
        <div class="content"> 
        {{.Content}} 
        </div> 
      </main> 
    {{end}}                                                ❺
  </body> 
</html> 
```

[]{#CH06.htm#pgfId-1048537}[❶]{.fm-combinumeral} The top-level context
refers to the current page.

[]{#CH06.htm#pgfId-1048554}[❷]{.fm-combinumeral} Sets the absolute base
URL of the website for the CSS file

[]{#CH06.htm#pgfId-1048571}[❸]{.fm-combinumeral} Passes the current
context to the code block, not hiding any information

[]{#CH06.htm#pgfId-1048588}[❹]{.fm-combinumeral} Because \$title does
not work inside the block, it needs to be self-contained based on the
provided context.

[]{#CH06.htm#pgfId-1048605}[❺]{.fm-combinumeral} Adds a default to the
summary if description is not available

[]{#CH06.htm#pgfId-1013339 .calibre9}In the base template, the top-level
context refers to the current page. All page []{#CH06.htm#marker-1013292
.calibre9}types []{#CH06.htm#marker-1013298 .calibre9}have the
[Title]{.fm-code-in-text} and [Description]{.fm-code-in-text}
properties. However, these can still be undefined, so we need to check
for them. We add a default value to the [.Summary]{.fm-code-in-text} if
[.Description]{.fm-code-in-text} is not available. Because the pages can
be at any location, we use the absolute base URL of the website for the
CSS file.

[]{#CH06.htm#pgfId-1013394 .calibre9}The [block]{.fm-code-in-text}
statement is used to define a block that can be overridden in the child
templates. We provide default content for the blocks in the base
template so that if we create a new template, it will provide a
meaningful rendering even if all the blocks are not overridden. The last
argument of a [block]{.fm-code-in-text} statement is similar to the
[with]{.fm-code-in-text} statement, and it becomes the context variable
for the block. In listing 6.3, we passed the current context to
[block]{.fm-code-in-text}, not hiding any information. Note that
[\$title]{.fm-code-in-text} does not work inside the block, which needs
to be self-contained, based on the provided context.

::: fm-sidebar-block
[]{#CH06.htm#pgfId-1049439 .calibre9}Exercise 6.1

[]{#CH06.htm#pgfId-1049440}The root template in a Hugo website holding
the skeleton of the HTML is called \_\_\_\_\_\_\_\_\_\_.

1.  []{#CH06.htm#pgfId-1049441}root.html

2.  []{#CH06.htm#pgfId-1049442}base.html

3.  []{#CH06.htm#pgfId-1049443}baseof.html

4.  []{#CH06.htm#pgfId-1049444}primary.html

5.  []{#CH06.htm#pgfId-1049445}index.html

6.  []{#CH06.htm#pgfId-1049446}parent.html
:::

[]{#CH06.htm#pgfId-1013542 .calibre9}The code in listing 6.3 is almost
the same as the [head]{.fm-code-in-text} portion abstracted from our
index page. On the index.html page, we can now fill in the value of
[block]{.fm-code-in-text} by using []{#CH06.htm#marker-1013511
.calibre9}the [define]{.fm-code-in-text}[]{#CH06.htm#marker-1035984}
keyword as listing 6.4 shows. When we use [define]{.fm-code-in-text}, we
inform Hugo that the template defines blocks within the base template.
Hugo will not use the base template if there is no
[define]{.fm-code-in-text} within a template. Also note that
[\$title]{.fm-code-in-text} needs to be redefined to be used inside the
body.

[]{#CH06.htm#pgfId-1013602}Listing 6.4 Filling in the block values
(layouts/modern/index.html)

``` programlisting
{{define "body"}} 
{{$title := ...}}      ❶
  
...Contents of the body tag... 
{{end}} 
```

[]{#CH06.htm#pgfId-1048482}[❶]{.fm-combinumeral} Redefines \$title

[]{#CH06.htm#pgfId-1042692}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-02.hugoinaction.com](https://chapter-06-02.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-02](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-02){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1013812 .calibre9}In the previous listing, we defined
the [body]{.fm-code-in-text} block in []{#CH06.htm#marker-1013785
.calibre9}the base template. The context variable [.]{.fm-code-in-text}
is supplied by the base template. When we use
[]{#CH06.htm#marker-1013801 .calibre9}the [define]{.fm-code-in-text}
keyword, the default implementation of the block in the base template is
not used. The index page should now look exactly as before, but Hugo
composes it from two files instead of one---from the base and the index
templates. []{#CH06.htm#marker-1013817
.calibre9}[]{#CH06.htm#marker-1013820
.calibre9}[]{#CH06.htm#marker-1013822 .calibre9}

### []{#CH06.htm#pgfId-1013828}[]{#CH06.htm#marker-1026956}6.1.4 Reusing the base template in a different layout {#CH06.htm#sigil_toc_id_139 .fm-head1}

[]{#CH06.htm#pgfId-1013859 .calibre9}[]{#CH06.htm#marker-1013839
.calibre9}[]{#CH06.htm#marker-1013841
.calibre9}[]{#CH06.htm#marker-1013843 .calibre9}With the base template
present, the code is ready to be reused on other pages. We used
index.html to represent the index page of the website. The name "index"
is not random. Hugo developers chose this to mean the home page of the
entire website, whereas in everyday web development, the index file
represents the home page of that specific section (or folder). In Hugo
layouts, it always means the website's home page. In Hugo, the various
types of pages we render are []{#CH06.htm#marker-1013848
.calibre9}called *layouts*. There are four main layouts supported by
Hugo:

-   []{#CH06.htm#pgfId-1013868 .calibre9}The *list layout* renders index
    pages of sections within the website. This
    []{#CH06.htm#marker-1013885 .calibre9}usually provides a list of all
    subsections and a list of all pages within the section. Rendering
    the base page of each branch bundle (\_index.html) uses the list
    layout.

-   []{#CH06.htm#pgfId-1013895 .calibre9}The *single layout* represents
    a regular web page with content stored in a markup document or a
    leaf bundle. All []{#CH06.htm#marker-1013908 .calibre9}leaf bundles
    (index.md) and plain Markdown documents (mypage.md) use the single
    layout.

-   []{#CH06.htm#pgfId-1013918 .calibre9}The *index layout* renders the
    home page of the entire website, which is present at the root of the
    website. This []{#CH06.htm#marker-1013931 .calibre9}layout is a
    specialization of the list layout and is present because the home
    page is generally different than the section list pages. If the
    index layout is absent, Hugo uses the list layout for the website's
    home page.

-   []{#CH06.htm#pgfId-1013941 .calibre9}The *404 layout* forms the
    basis of all error pages within the website. This
    []{#CH06.htm#marker-1013954 .calibre9}layout creates a unique page
    (/404.html) that we can configure on the hosting server for page not
    found (HTTP 404) errors. We are free to create more error pages such
    as 503.html for the 503 server errors, although with static hosting
    using the Jamstack, the chances of a 500 series error are low. Many
    developers do not need anything beyond the 404 pages.

[]{#CH06.htm#pgfId-1013964 .calibre9}Apart from these, we have two more
layouts: taxonomy and terms. These are used to render a list of terms
(e.g., the list of tags) and a list of pages associated with the terms
(e.g., the list of pages tagged as [square]{.fm-code-in-text}),
respectively. These layouts can typically reuse most of the work we do
for the list layouts. (We will go into these in more detail in chapter
7.) The list and the single layouts are the most critical layouts in
Hugo, corresponding to the branch and the leaf bundles, respectively.

[]{#CH06.htm#pgfId-1013979 .calibre9}Let's add single.html for single
pages in the website. We can add code specific to the single pages here.
In single.html for the Acme Corporation website, we do not want to
override the base template but, instead, use the contents of the base
template as-is. Hugo treats a template as an entire web page if a
template does not start with a defined block. Hugo renders an empty page
if we leave the page blank rather than running the base template. To
inform Hugo to load the base template, we need to define a dummy block,
which we will not use. The following listing shows how to do this.

[]{#CH06.htm#pgfId-1014036}Listing 6.5 Adding dummy content to
single.html (layouts/modern/single.html)

``` programlisting
{{define "garbage"}} 
<!-- Never gets rendered --> 
{{end}} 
```

[]{#CH06.htm#pgfId-1014109 .calibre9}Note that if we put the comment
outside of the []{#CH06.htm#marker-1014092
.calibre9}[define]{.fm-code-in-text} block, this does not work. It will
fail because only [define]{.fm-code-in-text} blocks are
[]{#CH06.htm#marker-1014114 .calibre9}allowed in templates that override
parts of a template.

[]{#CH06.htm#pgfId-1014146 .calibre9}Next, we will assign this template
to the Terms of Use page. In terms.md, we will add
[type:modern]{.fm-code-in-text} to the front matter to perform this
assignment and then convert it to the design shown in figure 6.2. The
contents of the Terms of Use page now use the CSS of the home page,
which does not provide good formatting. Listing 6.6 shows how to add a
layout-specific class override. We will do this
[]{#CH06.htm#marker-1049467 .calibre9}in the [body]{.fm-code-in-text}
tag[]{#CH06.htm#marker-1014135} in baseof.html.

![CH06_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH06_F02_Jain.png){.calibre1}\

[]{#CH06.htm#pgfId-1049482}Figure 6.2 The rendered Terms of Use page
using the single.html template created within the Acme type

[]{#CH06.htm#pgfId-1014206}Listing 6.6 Adding support for a class
override (layouts/modern/baseof.html)

``` programlisting
<body class="{{block "bodyClass" .}}{{end}}">      ❶ 
```

[]{#CH06.htm#pgfId-1048424}[❶]{.fm-combinumeral} There's no need to
escape quotes within the block.

[]{#CH06.htm#pgfId-1014355 .calibre9}We can use code blocks anywhere we
want in a template. They perform simple string replacements and do not
care about the HTML structure of our web pages. Therefore, if we place
bad HTML in some tag (e.g., quotes in [bodyClass]{.fm-code-in-text}),
the output can be broken. Note that templates automatically XML-encode
special characters coming from the markup document, and therefore, we
can add them to HTML tag attributes without additional encoding. The
following two listings show how to override the
[bodyClass]{.fm-code-in-text} in index.html and single.html,
respectively, to cater to this. Note that after we add a proper
[define]{.fm-code-in-text} to the single page (listing 6.8), we can
remove the dummy [define \"garbage\"]{.fm-code-in-text} (from listing
6.5).

[]{#CH06.htm#pgfId-1014415}Listing 6.7 Defining a home page with
[home]{.fm-code-in-listingcaption} (layouts/modern/index.html)

``` programlisting
{{define "bodyClass"}} home {{end}} 
```

[]{#CH06.htm#pgfId-1014533}Listing 6.8 Defining a regular page with
[page]{.fm-code-in-listingcaption} (layouts/modern/single.html)

``` programlisting
{{define "bodyClass"}} page {{end}}  
```

[]{#CH06.htm#pgfId-1042784}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-03.hugoinaction.com](https://chapter-06-03.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-03](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-03){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH06.htm#pgfId-1049515 .calibre9}Exercise 6.2

[]{#CH06.htm#pgfId-1049516}The layout used by Hugo for a regular web
page is stored in a file named \_\_\_\_\_\_\_\_\_\_.
:::

[]{#CH06.htm#pgfId-1014729 .calibre9}We can define as many overrides as
needed in a single file. Hugo does not check the validity of the final
HTML. We should ensure that we do not cause invalid HTML due to the
content of our overrides. Using a quote ([\"]{.fm-code-in-text}) in the
class []{#CH06.htm#marker-1014718 .calibre9}attribute,
[bodyClass]{.fm-code-in-text}, in our example closes that attribute and
produces unexpected results.

[]{#CH06.htm#pgfId-1014748 .calibre9}Our Terms of Use page is still
incomplete. We have a header and a footer on the home page ready to be
moved to the base template. We should always create a new block when we
do this to allow for overrides as needed. We will generalize the code to
cater to all the pages by making the image path absolute, thereby
allowing it in any subpage. The following listing moves the header and
the footer to the base template to share across all pages.

[]{#CH06.htm#pgfId-1014819}Listing 6.9 Moving the header and footer
(layouts/modern/baseof.html)

``` programlisting
<body class="{{block "bodyClass" .}}{{end}}"> 
  {{block "header" .}}                                   ❶
    <header> 
      ... 
      <a href="{{ site.BaseURL | relLangURL }}" >        ❷
      <img src="{{site.BaseURL}}/image/logo.svg" alt="Acme Logo" 
              height="36" width="48" />                  ❸
        Acme Corporation 
      </a> 
      ... 
    </header> 
  {{ end }} 
  {{block "body" .}} 
    <main> 
      ... 
    </main> 
  {{ end }} 
  {{block "footer" .}}                                   ❹
    <footer> 
      ... 
    </footer> 
  {{end}} 
</body> 
```

[]{#CH06.htm#pgfId-1048125}[❶]{.fm-combinumeral} Wraps parts of the base
template into blocks to allow overrides in child templates

[]{#CH06.htm#pgfId-1048146}[❷]{.fm-combinumeral} Adds link to the home
page. We use relLangURL here as we are linking via a relative path to
the website root.

[]{#CH06.htm#pgfId-1048170}[❸]{.fm-combinumeral} Converts the path to
logo.svg to an absolute URL to allow loading from all pages

[]{#CH06.htm#pgfId-1048187}[❹]{.fm-combinumeral} Wraps parts of the base
template into blocks to allow overrides in child templates

[]{#CH06.htm#pgfId-1042853}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-04.hugoinaction.com](https://chapter-06-04.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-04](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-04){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1015243 .calibre9}With these changes, the index page
template now has only the things specific to that page, and the shared
parts like the head and the footer that we can use elsewhere have moved
to the shared template. The Terms of Use page looks like a complete web
page. We will come back to the home page to improve it further, however.
[]{#CH06.htm#marker-1015333 .calibre9}[]{#CH06.htm#marker-1015336
.calibre9}[]{#CH06.htm#marker-1015338
.calibre9}[]{#CH06.htm#marker-1015340
.calibre9}[]{#CH06.htm#marker-1015342 .calibre9}

## []{#CH06.htm#pgfId-1015348}[]{#CH06.htm#marker-1036088}[]{#CH06.htm#marker-1036086}[]{#CH06.htm#marker-1036084}6.2 Reusing content with partials {#CH06.htm#sigil_toc_id_140 .fm-head}

[]{#CH06.htm#pgfId-1015379 .calibre9}[]{#CH06.htm#marker-1015359
.calibre9}[]{#CH06.htm#marker-1015361
.calibre9}[]{#CH06.htm#marker-1015363 .calibre9}As we introduced new
sections to our home page, it pushed the footer menu down, far away from
the top of the website. While those links are not as important as the
header, we would like to have them available without
[]{#CH06.htm#marker-1015368 .calibre9}scrolling (commonly called *above
the fold*, which comes from newspapers where articles hidden under the
fold on the front page were considered less important). Ideally, we want
to reuse the code to render the footer.

[]{#CH06.htm#pgfId-1015414 .calibre9}*Inheritance* (where a template
gets or inherits the entire code of the base template with rights to
modify or mutate certain parts), provided []{#CH06.htm#marker-1015397
.calibre9}by the base template and code block, is not suitable for code
reuse at arbitrary locations on a web page. For that, we
[]{#CH06.htm#marker-1015403 .calibre9}need *composition*, where we have
a reusable piece of template code that we can plug in wherever we want.
We can use shortcodes to share snippets of shared functionality in the
markup data, and we can use partials to share common snippets of code in
the templates.

[]{#CH06.htm#pgfId-1015423 .calibre9}*Partials* are function equivalents
in standard programming languages, which provide support for isolating a
piece of computation that generates some output to a rendered HTML file
and returns some data. Partials take arguments, do some processing using
those arguments, and log data into the output HTML file, returning the
computation results to the caller. Partials are among Hugo's most
important template features, and understanding the concept of partials
is important to being successful with Hugo. Table 6.1 compares using
partials versus base template code for reuse.

[]{#CH06.htm#pgfId-1035104}Table 6.1 Partials vs. base template-based
code reuse

+----------------------+----------------------+----------------------+
| []{#CH06.ht          | []{#CH06.htm#pgfId-1 | []{#CH06.ht          |
| m#pgfId-1035110}Area | 035112}Partial-based | m#pgfId-1035114}Base |
|                      | code reuse           | template-based code  |
|                      |                      | reuse                |
+======================+======================+======================+
| []{#CH06.htm#pgf     | []{#CH06.htm         | []{#CH06.htm         |
| Id-1035116}**Primary | #pgfId-1035118}Using | #pgfId-1035120}Using |
| method for reuse**   | a                    | a                    |
|                      | [partial]{.fm-co     | [block]{.fm-co       |
|                      | de-in-figurecaption} | de-in-figurecaption} |
|                      | in the calling       | in the base template |
|                      | template             |                      |
+----------------------+----------------------+----------------------+
| []{#CH06.htm         | []{#CH06.h           | []{#CH06.            |
| #pgfId-1035122}**Can | tm#pgfId-1035124}Yes | htm#pgfId-1035126}No |
| be used multiple     |                      |                      |
| times within a       |                      |                      |
| page**               |                      |                      |
+----------------------+----------------------+----------------------+
| []{#CH06.htm#pgfI    | []{#CH06.            | []{#CH06.h           |
| d-1035128}**Defaults | htm#pgfId-1035130}No | tm#pgfId-1035132}Yes |
| are enabled          |                      |                      |
| automatically**      |                      |                      |
+----------------------+----------------------+----------------------+
| []{#CH06.htm         | []{#CH06.h           | []{#CH06.            |
| #pgfId-1035134}**Can | tm#pgfId-1035136}Yes | htm#pgfId-1035138}No |
| be cached to improve |                      |                      |
| build performance**  |                      |                      |
+----------------------+----------------------+----------------------+
| []{#CH06.htm         | []{#CH06.h           | []{#CH06.            |
| #pgfId-1035140}**Can | tm#pgfId-1035142}Yes | htm#pgfId-1035144}No |
| take arguments**     |                      |                      |
+----------------------+----------------------+----------------------+
| []{#CH06.htm         | []{#CH06.h           | []{#CH06.            |
| #pgfId-1035146}**Can | tm#pgfId-1035148}Yes | htm#pgfId-1035150}No |
| return computation   |                      |                      |
| results**            |                      |                      |
+----------------------+----------------------+----------------------+
| []{#CH06.htm#pg      | []{#CH06.h           | []{#CH06.            |
| fId-1035152}**Easily | tm#pgfId-1035154}Yes | htm#pgfId-1035156}No |
| overrides            |                      |                      |
| theme-based data in  |                      |                      |
| layouts**            |                      |                      |
+----------------------+----------------------+----------------------+

### []{#CH06.htm#pgfId-1015785}6.2.1 Moving to a partial {#CH06.htm#sigil_toc_id_141 .fm-head1}

[]{#CH06.htm#pgfId-1015804 .calibre9}[]{#CH06.htm#marker-1015796
.calibre9}[]{#CH06.htm#marker-1015798
.calibre9}[]{#CH06.htm#marker-1015800 .calibre9}Let's start by moving
the footer menu to a partial. To do this, we will create a file called
layout/partials/menu.html and move the code to generate the menu-based
links used on the home page to that file. Note that we are not using the
modern subfolder under layouts. Partials are available across all
content types in Hugo. Also, we can override the partials used in a
theme locally and change its behavior by creating a file with the same
name in the layouts/partials folder.

[]{#CH06.htm#pgfId-1015809 .calibre9}Partial overrides allow us to
replace parts of a page used with a theme and to customize those parts.
The partials folder allows subfolders to be used as namespaces, although
we don't need one for now
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/02](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/02){.url}]{.fm-hyperlink}).
The following listing shows how to share our code to create the footer
menu from a partial.

[]{#CH06.htm#pgfId-1015884}Listing 6.10 Sharing the code via a partial
(layouts/partials/menu.html)

``` programlisting
{{with site.Menus.footer }} 
<nav> 
  <ul> 
  {{range .}} 
  <li> 
    <a href="{{.URL}}">{{.Name | humanize}}</a> 
  </li> 
  {{end}} 
  </ul> 
</nav> 
{{end}} 
```

[]{#CH06.htm#pgfId-1016083 .calibre9}To call a partial, we use the
[partial]{.fm-code-in-text} statement followed by the name and the
context variable. The following listing uses this statement to add the
footer menu to the hero section of the index page.

[]{#CH06.htm#pgfId-1016149}Listing 6.11 Calling a partial
(layouts/modern/index.html)

``` programlisting
<section id="intro"> 
  ... 
  {{ partial "menu.html" . }} 
</section> 
```

[]{#CH06.htm#pgfId-1016265 .calibre9}Just like a
[block]{.fm-code-in-text} statement, the [partial]{.fm-code-in-text}
statement also needs to be passed a context variable. Passing the
context variable as-is loads menu.html so we can reuse it in the footer.
The next listing provides the code for this.

[]{#CH06.htm#pgfId-1016325}Listing 6.12 Reusing the footer menu
(layouts/modern/baseof.html)

``` programlisting
{{block "footer" .}} 
   
<footer class="dark"> 
    {{ partial "menu.html" . }} 
    ... 
  </footer> 
{{end}} 
```

[]{#CH06.htm#pgfId-1042922}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-05.hugoinaction.com](https://chapter-06-05.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-05](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-05){.url}]{.fm-hyperlink}.

### []{#CH06.htm#pgfId-1016427}6.2.2 The partial context {#CH06.htm#sigil_toc_id_142 .fm-head1}

[]{#CH06.htm#pgfId-1016549 .calibre9}[]{#CH06.htm#marker-1016535
.calibre9}[]{#CH06.htm#marker-1016537
.calibre9}[]{#CH06.htm#marker-1016539 .calibre9}Partials in Hugo are
self-contained and isolated, having access to no variables apart from
the ones passed to them. The [\$]{.fm-code-in-text} variable inside
[]{#CH06.htm#marker-1016554 .calibre9}a partial does not reference the
global page object but the top-level context variable passed to the
partial instead. While we can pass the entire top-level context from the
caller to a partial, it is better to limit this data. This limitation
ensures maximum reuse of the partial and performance optimization via
caching in a much better way. Otherwise, we pass too much information to
the partial, much more than what is needed.

[]{#CH06.htm#pgfId-1016564 .calibre9}We can reuse the partial between
the footer and the main menu if we pass the menu directly. In the
following listing, we update the partial to take the specific menu to
render instead of the hardcoded main menu for the website, making it
capable of rendering different menus.

[]{#CH06.htm#pgfId-1016621}Listing 6.13 Making the partial more flexible
(layouts/partials/menu.html)

``` programlisting
{{with $ }} 
<nav> 
  <ul> 
  {{ range $ }}                                          ❶
    <li><a href="{{.URL}}">{{.Name | humanize}}</a></li> 
  {{end}} 
  </ul> 
</nav> 
{{ end }} 
```

[]{#CH06.htm#pgfId-1048024}[❶]{.fm-combinumeral} Because partials are
self-contained, the top-level \$ and dot (.) are the same as the
argument passed to it. We could have used [.]{.fm-code-in-figurecaption}
instead of \$ here.

[]{#CH06.htm#pgfId-1016817 .calibre9}We can reuse the previous listing
using the code in the footer menu. The following listing shows this use.

[]{#CH06.htm#pgfId-1016874}Listing 6.14 Loading the footer menu
(layouts/modern/baseof.html)

``` programlisting
{{ partial "menu.html" site.Menus.footer }} 
```

[]{#CH06.htm#pgfId-1042948}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-06.hugoinaction.com](https://chapter-06-06.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-06](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-06){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1017042 .calibre9}The [partial]{.fm-code-in-text}
statement in the Hugo is similar in concept to a JavaScript module or a
PHP [include]{.fm-code-in-text}. Now we can use [{{ partial
\"menu.html\" site.Menus.main }}]{.fm-code-in-text} as the argument for
the main menu, and [{{ partial \"menu.html\" site.Menus.footer
}}]{.fm-code-in-text} would render the footer.

[]{#CH06.htm#pgfId-1017051 .calibre9}One problem with moving the main
menu to a partial is the loss of the hamburger button used to render the
main menu on mobile devices. Because it is not needed everywhere, we
need to pass additional arguments to the partial to figure out when to
render this button.

[]{#CH06.htm#pgfId-1017057 .calibre9}A Hugo partial takes only one
argument. To allow passing multiple values, we can convert that argument
to a dictionary or a slice, which have multiple values. Slices cause
readability issues as the order of the arguments becomes important, and
undefined arguments are hard to support. To avoid these issues, the
following listing uses dictionary arguments as an optional element for
the menu to reuse the partial for the header.

[]{#CH06.htm#pgfId-1017114}Listing 6.15 Adding the hamburger button
(layouts/partials/menu.html)

``` programlisting
{{with $.Menu }} 
<nav> 
  {{if $.Button}} 
  <button class="hamburger">☰</button> 
  {{end}} 
  <ul> 
  {{ range $.Menu }} 
    <li><a href="{{.URL}}">{{.Name | humanize}}</a></li> 
  {{end}} 
  </ul> 
</nav> 
{{ end }} 
```

[]{#CH06.htm#pgfId-1017334 .calibre9}We can now load the header menu
with the hamburger button using the partial and passing true for the
button option. The following listing provides the code for this. Note
that we do not need to pass the []{#CH06.htm#marker-1017311
.calibre9}[Button]{.fm-code-in-text} parameter in the footer because the
default value will fail []{#CH06.htm#marker-1017323 .calibre9}the
[if]{.fm-code-in-text} check.

[]{#CH06.htm#pgfId-1017394}Listing 6.16 Loading the header menu
(layouts/modern/baseof.html)

``` programlisting
{{ partial "menu.html" 
    (dict "Menu" site.Menus.main 
          "Button" true) 
}} 
```

[]{#CH06.htm#pgfId-1042977}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-07.hugoinaction.com](https://chapter-06-07.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-07](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-07){.url}]{.fm-hyperlink}.

### []{#CH06.htm#pgfId-1017474}6.2.3 Bringing back the submenu using additional parameters to the menu partial {#CH06.htm#sigil_toc_id_143 .fm-head1}

[]{#CH06.htm#pgfId-1017616 .calibre9}[]{#CH06.htm#marker-1017582
.calibre9}[]{#CH06.htm#marker-1017584
.calibre9}[]{#CH06.htm#marker-1017586
.calibre9}[]{#CH06.htm#marker-1017588
.calibre9}[]{#CH06.htm#marker-1017590 .calibre9}We lost the submenu from
the header when we moved to our content type. Now would be a good time
to bring it back. Hugo supports infinite nesting of submenus in a tree
data structure and uses the parent-child terminology to represent a menu
and its submenus, respectively. Each menu object has a property
[]{#CH06.htm#marker-1017595 .calibre9}called
[.HasChildren]{.fm-code-in-text} and a slice (array) called
[Children]{.fm-code-in-text} that we can use to render those objects.
The following listing adds the submenus as nested unordered lists in the
menu partial. For cases like the footer, where there are no submenus,
this call has no impact.

[]{#CH06.htm#pgfId-1017676}Listing 6.17 Submenus as nested unordered
lists (layouts/partials/menu.html)

``` programlisting
<li> 
  <a href="{{.URL}}">{{.Name | humanize}}</a> 
  {{if .HasChildren}} 
    <ul> 
      {{ range .Children }} 
        <li><a href="{{.URL}}">{{.Name | humanize}}</a></li> 
      {{ end }} 
    </ul> 
  {{end}} 
</li> 
```

[]{#CH06.htm#pgfId-1043008}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-08.hugoinaction.com](https://chapter-06-08.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-08](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-08){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1017914 .calibre9}Hugo's [Menu]{.fm-code-in-text}
objects provide []{#CH06.htm#marker-1018013 .calibre9}additional
features like highlighting an active menu when we are on the right page.
These extensions are beyond the scope of this book. Additionally, Hugo's
documentation offers a ready-to-use menu template that covers more cases
than we were able to do in our code here. []{#CH06.htm#marker-1018019
.calibre9}[]{#CH06.htm#marker-1018022
.calibre9}[]{#CH06.htm#marker-1018024
.calibre9}[]{#CH06.htm#marker-1018026
.calibre9}[]{#CH06.htm#marker-1018028 .calibre9}

### []{#CH06.htm#pgfId-1018034}6.2.4 Partials and performance {#CH06.htm#sigil_toc_id_144 .fm-head1}

[]{#CH06.htm#pgfId-1018055 .calibre9}[]{#CH06.htm#marker-1018045
.calibre9}[]{#CH06.htm#marker-1018047
.calibre9}[]{#CH06.htm#marker-1018049
.calibre9}[]{#CH06.htm#marker-1018051 .calibre9}When a template is
present in multiple pages, one template invocation takes place for every
page. Over a lot of pages, this can slow down the website compilation.
Partials allow us to perform caching to prevent duplicate calls. Before
we use this feature, let's spend a few minutes understanding the
performance of the code we just wrote.

[]{#CH06.htm#pgfId-1018060 .calibre9}Hugo provides a build flag,
[\--templateMetrics]{.fm-code-in-text}, which
[]{#CH06.htm#marker-1018071 .calibre9}is case-sensitive. When supplied,
it measures the impact of each template on the overall build. Note that
many Hugo operations run in parallel. Therefore, the sum of all the
times provided is much more than the time taken to compile the website.
The code in listing 6.18 runs performance metrics on the Acme
Corporation website. Note that the numbers are highly dependent on the
hardware and software running and may not be the same at all times.
(Hugo and its themes are constantly evolving to improve performance, and
these numbers can change dramatically.) The file, menu.html, that we
just created has run four times already.

[]{#CH06.htm#pgfId-1018132}Listing 6.18 Running a performance metrics
measurement

``` programlisting
> hugo --templateMetrics 
Start building sites ... 
  
Template Metrics: 
  
 cumulative       average       maximum 
   duration      duration      duration  count  template 
 ----------      --------      --------  -----  -------- 
369.675412ms   23.104713ms  147.820628ms   16  _default/single.html 
245.782463ms    6.144561ms   146.59241ms   40  partials/core/head.html 
239.945001ms    5.998625ms   145.99365ms   40  partials/class.html 
  
... 
 1.046679ms     209.335µs     313.026µs    5  partials/menu.html 
  939.401µs       46.97µs     260.135µs   20  _internal/alias.html 
   807.44µs      807.44µs      807.44µs    1  partials/core/manifest.html 
  629.844µs     209.948µs     628.044µs    3  shortcodes/divider.html 
  505.491µs     168.497µs     270.374µs    3  shortcodes/youtube.html 
  411.414µs     411.414µs     411.414µs    1  partials/util/background.html 
  368.915µs     368.915µs     368.915µs    1  js/sw.js 
  223.668µs     223.668µs     223.668µs    1  _internal/_default/robots.txt 
  198.997µs     198.997µs     198.997µs    1  shortcodes/repeat.html 
  101.654µs      50.827µs     100.908µs    2  shortcodes/productInfo.md 
   85.716µs      85.716µs      85.716µs    1  js/main.js 
   60.208µs      60.208µs      60.208µs    1  json/manifest.json 
  
  
                   | EN 
-------------------+----- 
  Pages            | 68 
  Paginator pages  |  0 
  Non-page files   | 14 
  Static files     |  8 
  Processed images | 35 
  Aliases          | 20 
  Sitemaps         |  1 
  Cleaned          |  0 
  
Total in 263 ms 
```

[]{#CH06.htm#pgfId-1018212 .calibre9}The key column to note in listing
6.18 is the count column. The single page template
([\_default/single.html]{.fm-code-in-text}) is called 16 times to render
16 pages. The [shortcodes]{.fm-code-in-text} are reported separately.
The menu partial ([partials/menu.html]{.fm-code-in-text}) has already
called the menu template five times to render the home page and the
Terms page. Let's move the Privacy Policy page to the modern template
type as well. The menu.html file is called seven times, adding one time
for the header and one for the footer for this new page.

[]{#CH06.htm#pgfId-1043034}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-09.hugoinaction.com](https://chapter-06-09.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-09](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-09){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1018365 .calibre9}To prevent this repetition, we can
use [partialCached]{.fm-code-in-text} instead of
[partial]{.fm-code-in-text}. At a minimum,
[partialCached]{.fm-code-in-text} takes the same arguments as
[partial]{.fm-code-in-text}. If we replace all
[partial]{.fm-code-in-text} calls with [partialCached]{.fm-code-in-text}
without passing another argument, we would see that partials/ menu.html
executes only once. This execution is an obvious mistake as it forces
the header and the footer to have the same menu.

[]{#CH06.htm#pgfId-1043061}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-10.hugoinaction.com](https://chapter-06-10.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-10](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-10){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1018502 .calibre9}To ensure that the header and the
footer have their own menu, [partialCached]{.fm-code-in-text} can take
an arbitrary number of arguments, each of which is combined to create a
unique key. We need to add separate arguments to
[partialCached]{.fm-code-in-text}, one for each rendered. Listing 6.19
adds the arguments to the index page. Then listing 6.20 adds the
arguments to the base template file, baseof.html.

![CH06_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH06_F03_Jain.png){.calibre1}\

[]{#CH06.htm#pgfId-1049535}Figure 6.3 Everything's on (the) line: the
Jamstack gets its big break, but Alex has to get it online with his
reputation at stake.

[]{#CH06.htm#pgfId-1018562}Listing 6.19 Using
[partialCached]{.fm-code-in-listingcaption} in layouts/modern/index.html

``` programlisting
{{ partialCached "menu.html" (dict "Menu" site.Menus.footer) "footer"}} 
```

[]{#CH06.htm#pgfId-1018706}Listing 6.20 Using
[partialCached]{.fm-code-in-listingcaption} in
layouts/modern/baseof.html

``` programlisting
{{ partialCached "menu.html" (dict "Menu" site.Menus.main "Button" true) 
➥ "main" }}
{{ partialCached "menu.html" (dict "Menu" site.Menus.footer) "footer"}} 
```

[]{#CH06.htm#pgfId-1018877 .calibre9}We could have added
[true]{.fm-code-in-text} as a cache key alongside
[main]{.fm-code-in-text}, but this is unnecessary. That's because the
main menu always has a button, and []{#CH06.htm#marker-1018866
.calibre9}the [main]{.fm-code-in-text} key is unique enough.

[]{#CH06.htm#pgfId-1043088}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-11.hugoinaction.com](https://chapter-06-11.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-11](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-11){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1018997 .calibre9}Now, as we add pages, the count of
the partial's execution does not increase. Partials take a single
[]{#CH06.htm#marker-1034088 .calibre9}argument (which can be a
dictionary object, [dict]{.fm-code-in-text}, with multiple values) to
ensure independence. This allows for efficient caching. The additional
arguments in [partialCached]{.fm-code-in-text} can be added easily to
partials without changing the partial code.

[]{#CH06.htm#pgfId-1019016}[Tip]{.fm-callout-head} The easiest way to
reduce the time taken by a template is to move some implementation to a
partial and use a [partialCached]{.fm-code-in-text1} for slow processing
HTML that is the same across pages.
[]{#CH06.htm#marker-1034091}[]{#CH06.htm#marker-1034092}[]{#CH06.htm#marker-1034093}[]{#CH06.htm#marker-1034094}

### []{#CH06.htm#pgfId-1019040}[]{#CH06.htm#marker-1036087}[]{#CH06.htm#marker-1036085}[]{#CH06.htm#marker-1036083}[]{#CH06.htm#marker-1036082}6.2.5 A detour to partial returns {#CH06.htm#sigil_toc_id_145 .fm-head1}

[]{#CH06.htm#pgfId-1019103 .calibre9}[]{#CH06.htm#marker-1019051
.calibre9}[]{#CH06.htm#marker-1019053
.calibre9}[]{#CH06.htm#marker-1019055
.calibre9}[]{#CH06.htm#marker-1019057 .calibre9}It would have been
partiality against the partial function (pun intended) to have not
mentioned the [return]{.fm-code-in-text} statement when introducing
partials. So far, we have used partials as equivalents of shortcodes in
the template files. Although rendering in HTML is an important use
[]{#CH06.htm#marker-1019072 .calibre9}case for
[partial]{.fm-code-in-text} and [partialCached]{.fm-code-in-text},
partials also act as functions in the Go template language. We can use
partials to do string and number crunching or to access the network or
the filesystem, and then provide the processed result in a variable.
Partials already support caching via [partialCached]{.fm-code-in-text}.

::: fm-sidebar-block
[]{#CH06.htm#pgfId-1049570 .calibre9}Exercise 6.3

[]{#CH06.htm#pgfId-1049571}True or False: The blocks present in the base
template are executed by Hugo only once and the output is shared across
multiple pages.
:::

[]{#CH06.htm#pgfId-1019138 .calibre9}For this chapter, let's make the
[price]{.fm-code-in-text} shortcode we created in chapter 5 execute
faster. The [price]{.fm-code-in-text} shortcode reads
[]{#CH06.htm#marker-1041051 .calibre9}a CSV file that provides the price
of any Acme Corporation product. We will cache the prices for all the
products in a single partial
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/03](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/03){.url}]{.fm-hyperlink})
accessible across all pages. This way, the reading and parsing of the
CSV file happens only once.

[]{#CH06.htm#pgfId-1019172 .calibre9}Because a table is two-dimensional,
we can create a dictionary of dictionaries to represent it. The outer
dictionary has the product's name (row header) as the key and the
product information as its values. The inner dictionary uses the column
headers as the key and the product's price and rating as the values. The
following listing provides a sample of this function's output in JSON
format.

[]{#CH06.htm#pgfId-1019229}Listing 6.21 Output from the
[price]{.fm-code-in-listingcaption} shortcode

``` programlisting
{ 
  "Circle": { 
    "Colors": "Red, Green, Blue, Orange", 
    "Price": "2", 
    "Rating": 4 
  }, 
  "Square": { 
    "Colors": "Red, Pink, Blue", 
    "Price": "4", 
    "Rating": 5 
  } 
} 
```

[]{#CH06.htm#pgfId-1019508 .calibre9}Hugo's [slice]{.fm-code-in-text}
and [dict]{.fm-code-in-text} data []{#CH06.htm#marker-1019475
.calibre9}structures []{#CH06.htm#marker-1019481 .calibre9}are immutable
and cannot be modified. Therefore, we will use the
[scratch]{.fm-code-in-text} data structure for
[]{#CH06.htm#marker-1019497 .calibre9}this partial. Hugo's
[scratch]{.fm-code-in-text} structure is []{#CH06.htm#marker-1019513
.calibre9}a read-write data store that can act as a temporary variable
to hold data. It works like a mutable dictionary, where we can add or
remove values easily. Listing 6.22 creates a partial to get the product
information from the CSV file, which can then be parsed and cached.

[]{#CH06.htm#pgfId-1019574}Listing 6.22 A partial for product info
(layouts/partials/products.html)

``` programlisting
{{$scratch := newScratch}}                          ❶
{{$products := resources.GetMatch "products.csv"}} 
{{$parsedProducts := $products | 
  transform.Unmarshal (dict "delimiter" ",")}}      ❷
  
{{$index := index $parsedProducts 0}}               ❸
  
{{ range $i, $r := $parsedProducts }}               ❹
  {{ if ne $i 0}}                                   ❺
    {{range $j := seq (sub (len $index) 1)}}        ❻
      {{ $scratch.SetInMap (index $r 0) 
            (index $index $j) (index $r $j) }}      ❼
    {{ end }} 
  {{ end }} 
{{ end }} 
  
{{return $scratch.Values}}                          ❽
```

[]{#CH06.htm#pgfId-1047492}[❶]{.fm-combinumeral} Creates a new scratch
pad

[]{#CH06.htm#pgfId-1047513}[❷]{.fm-combinumeral} Parses the CSV file
using a comma as the separator

[]{#CH06.htm#pgfId-1047530}[❸]{.fm-combinumeral} Gets the first row as
the index row

[]{#CH06.htm#pgfId-1047547}[❹]{.fm-combinumeral} Loops through all the
rows in the table

[]{#CH06.htm#pgfId-1047564}[❺]{.fm-combinumeral} Ignores the first row
of the table

[]{#CH06.htm#pgfId-1047581}[❻]{.fm-combinumeral} Loops through all the
columns

[]{#CH06.htm#pgfId-1047598}[❼]{.fm-combinumeral} Creates a dictionary
(map) in the scratch pad that points to another dictionary

[]{#CH06.htm#pgfId-1047615}[❽]{.fm-combinumeral} Converts the scratch
pad to a dictionary and return

[]{#CH06.htm#pgfId-1020330 .calibre9}The partial in this listing uses no
variable from the outside. It returns the same results regardless of the
arguments, and we do not need different variants for different inputs.
Note that only one return is allowed within a partial in Hugo. Also,
when creating a dictionary in the scratch pad that points to another
dictionary, the outer dictionary uses the first item in the row
([\$r]{.fm-code-in-text}) as the index whose value is a dictionary that
uses the first entry in each column ([\$index]{.fm-code-in-text}) as the
key. Now we can update the [price]{.fm-code-in-text} shortcode to
[]{#CH06.htm#marker-1020319 .calibre9}utilize this partial. The
following listing shows how to do this. Note that
[partialCached]{.fm-code-in-text} needs at least one key.

[]{#CH06.htm#pgfId-1020390}Listing 6.23 Using a products partial
(layouts/shortcodes/price.html)

``` programlisting
{{$product := default (.Get 0) (.Get "product")}} 
$ {{index (index (partialCached "products.html" "key") $product) "Price" }} 
```

[]{#CH06.htm#pgfId-1043114}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-12.hugoinaction.com](https://chapter-06-12.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-12](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-12){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1020656 .calibre9}In the code in the previous
listing, we got the product information using the parameters passed to
the shortcode. We used [partialCached]{.fm-code-in-text} to call the
cached partial named [products]{.fm-code-in-text}. We gave it a string
as an argument because it does not need a variable. Inside the partial,
we created a scratch pad with the key as the product name and the value
as its price. We can verify that the partial executes only once using
the template metrics provided by Hugo. Table 6.2 compares partials and
shortcodes and their use in Hugo.

[]{#CH06.htm#pgfId-1036047}Table 6.2 A comparison of partials and
shortcodes and their use in Hugo

+--------------------+---------------------------+--------------------+
| []{#CH06.htm#      | []{#CH06.h                | [                  |
| pgfId-1036053}Area | tm#pgfId-1036055}Partials | ]{#CH06.htm#pgfId- |
|                    |                           | 1036057}Shortcodes |
+====================+===========================+====================+
| []{#CH06.htm#pgf   | []{#                      | []{#CH06.ht        |
| Id-1036059}**Use** | CH06.htm#pgfId-1036061}In | m#pgfId-1036063}In |
|                    | templates                 | markup data        |
+--------------------+---------------------------+--------------------+
| [                  | []{#CH                    | []{#CH06.htm       |
| ]{#CH06.htm#pgfId- | 06.htm#pgfId-1036067}Only | #pgfId-1036069}All |
| 1036065}**Access** | supplied variables        | variables          |
+--------------------+---------------------------+--------------------+
| []                 | []{#C                     | []{#CH06.htm       |
| {#CH06.htm#pgfId-1 | H06.htm#pgfId-1036073}Can | #pgfId-1036075}Not |
| 036071}**Caching** | be cached based on inputs | cached             |
|                    | using                     |                    |
|                    | [partialCached]{.         |                    |
|                    | fm-code-in-figurecaption} |                    |
+--------------------+---------------------------+--------------------+
| []                 | []{#C                     | []{#CH06.htm       |
| {#CH06.htm#pgfId-1 | H06.htm#pgfId-1036079}Can | #pgfId-1036081}Can |
| 036077}**Returns** | render to output and      | only render to     |
|                    | return values as          | output             |
|                    | variables                 | []{#CH06.htm#mar   |
|                    |                           | ker-1049639}[]{#CH |
|                    |                           | 06.htm#marker-1049 |
|                    |                           | 640}[]{#CH06.htm#m |
|                    |                           | arker-1049641}[]{# |
|                    |                           | CH06.htm#marker-10 |
|                    |                           | 49642}[]{#CH06.htm |
|                    |                           | #marker-1049643}[] |
|                    |                           | {#CH06.htm#marker- |
|                    |                           | 1049644}[]{#CH06.h |
|                    |                           | tm#marker-1049645} |
+--------------------+---------------------------+--------------------+

::: fm-sidebar-block
[]{#CH06.htm#pgfId-1049662 .calibre9}Inline partials

[]{#CH06.htm#pgfId-1049663}Hugo also supports defining partials inline.
If we want to reuse the same code multiple times within the same file,
but do not want to generate a separate file, an inline partial can come
in handy. Inline partials can also act as private functions, while
regular partials act as public functions. We can also use the
[define]{.fm-code-in-text1} keyword to
[]{#CH06.htm#marker-1049664}define a block that, in turn, defines a
partial. The following code shows how to implement these various
declarations.

``` programlisting
{{ $variable := partial "inline-partial" . }} 
... 
{{ partial "inline-partial" . }} {{/* Ignoring return values */}} 
... 
{{ define "inline-partial" }} 
... 
{{return $returnValue}} 
  
{{end}} 
```
:::

## []{#CH06.htm#pgfId-1021058}[]{#CH06.htm#marker-1021073}[]{#CH06.htm#marker-1037837}[]{#CH06.htm#marker-1021071}[]{#CH06.htm#marker-1037835}[]{#CH06.htm#marker-1021069}[]{#CH06.htm#marker-1037833}6.3 Asset handling with Hugo Pipes {#CH06.htm#sigil_toc_id_146 .fm-head}

[]{#CH06.htm#pgfId-1021077 .calibre9}[]{#CH06.htm#marker-1049648
.calibre9}[]{#CH06.htm#marker-1049649
.calibre9}[]{#CH06.htm#marker-1049650 .calibre9}By moving HTML
generation to Hugo's template system, we have significantly eased the
job of HTML generation, which we can now do based on a markup document.
However, problems remain with images and other assets like JavaScript
and CSS. There is a lot of work involved in changing the aspect ratios
and resizing images into multiple files for thumbnail, mobile, desktop,
etc., which we need to do to get good performance. Also, to be markup-
or metadata-based, there needs to be a way for the markup-based
information to get into JavaScript or CSS. Hugo Pipes are Hugo's answer
to these problems.

[]{#CH06.htm#pgfId-1021082 .calibre9}Hugo provides utility methods to
manage resources from a page bundle, the global assets folder, and any
file path supplied. Most of these methods take a single argument, and we
use them with the pipe operator discussed in section 5.1.7. Hugo Pipes
is a set of Hugo's features for resource management.

### []{#CH06.htm#pgfId-1021088}6.3.1 Handling textual assets {#CH06.htm#sigil_toc_id_147 .fm-head1}

[]{#CH06.htm#pgfId-1021109 .calibre9}[]{#CH06.htm#marker-1021099
.calibre9}[]{#CH06.htm#marker-1021101
.calibre9}[]{#CH06.htm#marker-1021103
.calibre9}[]{#CH06.htm#marker-1021105 .calibre9}We are currently using
the static folder for background.svg, index.css, and logo.svg assets
apart from favicon.ico. (logo.png was used for the Universal theme, and
we will remove that when we remove support for that theme.) We can move
all of those files to the assets folder and use Hugo Pipes to process
them further. Hugo supports using Pipes for all text-based file formats.

[]{#CH06.htm#pgfId-1021114 .calibre9}Let's start with index.css. The
following listing reads the CSS file using Hugo Pipes. Then we need to
move the index.css file to the assets folder for this to function.
Finally, we can load this file using the resources API.

[]{#CH06.htm#pgfId-1021171}Listing 6.24 Reading the CSS file
(layouts/modern/baseof.html)

``` programlisting
{{ $css := resources.GetMatch "index.css"}} 
<link rel="stylesheet" type="text/css" href="{{$css.Permalink}}"> 
```

[]{#CH06.htm#pgfId-1043140}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-13.hugoinaction.com](https://chapter-06-13.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-13](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-13){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1021438 .calibre9}With
[resources.GetMatch]{.fm-code-in-text}, we can place the default file in
the asset folder of the theme to be overridden in the website. Note that
we used the same feature in the products.csv file earlier. To get an
exact resource, we can use [resources.Get]{.fm-code-in-text}, although
[GetMatch]{.fm-code-in-text} supports []{#CH06.htm#marker-1021425
.calibre9}[]{#CH06.htm#marker-1021428 .calibre9}wildcards (also called
*globs*).

[]{#CH06.htm#pgfId-1021447 .calibre9}The real power of Hugo Pipes comes
with the support for processing. Hugo can process CSS files with the
SCSS processor (only in the extended flavor) and the PostCSS
postprocessor. SCSS (or SASS) is a CSS superset language that supports
nesting, functions, and compile-time variables in CSS. The philosophy
behind SCSS is compile-time optimization and code generation. This
approach matches that of the Jamstack, and both work well together.
Let's rename the assets/index.css file to assets/index.scss and use the
SCSS preprocessor via Hugo Pipes using [\$css]{.fm-code-in-text} [:=
resources.GetMatch]{.fm-code-in-text} [\"index.css\"]{.fm-code-in-text}
[\|]{.fm-code-in-text} [resources.ToCSS]{.fm-code-in-text}.

[]{#CH06.htm#pgfId-1021485 .calibre9}First, we need to verify if the
version of Hugo we have installed is the extended version. For that,
let's run the []{#CH06.htm#marker-1021464 .calibre9}command [hugo
version]{.fm-code-in-text} on the command line. If you have the extended
version of Hugo installed, you should see [extended]{.fm-code-in-text}
in the command-line output:

``` programlisting
Hugo Static Site Generator v0.91.2/extended 
```

[]{#CH06.htm#pgfId-1021513 .calibre9}The SASS compiler comes in two
flavors: the version that is embedded in Hugo, which does not need a
separate binary (LibSass), and the version where the SASS compiler runs
as an external process (Dart Sass). Dart Sass is newer and feature-rich,
but we need an external script to install it. We can configure the SASS
compiler that we want to use in the website configuration.

[]{#CH06.htm#pgfId-1021519 .calibre9}You will need the extended version
of Hugo to use the SCSS features. Note that in many platforms (including
Chocolatey on Windows), the package manager installs the regular
(non-extended) version of Hugo by default. There is no harm in using the
extended version because a bigger compiler binary has no impact on the
final output size or on performance. Listing 6.25 complies SCSS into CSS
for us.

[]{#CH06.htm#pgfId-1021535}[Note]{.fm-callout-head} You do not need SCSS
to complete the code examples in this book. If you do not have Hugo
extended installed, you can skip this specific code checkpoint and
continue along through the rest of the book.

[]{#CH06.htm#pgfId-1021592}Listing 6.25 Compiling SCSS into CSS
(layouts/modern/baseof.html)

``` programlisting
{{ $css := resources.GetMatch "index.scss" | resources.ToCSS }} 
```

[]{#CH06.htm#pgfId-1043169}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-14.hugoinaction.com](https://chapter-06-14.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-14](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-14){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1021676 .calibre9}Hugo does not care about the
filename extension. We can pass index.css through the SCSS transpiler if
we need to. SCSS is beyond the scope of this book. It is not essential
to Hugo, and we will not go into it in depth. We only need CSS for
styling content, which is the output of SCSS compilation. For readers
who do not want to use the extended version of Hugo, we will revert this
change, although you are free to continue using SCSS for your websites.

[]{#CH06.htm#pgfId-1021792 .calibre9}We can use the PostCSS processor
for CSS via [resources.PostCSS]{.fm-code-in-text}(requires installing
postcss-cli) without any configuration changes. We can also process
JavaScript files through the Babel transcompiler (requires installing
\@babel/cli and \@babel/core) for getting access to future JavaScript
features via the []{#CH06.htm#marker-1021781 .calibre9}pipe
[babel]{.fm-code-in-text} for older versions of web browsers. A much
better approach is to use Hugo's built-in JavaScript bundler, js.Build
(we'll discuss js.Build in chapter 10).

[]{#CH06.htm#pgfId-1021811}[Note]{.fm-callout-head} Hugo has a special
integration with the JavaScript ecosystem. Chapter 10 is dedicated
entirely to using JavaScript within Hugo-based websites.

[]{#CH06.htm#pgfId-1021863 .calibre9}When using a CSS/JS processor with
Hugo Pipes, we can run the JavaScript or CSS files through the Hugo
template parser with full access to the entire system of variables,
functions, and partials, and make their contents data-driven just like
the HTML. The theme color for the Acme Corporation website currently is
blue. If we move this to the template system, we can control this from
the Acme configuration file. We already defined this color in
config.yaml as [color]{.fm-code-in-text} in the parameters. We can
access the parameter via [{{site.Param \"color\"}}]{.fm-code-in-text}.
Remember from chapter 5 that [site]{.fm-code-in-text} is the global
variable provided by Hugo for the site variables. It is available in all
partials as well as templates. Using [site]{.fm-code-in-text} instead of
[\$.Site]{.fm-code-in-text} provides maximum flexibility when using this
template across partials.

[]{#CH06.htm#pgfId-1021888 .calibre9}While the color value is present in
the configuration, we do not use it inside index.css and background.svg,
which currently use the hardcoded value,
[\"#4f46e5\"]{.fm-code-in-text}. We need these values to be dynamic so
that we can change them in one place in the configuration. To do this,
we need to convert these files to a template. Then we can run Hugo's
template rendering through this and generate the actual files for the
website at compile time. Hugo provides a function called
[resources.ExecuteAsTemplate]{.fm-code-in-text} to process any resource
file as a Hugo template. To do this, we will start with logo.svg and
background.svg.

[]{#CH06.htm#pgfId-1021913 .calibre9}Let's create a copy of these files
and add a .tpl extension to them. While not required, it is a good idea
to rename the template files and add the .tpl extension to help in
identification. Next we need to replace all occurrences of
[\"#4f46e5\"]{.fm-code-in-text} with
[{{site.Params.color]{.fm-code-in-text} [\|]{.fm-code-in-text}
[default]{.fm-code-in-text} [\"#4f46e5\"}}]{.fm-code-in-text} in these
files
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/04](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/04){.url}]{.fm-hyperlink}).
Note that we will not be removing the older background.svg and logo.svg
until chapter 8, where we completely move out of the Eclectic theme.
Listing 6.26 provides the code to change to the background.svg template
so we can use the supplied theme color. Then listing 6.27 changes the
logo.svg template.

[]{#CH06.htm#pgfId-1021992}Listing 6.26 Changing background.svg
(assets/image/background.svg.tpl)

``` programlisting
<style type="text/css"> 
  ... 
  .st2{fill:none;stroke:{{site.Params.color | default "#4f46e5"}};  
  stroke-width:4;stroke-miterlimit:10;opacity: 0.2} 
  ... 
  .st6{fill:{{site.Params.color | default "#4f46e5"}}; opacity: 0.2} 
  ... 
</style> 
```

[]{#CH06.htm#pgfId-1022325}Listing 6.27 Changing logo.svg
(assets/image/logo.svg.tpl)

``` programlisting
<style type="text/css"> 
  .st0{fill:{{site.Params.color | default "#4f46e5"}};} 
  ... 
</style> 
```

[]{#CH06.htm#pgfId-1022490 .calibre9}The CSS file for the Acme
Corporation website uses CSS custom properties for each color component
(red, green and blue) to define its theme. If we simply coded this with
the color value, a string replacement of [\"#4f46e5\"]{.fm-code-in-text}
with [{{site.Params .color}}]{.fm-code-in-text}) would have sufficed.
For passing individual color values, we need to do a little more work.
The following listing provides individual theme colors to CSS variables
from Hugo.

[]{#CH06.htm#pgfId-1022550}Listing 6.28 Providing individual theme
colors (assets/index.css.tpl)

``` programlisting
  {{ $color := site.Params.color 
       | default "#4f46e5" }}             ❶
  {{ $b := substr $color -2 2 |           ❷
        print "0x" |                      ❸
        int}}                             ❹
  {{ $g := substr $color -4 2 
      | print "0x" | int}}                ❺
  {{ $r := substr $color -6 2 
      | print "0x" | int}}                ❺
:root { 
  --red: {{$r}};                          ❻
  --green: {{$g}};                        ❻
  --blue: {{$b}};                         ❻
} 
```

[]{#CH06.htm#pgfId-1046969}[❶]{.fm-combinumeral} A default value is
needed so that it will not fail if the theme color is absent.

[]{#CH06.htm#pgfId-1046990}[❷]{.fm-combinumeral} Extracts the last two
characters for the blue value. (The hex is #RRGGBB.)

[]{#CH06.htm#pgfId-1047007}[❸]{.fm-combinumeral} Converts the hex value
to 0xBB

[]{#CH06.htm#pgfId-1047024}[❹]{.fm-combinumeral} Parses the value as an
integer

[]{#CH06.htm#pgfId-1047041}[❺]{.fm-combinumeral} The two characters
starting 4 positions from the end are green, while the red color starts
at 6.

[]{#CH06.htm#pgfId-1047058}[❻]{.fm-combinumeral} Passes this data to CSS
for use as variables

[]{#CH06.htm#pgfId-1023150 .calibre9}The CSS file also contains
background SVG images with a hardcoded background color, rgb(79, 70,
229). We should do a find and replace operation in the whole file to
replace the hardcoded color value with
[rgb({{\$r}},{{\$g}},{{\$b}})]{.fm-code-in-text}. We cannot use
[\$color]{.fm-code-in-text} directly here as that would need to be
URL-encoded.

[]{#CH06.htm#pgfId-1023159 .calibre9}Next, we need to load these files
into our website via [resources.ExecuteAsTemplate]{.fm-code-in-text} as
shown in the following listing. We will also be piping the output
through resources.minify to reduce its file size.

[]{#CH06.htm#pgfId-1023225}Listing 6.29 Parsing index.css.tpl
(layouts/modern/baseof.html)

``` programlisting
{{ $css := resources.GetMatch "index.css.tpl" 
     | resources.ExecuteAsTemplate "index.css" "nothing" 
     | resources.Minify }} 
```

[]{#CH06.htm#pgfId-1023353
.calibre9}[resources.ExecuteAsTemplate]{.fm-code-in-text} takes the name
of the target file and the context variable to pass to the template.
Like partials, a resource template executes in an isolated environment,
and the [\$]{.fm-code-in-text} variable consists of the data we pass
directly. The reason for that is the same as that of a partial: to allow
caching with maximum reuse. Because the [site]{.fm-code-in-text}
variable is globally available, we don't need parameters for template
execution. Once this is done, we can load the logo.svg in the base
template by parsing it and executing it similarly to how we did with
index.css. The following listing shows this process.

[]{#CH06.htm#pgfId-1023413}Listing 6.30 Parsing logo.svg.tpl
(layouts/modern/baseof.html)

``` programlisting
{{ $logo := resources.GetMatch "image/logo.svg.tpl" 
    | resources.ExecuteAsTemplate "logo.svg" "nothing" 
    | resources.Minify }} 
<img src="{{$logo.Permalink}}" alt="Acme Logo" 
               width="48" /> 
```

[]{#CH06.htm#pgfId-1023590 .calibre9}We can update the index.css.tpl to
render the background.svg template. The following listing shows how to
update index.css to use the .tpl file for this.

[]{#CH06.htm#pgfId-1023647}Listing 6.31 Updating index.css for
background.svg (assets/index.css.tpl)

``` programlisting
{{ $background := resources.GetMatch "image/background.svg.tpl" | 
    resources.ExecuteAsTemplate "background.svg" "nothing" | resources.Minify}} 
background: url({{$background.Permalink}}) 0 0/cover; 
```

[]{#CH06.htm#pgfId-1023804}[Note]{.fm-callout-head} The caching
mechanism for Hugo becomes compromised if we use
[resources.ExecuteAsTemplate]{.fm-code-in-text1}. It is strongly advised
to use [resources .ExecuteAsTemplate]{.fm-code-in-text1} within a
partial and to call it with [partialCached]{.fm-code-in-text1} to
prevent unnecessary recalculation. We leave the task of moving logo.svg
and index.css parsing into separate partials as an exercise for the
reader.

[]{#CH06.htm#pgfId-1043195}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-15.hugoinaction.com](https://chapter-06-15.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-15](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-15){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1023813 .calibre9}Now we can control the color in the
website configuration (for example, to [\"#DC2626\"]{.fm-code-in-text})
to get a different theme color for the website (as shown in figure 6.4)
for use in the rest of the book.

[]{#CH06.htm#pgfId-1043223}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-16.hugoinaction.com](https://chapter-06-16.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-16](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-16){.url}]{.fm-hyperlink}.

![CH06_F04_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH06_F04_Jain.png){.calibre1}\

[]{#CH06.htm#pgfId-1049694}Figure 6.4 Changing the website's theme color
in the configuration file to [\"#DC2626\"]{.fm-code-in-figurecaption}

[]{#CH06.htm#pgfId-1024029 .calibre9}Another important feature is
support for CSS concatenation. Hugo can easily merge multiple CSS files
into one for release, but we cannot concatenate images. In the resources
for chapter 6, you will find the file additional.css.tpl
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/05](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/05){.url}]{.fm-hyperlink}).
We can place this file in the assets folder for consumption. Then we can
concatenate it using [resources.Concat]{.fm-code-in-text}. Note that
[resources.Concat]{.fm-code-in-text} needs valid mime types to work.
Therefore, we will use index.css and not index.css.tpl for the concat
API. The following listing uses this API to allow loading multiple CSS
templates via a single call.

[]{#CH06.htm#pgfId-1024138}Listing 6.32 Using the concat API
(layouts/partials/index.css.html)

``` programlisting
{{ $css := resources.Match "*.css.tpl" |                          ❶
           resources.Concat "index.css" |                         ❷
           resources.ExecuteAsTemplate "index.css" "nothing" |    ❸
           resources.Minify }}                                    ❹
```

[]{#CH06.htm#pgfId-1046666}[❶]{.fm-combinumeral} Gets all css.tpl files

[]{#CH06.htm#pgfId-1046687}[❷]{.fm-combinumeral} Combines them with
index.css

[]{#CH06.htm#pgfId-1046704}[❸]{.fm-combinumeral} Processes mustaches

[]{#CH06.htm#pgfId-1046721}[❹]{.fm-combinumeral} Minifies the generated
CSS file

[]{#CH06.htm#pgfId-1043249}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-17.hugoinaction.com](https://chapter-06-17.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-17](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-17){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1024370 .calibre9}To get a slice (array) of all files
matching a glob pattern, we can use [resources.Match]{.fm-code-in-text}.
This way we can develop independent files and supply a merged version in
production. Note that additional.css provides a subtle change in the
design on the website's header, which we can use to verify the loading
of this file.

::: fm-sidebar-block
[]{#CH06.htm#pgfId-1049726 .calibre9}Exercise 6.4

[]{#CH06.htm#pgfId-1049727}Add a hero image to the Acme Corporation
website home page. The hero image is supplied as an SVG image in the
chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/06](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/06){.url}]{.fm-hyperlink}).
The generated HTML should match
[[https://chapter-06-18.hugoinaction.com](https://chapter-06-18.hugoinaction.com){.url}]{.fm-hyperlink},
with the SVG image dynamically generated so that it matches the website
colors. The following figure shows the home page after we add the image.

![CH06_F04_UN01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH06_F04_UN01_Jain.png){.calibre1}\
:::

[]{#CH06.htm#pgfId-1043275}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-18.hugoinaction.com](https://chapter-06-18.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-18](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-18){.url}]{.fm-hyperlink}.

### []{#CH06.htm#pgfId-1024531}6.3.2 Handling images {#CH06.htm#sigil_toc_id_148 .fm-head1}

[]{#CH06.htm#pgfId-1024666 .calibre9}[]{#CH06.htm#marker-1024656
.calibre9}[]{#CH06.htm#marker-1024658
.calibre9}[]{#CH06.htm#marker-1024660
.calibre9}[]{#CH06.htm#marker-1024662 .calibre9}While vector graphics
and SVGs are great for file sizes, not everything is easily buildable
using vector graphics. Raster images like JPEGs and PNGs are significant
portions of the modern web, forming the bulk of the network traffic for
many websites. Hugo Pipes broadly supports these images, including
manipulations that allow us to prepare them for optimal delivery over
the web. Although our blog posts have images, we do not use these on the
index page of our website. Without the images, our blog posts look
incomplete.

[]{#CH06.htm#pgfId-1024687 .calibre9}To add a cover image for blog
posts, the resources in the global assets location are accessible via
[resources.GetMatch]{.fm-code-in-text}. The following listing shows how
we can access the resources present in page bundles via
[Page.Resources.GetMatch]{.fm-code-in-text} to add the cover image.

[]{#CH06.htm#pgfId-1024747}Listing 6.33 Adding a cover image for blog
posts (layouts/modern/index.html)

``` programlisting
<li class="post"> 
  <a href="{{.Permalink}}"> 
    {{$title :=  .Title}} 
    {{with (.Resources.GetMatch "cover.*")}} 
    <img alt="{{$title}}" loading="lazy" 
      src="{{.Permalink}}" /> 
    {{end}} 
    ... 
  </a> 
</li> 
```

[]{#CH06.htm#pgfId-1043298}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-19.hugoinaction.com](https://chapter-06-19.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-19](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-19){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1024958 .calibre9}The code in the previous listing
has a significant performance issue. The cover images for the blog posts
are huge and have more pixels than what is needed to render them in the
small view on the home page. We cannot resize them in the page bundle
because the single page needs bigger images. Hugo provides support for
dynamically resizing images during compilation for this use. Here are
the resizing options in Hugo:

-   []{#CH06.htm#pgfId-1025109 .calibre9}[.Resize]{.fm-code-in-text}
    *---This option resizes the image.* It []{#CH06.htm#marker-1025078
    .calibre9}can take parameters in the form of the desired width and
    height. For example, [{{]{.fm-code-in-text}
    [\$hero.Resize]{.fm-code-in-text} [\"200x200\"}}]{.fm-code-in-text}
    resizes the hero image to 200×200 px, ignoring the aspect ratio. If
    we use [{{ \$hero.Resize]{.fm-code-in-text}
    [\"200x\"}}]{.fm-code-in-text}, the image is resized to the width of
    200 px with the height based on the aspect ratio, and
    [{{]{.fm-code-in-text} [\$hero.Resize]{.fm-code-in-text}
    [\"x200\"}}]{.fm-code-in-text} resizes the image to the height of
    200 px with the width calculated based on the original aspect ratio.

-   []{#CH06.htm#pgfId-1025171 .calibre9}[.Fit]{.fm-code-in-text}
    *---This option resizes the image to fit within the supplied box.*
    For []{#CH06.htm#marker-1025140 .calibre9}example, [{{ \$hero.Fit
    \"200x200\"}}]{.fm-code-in-text} ensures that either the width or
    the height is 200 px and the other dimension (height or width) is
    less than 200 px. A 1000×800 image will shrink to 200×160 while a
    800×1000 image will become 160×200. This is similar to the CSS
    property [object-fit: contain]{.fm-code-in-text} or [background-fit:
    contain]{.fm-code-in-text}.

-   []{#CH06.htm#pgfId-1025269
    .calibre9}[.Fill]{.fm-code-in-text}*---This option resizes the image
    to fill the supplied box while cropping the outside parts.* For
    []{#CH06.htm#marker-1025202 .calibre9}example, [{{ \$hero.Fill
    \"200x200\"}}]{.fm-code-in-text} creates a 200×200 image where the
    image would be resized and cropped either in the length or the
    breadth. This is equivalent to [object-fit:]{.fm-code-in-text}
    [cover]{.fm-code-in-text} or [background-fit:
    cover]{.fm-code-in-text}. [.Fill]{.fm-code-in-text} in Hugo can also
    take an optional parameter that defines the part of the image to
    keep. For example, if we use [.Fill]{.fm-code-in-text}
    [\"200x200]{.fm-code-in-text} [left\"]{.fm-code-in-text}, Hugo
    leaves the leftmost part of the image intact. Hugo also offers an
    option []{#CH06.htm#marker-1025258 .calibre9}called
    [smart]{.fm-code-in-text}, where Hugo automatically detects the
    important part of the image.

::: fm-sidebar-block
[]{#CH06.htm#pgfId-1049750 .calibre9}Further optimizations

[]{#CH06.htm#pgfId-1049751}While Hugo processes assets as per the
supplied parameters, further optimization of assets is still possible.
Many developers use postprocessing on Hugo's output to optimize further.
Most hosts, including Netlify, offer asset optimization as a feature of
their CDN hosting.

\

[]{#CH06.htm#pgfId-1049752}We can include specific plugins for this
processing. We can postprocess manually by taking the contents of the
public or the docs folders and passing images through a tool like
ImageOptim, CSS through CSSMin, and JavaScript through Terser to further
optimize the generated assets. We can also
[]{#CH06.htm#marker-1049753}use the HTML
[picture]{.fm-code-in-text1}[]{#CH06.htm#marker-1037423} tag or
[srcset]{.fm-code-in-text1} attribute[]{#CH06.htm#marker-1037424} in
[]{#CH06.htm#marker-1049754}the [img]{.fm-code-in-text1} tag to
[]{#CH06.htm#marker-1049755}provide the browser with options to load the
correct image based on the viewport size.
:::

[]{#CH06.htm#pgfId-1025370 .calibre9}The maximum size needed for the
cover images on the home screen has a width of approximately 1000 px (to
handle 2× scaling in high-density displays). The following listing shows
how we can use the [.Resize]{.fm-code-in-text} option to
[]{#CH06.htm#marker-1025359 .calibre9}restrict the cover images to a
shorter size. We also add [loading=lazy]{.fm-code-in-text} to load these
images lazily, thereby speeding up the initial rendering of the website.
Note that lazy loading is an HTML and not a Hugo performance feature.

[]{#CH06.htm#pgfId-1025430}Listing 6.34 Resizing the cover image for
blogs (layouts/modern/index.html)

``` programlisting
<img alt="{{.Title}}" loading="lazy" 
      src="{{((.Resources.GetMatch "cover.*").Resize "1000x").Permalink}}" /> 
```

[]{#CH06.htm#pgfId-1025588 .calibre9}This code provides massive savings
when loading the index page in terms of file size. *It is highly
recommended to convert images to the WebP format, which offers further
file size reductions.* We can pass [webp]{.fm-code-in-text} as an option
in [.Resize]{.fm-code-in-text} (for example, [.Resize]{.fm-code-in-text}
[\"1000x webp\"]{.fm-code-in-text}). This option converts the image to
the WebP format if we use the extended flavor of Hugo. WebP has \>95%
browser adoption, and unless we are targeting ancient browsers, it is
safe to use WebP as the only format for images on our websites. If older
browser support is needed, we can use the HTML
[picture]{.fm-code-in-text} tag to []{#CH06.htm#marker-1025593
.calibre9}provide both WebP and JPEG/PNG versions of the image. To keep
the dependency on the extended version of Hugo optional, we are not
using WebP for this book.

[]{#CH06.htm#pgfId-1043323}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-20.hugoinaction.com](https://chapter-06-20.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-20](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-20){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1025603 .calibre9}We can also provide artistic
filters to the image like a blur, sepia, or grayscale. Figure 6.5
includes a list of some of these filters.

[]{#CH06.htm#pgfId-1025725 .calibre9}The favicon for the Acme
Corporation website is still in the same color as the hardcoded "old"
theme. Unfortunately, due to choppy support for SVG favicons by the
various browser vendors, we need to have at least a PNG copy of the
favicon linked to our website. We can use Hugo's image-processing
filters to recolor our favicon, using the theme color
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/08](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/08){.url}]{.fm-hyperlink}).

![CH06_F05_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH06_F05_Jain.png){.calibre1}\

[]{#CH06.htm#pgfId-1049774}Figure 6.5 Image processing and filter
support in Hugo. Hugo supports a variety of options for resizing as well
as processing images with filters
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/07](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/07){.url}]{.fm-hyperlink}).

[]{#CH06.htm#pgfId-1025763 .calibre9}Note that the math here is
complicated, and while it showcases the flexibility offered by Hugo, in
most cases, you do not need something this complex. We will calculate
the favicon in a cached partial to prevent rerunning our math and then
using it inside the head section of our website. The following listing
shows how to recolor the favicon dynamically using the color present in
the configuration.

[]{#CH06.htm#pgfId-1025820}Listing 6.35 Recoloring the favicon
(layouts/partials/favicon.png.html)

``` programlisting
{{ $color := site.Params.color | default "#4f46e5" }} ❶
{{ $b := substr $color -2 2 | print "0x" | int}}      ❶
{{ $g := substr $color -4 2 | print "0x" | int}}      ❶
{{ $r := substr $color -6 2 | print "0x" | int}}      ❶
  
{{$r1 := sub 
        (div ($r | float) 255)                        ❷
        1 |                                           ❸
        mul 100}}                                     ❹
  
{{$g1 := sub (div ($g | float) 255) 1 | mul 100}} 
{{$b1 := sub (div ($b | float) 255) 1 | mul 100}} 
  
  
    {{ return( 
      (resources.Get "image/favicon.png" |            ❺
      images.Filter (images.Grayscale)                ❻
                  (images.Contrast *100*)             ❻
      (images.Invert)                                 ❼
      (images.ColorBalance $r1 $g1 $b1)               ❽
      ).Resize "128x #FFF").Permalink }}              ❾
```

[]{#CH06.htm#pgfId-1045952}[❶]{.fm-combinumeral} Removes RGB components
from the provided hex color (same logic as CSS)

[]{#CH06.htm#pgfId-1045976}[❷]{.fm-combinumeral} Converts the color red
to the 0-1 interval

[]{#CH06.htm#pgfId-1045993}[❸]{.fm-combinumeral} Gets the percentage of
the red color to be suppressed between 0-1 (100% = Red)

[]{#CH06.htm#pgfId-1046010}[❹]{.fm-combinumeral} Multiplies this by 100
to get a number between 0 and 100

[]{#CH06.htm#pgfId-1046027}[❺]{.fm-combinumeral} Reads favicon.png

[]{#CH06.htm#pgfId-1046051}[❻]{.fm-combinumeral} Converts to grayscale
and then bumps up the contrast to 100% to make this black and white

[]{#CH06.htm#pgfId-1046068}[❼]{.fm-combinumeral} Inverts the image. All
text is now white on the transparent background.

[]{#CH06.htm#pgfId-1046085}[❽]{.fm-combinumeral} Shifts the color
balance by suppressing colors based on the calculated percentage

[]{#CH06.htm#pgfId-1046102}[❾]{.fm-combinumeral} Fills the transparent
areas with white and resizes to 128 px width

[]{#CH06.htm#pgfId-1027048 .calibre9}To understand what is happening,
let's take an example. Say we want to recolor the icon to
[rgb(220,38,38)]{.fm-code-in-text}. We first convert all the things that
define this color as white, [rgb(255,255,255)]{.fm-code-in-text}, with
the rest of the image as transparent. Next we calculate the RGB value:

``` programlisting
r1 = (220/255 - 1) * 100 = -13.73% 
g1 = (38/255 - 1) * 100 =  -85.10% 
b1 = (38/255 - 1) * 100 =  -85.10% 
```

[]{#CH06.htm#pgfId-1027067 .calibre9}Using these as the color-balance
filter, we can now recolor our image with the new RGB values:

``` programlisting
Color balance = current color + current color * balance shift 
  
newR = 255 - 255 x 13.73/100 = 220 
newG = 255 - 255 x 85.10/100 =  38 
newB = 255 - 255 x 85.10/100 =  38 
```

[]{#CH06.htm#pgfId-1027083 .calibre9}We can call this in the head
section of our base template to load the favicon. The following listing
shows the code for this.

[]{#CH06.htm#pgfId-1027140}Listing 6.36 Loading the favicon
(layouts/modern/baseof.html)

``` programlisting
<link rel="icon" 
      type="image/png" href="{{partialCached "favicon.png.html" $ "nothing"}}"> 
```

[]{#CH06.htm#pgfId-1043436}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-21.hugoinaction.com](https://chapter-06-21.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-21](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-21){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1027233 .calibre9}We can redo the products section on
the index page to include a list of cards with product images rather
than using a table and provide a rating for these. We have all the
information already except for the product images, which are provided in
the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/09](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/09){.url}]{.fm-hyperlink}).
Because Acme Corporation sells the images, we do not want to expose raw
images over the internet. Hugo offers support
[]{#CH06.htm#marker-1027341 .calibre9}for an [Overlay]{.fm-code-in-text}
filter that we can use to provide []{#CH06.htm#marker-1027357
.calibre9}a *watermark*. The following listing adds the watermark and
then uses Unicode stars ([&star;]{.fm-code-in-text} and
[&starf;]{.fm-code-in-text}) to provide the star ratings. Figure 6.6
shows a completed card.

[]{#CH06.htm#pgfId-1027448}Listing 6.37 Showing products as cards
(layouts/modern/index.html)

``` programlisting
{{with (partialCached "products.html" "cache")}}           ❶
<section id="store"> 
  <h1>Our Products</h1> 
  <ul> 
    {{range $name, $data := .}}                            ❷
    <li> 
      <a href="#"> 
        {{$img := resources.GetMatch 
          (print "image/products/" $name ".") |            ❸
          images.Filter (images.Overlay                    ❹
             (resources.GetMatch "image/watermark.")       ❺
             0 0 )}}                                       ❺
        {{$img := $img.Resize "1000x"}}                    ❻
        <img src="{{$img.Permalink}}" alt="{{$name}}"> 
        <h2>{{$name}}</h2> 
        <div class="price">$ {{$data.Price}}</div> 
        <div class="rating">                               ❼
        {{range (seq $data.Rating)}}&starf;{{end -}}       ❽
        {{range seq                                        ❾
            (sub 5                                         ❾
            ($data.Rating                                  ❾
            | int))}}&star;{{end}}                         ❾
        </div> 
      </a> 
    </li> 
    {{end}} 
  </ul> 
</section> 
{{end}} 
```

[]{#CH06.htm#pgfId-1044834}[❶]{.fm-combinumeral} Gets the cached product
list

[]{#CH06.htm#pgfId-1044855}[❷]{.fm-combinumeral} Loops through the keys
and values of the map

[]{#CH06.htm#pgfId-1044872}[❸]{.fm-combinumeral} Generates an image name
dynamically

[]{#CH06.htm#pgfId-1044889}[❹]{.fm-combinumeral} Adds an overlay filter

[]{#CH06.htm#pgfId-1044906}[❺]{.fm-combinumeral} Overlays the watermark
image

[]{#CH06.htm#pgfId-1044926}[❻]{.fm-combinumeral} Resizes to max width

[]{#CH06.htm#pgfId-1044943}[❼]{.fm-combinumeral} Uses HTML stars to
display the rating

[]{#CH06.htm#pgfId-1044960}[❽]{.fm-combinumeral} Converts the
data.Rating to a sequence to loop from 1 to Rating, and then prints the
Unicode filled stars. The dash at the end removes whitespace between the
stars.

[]{#CH06.htm#pgfId-1044977}[❾]{.fm-combinumeral} Loops from 1 to (5
minus Rating) and displays hollow stars

[]{#CH06.htm#pgfId-1028540 .calibre9}We do not need to move this to a
partial. Hugo does not recompute images if nothing changes. The case
where cached partials are helpful is when there is a dynamic
calculation, like executing the SVGs and the color calculation in the
favicon.

[]{#CH06.htm#pgfId-1028556}[Tip]{.fm-callout-head} Unicode symbols
provide significant savings in terms of bytes in comparison to SVGs and
font icons.

![CH06_F06_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH06_F06_Jain.png){.calibre1}\

[]{#CH06.htm#pgfId-1049809}Figure 6.6 Adding a card for the products.
Hugo provides support for overlaying an image onto another to create a
watermark.

[]{#CH06.htm#pgfId-1043461}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-22.hugoinaction.com](https://chapter-06-22.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-22](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-22){.url}]{.fm-hyperlink}.

### []{#CH06.htm#pgfId-1028572}[]{#CH06.htm#marker-1037836}[]{#CH06.htm#marker-1037834}[]{#CH06.htm#marker-1037832}6.3.3 Other assets {#CH06.htm#sigil_toc_id_149 .fm-head1}

[]{#CH06.htm#pgfId-1028704 .calibre9}[]{#CH06.htm#marker-1037768
.calibre9}[]{#CH06.htm#marker-1037769
.calibre9}[]{#CH06.htm#marker-1037770 .calibre9}We can also use Hugo
Pipes to access other nontextual assets like PDFs, ZIPs, or other binary
content files. Although Hugo does not understand their contents, we can
use accurate relative and absolute links to those files. If the files
are missing, the build fails. If we delete the code that uses the file,
the file does not copy over to the output directory. These features make
it worthwhile to have an empty static folder and copy over content using
the Hugo pipeline.

::: fm-sidebar-block
[]{#CH06.htm#pgfId-1049841 .calibre9}Exercise 6.5

[]{#CH06.htm#pgfId-1049842}Which of the following are the reasons to use
Hugo Pipes over prebuilding content outside Hugo or using browser
JavaScript? (Select all that apply.)

1.  []{#CH06.htm#pgfId-1049843}Hugo Pipes run when the user requests
    data and, therefore, no needless execution happens for data that is
    never requested.

2.  []{#CH06.htm#pgfId-1049844}Hugo Pipes have access to the website
    configuration and front matter where we can consolidate all the
    website settings like theme color, which can be passed on to the
    relevant JavaScript, CSS, or image code by Hugo.

3.  []{#CH06.htm#pgfId-1049845}Hugo Pipes can cache files across builds,
    only updating content when it changes.

4.  []{#CH06.htm#pgfId-1049846}Hugo Pipes can generate multiple sizes
    for images based on need, and the size requirement can be changed by
    a simple string replacement in code.
    []{#CH06.htm#marker-1049847}[]{#CH06.htm#marker-1049848}[]{#CH06.htm#marker-1049849}[]{#CH06.htm#marker-1049850}[]{#CH06.htm#marker-1049851}[]{#CH06.htm#marker-1049852}
:::

## []{#CH06.htm#pgfId-1028776}6.4 Controlling Markdown rendering {#CH06.htm#sigil_toc_id_150 .fm-head}

[]{#CH06.htm#pgfId-1028825 .calibre9}[]{#CH06.htm#marker-1037909
.calibre9}[]{#CH06.htm#marker-1037910
.calibre9}[]{#CH06.htm#marker-1037911
.calibre9}[]{#CH06.htm#marker-1037912 .calibre9}We also have images
present in the Markdown documents, which we are not optimizing for
production. These can also slow down loading the website. To control how
Hugo renders content in the Markdown documents, Hugo provides
[]{#CH06.htm#marker-1037914 .calibre9}hooks (called *render hook
templates*) into the Markdown parser, where we can customize the
rendering for Markdown elements. We can override the rendering of
images, links, and even headings if we want. When optimizing images, we
will override the image-rendering functionality in Markdown to limit the
maximum size of the images to 1000 px. The following listing shows how
we can add a image render hook in the modern content type, which uses
[]{#CH06.htm#marker-1037915 .calibre9}the [resize]{.fm-code-in-text}
function
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/10](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/10){.url}]{.fm-hyperlink}).

[]{#CH06.htm#pgfId-1028904}Listing 6.38 Controlling image size
(layouts/modern/\_markup/render-image.html)

``` programlisting
<img loading="lazy" src=" 
{{with (.Page.Resources.GetMatch .Destination)}} 
        {{(.Resize "1000x").Permalink }}                     ❶
{{else}} 
        {{ .Destination | safeURL }}                         ❷
{{end}} 
  
" 
alt="{{ .Text }}" 
{{ with .Title}} title="{{ . }}"{{ end }} 
/> 
```

[]{#CH06.htm#pgfId-1044675}[❶]{.fm-combinumeral} Finds the bundled
resource and optimizes it

[]{#CH06.htm#pgfId-1044680}[❷]{.fm-combinumeral} If the destination is
not found, uses the URL as-is

[]{#CH06.htm#pgfId-1029161 .calibre9}It is difficult to see visually if
our Markdown hook was actually executed because we are not changing the
image. We can view the HTML source of the web page and check for lazy
loading ([loading=\"lazy\"]{.fm-code-in-text}) to verify.
[]{#CH06.htm#marker-1029172 .calibre9}[]{#CH06.htm#marker-1029175
.calibre9}[]{#CH06.htm#marker-1029177 .calibre9}

## []{#CH06.htm#pgfId-1029183}6.5 Using bundled templates for common work {#CH06.htm#sigil_toc_id_151 .fm-head}

[]{#CH06.htm#pgfId-1029202 .calibre9}[]{#CH06.htm#marker-1029194
.calibre9}[]{#CH06.htm#marker-1029196
.calibre9}[]{#CH06.htm#marker-1029198 .calibre9}From the perspective of
maintenance, the best piece of code is an empty file. The second best is
a well-written piece of code maintained by a trusted team of experts.
Hugo comes bundled with ready-to-use templates supported by its core
team and used in hundreds of themes by the community. Reusing some of
this makes life as a developer a lot easier.

[]{#CH06.htm#pgfId-1029207 .calibre9}When we added the head section of
the website, we did not provide much metadata. While metadata does not
change the raw contents of the web page visible to the user, that
information is vital for the discoverability of the web page. The Google
search bot uses microdata to identify and list pages for a Google
search. Services like Facebook and LinkedIn use OpenGraph tags to
provide richer experiences to users sharing the web page on these
platforms. With Twitter cards, we can control how our web page looks if
someone tweets the URL.

[]{#CH06.htm#pgfId-1029213 .calibre9}Although we can create the metadata
tags manually, there is no real need to do so. Unless we need to pass
specific data to any of these tags, we can use Hugo's internal templates
for this task. These templates use the front matter, the summary, the
site configuration, and the page bundle resources to generate HTML tags
that we can place on our website. There is not a lot of wiggle room in
the specification provided by these services. Therefore, it makes little
sense to modify these. Hugo comes bundled with standard scripts from
Google Analytics to disqus.com comments, and these can be added to the
template using a single line of code.

[]{#CH06.htm#pgfId-1029219 .calibre9}The following listing adds Open
Graph and Twitter cards to the base template for our website via
internal templates. A copy of the template is also avail-able in the
chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/11](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-resources/11){.url}]{.fm-hyperlink}).
The []{#CH06.htm#marker-1042595 .calibre9}generated
[]{#CH06.htm#marker-1042596 .calibre9}HTML content
[]{#CH06.htm#marker-1042597 .calibre9}should have
[og:title]{.fm-code-in-text} and [og: description]{.fm-code-in-text}
along []{#CH06.htm#marker-1042598 .calibre9}with
[twitter:title]{.fm-code-in-text} and
[twitter:description]{.fm-code-in-text} tags.

[]{#CH06.htm#pgfId-1029358}Listing 6.39 Adding metadata
(layouts/modern/baseof.html)

``` programlisting
{{ template "_internal/twitter_cards.html" . }} 
{{ template "_internal/opengraph.html" . }} 
```

[]{#CH06.htm#pgfId-1043491}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-23.hugoinaction.com](https://chapter-06-23.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-23](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-23){.url}]{.fm-hyperlink}.

[]{#CH06.htm#pgfId-1029516 .calibre9}Just like bundled templates, Hugo
provides variables and functions to reduce work. One such example is
automatic summarization we introduced in chapter 4. We can access the
page summary by using [.Summary]{.fm-code-in-text} in the page context.
Another such method is [.TableOfContents]{.fm-code-in-text}, which
parses the headings in the Markdown document and provides a table of
contents based on that. We can configure the table of contents in the
global configuration. The following listing moves the definition of the
body for single pages to single.html and adds a table of contents (see
figure 6.7).

[]{#CH06.htm#pgfId-1029576}Listing 6.40 Table of contents in single
pages (layouts/modern/single.html)

``` programlisting
{{define "body"}} 
<main> 
  {{with .Title}} 
    <h1> 
      {{.}} 
    </h1> 
  {{end}} 
  {{if .Param "toc"}} 
    <h2>Table of Contents</h2> 
    {{.TableOfContents}} 
  {{end}} 
{{.Content}} 
</main> 
{{end}} 
```

[]{#CH06.htm#pgfId-1029726 .calibre9}Let's enable the table of contents
for the Terms of Use page by passing [toc:true]{.fm-code-in-text} in the
front matter. We can also move the title from the Markdown
[\<h1\>]{.fm-code-in-text} heading to the [Title]{.fm-code-in-text}
attribute in []{#CH06.htm#marker-1043535 .calibre9}the front matter.

[]{#CH06.htm#pgfId-1043516}[Code checkpoint]{.fm-callout-head}
[[https://chapter-06-24.hugoinaction.com](https://chapter-06-24.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-24](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-24){.url}]{.fm-hyperlink}.

![CH06_F07_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH06_F07_Jain.png){.calibre1}\

[]{#CH06.htm#pgfId-1049871}Figure 6.7 Table of contents for the Terms of
Use page is enabled by []{#CH06.htm#marker-1049872}using the
[[]{#CH06.htm#marker-1043553}{{.TableOfContents}}]{.fm-code-in-figurecaption}
method.

[]{#CH06.htm#pgfId-1029855 .calibre9}With the power of partials, Hugo
Pipes, and bundled templates, we enhanced the index.html page and laid
down the foundations of a new theme for the entire website. We can
transfer any page to the new template by specifying its type as
[modern]{.fm-code-in-text}. In the next chapter, we will be moving away
from the Eclectic theme to a custom theme called Acme that will power
the Acme Corporation website. []{#CH06.htm#marker-1029880
.calibre9}[]{#CH06.htm#marker-1029883
.calibre9}[]{#CH06.htm#marker-1029885 .calibre9}

## []{#CH06.htm#pgfId-1029891}Summary {#CH06.htm#sigil_toc_id_152 .fm-head}

-   []{#CH06.htm#pgfId-1029901 .calibre9}Content types in Hugo provide
    the means to write different, potentially independent templates for
    different types of content. Hugo automatically maps the section name
    of the branch bundle to the content type.

-   []{#CH06.htm#pgfId-1029915 .calibre9}We can use the base template
    and code blocks in Hugo to share common snippets of the Go template
    language via an inheritance mechanism. The base template provides
    snippets of default code that we can override in the specific
    templates.

-   []{#CH06.htm#pgfId-1029925 .calibre9}Partials in Hugo provide a
    means to encapsulate a shared code snippet in an independent file.
    We can cache partials for faster execution.

-   []{#CH06.htm#pgfId-1029935 .calibre9}Partials also act as functions
    that can return values to the caller.

-   []{#CH06.htm#pgfId-1029945 .calibre9}With Hugo Pipes, we can process
    textual and nontextual assets with a series of filters.

-   []{#CH06.htm#pgfId-1029955 .calibre9}We can write Go template code
    in any text-based file format from CSS and JavaScript to SVG.

-   []{#CH06.htm#pgfId-1029965 .calibre9}Hugo provides a variety of
    image manipulation functions for resizing to filtering.

-   []{#CH06.htm#pgfId-1029975 .calibre9}We can write custom code to
    control how Hugo renders the elements of the Markdown document.

-   []{#CH06.htm#pgfId-1029985 .calibre9}Hugo comes bundled with many
    reusable templates that we can add to a website with just one line
    of code.

[]{#CH07.htm}

# []{#CH07.htm#pgfId-1023601}[]{#CH07.htm#marker-1029518}7 Creating your own theme {#CH07.htm#heading_id_2 .tochead}

[]{#CH07.htm#pgfId-1025861}This chapter covers

-   []{#CH07.htm#pgfId-1025900 .calibre9}Creating multiple layouts with
    shared base templates
-   []{#CH07.htm#pgfId-1025901 .calibre9}Using front matter cascades in
    Hugo
-   []{#CH07.htm#pgfId-1025902 .calibre9}Creating index and taxonomy
    pages to navigate through the website
-   []{#CH07.htm#pgfId-1025903 .calibre9}Converting content type to a
    theme
-   []{#CH07.htm#pgfId-1025882 .calibre9}Building content views to share
    content between templates

[]{#CH07.htm#pgfId-1011837 .calibre9}In chapter 6, we started moving
away from the Eclectic theme and began to create the underpinnings for a
new theme. We created a new content []{#CH07.htm#marker-1025941
.calibre9}type called [modern]{.fm-code-in-text}, which has custom
template code. In this chapter, we will convert the
[modern]{.fm-code-in-text} content type to []{#CH07.htm#marker-1025942
.calibre9}a complete theme (AcmeTheme). We will also focus on all types
of content and how that fits together in a new theme as figure 7.1
illustrates.

![CH07_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH07_F01_Jain.png){.calibre1}\

[]{#CH07.htm#pgfId-1036516}Figure 7.1 Chapter 7 focuses on going through
the breadth of the website and making sure all pages can move from the
Eclectic theme to our new theme. The chapter also goes into the
theme/layout split and how to get parts of the page from different
areas.

[]{#CH07.htm#pgfId-1011862 .calibre9}In Hugo, a theme does not have a
rigid definition. A set of templates that can render the content folder
to a website is technically a theme. If we take the
[modern]{.fm-code-in-text} content type that []{#CH07.htm#marker-1011887
.calibre9}we have so far and place it in the themes/\<theme
name\>/\_default/ folder, we could call that a theme, but it would not
be a good theme. It will not render the list pages (the root pages of
the branch bundle) well. The taxonomy pages will also be mostly blank. A
proper theme in Hugo should be able to render all the standard types of
content from regular pages to list pages and taxonomy.

[]{#CH07.htm#pgfId-1011910 .calibre9}Currently, we depend on the
Eclectic theme for a lot of pages. In this chapter, we will move the
pages, one by one, to []{#CH07.htm#marker-1011899 .calibre9}the
[modern]{.fm-code-in-text} content type, and once that migration is
complete, we will be able to restructure that content type to become a
theme.

## []{#CH07.htm#pgfId-1011919}[]{#CH07.htm#marker-1027259}[]{#CH07.htm#marker-1027256}7.1 More ways to lay out content {#CH07.htm#sigil_toc_id_153 .fm-head}

[]{#CH07.htm#pgfId-1011936 .calibre9}[]{#CH07.htm#marker-1011930
.calibre9}[]{#CH07.htm#marker-1011932 .calibre9}There are multiple types
of pages in an application, each with a different look. A blog page, for
example, typically has a sidebar with additional information about the
blog post. Various types of pages can have different CSS styles and
different HTML structures to accommodate their unique design.

[]{#CH07.htm#pgfId-1011941 .calibre9}One way to style pages differently,
which we used in chapter 6, is to use a new content type for each
category of page created. While content types are potent concepts that
provide a mechanism to isolate the rendering code for a particular type
of content, there are additional ways in Hugo to render content in a
different design---parameterized front matter or a new layout. All three
approaches have their use cases, advantages, and disadvantages, and we
can use all of them in tandem in the same website.

[]{#CH07.htm#pgfId-1011947 .calibre9}For the Acme Corporation website,
the web page design we used for the Terms of Use page (section 6.1.4) is
pretty barebones. It does not work well with the content pages in the
blog and the news sections. We need a more elaborate design for these
pages. The desired changes in the News page can be achieved by CSS,
while for the Blog pages, we want to add a sidebar, which involves
adding HTML content. Let's see the various ways in which we can achieve
this with Hugo.

### []{#CH07.htm#pgfId-1011953}7.1.1 Parameterizing front matter to differentiate the News page interface {#CH07.htm#sigil_toc_id_154 .fm-head1}

[]{#CH07.htm#pgfId-1011990 .calibre9}[]{#CH07.htm#marker-1011964
.calibre9}[]{#CH07.htm#marker-1011966
.calibre9}[]{#CH07.htm#marker-1011968
.calibre9}[]{#CH07.htm#marker-1011970 .calibre9}When we have minor HTML
changes between two different types of pages, we might not want to
create a new content type. We can expose a variable that the template
code can use to provide differentiated HTML. Using the conditional
statements [if]{.fm-code-in-text} and [else]{.fm-code-in-text}, we can
write different HTML content if needed. This way, minor HTML changes
live in the same file, and we do not need to manage a separate file on
disk. We can have maximum code reuse, and we do not need to split the
code into partials to prevent repetition.

[]{#CH07.htm#pgfId-1012031 .calibre9}For the News pages on the Acme
Corporation website, we do not need many changes. These pages come with
cover images that we need to apply. Remember from chapter 6, the
[.Resources]{.fm-code-in-text} in the context of a page refers to the
resources in the page bundle for that page. We can use a
[with]{.fm-code-in-text} or []{#CH07.htm#marker-1012020 .calibre9}an
[if]{.fm-code-in-text} check to ensure that if the resources are not
present, no additional HTML is generated. We can then add this to the
existing single.html as in the following listing.

[]{#CH07.htm#pgfId-1012091}Listing 7.1 A cover image for the News page
(layouts/modern/single.html)

``` programlisting
{{define "body"}} 
<main> 
  {{$img := .Resources.GetMatch "cover.*"}}               ❶
  {{ if $img }}                                           ❷
    <img alt="{{.Title}}" width="1920" height="400" 
         loading="lazy" src="{{($img.Fill "1920x400").Permalink}}"> 
  {{ end }} 
  ... 
{{end}} 
```

[]{#CH07.htm#pgfId-1035975}[❶]{.fm-combinumeral} Gets the cover image
for the page

[]{#CH07.htm#pgfId-1035996 .calibre9}[❷]{.fm-combinumeral} Adds the
image to the web page if present

[]{#CH07.htm#pgfId-1012383 .calibre9}The pages in the news section
(figure 7.2) in the Acme Corporation website have a similar HTML
structure to the pages we have developed so far, and all the changes
live in the CSS styling. Because the HTML is mostly the same, a
conditional statement approach to switch CSS classes is better suited
for this use case. Although we can take the class name from the front
matter as a variable and use that by calling []{#CH07.htm#marker-1012372
.calibre9}the [\$.Param]{.fm-code-in-text} function, there are ways with
which we could get this information without needing to write anything in
the content area of the website. Had we not set up the content type, we
could have used the content type for this case via the
[]{#CH07.htm#marker-1012388 .calibre9}[.Type]{.fm-code-in-text}
property.

![CH07_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH07_F02_Jain.png){.calibre1}\

[]{#CH07.htm#pgfId-1036557}Figure 7.2 The news sections are rendered
with a different UI by switching the CSS styling using the section
information. (Image by tookapic on Pixabay.)

[]{#CH07.htm#pgfId-1012464 .calibre9}We can use the folder location of
the page to find its section. If we run [{{path.Base]{.fm-code-in-text}
[(path.Dir]{.fm-code-in-text}
[.Page.FirstSection.File.Path)}}]{.fm-code-in-text} for the News page,
we will get the news section. [.Page.FirstSection]{.fm-code-in-text}
points to the \_index page of the news section, and we can find the
folder name using the [path.Dir]{.fm-code-in-text} at its path. Note
that we can also use [CurrentSection]{.fm-code-in-text} for the News
page, but this will break the community subsection of the blog section.
We can use this folder location to change the HTML class of the News
page and make it different from the other pages as in listing 7.2.

[]{#CH07.htm#pgfId-1012483}[Tip]{.fm-callout-head} Minimizing the need
for entering data in the front matter can help keep the content area
simple. When creating content, the less we have to think about front
matter metadata, the better. We make a theme once, but we continuously
add content to the website.

[]{#CH07.htm#pgfId-1012540}Listing 7.2 Adding the page section name
(layouts/modern/single.html)

``` programlisting
{{define "bodyClass"}} 
   {{ path.Dir .Page.FirstSection.File.Path) }} page 
{{end}} 
```

[]{#CH07.htm#pgfId-1012637}[Tip]{.fm-callout-head} It is good to expose
one entry in the head section of the website in
[]{#CH07.htm#marker-1012616}the [define]{.fm-code-in-text1} block. This
can be overridden for page-specific metadata or for supplying
page-specific CSS/JavaScript files, making the theme extensible. We
could even have a naming convention like [cover.\*]{.fm-code-in-text1}
to load additional CSS/JS files.

[]{#CH07.htm#pgfId-1012668 .calibre9}The single page template can
automatically find the section's name and provide the appropriate CSS
class with these changes. Because this code is present in the single
page template for the [modern]{.fm-code-in-text} type in
[]{#CH07.htm#marker-1012657 .calibre9}Hugo, we need to assign all pages
in the news section to this content type. We will need to add [type:
modern]{.fm-code-in-text} to every page in the news section. Considering
there could be hundreds of News pages, that is a lot of work. For new
pages, however, archetypes (discussed in section 5.4.3) can help in
predefining them, but the text will still be required, leading to the
possibility of typographical errors and other mistakes.
[]{#CH07.htm#marker-1012673 .calibre9}[]{#CH07.htm#marker-1012676
.calibre9}[]{#CH07.htm#marker-1012678
.calibre9}[]{#CH07.htm#marker-1012680 .calibre9}

### []{#CH07.htm#pgfId-1012686}7.1.2 Using the cascade property to apply properties to the front matter of multiple pages {#CH07.htm#sigil_toc_id_155 .fm-head1}

[]{#CH07.htm#pgfId-1012717 .calibre9}[]{#CH07.htm#marker-1012697
.calibre9}[]{#CH07.htm#marker-1012699
.calibre9}[]{#CH07.htm#marker-1012701 .calibre9}One central principle in
Hugo is to reduce work and prevent duplication of the code to the
maximum extent possible. Having a property shared between all pages in a
section is common for websites. Hugo recognizes this and provides a
mechanism to write this property once and apply it to all of the pages.
Hugo has a property in the front matter []{#CH07.htm#marker-1012706
.calibre9}called [cascade]{.fm-code-in-text} (figure 7.3), whose
subproperties apply as front matter properties to all pages in that
section.

[]{#CH07.htm#pgfId-1012742 .calibre9}The concept of *cascade* is the
same as in CSS, which stands for cascading style sheets. We define a
generic property at the top level and then a specific property when an
override is needed. The more specific property overrides the generic
one. We can even do a local override, where the
[cascade]{.fm-code-in-text} property applies []{#CH07.htm#marker-1012747
.calibre9}to the subpage but not to the current page because the
property present in the front matter for the current page has a higher
priority.

[]{#CH07.htm#pgfId-1012891 .calibre9}On the \_index page for the news
section, let's enable the []{#CH07.htm#marker-1012838 .calibre9}type
[modern]{.fm-code-in-text} via the [cascade]{.fm-code-in-text} property
as []{#CH07.htm#marker-1012864 .calibre9}in listing 7.3. We will revert
it for the news/\_index page because the [modern]{.fm-code-in-text} type
does []{#CH07.htm#marker-1012880 .calibre9}not have the HTML layout for
a branch list page. By default, the [cascade]{.fm-code-in-text} property
applies []{#CH07.htm#marker-1012896 .calibre9}to all pages in a section,
including subsection index pages (list.html) and individual
(single.html) pages.

[]{#CH07.htm#pgfId-1012957}Listing 7.3 The
[modern]{.fm-code-in-listingcaption} type in all content pages
(content/news/\_index.md)

``` programlisting
cascade: 
  type: modern 
type: _default 
```

[]{#CH07.htm#pgfId-1013055}[Note]{.fm-callout-head} We could have used a
garbage string in the front matter's root
[]{#CH07.htm#marker-1013044}level [type]{.fm-code-in-text1} field. Hugo
falls back to the \_default folder to look for the layout if the type
specified in the front matter is not present on the disk.

[]{#CH07.htm#pgfId-1032291}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-01.hugoinaction.com](https://chapter-07-01.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-01](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-01){.url}]{.fm-hyperlink}.

[]{#CH07.htm#pgfId-1013181 .calibre9}Every page in the news section has
been assigned to the []{#CH07.htm#marker-1013154 .calibre9}content type
[modern]{.fm-code-in-text} using []{#CH07.htm#marker-1013170
.calibre9}the [cascade]{.fm-code-in-text} property. Once this is
enabled, we can see the child pages in the news section render with the
new CSS styling for the News pages. The next set of pages that need a
different design are the Blog pages.

[]{#CH07.htm#pgfId-1013248}[Note]{.fm-callout-head} We can still
override the [cascade]{.fm-code-in-text1} property by
[]{#CH07.htm#marker-1013211}manually specifying it in the front matter;
for example, if we put [type: \_default]{.fm-code-in-text1} in any of
the pages in the news section, that specific page renders with the
default content type even if it is in the news section that has set the
cascading content []{#CH07.htm#marker-1013227}type
[modern]{.fm-code-in-text1}. We can view the various permutations of
[cascade]{.fm-code-in-text1} and overrides in figure 7.3.
[]{#CH07.htm#marker-1013253}[]{#CH07.htm#marker-1013256}[]{#CH07.htm#marker-1013258}

![CH07_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH07_F03_Jain.png){.calibre1}\

[]{#CH07.htm#pgfId-1036592}Figure 7.3 The
[cascade]{.fm-code-in-figurecaption} property allows
[]{#CH07.htm#marker-1036591}us to provide values to the front matter
variables, which we can use across the whole section. In the diagram,
[local]{.fm-code-in-figurecaption} specifies the keys in the front
matter, while [cascade]{.fm-code-in-figurecaption} sets the same key as
a subkey for the cascade. The top-level \_index file specifies a cascade
that applies to that file as well as to the subsections for its child
pages. /C issues a cascade override so that its subtree gets the
[cascade]{.fm-code-in-figurecaption} value from this section. /C2 does
not use an override, and therefore, the cascade from /C carries through.
In /C2b, we have a local override that takes over the property. In /D,
we do not override the [cascade]{.fm-code-in-figurecaption} property,
but /D2 does a local override. /E has both a local override for the
specific index page and a cascade for the child pages, which /E1 uses.
Section /F only has a local override, and the properties from its root
follow through to /F1.

### []{#CH07.htm#pgfId-1013264}7.1.3 Providing a different layout to the blog content {#CH07.htm#sigil_toc_id_156 .fm-head1}

[]{#CH07.htm#pgfId-1013283 .calibre9}[]{#CH07.htm#marker-1013275
.calibre9}[]{#CH07.htm#marker-1013277
.calibre9}[]{#CH07.htm#marker-1013279 .calibre9}The design for the blog
section includes a sidebar (figure 7.4). Over time, we expect blogs to
diverge in design from the News pages or the regular web pages. Keeping
the code together with unrelated pages is not a scalable solution. When
we have more than a couple of conditional statements, things can get
complicated, especially if the content in these conditional statements
is enormous. If we want to share the base template with different
generated HTML for various content, we need to create a new layout.

![CH07_F04_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH07_F04_Jain.png){.calibre1}\

[]{#CH07.htm#pgfId-1036625}Figure 7.4 The Blog page with a sidebar was
created by adding a new layout []{#CH07.htm#marker-1036624}to the
[modern]{.fm-code-in-figurecaption} content type web pages. (Image by
Pexels on Pixabay.)

[]{#CH07.htm#pgfId-1013288 .calibre9}The default layout for a web
page/leaf bundle is the single layout, so we have a file called
single.html. This is where we provide the overrides to the base
template. But we are not restricted to that layout. We can override it
to anything we desire. Layouts within a content type share all templates
within the content type including render hooks. Table 7.1 compares the
content type with a layout.

[]{#CH07.htm#pgfId-1026735}Table 7.1 Content type vs. layout

+-------------+---------------------------+---------------------------+
| []{#CH07.   | []{#CH07.                 | []{#CH07                  |
| htm#pgfId-1 | htm#pgfId-1026743}Content | .htm#pgfId-1026745}Layout |
| 026741}Area | type                      |                           |
+=============+===========================+===========================+
| []{         | []{#CH07.h                | []{#CH07.h                |
| #CH07.htm#p | tm#pgfId-1026749}Provides | tm#pgfId-1026751}Provides |
| gfId-102674 | the templates for all     | the template for an       |
| 7}**Usage** | pages within a section of | individual page (like a   |
|             | the website. For example, | blog post with a          |
|             | the                       | sidebar). A blog post     |
|             | [blog]{.                  | without a sidebar can be  |
|             | fm-code-in-figurecaption} | in a different layout.    |
|             | type represents the blog  |                           |
|             | content pages and the     |                           |
|             | blog index pages, and it  |                           |
|             | can have multiple layouts |                           |
|             | like blog posts with and  |                           |
|             | without sidebars.         |                           |
+-------------+---------------------------+---------------------------+
| []{         | []{#C                     | []{#CH0                   |
| #CH07.htm#p | H07.htm#pgfId-1026755}The | 7.htm#pgfId-1026757}Every |
| gfId-102675 | map name automatically    | web page has a default    |
| 3}**Default | maps to the section name. | layout, which is based on |
| mappings**  | The                       | the template lookup       |
|             | [blog]{.                  | order. The single and     |
|             | fm-code-in-figurecaption} | list layouts are the most |
|             | content type              | common.                   |
|             | automatically applies to  |                           |
|             | the pages in the          |                           |
|             | /content/blog folder      |                           |
|             | unless overridden.        |                           |
+-------------+---------------------------+---------------------------+

[]{#CH07.htm#pgfId-1013548 .calibre9}We want to have a sidebar in the
blog section to provide more information about the blog post. We can
provide information like tags in the front matter and things like
summaries used in the index page and other properties in the front
matter. Along with this, Hugo can generate a bunch of other metadata
such as an approximate reading time with the
[.ReadingTime]{.fm-code-in-text} property and
[]{#CH07.htm#marker-1013531 .calibre9}an approximate word count with
[]{#CH07.htm#marker-1013537 .calibre9}the [.WordCount]{.fm-code-in-text}
property.

[]{#CH07.htm#pgfId-1013557 .calibre9}Let's create a new file called
blog.html in the modern folder
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/01](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/01){.url}]{.fm-hyperlink}).
In this file, we will define the body block for the Blog pages to
include a sidebar. The following listing sets up a sidebar in the HTML
[\<aside\>]{.fm-code-in-text} tag that provides information generated by
Hugo.

[]{#CH07.htm#pgfId-1013642}Listing 7.4 The blog layout with a sidebar
(layouts/modern/blog.html)

``` programlisting
<div id="content">                           ❶
  <main>...</main>                           ❷
  <aside>                                    ❸
    <section> 
      <h2>Information</h2> 
      <p>{{.Summary}}</p>                    ❹
    </section> 
    <section> 
      <h2>Reading time</h2> 
      <p>{{.ReadingTime}} min.</p>           ❺
    </section> 
    <section> 
      <h2>Word Count</h2> 
      <p>≈ {{.FuzzyWordCount}}</p>           ❻
    </section> 
    {{with .Params.tags}} 
    <section> 
      <h2>Tags</h2> 
      {{range .}}                            ❼
      <p> 
        <a 
          href="{{"/tags/" | relLangURL}}    ❽
                {{- . | urlize}}">           ❾
          {{. | humanize}}                   ❿
          </a> 
      </p> 
      {{end}} 
      </section> 
    {{end}} 
    </aside> 
</div> 
```

[]{#CH07.htm#pgfId-1035298}[❶]{.fm-combinumeral} Wrapping in a content
div to differentiate from header and footer

[]{#CH07.htm#pgfId-1035319}[❷]{.fm-combinumeral} Same main tag as in a
regular singe page

[]{#CH07.htm#pgfId-1035339}[❸]{.fm-combinumeral} aside is a good HTML
tag for a sidebar.

[]{#CH07.htm#pgfId-1035356}[❹]{.fm-combinumeral} The autogenerated or
manually provided summary in the sidebar

[]{#CH07.htm#pgfId-1035373}[❺]{.fm-combinumeral} Hugo calculates
approximate reading time based on the word count and the character
length.

[]{#CH07.htm#pgfId-1035390}[❻]{.fm-combinumeral} Gives an approximate
word count to the user. We have an exact option as well, but that can be
too much detail for the reader.

[]{#CH07.htm#pgfId-1035407}[❼]{.fm-combinumeral} Loops through the
supplied tags

[]{#CH07.htm#pgfId-1035424}[❽]{.fm-combinumeral} Converts each tag path
to a language-specific URL link

[]{#CH07.htm#pgfId-1035441}[❾]{.fm-combinumeral} "{{-" ensures no space
is present between /tags/ and the tag name.

[]{#CH07.htm#pgfId-1035458 .calibre9}[❿]{.fm-combinumeral} Displays the
tag name, capitalizing the first letter for human readability

[]{#CH07.htm#pgfId-1014427 .calibre9}We will also need to specify the
layout and type for the blog section []{#CH07.htm#marker-1014416
.calibre9}via the [cascade]{.fm-code-in-text} property as in the
following listing. We use this to update the layout and content type in
the blog section.

[]{#CH07.htm#pgfId-1014487}Listing 7.5 Updating the layout and content
type (content/blog/\_index.md)

``` programlisting
--- 
cascade: 
  layout: blog 
  type: modern 
--- 
```

[]{#CH07.htm#pgfId-1014551 .calibre9}We have now updated all the pages
in the blog folder from the single layout to the blog layout.
[]{#CH07.htm#marker-1014553 .calibre9}[]{#CH07.htm#marker-1014556
.calibre9}[]{#CH07.htm#marker-1014558 .calibre9}

::: fm-sidebar-block
[]{#CH07.htm#pgfId-1036659 .calibre9}Exercise 7.1

[]{#CH07.htm#pgfId-1036660}A \_\_\_\_\_\_\_\_\_\_ in Hugo can share the
base template and Markdown render hooks (mentioned in section 6.4) with
other templates of the same content type.
:::

### []{#CH07.htm#pgfId-1014583}7.1.4 Cascading targets {#CH07.htm#sigil_toc_id_157 .fm-head1}

[]{#CH07.htm#pgfId-1014630 .calibre9}[]{#CH07.htm#marker-1014594
.calibre9}[]{#CH07.htm#marker-1014596
.calibre9}[]{#CH07.htm#marker-1014598 .calibre9}We also have an index
page for the community subsection of the blog section. Like the News
pages, we do not want the new template to override the index page for
the blog section. One approach to prevent this override is to add a
local override in \_index.md in both of these places. However, this
approach can lead to bugs when we introduce new sections and forget to
apply this setting. A better solution is to scope the overwrite to the
right set of pages. To do this, along with the cascades, we can provide
target information in the front []{#CH07.htm#marker-1014603
.calibre9}matter using the key [\_target]{.fm-code-in-text}. We can use
this key to restrict []{#CH07.htm#marker-1014619 .calibre9}the
[cascade]{.fm-code-in-text} option to only apply to a subpath, a
specific language folder, or a specific kind of page in Hugo. To
restrict the target to the non-index pages, we need to understand the
concept of page kinds in Hugo.

[]{#CH07.htm#pgfId-1014639}[]{#CH07.htm#marker-1026960}Page kinds in
Hugo

[]{#CH07.htm#pgfId-1014665 .calibre9}[]{#CH07.htm#marker-1014650
.calibre9}Similar to a layout, each page in Hugo
[]{#CH07.htm#marker-1014654 .calibre9}has a *kind*. A kind is the
internal data structure that represents a page in Hugo. The set of
variables available to the template are dependent on the kind of page.
For example, the taxonomy page kind always has access to the list of
terms in the taxonomy, which may not be available in the other page
kinds. The kind of a page cannot be changed. In Hugo, the page kind is
one of the following:

-   []{#CH07.htm#pgfId-1014674 .calibre9}*home*---The
    []{#CH07.htm#marker-1014691 .calibre9}index page of the entire
    website. Corresponds to index.html by default.

-   []{#CH07.htm#pgfId-1014701 .calibre9}*page*---A single web page.
    Corresponds to single.html by default.

-   []{#CH07.htm#pgfId-1014718 .calibre9}*section*---The
    []{#CH07.htm#marker-1014731 .calibre9}index page of a website
    section or branch bundle. Corresponds to list.html by default (see
    section 7.2).

-   []{#CH07.htm#pgfId-1014741 .calibre9}*taxonomy*---The index page of
    an individual taxonomy list. Corresponds to terms.html (and not to
    taxonomy.html) by default (see section 7.3).

-   []{#CH07.htm#pgfId-1014758 .calibre9}*term*---The
    []{#CH07.htm#marker-1014771 .calibre9}page for an individual
    taxonomy term. Corresponds to taxonomy .html (and not to terms.html)
    by default (see section 7.3).

::: fm-sidebar-block
[]{#CH07.htm#pgfId-1036677 .calibre9}Difference between theme, type,
layout, and page kind

[]{#CH07.htm#pgfId-1036678}While they may seem synonymous, the theme,
type, layout, and page kind are different things in Hugo:

-   []{#CH07.htm#pgfId-1036680}A *theme*[]{#CH07.htm#marker-1026952}
    represents the templates for the entire website. It
    []{#CH07.htm#marker-1036679}contains multiple types.

-   []{#CH07.htm#pgfId-1036681}A *type* (or *content type*) represents a
    section of the website that can have multiple variations of content
    and multiple templates for generating the HTML for each of the
    variations. A type can have many layouts.

-   []{#CH07.htm#pgfId-1036682}A *layout* maps to a single template that
    can render a single design across multiple pages. Using
    []{#CH07.htm#marker-1036683}conditionals, we can make some content
    different, but there has to be one template that represents a
    layout.

-   []{#CH07.htm#pgfId-1036685}A *page kind*
    []{#CH07.htm#marker-1036684}[]{#CH07.htm#marker-1026957}in Hugo
    defines what variables are available to the template when it is
    rendered. A page kind is fixed and cannot be changed.
    []{#CH07.htm#marker-1036686}
:::

[]{#CH07.htm#pgfId-1014892}Applying cascade on a page kind

[]{#CH07.htm#pgfId-1014912 .calibre9}[]{#CH07.htm#marker-1014903
.calibre9}Our template only targets the single pages, all of a kind
[page]{.fm-code-in-text}. We can override the type and layout for these
pages by selecting them as the target in Hugo. The following listing
shows this for individual pages in the blog section. With these changes,
the blog and the community index pages should revert to normal, while
the rest of the pages in the blog section will have a sidebar.

[]{#CH07.htm#pgfId-1014972}Listing 7.6 Targeting cascading overrides
(content/blog/\_index.md)

``` programlisting
--- 
cascade: 
  - _target: 
      kind: page 
    layout: blog 
    type: modern 
--- 
```

[]{#CH07.htm#pgfId-1032362}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-02.hugoinaction.com](https://chapter-07-02.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-02](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-02){.url}]{.fm-hyperlink}.

### []{#CH07.htm#pgfId-1015056}[]{#CH07.htm#marker-1027258}[]{#CH07.htm#marker-1027257}[]{#CH07.htm#marker-1027255}7.1.5 Related pages via Hugo {#CH07.htm#sigil_toc_id_158 .fm-head1}

[]{#CH07.htm#pgfId-1015198 .calibre9}[]{#CH07.htm#marker-1015168
.calibre9}[]{#CH07.htm#marker-1015170
.calibre9}[]{#CH07.htm#marker-1015172 .calibre9}In the blog section, we
will like to introduce a link to more pages, relevant to the reader
within the website. *Related pages* is a Hugo feature that allows us to
get pages similar to the supplied page. The related pages feature
encapsulates the matching algorithm for pages to achieve this complex
operation, and it comes with an outstanding performance. The similarity
matching is done based on the metadata, and the front matter parameters
are controlled using []{#CH07.htm#marker-1015187 .calibre9}the
[related]{.fm-code-in-text} section in the website configuration. A file
named related.yaml
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/02](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/02){.url}]{.fm-hyperlink})
can be placed in the config folder to control how the pages are
selected. The following listing shows how to use parameters to find the
related pages for a given page.

[]{#CH07.htm#pgfId-1015277}Listing 7.7 Adding parameters to get related
pages (config/\_default/related.yaml)

``` programlisting
threshold: 10          ❶
  
includeNewer: true     ❷
  
indices: 
- name: tags           ❸
  weight: 10           ❹
- name: date           ❺
  weight: 1 
  pattern: 2006        ❻
```

[]{#CH07.htm#pgfId-1034880}[❶]{.fm-combinumeral} Requires a page to have
a minimum score of 10 points for Hugo to list it as a related page
(higher is better)

[]{#CH07.htm#pgfId-1034904}[❷]{.fm-combinumeral} Allows Hugo to use the
pages created after the supplied page to find related pages

[]{#CH07.htm#pgfId-1034921}[❸]{.fm-combinumeral} Matches the tags from
the front matter to create the score

[]{#CH07.htm#pgfId-1034938}[❹]{.fm-combinumeral} Each matching tag is 10
points.

[]{#CH07.htm#pgfId-1034955}[❺]{.fm-combinumeral} Gives scores to pages
matching the date pattern

[]{#CH07.htm#pgfId-1034972 .calibre9}[❻]{.fm-combinumeral} Pages in the
same calendar year get 1 point.

[]{#CH07.htm#pgfId-1015599 .calibre9}Note that when providing a
threshold to get a list of related pages, it needs to be a number
between 0 and 100. When searching for related pages, the
[includeNewer]{.fm-code-in-text} parameter can
[]{#CH07.htm#marker-1015610 .calibre9}cause the list of related pages to
change as we add more content.

[]{#CH07.htm#pgfId-1015642 .calibre9}The
[site.RegularPages.Related]{.fm-code-in-text} function takes
[]{#CH07.htm#marker-1015631 .calibre9}a page as an argument and provides
scores to all pages in the website related to that page and then sorts
those pages. Because Hugo provides no limits, this can turn into a vast
list, and therefore, it is a good idea to filter out the top few pages
to show to the end user (for example, with [first 5]{.fm-code-in-text}
in the code).

[]{#CH07.htm#pgfId-1015651 .calibre9}The card view of the page is the
same as what we used on the home page for recent blog posts (see figure
5.8). We can move it to a partial. To do that, we can use a cached
partial (as discussed in chapter 6) because the rendition of a page is
the same across all pages. The following listing uses
[site.RegularPages.Related]{.fm-code-in-text} to find related pages and
then uses a cached partial, card.html, to render those within the
current page.

[]{#CH07.htm#pgfId-1015717}Listing 7.8 Using a cached partial for the
blogs (layouts/modern/blog.html)

``` programlisting
{{with site.RegularPages.Related .}} 
<div id="related"> 
  <h2>Related Pages</h2> 
  <ul class="posts"> 
    {{range first 5 .}} 
     {{partialCached "card.html" . .Permalink}}    ❶
    {{end}} 
  </ul> 
</div> 
{{end}} 
```

[]{#CH07.htm#pgfId-1034807 .calibre9}[❶]{.fm-combinumeral} Caches by
.Permalink to reuse the card content in all the places we need the card
version of the page

[]{#CH07.htm#pgfId-1032389}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-03.hugoinaction.com](https://chapter-07-03.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-03](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-03){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH07.htm#pgfId-1036703 .calibre9}Exercise 7.2

[]{#CH07.htm#pgfId-1036704}Which property decides the contents and
availability of variables in Hugo?

1.  []{#CH07.htm#pgfId-1036705}Type

2.  []{#CH07.htm#pgfId-1036706}Layout

3.  []{#CH07.htm#pgfId-1036707}Kind

4.  []{#CH07.htm#pgfId-1036708}Content type

5.  []{#CH07.htm#pgfId-1036709}Template name

6.  []{#CH07.htm#pgfId-1036710}Permalink

7.  []{#CH07.htm#pgfId-1036716}Containing
    folder[]{#CH07.htm#marker-1036711}[]{#CH07.htm#marker-1036712}[]{#CH07.htm#marker-1036713}[]{#CH07.htm#marker-1036714}[]{#CH07.htm#marker-1036715}
:::

::: {#CH07.htm#calibre_pb_0 .calibre19}
:::

## []{#CH07.htm#pgfId-1016109}7.2 Updating the index pages by providing content and subsection lists {#CH07.htm#sigil_toc_id_159 .fm-head}

[]{#CH07.htm#pgfId-1016144 .calibre9}[]{#CH07.htm#marker-1016120
.calibre9}[]{#CH07.htm#marker-1016122
.calibre9}[]{#CH07.htm#marker-1016124
.calibre9}[]{#CH07.htm#marker-1016126
.calibre9}[]{#CH07.htm#marker-1016128 .calibre9}The index pages like
/blog need to have a different interface than the regular pages.
Rendering it []{#CH07.htm#marker-1016133 .calibre9}with the
[blog]{.fm-code-in-text} layout renders only the Markdown content, and
we lose the capability to navigate to the child pages in the section and
the subsections. These pages deserve separate templates.

### []{#CH07.htm#pgfId-1016153}7.2.1 Using the list template for index pages {#CH07.htm#sigil_toc_id_160 .fm-head1}

[]{#CH07.htm#pgfId-1016184 .calibre9}[]{#CH07.htm#marker-1016164
.calibre9}[]{#CH07.htm#marker-1016166
.calibre9}[]{#CH07.htm#marker-1016168
.calibre9}[]{#CH07.htm#marker-1016170
.calibre9}[]{#CH07.htm#marker-1016172
.calibre9}[]{#CH07.htm#marker-1016174 .calibre9}The index pages provide
access to the content within a section. Because we have multiple content
pages, the index pages have a list of pages. These are called *list
pages*. Hugo allows list pages to have a different template to render
content differently.

[]{#CH07.htm#pgfId-1016206 .calibre9}Let's create a file called
list.html in the modern subfolder in the layouts directory. In the index
page, we need to provide a list of pages in the section. If a page has
child pages, those are available in []{#CH07.htm#marker-1016195
.calibre9}the [.RegularPages]{.fm-code-in-text} variable for the page.
We can loop through these pages to provide a list of child pages for
navigation
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/03](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/03){.url}]{.fm-hyperlink}).
The following listing shows how to provide the list of pages for the
Acme Corporation website.

[]{#CH07.htm#pgfId-1016285}Listing 7.9 Getting a list of pages
(layouts/modern/list.html)

``` programlisting
{{define "bodyClass"}}page list{{end}} 
{{define "body"}} 
<main> 
  <h1> 
    {{.Title | humanize}}        ❶
  </h1> 
  <center>{{.Content}}</center> 
  {{with .RegularPages}}         ❷
     
    <ul class="posts">  
      {{ range .}} 
        {{partialCached "card.html" . .Permalink}} 
      {{ end }} 
    </ul> 
  {{end}} 
</main> 
{{end}} 
```

[]{#CH07.htm#pgfId-1034680}[❶]{.fm-combinumeral} Uses humanize to
convert the first letter to capital case

[]{#CH07.htm#pgfId-1034701 .calibre9}[❷]{.fm-combinumeral} Regular pages
are all pages of the kind page in a section that removes taxonomy,
section, term, and home page from this list.

[]{#CH07.htm#pgfId-1016566 .calibre9}In blog/\_index.md, we can return
[]{#CH07.htm#marker-1016545 .calibre9}the [modern]{.fm-code-in-text}
content type for all the pages where the kind is
[section]{.fm-code-in-text}. The following listing sets up these pages
as the list type for the Blog pages. The blog index page will then
render with the list of pages directly in that section with these
changes.

[]{#CH07.htm#pgfId-1016626}Listing 7.10 Setting the kind
[section]{.fm-code-in-listingcaption} as the list type
(content/blog/\_index.md)

``` programlisting
--- 
cascade: 
  - _target: 
      kind: section 
    type: modern 
    layout: list 
--- 
```

[]{#CH07.htm#pgfId-1032414}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-04.hugoinaction.com](https://chapter-07-04.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-04](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-04){.url}]{.fm-hyperlink}.

### []{#CH07.htm#pgfId-1016710}[]{#CH07.htm#marker-1030361}[]{#CH07.htm#marker-1030360}[]{#CH07.htm#marker-1030359}[]{#CH07.htm#marker-1030358}7.2.2 Creating multiple pages to render a long list {#CH07.htm#sigil_toc_id_161 .fm-head1}

[]{#CH07.htm#pgfId-1016858 .calibre9}[]{#CH07.htm#marker-1016824
.calibre9}[]{#CH07.htm#marker-1016826
.calibre9}[]{#CH07.htm#marker-1016828
.calibre9}[]{#CH07.htm#marker-1016830
.calibre9}[]{#CH07.htm#marker-1016832 .calibre9}We loop through all the
pages in a section to form the index page. One problem with this
approach is that all pages will render together on a single page even if
we have hundreds of posts. That would turn this into a heavy web page
and cause a slow down when loading. But if we restrict to a smaller
number of posts (like we did on the index page using the
[first]{.fm-code-in-text} function), all the posts will not be
navigable. We need a mechanism to provide multiple pages with all the
posts generated from one template (figure 7.5). Hugo answers this
problem with []{#CH07.htm#marker-1016847 .calibre9}the
[Paginator]{.fm-code-in-text} object[]{#CH07.htm#marker-1027448}.

![CH07_F05_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH07_F05_Jain.png){.calibre1}\

[]{#CH07.htm#pgfId-1036735}Figure 7.5 The list pages for the blog items
with pagination enabled. (Images by Michael Schwarzenberger,
gefrorene_wand, and Robert Wilkos on Pixabay.)

[]{#CH07.htm#pgfId-1016931 .calibre9}[Paginator]{.fm-code-in-text} is
[]{#CH07.htm#marker-1016900 .calibre9}a Hugo object used to create
multiple pages from a single function call. We can use
[.Paginator.Pages]{.fm-code-in-text} in the loop instead of
[.RegularPages]{.fm-code-in-text} as in the following listing and set
the pagination options in the website configuration file. The
[.Paginator]{.fm-code-in-text} object automatically
[]{#CH07.htm#marker-1016936 .calibre9}splits the list of pages into
multiple pages and supplies the right set of pages to render.

[]{#CH07.htm#pgfId-1016997}Listing 7.11 Splitting the index page
(layouts/modern/list.html)

``` programlisting
{{ with .Paginator.Pages }} 
<ul class="posts"> 
```

[]{#CH07.htm#pgfId-1017065 .calibre9}Because we have a small number of
posts, we need to change the number of posts per index page to trigger
pagination. The following listing changes the number of elements in a
page in config.yaml for the paginator to take effect.

[]{#CH07.htm#pgfId-1017122}Listing 7.12 Updating the pagination options
(config/\_default/config.yaml)

``` programlisting
Paginate: 3      ❶
```

[]{#CH07.htm#pgfId-1034620}[❶]{.fm-combinumeral} Number of posts that
Hugo should show on a page using the .Paginator object

::: fm-sidebar-block
[]{#CH07.htm#pgfId-1036767 .calibre9}Grouping pages

[]{#CH07.htm#pgfId-1036769}Hugo supports grouping pages into arbitrary
groups []{#CH07.htm#marker-1036768}using the
[.Pages.GroupBy]{.fm-code-in-text1} set of methods. For example, if we
want to show pages with headings based on the creation year, we could
use the [{{range .Pages.GroupByDate
\"2006\"}}]{.fm-code-in-text1}[]{#CH07.htm#marker-1027438} and then set
the year as the [.Key]{.fm-code-in-text1} and
[.Pages]{.fm-code-in-text1}[]{#CH07.htm#marker-1027447} as all pages
with that key. This sample code is not added to the chapter resources,
but you can add it to layouts/modern/list.html.

``` programlisting
{{ range .Pages.GroupByDate "2006" }} 
Posts in year {{ .Key }}: 
{{range .Pages}} 
  <a href="{{.Permalink}}"> {{.Title}}</a> 
{{end}} 
{{end}} 
```

[]{#CH07.htm#pgfId-1036776}The snippet groups all pages by year. Then it
loops through the various years, providing them in the
[.Key]{.fm-code-in-text1} field with the pages belonging to the year
[]{#CH07.htm#marker-1036777}in the [.Pages]{.fm-code-in-text1} field. We
can also use the [Paginator]{.fm-code-in-text1} object for
[]{#CH07.htm#marker-1036778}page groups.
:::

[]{#CH07.htm#pgfId-1017468 .calibre9}To []{#CH07.htm#marker-1017393
.calibre9}enable []{#CH07.htm#marker-1017399 .calibre9}page
[]{#CH07.htm#marker-1017405 .calibre9}numbers, we
[]{#CH07.htm#marker-1017411 .calibre9}can []{#CH07.htm#marker-1017417
.calibre9}use the properties from the [.Paginator]{.fm-code-in-text}
object (for example, [TotalPages]{.fm-code-in-text},
[Next]{.fm-code-in-text}, [First]{.fm-code-in-text},
[PageNumber]{.fm-code-in-text}, and so on). Hugo ships with an internal
template that we can also use for this task. The following listing
enables the internal template, which is mostly complete and rarely
overridden by themes.

[]{#CH07.htm#pgfId-1017528}Listing 7.13 Using the pagination template
(layouts/modern/list.html)

``` programlisting
{{ template "_internal/pagination.html" . }} 
```

[]{#CH07.htm#pgfId-1017563 .calibre9}While the default pagination
template is good, the terse pagination template (listing 7.14) builds
faster and, therefore, is recommended. A copy of the template is present
in the chapter resources just in case it gets modified in future
versions of Hugo
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/04](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/04){.url}]{.fm-hyperlink}).

[]{#CH07.htm#pgfId-1017638}Listing 7.14 Using the terse format
(layouts/modern/list.html)

``` programlisting
{{ template "_internal/pagination.html" (dict "page" . "format" "terse") }} 
```

[]{#CH07.htm#pgfId-1017692 .calibre9}We can now update the news index
page to use the [modern]{.fm-code-in-text} content type. The pagination
does not show up in the news section because it has just one page.

[]{#CH07.htm#pgfId-1032439}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-05.hugoinaction.com](https://chapter-07-05.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-05](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-05){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH07.htm#pgfId-1036817 .calibre9}Exercise 7.3

[]{#CH07.htm#pgfId-1036818}What allows us to split a single array across
multiple pages in Hugo?

1.  []{#CH07.htm#pgfId-1036819}List template

2.  []{#CH07.htm#pgfId-1036820}Bundle

3.  []{#CH07.htm#pgfId-1036821}Cascade

4.  []{#CH07.htm#pgfId-1036822}Content type

5.  []{#CH07.htm#pgfId-1036823}Paginator

6.  []{#CH07.htm#pgfId-1036829}Taxonomy[]{#CH07.htm#marker-1036824}[]{#CH07.htm#marker-1036825}[]{#CH07.htm#marker-1036826}[]{#CH07.htm#marker-1036827}[]{#CH07.htm#marker-1036828}
:::

### []{#CH07.htm#pgfId-1017883}7.2.3 Using a custom paginator {#CH07.htm#sigil_toc_id_162 .fm-head1}

[]{#CH07.htm#pgfId-1017922 .calibre9}[]{#CH07.htm#marker-1017894
.calibre9}[]{#CH07.htm#marker-1017896
.calibre9}[]{#CH07.htm#marker-1017898
.calibre9}[]{#CH07.htm#marker-1017900
.calibre9}[]{#CH07.htm#marker-1017902 .calibre9}The built-in
[.Paginator]{.fm-code-in-text} has a great set of defaults and, in most
cases, suffices for the index page. We can further customize that page
if needed. The community blog posts hidden away in a subsection on the
Acme Corporation website do not get too many hits. Therefore, the
management wants to uplevel them to the regular blog list. The default
pagination does not include all child pages but only direct descendants.
We need to use a custom paginator to use both the section and subsection
pages as in the following listing. For this, the
[.Paginate]{.fm-code-in-text} function takes []{#CH07.htm#marker-1017927
.calibre9}a list of pages.

[]{#CH07.htm#pgfId-1017988}Listing 7.15 Adding a custom paginator
(layouts/modern/list.html)

``` programlisting
{{$pages := .RegularPages}} 
{{range .Sections}} 
  {{$pages = append $pages .RegularPages}}   ❶
{{end}} 
{{$pages = sort $pages "Date" "desc" }}      ❷
{{ with (.Paginate $pages).Pages }} 
```

[]{#CH07.htm#pgfId-1034512}[❶]{.fm-combinumeral} Appends all child pages

[]{#CH07.htm#pgfId-1034533 .calibre9}[❷]{.fm-combinumeral} Sorts the
pages by creation date

[]{#CH07.htm#pgfId-1018211 .calibre9}This code reads the pages from the
one-level deeper subsections and appends them to
[]{#CH07.htm#marker-1030459 .calibre9}the [\$pages]{.fm-code-in-text}
variable. If we need navigation for the entire tree, we need to write a
recursive partial template. When we create a custom paginator, Hugo does
not generate the default paginator.

[]{#CH07.htm#pgfId-1018268}[Note]{.fm-callout-head} We can override the
page size specified in the configuration using the
[Paginate]{.fm-code-in-text1} property by
[]{#CH07.htm#marker-1018241}passing it as an additional argument
[]{#CH07.htm#marker-1018247}to the [.Paginate]{.fm-code-in-text1}
function. For example, [.Paginate \$posts 5]{.fm-code-in-text1} puts 5
posts in one page.
[]{#CH07.htm#marker-1018273}[]{#CH07.htm#marker-1018276}[]{#CH07.htm#marker-1018278}[]{#CH07.htm#marker-1018280}[]{#CH07.htm#marker-1018282}

### []{#CH07.htm#pgfId-1018288}[]{#CH07.htm#marker-1030357}7.2.4 Rendering a list of subsections {#CH07.htm#sigil_toc_id_163 .fm-head1}

[]{#CH07.htm#pgfId-1018323 .calibre9}[]{#CH07.htm#marker-1018299
.calibre9}[]{#CH07.htm#marker-1018301
.calibre9}[]{#CH07.htm#marker-1018303
.calibre9}[]{#CH07.htm#marker-1018305
.calibre9}[]{#CH07.htm#marker-1018307 .calibre9}The community blogs are
a subsection of the blog section of the website. Each index page has a
variable []{#CH07.htm#marker-1018312 .calibre9}called
[.Sections]{.fm-code-in-text}, which gets a list of the child sections
for index pages. Using this variable allows us to show the child pages
for each section with the current page. Without providing a list of
subsections on the list pages, we leave pages like these unreachable. In
this section, we will also add a list of subsections to the first of the
section pages (figure 7.6).

![CH07_F06_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH07_F06_Jain.png){.calibre1}\

[]{#CH07.htm#pgfId-1036848}Figure 7.6 The index page for the Acme
Corporation website using a list instead of an index template. (Images
by tookapic, ds_30, and Robert Wilkos on Pixabay.)

[]{#CH07.htm#pgfId-1018369 .calibre9}We can use
[]{#CH07.htm#marker-1018358 .calibre9}the [Paginator]{.fm-code-in-text}
object to detect if this is the first page
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/05](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/05){.url}]{.fm-hyperlink}).
If the user is on page 1, we can display the header for posts (versus
subsections) and the list of subsections. The following listing uses
[.Sections]{.fm-code-in-text} in the index page of a section to provide
the subsections in a Hugo template.

[]{#CH07.htm#pgfId-1018458}Listing 7.16 Providing the list of
subsections (layouts/modern/list.html)

``` programlisting
{{ $paginator := .Paginate $pages }}               ❶
{{if and (eq $paginator.PageNumber 1)              ❷
          (gt (len .Sections) 0) }}                ❸
<h2>Subsections</h2> 
  <ul class="subsections"> 
  {{range .Sections}} 
    <li class="subsection"> 
      <a href="{{.Permalink}}"> 
        <h3>{{( default 
        (.File.Path | path.Dir | path.Base )       ❹
          .Title ) | humanize}}</h3> 
        <p>Pages: {{len .Pages}}</p> 
        {{$words:= 0}}                             ❺
          {{range .Pages}}                         ❺
            {{$words = add $words .WordCount}}     ❺
          {{end}}                                  ❺
        <p>Words: {{$words}}</p> 
      </a> 
    </li> 
  {{end}} 
  </ul> 
<h2>Posts</h2> 
{{ end }} 
{{with $paginator.Pages}} 
... 
```

[]{#CH07.htm#pgfId-1034079}[❶]{.fm-combinumeral} Gets access to
Paginator. We can also use the default .Paginator object.

[]{#CH07.htm#pgfId-1034100}[❷]{.fm-combinumeral} Only shows subsections
on the first page

[]{#CH07.htm#pgfId-1034117}[❸]{.fm-combinumeral} Only shows titles if
subsections exist

[]{#CH07.htm#pgfId-1034134}[❹]{.fm-combinumeral} Uses the folder name to
provide a reasonable default

[]{#CH07.htm#pgfId-1034151 .calibre9}[❺]{.fm-combinumeral} Sums up the
total word count of all child pages

[]{#CH07.htm#pgfId-1032464}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-06.hugoinaction.com](https://chapter-07-06.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-06](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-06){.url}]{.fm-hyperlink}.

[]{#CH07.htm#pgfId-1019375 .calibre9}Something to note here is that if
we have multiple subsections, we will not be able to have multiple
paginators (one for pages and another for subsections). A page can have
only one paginator. This limitation is present because if we have two
paginations per page (for example, subsections and posts), we will need
to support independent navigation (for example, post page 2 with
subsection page 1, post page 3 with subsection page 1, post page 2 with
subsection page 2, post page 3 with subsection page 2, and so on).
Double pagination has exponential (*O*(*n^k^*)) combinations (to *n*
paginations and *k* pages each), which is slow and wasteful.

[]{#CH07.htm#pgfId-1032489}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-07.hugoinaction.com](https://chapter-07-07.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-07](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-07){.url}]{.fm-hyperlink}.

## []{#CH07.htm#pgfId-1019384}[]{#CH07.htm#marker-1028176}7.3 Providing the taxonomy pages {#CH07.htm#sigil_toc_id_164 .fm-head}

[]{#CH07.htm#pgfId-1019564 .calibre9}[]{#CH07.htm#marker-1019510
.calibre9}[]{#CH07.htm#marker-1019512 .calibre9}There are
[]{#CH07.htm#marker-1019517 .calibre9}two types of taxonomy pages: the
*taxonomy page* (used for each taxonomy term) and the *terms page* (used
for the taxonomy list). The terms pages provide a list of all the terms
in the taxonomy (for example, all the tags at /tags), while the taxonomy
pages list all pages with a specific []{#CH07.htm#marker-1019543
.calibre9}term (like all posts with the tag [square]{.fm-code-in-text}).
Before overriding any of the pages, let's see how they look in the
existing list template. Let's replace the type as a cascading property
in content/categories/\_index with [modern]{.fm-code-in-text} and see
how the pages look. The terms in a category turned into child pages for
the category, while the individual posts became the child pages of each
taxonomy page.

[]{#CH07.htm#pgfId-1019573 .calibre9}Hugo tries to ease the life of
theme authors by fitting various content into the two types of pages:
list page and single page. The index page, the terms page, and the
taxonomy page fall back to the list page if the corresponding pages are
not present (the single template is for individual pages). We can
override these pages by creating a taxonomy.html and terms.html layout
for the taxonomy page and a list of terms, respectively. Because the
list template does not read taxonomy terms, locations like /categories
will not show any content yet.

[]{#CH07.htm#pgfId-1019589}[Note]{.fm-callout-head} A Hugo website needs
only two templates: a list.html and a single.html to be complete.
Remember from chapter 4, there are two types of bundles in Hugo: branch
bundles and page bundles. The two templates, list.html and single .html,
correspond to these bundle types, respectively. All other templates are
specialized cases of the list template. If we remove index.html, Hugo
selects the list.html for the website's index page. Similarly, the
taxonomy pages use the list template to render unless we provide a
custom template.

[]{#CH07.htm#pgfId-1032516}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-08.hugoinaction.com](https://chapter-07-08.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-08](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-08){.url}]{.fm-hyperlink}.

### []{#CH07.htm#pgfId-1019595}7.3.1 The terms page {#CH07.htm#sigil_toc_id_165 .fm-head1}

[]{#CH07.htm#pgfId-1019700 .calibre9}[]{#CH07.htm#marker-1019694
.calibre9}[]{#CH07.htm#marker-1019696 .calibre9}The terms page shows a
list of terms in a taxonomy[]{#CH07.htm#marker-1030855}. We can define
pages for individual terms and have content associated with them to
provide summaries. It is rather rare that we need such a thing. We
rarely write the summary for each hashtag that we use in the website. A
better presentation would be to provide a list of tags (figure 7.7).

![CH07_F07_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH07_F07_Jain.png){.calibre1}\

[]{#CH07.htm#pgfId-1036883}Figure 7.7 The terms
[]{#CH07.htm#marker-1036882}page for the
[categories]{.fm-code-in-figurecaption} taxonomy type in the Acme
Corporation website. The terms page provides unique variables to access
all the terms and to use the pages in the terms if the list template
does not seem the best suited for the specific page.

[]{#CH07.htm#pgfId-1019731 .calibre9}In layouts/modern/terms.html, we
will provide the same minimal details that we used for the subsections
that we will be moving to a partial
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/06](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/06){.url}]{.fm-hyperlink}).
Note that because not all taxonomies have a file, we need to wrap the
[h3]{.fm-code-in-text} in [if]{.fm-code-in-text} checks in the partial.
The [.Data.Terms]{.fm-code-in-text} variable allows
[]{#CH07.htm#marker-1031408 .calibre9}access to all the terms in the
given taxonomy type. We have many options to get sorted versions of this
data. Alphabetically, the one we will use in the following listing is
the most popular.

[]{#CH07.htm#pgfId-1019856}Listing 7.17 Rendering a list of taxonomy
terms (layout/modern/terms.html)

``` programlisting
{{define "bodyClass"}}page terms{{end}} 
{{define "body"}} 
<main> 
  <h1> 
    {{.Title | humanize}}               ❶
  </h1> 
  <center>{{.Content}}</center> 
  {{with .Data.Terms.Alphabetical}}     ❷
    <ul class="section"> 
      {{ range .}} 
        {{partialCached "subsection" .Page .Page.Permalink}} 
      {{ end }} 
    </ul> 
  {{end}} 
</main> 
{{end}} 
```

[]{#CH07.htm#pgfId-1033958}[❶]{.fm-combinumeral} The title for the terms
page

[]{#CH07.htm#pgfId-1033979 .calibre9}[❷]{.fm-combinumeral} Loops through
the terms in this taxonomy in alphabetical order

[]{#CH07.htm#pgfId-1020146 .calibre9}Note that, in the previous listing,
the title for the terms page comes from the website configuration (for
example, categories) but can be overridden by creating a separate
[\_index.md]{.fm-code-in-text} for the taxonomy list (for example,
[content/categories/\_index.md]{.fm-code-in-text}). The next listing
provides the subsection partial that is used to render a subsection as a
card. Individual terms within a taxonomy list are rendered as a
subsection.

[]{#CH07.htm#pgfId-1020206}Listing 7.18 Partial to render an individual
term as a card in the taxonomy list

``` programlisting
<li class="subsection"> 
  <a href="{{.Permalink}}"> 
    {{if .Title}} 
    <h3> {{.Title | humanize}} </h3> 
    {{else if .File}} 
    <h3>{{.File.Path | path.Dir | path.Base | humanize}}</h3> 
    {{end}} 
    <p>Pages: {{len .Pages}}</p> 
    {{$words:= 0}} 
      {{range .Pages}} 
        {{$words = add $words .WordCount}} 
      {{end}} 
    <p>Words: {{$words}}</p> 
  </a> 
</li> 
```

[]{#CH07.htm#pgfId-1032548}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-09.hugoinaction.com](https://chapter-07-09.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-09](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-09){.url}]{.fm-hyperlink}.

### []{#CH07.htm#pgfId-1020599}[]{#CH07.htm#marker-1028177}7.3.2 The taxonomy pages {#CH07.htm#sigil_toc_id_166 .fm-head1}

[]{#CH07.htm#pgfId-1020704 .calibre9}[]{#CH07.htm#marker-1020705
.calibre9}Most developers do not need to override the taxonomy pages
because the list template works well for these pages. The list pages are
so good that a great start to customizing the taxonomy pages is to take
the list template and create a copy called taxonomy.html. Now we can
customize the taxonomy.html template. The section associated with the
taxonomy page is the terms page and has all the variables associated
with terms.html accessible. We can use this to change the title of the
taxonomy page as the following listing shows.

[]{#CH07.htm#pgfId-1020764}Listing 7.19 Changing the taxonomy title
(layouts/modern/taxonomy.html)

``` programlisting
<h1> 
{{$.CurrentSection.Data.Singular | humanize}}  
- {{.Title | humanize}} 
</h1> 
```

[]{#CH07.htm#pgfId-1032573}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-10.hugoinaction.com](https://chapter-07-10.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-10](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-10){.url}]{.fm-hyperlink}.

[]{#CH07.htm#pgfId-1020972}[Note]{.fm-callout-head} Remember, in chapter
4, we provided both the singular and plural text for a taxonomy. Hugo
allows access to both the strings for our use. It does not automatically
convert those because that cannot be reliably done across languages (not
programming but human languages) without a vast database. We can use any
of the strings as we see fit in the template.

::: fm-sidebar-block
[]{#CH07.htm#pgfId-1036915 .calibre9}Exercise 7.4

[]{#CH07.htm#pgfId-1036916}The two most important templates in Hugo's
template system that can be mapped to all other templates in a
meaningful way include (select two):

1.  []{#CH07.htm#pgfId-1036917}list.html

2.  []{#CH07.htm#pgfId-1036918}baseof.html

3.  []{#CH07.htm#pgfId-1036919}terms.html

4.  []{#CH07.htm#pgfId-1036920}taxonomy.html

5.  []{#CH07.htm#pgfId-1036921}single.html

6.  []{#CH07.htm#pgfId-1036922}index.html

7.  []{#CH07.htm#pgfId-1036923}hugo.html

8.  []{#CH07.htm#pgfId-1036927}partial.html[]{#CH07.htm#marker-1036924}[]{#CH07.htm#marker-1036925}[]{#CH07.htm#marker-1036926}
:::

## []{#CH07.htm#pgfId-1021082}7.4 Creating our own theme {#CH07.htm#sigil_toc_id_167 .fm-head}

[]{#CH07.htm#pgfId-1021092 .calibre9}[]{#CH07.htm#marker-1021093
.calibre9}Now that we have moved the significant parts of our theme onto
the modern layout, we don't need Eclectic anymore. We can safely remove
it from our codebase and move all the pages over to our custom theme.

### []{#CH07.htm#pgfId-1021101}7.4.1 Moving to a new theme {#CH07.htm#sigil_toc_id_168 .fm-head1}

[]{#CH07.htm#pgfId-1021127 .calibre9}[]{#CH07.htm#marker-1021112
.calibre9}To move to a custom theme, we need to make sure we do not use
any feature from Eclectic. We don't want broken pages that need more
work in our new theme. Note that we do not need to replicate all
Eclectic features. Just focus on what we need and then decide about
content that we can remove. For verification, we will add a cascading
type switch on the index page of the website to the
[]{#CH07.htm#marker-1021116 .calibre9}content type
[modern]{.fm-code-in-text} as the following listing demonstrates.

[]{#CH07.htm#pgfId-1021223}Listing 7.20 Moving
[]{#CH07.htm#marker-1021212}all pages to content type
[modern]{.fm-code-in-listingcaption} (content/\_index.md)

``` programlisting
cascade: 
  type: modern 
```

[]{#CH07.htm#pgfId-1021271}[Note]{.fm-callout-head} We can use the Hugo
configuration to provide the top-level cascade property as well. This
lets us keep this configuration outside of content.

[]{#CH07.htm#pgfId-1021306 .calibre9}With this change, we have applied
[]{#CH07.htm#marker-1021279 .calibre9}content type
[modern]{.fm-code-in-text} to all pages on the website. We can verify
that the website looks good without the theme. Note that there are
broken pages like data-driven.md because we did not add support for
using its front matter keys to create some elements. We do not need this
page in the Acme Corporation website, so we can remove the
themes/eclectic folder and []{#CH07.htm#marker-1021295 .calibre9}the
[theme: eclectic]{.fm-code-in-text} setting from
config/\_default/config.yaml.

[]{#CH07.htm#pgfId-1032600}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-11.hugoinaction.com](https://chapter-07-11.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-11](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-11){.url}]{.fm-hyperlink}.

[]{#CH07.htm#pgfId-1021315 .calibre9}The next step is moving the layout
to a different theme. The concept of a theme in Hugo is fluid. Websites
can pick and choose parts of their template content and move that to a
theme. To create a new theme, we need to create a subfolder in the
themes folder with the theme's name. We can choose to name the theme
whatever we want. For this book, we chose AcmeTheme as the theme name.
We can move the layouts folder to the themes/AcmeTheme folder to promote
the layouts as part of the theme. Next, we need to update the theme in
the configuration file, config/\_default/config.yaml. The following
listing updates the theme.

[]{#CH07.htm#pgfId-1021460}Listing 7.21 Setting the theme to AcmeTheme
(config/\_default/config.yaml)

``` programlisting
theme: AcmeTheme 
```

[]{#CH07.htm#pgfId-1032625}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-12.hugoinaction.com](https://chapter-07-12.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-12](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-12){.url}]{.fm-hyperlink}.

[]{#CH07.htm#pgfId-1021603 .calibre9}We should get the same website with
all pages built using []{#CH07.htm#marker-1021592 .calibre9}our
[modern]{.fm-code-in-text} type if we run the code in listing 7.21. We
can then get rid of the Eclectic theme completely by deleting it from
the themes folder. []{#CH07.htm#marker-1021608 .calibre9}

### []{#CH07.htm#pgfId-1021615}7.4.2 Aligning content with the theme {#CH07.htm#sigil_toc_id_169 .fm-head1}

[]{#CH07.htm#pgfId-1021632 .calibre9}[]{#CH07.htm#marker-1021626
.calibre9}[]{#CH07.htm#marker-1021628 .calibre9}Technically, we now have
a theme. A significant conceptual difference between a content type (or
any other parts of a theme that we have overridden so far) and the theme
is that we build a theme for reuse across multiple websites. But now, it
is tightly coupled with the content structure. If we had picked up the
project after chapter 4 (using code checkpoint chapter-04-11) and had
swapped its theme with the one we have right now, nothing would work. We
need to provide meaningful defaults and make it easy for someone to pick
up the theme with a barebones Hugo project. All added functionality can
be made accessible via the configuration, front matter, or hardcoded
file locations (like we have for background.svg), but the base
functionality should be readily available.

[]{#CH07.htm#pgfId-1021660 .calibre9}The first step is to remove the
requirement of the content type. To do this, we need to rename
themes/AcmeTheme/layouts/modern to themes/AcmeTheme/layouts/ \_default,
which makes our layout the default layout. The code we have should
continue to work even though it references the
[]{#CH07.htm#marker-1021639 .calibre9}content type
[modern]{.fm-code-in-text}. In the absence of a content type, Hugo falls
back to the default content type. We can now remove [type:
modern]{.fm-code-in-text} from our codebase completely.

[]{#CH07.htm#pgfId-1032657}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-13.hugoinaction.com](https://chapter-07-13.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-13](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-13){.url}]{.fm-hyperlink}.

[]{#CH07.htm#pgfId-1021779 .calibre9}We moved the Blog pages to a new
layout called *blog*. There is a discoverability problem with layouts in
Hugo. Unless someone knows about it, the likelihood of not finding a
layout is high. It makes much more sense for the blog to be a new
content type. Therefore, we will create a new folder called
themes/AcmeTheme/layouts/blog and move
themes/AcmeTheme/layouts/\_default/blog.html to themes/AcmeTheme/
layouts/blog/single.html. This way, all the pages in the blog folder are
automatically selected with the []{#CH07.htm#marker-1029158
.calibre9}content type [blog]{.fm-code-in-text} and use the single.html
template.

[]{#CH07.htm#pgfId-1021788 .calibre9}It is great to see the Blog pages
picking up this information automatically. If a particular layout is
absent, Hugo falls back to the default layout for that file. Because the
single layout exists in the blog folder, the entries in that folder
automatically pick this up. With this, we can remove the layout changes
in the front matter of the Blog pages.

[]{#CH07.htm#pgfId-1032682}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-14.hugoinaction.com](https://chapter-07-14.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-14](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-14){.url}]{.fm-hyperlink}.

[]{#CH07.htm#pgfId-1021905 .calibre9}When we created
[]{#CH07.htm#marker-1021884 .calibre9}the [blog]{.fm-code-in-text}
content type, the blog's single.html template automatically picked up
the base template (baseof.html) from the [\_default]{.fm-code-in-text}
type. Even the base templates can fall back to the default type if they
are not present in a specific content type. The default content type is
unique in Hugo because it can provide the base template to all content
types. Therefore, most default base templates are generic and
extensible. That we need entirely independent HTML pages on the same
website is sporadic. If we override the default content type in a theme,
it is challenging for the rest of the theme to function correctly.
[]{#CH07.htm#marker-1021910 .calibre9}[]{#CH07.htm#marker-1021913
.calibre9}

### []{#CH07.htm#pgfId-1021919}7.4.3 Providing theme assets {#CH07.htm#sigil_toc_id_170 .fm-head1}

[]{#CH07.htm#pgfId-1021942 .calibre9}[]{#CH07.htm#marker-1031450
.calibre9}[]{#CH07.htm#marker-1031451 .calibre9}The templates defined in
the theme refer to multiple assets like CSS files and images in the
assets folder. We need to move these to the
[themes/AcmeTheme]{.fm-code-in-text} folder to make the theme
independent. Although moving the CSS files is not a big issue, the logo
and the products.csv file information is specific to the Acme
Corporation website and does not belong to the theme. We can place the
empty products.csv and the placeholder images in the theme folder to
allow the website to compile and execute
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/07](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/07){.url}]{.fm-hyperlink}).
Once we move the CSS file and provide the theme assets, the theme should
potentially stand on its own.

[]{#CH07.htm#pgfId-1032705}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-15.hugoinaction.com](https://chapter-07-15.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-15](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-15){.url}]{.fm-hyperlink}.

[]{#CH07.htm#pgfId-1022068}[Note]{.fm-callout-head} You will need to
change the theme name to Acme in the configuration to pick up this
theme.

[]{#CH07.htm#pgfId-1031471 .calibre9}To check this, we can move the
source code (content and config folders) from chapter 4, empty the
assets and archetypes folders, and then test.

[]{#CH07.htm#pgfId-1032728}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-16.hugoinaction.com, and source code:
https://github.com/hugoinaction/hugoinaction/tree/chapter-07-16](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-16){.url}.
(reverted in chapter-07-17)]{.fm-hyperlink}

[]{#CH07.htm#pgfId-1022074 .calibre9}The theme we have just created is
ready to be used outside of our website. We can now host it
independently in its own separate repository or provide it as a folder
to be integrated by other websites. We can also submit this theme to the
Hugo theme gallery.

[]{#CH07.htm#pgfId-1022179}[Note]{.fm-callout-head} Not all Hugo
websites create independent themes. If you are building a theme just for
your website, keeping it in this state in the themes folder may be the
best approach.

[]{#CH07.htm#pgfId-1022185 .calibre9}Having a theme embedded in the
website provides maximum ease of use as you only have to manage one code
repository; you only need to cater to the content of a single website
rather than a general-purpose use case for multiple. You then get all
the flexibility of a theme without the overhead of multiple repositories
for your code.

[]{#CH07.htm#pgfId-1022191 .calibre9}All themes do not need to be shared
publicly. You can have multiple websites with the same shared theme
[]{#CH07.htm#marker-1030937 .calibre9}[]{#CH07.htm#marker-1030938
.calibre9}[]{#CH07.htm#marker-1030939 .calibre9}used within an
organization. The sales team can have their independent website with a
content folder, while the documentation team can set up a separate
website as well. They all can share a custom theme managed by the
engineering team.

![CH07_F08_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH07_F08_Jain.png){.calibre1}\

[]{#CH07.htm#pgfId-1036946}Figure 7.8 Remove the data: reusable themes
make some jobs like sharing only a piece of the website simple. Alex
persuades the marketing team to try this lightweight approach.

## []{#CH07.htm#pgfId-1022197}7.5 Powering up with content views {#CH07.htm#sigil_toc_id_171 .fm-head}

[]{#CH07.htm#pgfId-1022244 .calibre9}[]{#CH07.htm#marker-1031586
.calibre9}[]{#CH07.htm#marker-1031587 .calibre9}With a theme, we get
access to multiple content types. We already saw how content types can
automatically map to section names. A content type also can have content
views. *Content views* are []{#CH07.htm#marker-1031589 .calibre9}partial
layouts rendered inline in another layout. Creating these is similar to
creating a layout. To understand the problem content views solve,
navigate to the public category page on the Acme Corporation website
(http:[//]{.fm-hyperlink}localhost:1313/ categories/public/). It
contains three pages: Circle, Curve, and Shaper. Although Circle and
Curve come from the website's blog section, the Shaper page comes from
the news section. The news section looks different from the blog section
of the website and has a separate template. But the taxonomy template is
shared between these sections.

[]{#CH07.htm#pgfId-1022273 .calibre9}Content views are subtemplates that
we can render from inside another template. We need to move the card
view, themes/AcmeTheme/layouts/partials/card.html, to the default entry
for the card template, themes/AcmeTheme/layouts/\_default/card.html.
Listing 7.22 shows how we can call this template in all referring pages
via []{#CH07.htm#marker-1028731 .calibre9}the [Page
.Render]{.fm-code-in-text} function. Note that in the following listing,
you will need to make this change to
theme/AcmeTheme/layouts/\_default/taxonomy.html,
theme/AcmeTheme/layouts/ \_default/list.html,
theme/AcmeTheme/layouts/blog/single.html, and theme/Acme
Theme/layouts/\_default/index.html.

[]{#CH07.htm#pgfId-1022333}Listing 7.22 Rendering the card view via a
content view instead of a partial

``` programlisting
{{.Render "card"}} 
```

[]{#CH07.htm#pgfId-1022368 .calibre9}Now we can create card.html for the
news section, which is different from a regular card and can uniquely
identify that section (figure 7.9). Note that we will create a different
content type for the News pages to map to the news section
automatically.

![CH07_F09_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH07_F09_Jain.png){.calibre1}\

[]{#CH07.htm#pgfId-1036981}Figure 7.9 The
[public]{.fm-code-in-figurecaption} category
page[]{#CH07.htm#marker-1030983} with []{#CH07.htm#marker-1036980}a
different card view for the news section, which contains a badge to
highlight it. (Images by PublicDomainPictures, Free-Photos, and tookapic
on Pixabay.)

[]{#CH07.htm#pgfId-1030964 .calibre9}We can decide not to override any
other layouts and leave those to use the default layout
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/08](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-resources/08){.url}]{.fm-hyperlink}).
The following listing adds a badge to news posts in the news specific
card.html. With these changes, the news section should be easily
identifiable everywhere as a card.

[]{#CH07.htm#pgfId-1022443}Listing 7.23 Adding a badge to news posts

``` programlisting
<li class="post news-item">    ❶
  <div class="badge">          ❷
    News                       ❷
  </div>                       ❷
  ... 
</li> 
```

[]{#CH07.htm#pgfId-1033775}[❶]{.fm-combinumeral} Adds the news-item
class

[]{#CH07.htm#pgfId-1033780 .calibre9}[❷]{.fm-combinumeral} Adds a badge
for the news summaries

[]{#CH07.htm#pgfId-1032758}[Code checkpoint]{.fm-callout-head}
[[https://chapter-07-18.hugoinaction.com](https://chapter-07-18.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-07-18](https://github.com/hugoinaction/hugoinaction/tree/chapter-07-18){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH07.htm#pgfId-1037013 .calibre9}Exercise 7.5

[]{#CH07.htm#pgfId-1037014}Which of the following are features of
content views? (Select all that apply.)

1.  []{#CH07.htm#pgfId-1037015}Content views are not cached and
    generated each time the view is used.

2.  []{#CH07.htm#pgfId-1037016}Content views allow arbitrary arguments
    to be passed to the content.

3.  []{#CH07.htm#pgfId-1037017}Content views are rendered in the same
    context as the parent layout.

4.  []{#CH07.htm#pgfId-1037018}Content views can be rendered from within
    another layout.

5.  []{#CH07.htm#pgfId-1037019}Content views can be overridden based on
    the content type.

6.  []{#CH07.htm#pgfId-1037020}Content views can be overridden based on
    the layout.
:::

[]{#CH07.htm#pgfId-1022852 .calibre9}Creating a theme is a significant
accomplishment in a developer's journey into Hugo. A theme author
masters the Go template language and understands the critical principles
of laying out content and the internal features that ensure outstanding
performance in a Hugo-based website. Theme authors can map any content
to a website and effectively use all the power and flexibility provided
by Hugo. []{#CH07.htm#marker-1022854
.calibre9}[]{#CH07.htm#marker-1022857 .calibre9}

## []{#CH07.htm#pgfId-1022863}Summary {#CH07.htm#sigil_toc_id_172 .fm-head}

-   []{#CH07.htm#pgfId-1022873 .calibre9}We can use layouts to order
    different content within the same content type.

-   []{#CH07.htm#pgfId-1022887 .calibre9}The [cascade]{.fm-code-in-text}
    option in the front matter allows us to share front matter
    properties with all pages in a branch bundle.

-   []{#CH07.htm#pgfId-1022906 .calibre9}The templates single.html and
    list.html are essential in completing a Hugo theme. They correspond
    to leaf bundles (or individual pages) and branch bundles,
    respectively.

-   []{#CH07.htm#pgfId-1022916 .calibre9}The index.html, taxonomy.html,
    and terms.html files default to list.html if any of those files are
    not present.

-   []{#CH07.htm#pgfId-1022926 .calibre9}The files taxonomy.html and
    terms.html provide fine-grain control over the website taxonomy.

-   []{#CH07.htm#pgfId-1022936 .calibre9}A Hugo theme is a collection of
    templates, shortcodes, assets, and other resources to render a
    website when provided in the content folder.

-   []{#CH07.htm#pgfId-1022946 .calibre9}As template authors, we should
    aim to create a template that can render with an arbitrary content
    folder. All features should be opt-in and provide sensible defaults.

-   []{#CH07.htm#pgfId-1022956 .calibre9}Content views are subtemplates
    that render in another template. They act as more flexible
    replacements for partials, which override content types.

[]{#CH08.htm}

# []{#CH08.htm#pgfId-1017397}8 Hugo Modules: Plugins for everybody {#CH08.htm#heading_id_2 .tochead}

[]{#CH08.htm#pgfId-1019302}This chapter covers

-   []{#CH08.htm#pgfId-1019339 .calibre9}Using Hugo Modules for
    distributing and using themes
-   []{#CH08.htm#pgfId-1019340 .calibre9}Adding dependencies in a theme
    or a website with Hugo Modules
-   []{#CH08.htm#pgfId-1019341 .calibre9}Embedding template plugins to
    get reusable Go template code
-   []{#CH08.htm#pgfId-1019323 .calibre9}Including plugins that provide
    configurable content

[]{#CH08.htm#pgfId-1011804 .calibre9}In this chapter, we will set up and
utilize Hugo Modules---one of the most powerful, underrated, and
underutilized features of Hugo. We have worked in isolation so far and
have an independent website with no external dependency. That's an
incredible feat to have in modern-day software. Lots of poorly
maintained dependencies make managing software difficult. That does not
mean that we should always build our website as a monolith. There are
immense advantages of splitting our site into modules that can work
independently. We can then reuse the theme across multiple sites.
Shortcodes, debugging utilities, and certain types of content can have a
life of their own.

[]{#CH08.htm#pgfId-1011810 .calibre9}The desire to have a low number of
dependencies should not be a goal in itself. Some dependencies provide
so much that it would be foolish not to use them. If we write the same
code that we would have gotten by adding a dependency, it might be a
waste of effort. Our custom utilities might fall short both in features
and maintainability rather than well-architected and maintained external
libraries. There is a tradeoff between doing it yourself versus
importing third-party code. Suppose we want to split our code into
modules for reuse across multiple websites or have dependencies external
to our custom code that's created and managed by someone else. In that
case, Hugo provides the means to manage this effectively via Hugo
Modules.

[]{#CH08.htm#pgfId-1011816 .calibre9}Hugo Modules have been integrated
tightly into Hugo, and all Hugo features are tuned to work better with
Hugo Modules. With Hugo Modules, we can manage the versions of our theme
better. We can move our shortcodes out for use across multiple websites,
or we can pick up some built by the community to drop into our website.
We may need some content across numerous websites, but copy and pasting
across projects becomes a nightmare when the need to update it arises.
Although, logically, Hugo creates one folder with everything needed to
set up a website that is provided in the template code, physically, the
files could be re-sent across various repositories that Hugo assembles
for us to use (see figure 8.1).

![CH08_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH08_F01_Jain.png){.calibre1}\

[]{#CH08.htm#pgfId-1025450}Figure 8.1 In this chapter, we separate our
code into modules used by Hugo to create a logical structure with
co-located files for our template code to use. In contrast, physically,
this code may be present in independent repositories.

[]{#CH08.htm#pgfId-1011832 .calibre9}In this chapter, we will utilize
Hugo Modules to import themes to our website. *Hugo Modules* are
[]{#CH08.htm#marker-1021708 .calibre9}the parts of a Hugo website
(including any of the folders) that are available as a reusable
component. We will move AcmeTheme into a module that we can reuse across
multiple websites. We will add the ability to load CSS and JS files
dynamically through sources not set up as Hugo Modules. We will also
include debugging utilities as an external Hugo Module and showcase how
we can externalize website content by moving our Terms of Use and
Privacy Policy pages to an external module that can reuse the base
content of these pages across multiple websites. Figure 8.2 provides the
structure of our website when we reach the end of this chapter.

![CH08_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH08_F02_Jain.png){.calibre1}\

[]{#CH08.htm#pgfId-1025484}Figure 8.2 Modular structure of the Acme
Corporation website that we will set up in this chapter. The Acme
Corporation website will include multiple modules:
AcmeTheme/Eclectic/Universal as themes; AcmeCommon for shortcodes and
partials shared between the AcmeTheme and the Acme Corporation website;
AcmeSupport for assets that we need to progress through in this book;
hugo-debug-utils with the debug bar; and the TermsAndPrivacy module,
where the content files shared between multiple websites are present.
Note that this figure does not include all files, just a representative
list to understand the actual filesystem used when including the modules
for rendering.

## []{#CH08.htm#pgfId-1011877}[]{#CH08.htm#marker-1021758}8.1 Setting up Hugo Modules {#CH08.htm#sigil_toc_id_173 .fm-head}

[]{#CH08.htm#pgfId-1011901 .calibre9}[]{#CH08.htm#marker-1011902
.calibre9}Hugo Modules have a dependency on Go. You can install Go using
your package manager or using the instructions at
[[https://golang.org/doc/install](https://golang.org/doc/install){.url}]{.fm-hyperlink}.
Remember that Go needs to be present in the system path to be usable by
Hugo.

[]{#CH08.htm#pgfId-1011924 .calibre9}To verify if Go is available, run
[]{#CH08.htm#marker-1011913 .calibre9}the command [go
version]{.fm-code-in-text}, which outputs the version of Go in the
console. Ensure that the version of Go is greater than 1.12. Once we
have a supported version of Go installed, we can forget about Go and get
back to Hugo. This installation is all that we will deal with in the Go
language for the entire book.

[]{#CH08.htm#pgfId-1011943}[Note]{.fm-callout-head} Having Go installed
is essential to complete the exercises in the rest of the book. We will
use Hugo Modules in the second half of the book.

[]{#CH08.htm#pgfId-1011949 .calibre9}The next step is to initialize Hugo
Modules. Each Hugo module needs a module name. This name identifies the
module. The module name is used only in the context of Hugo Modules. To
initialize a module named AcmeCorporationWebsite, on the command line,
run the command in the following listing.

[]{#CH08.htm#pgfId-1012006}Listing 8.1 Hugo command to create a new
module

``` programlisting
hugo mod init AcmeCorporationWebsite 
```

[]{#CH08.htm#pgfId-1012060 .calibre9}This command creates a file called
go.mod in the root folder. Each module has a go.mod file. This file is
the entry point for Hugo Modules. It identifies the current module and
stores the information about the other modules that this module links
to. This file is similar in concept to Gemfile in Ruby, package.json in
Node.js, and requirements.txt in Python's pip. It lists the dependencies
and their versions that we can use during installation and update. We
can use this file to scan the list of direct dependencies. We should
check this file into version control, and in most cases in the Hugo
world, we do not modify it manually.

::: fm-sidebar-block
[]{#CH08.htm#pgfId-1025523 .calibre9}Exercise 8.1

[]{#CH08.htm#pgfId-1025524}True or False: If we are developing a single
website, there are no advantages to Hugo Modules.
:::

::: fm-sidebar-block
[]{#CH08.htm#pgfId-1025541 .calibre9}Why go.mod when we have config.yaml

[]{#CH08.htm#pgfId-1025542}Hugo Modules is a unique feature in Hugo in
many respects. Go needs to be installed, it has an extra initialization
command, and a separate go.mod file. This separation is necessary
because Hugo Modules is a lightweight wrapper over Go modules. If
instead of [hugo mod init]{.fm-code-in-text1} you called [go mod
init]{.fm-code-in-text1}, you would find that it behaves the same. Hugo
chose the Go modules as the basis for its module system for a variety of
reasons:

-   []{#CH08.htm#pgfId-1025560}*It is a high performance, well
    maintained, highly flexible feature with sensible defaults*. You can
    link to anything from an individual file in a server repository to a
    folder from another module.

-   []{#CH08.htm#pgfId-1025561}*Hugo is built using Go*. This does not
    add a new maintainability risk (remember from section 2.5.2, every
    dependency can require additional maintenance) to the websites using
    Hugo.

-   []{#CH08.htm#pgfId-1025562}*Writing and maintaining a module system
    that involves managing dependencies downloaded from the internet is
    hard*. Apart from performance, security is a big concern. By
    wrapping Go modules, the Hugo team gets a powerful feature at a low
    cost.

-   []{#CH08.htm#pgfId-1025563}*The standard go.mod file has its
    advantages*. Auditors inspecting Hugo websites need one file, and
    vulnerability detection systems are much more likely to support the
    Go language than the Hugo web development framework.

[]{#CH08.htm#pgfId-1025564}Hugo's team has built some clever
optimizations and tight integration into Hugo Modules. Even if you are a
Go developer familiar with Go modules, Hugo Modules provides many great
surprises. Hugo has personalized the Go modules by automatically filling
go.mod with custom mappings for folder locations and with the ability to
pick and choose plugin types. For Hugo developers, go.mod is a
machine-generated file in most cases. Like the resources folder, go.mod
does not need to be touched manually; just check it in with the source
code. Hugo can figure out the dependencies using the configuration and
create go.mod files automatically. []{#CH08.htm#marker-1025565}
:::

## []{#CH08.htm#pgfId-1012192}8.2 Themes as Hugo Modules {#CH08.htm#sigil_toc_id_174 .fm-head}

[]{#CH08.htm#pgfId-1012209 .calibre9}[]{#CH08.htm#marker-1012203
.calibre9}[]{#CH08.htm#marker-1012205 .calibre9}Themes are the most
common shared element across multiple websites. They are the most common
use case for Hugo Modules. In section 2.2, where we introduced the
concept of themes, we discussed three ways to integrate themes into a
website: download and copy (which we have used so far), Git submodules
(not recommended anymore), and Hugo Modules (which we did not use
because download and copy is easier for beginners). We used download and
copy because it is easy to get started with, but it has some downsides:

-   []{#CH08.htm#pgfId-1012214 .calibre9}*Updates*---Distributing a
    theme's updates is painful. Everyone keeps a copy of the theme.
    Updating is a manual operation as you need to download a new
    version. There is no intuitive way to know of a new release, and
    developers are free to modify their local copies, making updates
    even harder.

-   []{#CH08.htm#pgfId-1012235 .calibre9}*Dependencies*---Although
    []{#CH08.htm#marker-1012248 .calibre9}we hardcoded all our CSS and
    JavaScript files in the AcmeTheme module so far, it is rare to have
    an independent website. Chances are high that a theme might depend
    on a JavaScript or CSS library maintained elsewhere. If that library
    is downloaded and copied into the theme, then updating is also
    manual.

-   []{#CH08.htm#pgfId-1012258 .calibre9}*Size and sharing*---Keeping
    []{#CH08.htm#marker-1012271 .calibre9}a copy of the theme bloats the
    size of our code repository. Sharing an enormous repository can be
    clunky. The code present in the theme can also botch a reporting
    build. Automated tools that modify the codebase can mess up with
    bundled themes, causing confusion and a waste of resources.

[]{#CH08.htm#pgfId-1012283 .calibre9}These problems are primarily caused
by copying the theme's source code rather than linking to it. Linking is
a much cleaner solution than downloading and copying. If we need a
backup of a repository, a linked fork (copy of a Git repository that can
have links to the original code) or an external archive is a much better
idea than a bundled copy of the resource. That way, we make it easy to
get dependencies and also to share the theme across websites.
[]{#CH08.htm#marker-1012285 .calibre9}[]{#CH08.htm#marker-1012288
.calibre9}

## []{#CH08.htm#pgfId-1012294}8.3 Importing themes {#CH08.htm#sigil_toc_id_175 .fm-head}

[]{#CH08.htm#pgfId-1012319 .calibre9}[]{#CH08.htm#marker-1012305
.calibre9}[]{#CH08.htm#marker-1012307
.calibre9}[]{#CH08.htm#marker-1012309 .calibre9}Once we have enabled
Hugo Modules, we can come back to config.yaml to manage it. If the theme
is available as a Git repository on GitHub (as is the case with most
Hugo themes), Hugo can do the job of fetching and setting it up for us
automatically. We will be testing the waters by first importing Eclectic
via Hugo Modules and then move to AcmeTheme after that. Unlike
downloading the theme manually from GitHub and placing it in the themes
folder, we can put [github.com/hugoinaction/Eclectic]{.fm-code-in-text}
in the theme configuration setting as listing 8.2 shows, and Hugo will
do the downloading for us.

[]{#CH08.htm#pgfId-1012338}[Note]{.fm-callout-head} If you are working
offline, read along to section 8.7, where we get back to using the theme
locally, discussing how we can achieve that for other dependencies.

[]{#CH08.htm#pgfId-1012395}Listing 8.2 Adding a theme via Hugo Modules

``` programlisting
theme: github.com/hugoinaction/Eclectic  
```

[]{#CH08.htm#pgfId-1012453 .calibre9}That's it. The next time we run
[hugo server]{.fm-code-in-text} or push to GitHub pages or to Netlify,
Hugo automatically fetches the Eclectic theme from the internet and uses
that to render our website. When we run [hugo server]{.fm-code-in-text}
after linking to a GitHub repository, many things happen (see figure
8.3):

-   []{#CH08.htm#pgfId-1012462 .calibre9}In the background, Hugo figures
    out and installs the correct version of the dependency. Hugo also
    caches this locally for subsequent runs.

-   []{#CH08.htm#pgfId-1012483 .calibre9}The go.mod file is updated with
    the direct list of dependencies on the website.

-   []{#CH08.htm#pgfId-1012497 .calibre9}A new file called go.sum is
    created, ensuring that Hugo will fetch the correct version of the
    dependency specified in the go.mod file. Like Gemfile.lock in Ruby
    and package-lock.json in the Node.js world, this file ensures
    consistency and reproducibility of the build by listing exact
    versions of all direct and indirect dependencies.

![CH08_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH08_F03_Jain.png){.calibre1}\

[]{#CH08.htm#pgfId-1025586}Figure 8.3 Activities happening at launch
when we load the Hugo development server with a Hugo Modules-based theme

[]{#CH08.htm#pgfId-1012524 .calibre9}You can push the AcmeTheme folder
to a new GitHub repository and use that as the location to load the
theme. You do not need to initialize the AcmeTheme repository as a new
Hugo module or add any code to use it. If you specify a dependency as a
theme in the configuration file, config/\_default/config.yaml, there is
nothing else that Hugo needs. A theme can have a go.mod file to specify
its dependencies, but it is not required. Hugo will honor it if such a
file exists. Hugo will read the theme if no such file exists.

[]{#CH08.htm#pgfId-1023216}[Code checkpoint]{.fm-callout-head}
[[https://chapter-08-01.hugoinaction.com](https://chapter-08-01.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-01](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-01){.url}]{.fm-hyperlink}.

## []{#CH08.htm#pgfId-1012544}8.4 Enabling themes other than Eclectic {#CH08.htm#sigil_toc_id_176 .fm-head}

[]{#CH08.htm#pgfId-1012660 .calibre9}[]{#CH08.htm#marker-1012652
.calibre9}[]{#CH08.htm#marker-1012654
.calibre9}[]{#CH08.htm#marker-1012656 .calibre9}Adding a theme to a Hugo
website is as simple as replacing the URL in config.yaml, but this may
not always work. Theme switching can fail for a couple of reasons:

-   []{#CH08.htm#pgfId-1012665 .calibre9}Some themes require unique
    settings in the configuration to be usable.

-   []{#CH08.htm#pgfId-1012679 .calibre9}The website may be dependent on
    shortcodes that are not available in a different theme. Hugo will
    fail to compile in case of a missing shortcode.

[]{#CH08.htm#pgfId-1012689 .calibre9}Whereas a theme causes the first
reason, the content creators can unknowingly cause the second. When we
moved the layouts folder to AcmeTheme, we also moved the shortcodes that
our website depends on. Although those shortcodes were available in
Eclectic, they are not present in other themes like Universal.
Therefore, if you take the source code at checkpoint 08-1 and try to
replace the theme with any other that you find in the Hugo themes
showcase, it will fail to build.

[]{#CH08.htm#pgfId-1012695 .calibre9}To keep the content independent of
the theme, we need to have a copy of all the shortcodes used in the
website, bundled in its codebase or loaded module (we will do this in
section 8.10). To allow other themes, we will keep a copy of the partial
and the shortcode folders in the core website. Copy the two folders from
the themes/AcmeTheme/layouts folder to the top-level layouts folder.
Then you can use a different theme (like Universal) with the website by
providing the GitHub path of the theme (for example,
[[github.com/hugoinaction/Universal](https://github.com/hugoinaction/Universal){.url}]{.fm-hyperlink})
in the theme section of the configuration. Note that because we got rid
of the home page and have not configured the home page in Universal, the
home page will be mostly blank at this point.

[]{#CH08.htm#pgfId-1023247}[Code checkpoint]{.fm-callout-head}
[[https://chapter-08-02.hugoinaction.com](https://chapter-08-02.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH08.htm#marker-1023718}[]{#CH08.htm#marker-1023719}[]{#CH08.htm#marker-1023720}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-02](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-02){.url}]{.fm-hyperlink}.

## []{#CH08.htm#pgfId-1012701}8.5 Getting a specific version of a theme {#CH08.htm#sigil_toc_id_177 .fm-head}

[]{#CH08.htm#pgfId-1012823 .calibre9}[]{#CH08.htm#marker-1012809
.calibre9}[]{#CH08.htm#marker-1012811
.calibre9}[]{#CH08.htm#marker-1012813 .calibre9}Hugo Modules has support
for versions via Git tags. This allows us to link to a different version
of our dependencies rather than what is the latest mainline. In many
projects, *mainline* is under active development and unstable when a
release version is marked separately. We will switch back to AcmeTheme
with Hugo Modules. A copy of the AcmeTheme is on GitHub in the
github.com/hugoinaction/AcmeTheme folder, tagged with version 0.8.0 for
its contents through section 8.5 (this section) of the book.

[]{#CH08.htm#pgfId-1012842}[Note]{.fm-callout-head} Do not use the main
branch of the Acme repository on GitHub because it points to the
AcmeTheme module at the end of this book.

[]{#CH08.htm#pgfId-1012848 .calibre9}To get a specific version of a
theme, we need to specify the theme as we did before, but instead of
telling Hugo to automatically fetch the latest version via [hugo
server]{.fm-code-in-text}, we will manually tell Hugo the version to
fetch. Let's start by changing our theme to the hosted AcmeTheme
repository in our configuration as the following listing shows.

[]{#CH08.htm#pgfId-1012914}Listing 8.3 Switching to the AcmeTheme
repository (config/\_default/config.yaml)

``` programlisting
theme: github.com/hugoinaction/AcmeTheme 
```

[]{#CH08.htm#pgfId-1012966}[Note]{.fm-callout-head} The live server
should not be running when updating to AcmeTheme, and we should not call
[hugo server]{.fm-code-in-text1} at this point. It will lead to the
installation of the main branch of AcmeTheme.

[]{#CH08.htm#pgfId-1013039 .calibre9}Next, we need to install the theme
from the [v0.8.0]{.fm-code-in-text} tag. There are two ways to do this:
adding an entry to the go.mod file manually or running the installation
command from the command line. The [hugo mod]{.fm-code-in-text}
subcommands are []{#CH08.htm#marker-1013002 .calibre9}associated with
Hugo Modules, which provide access to the management features related to
Hugo Modules. We use [hugo mod init]{.fm-code-in-text} to define a new
module that makes up our website. The [hugo mod get]{.fm-code-in-text}
command fetches []{#CH08.htm#marker-1013028 .calibre9}the module-based
dependencies manually. The [-u]{.fm-code-in-text} command-line flag
overwrites []{#CH08.htm#marker-1013044 .calibre9}the existing entry in
go.mod if present. The following listing adds an entry to the go.mod
file for the v0.8.0 version.

[]{#CH08.htm#pgfId-1013105}Listing 8.4 Adding a specific version of
AcmeTheme

``` programlisting
hugo mod get -u github.com/hugoinaction/AcmeTheme@v0.8.0 
```

[]{#CH08.htm#pgfId-1013165 .calibre9}With this command, you should see
require [github.com/hugoinaction/AcmeTheme v0.8.0]{.fm-code-in-text}
[//]{.fm-code-in-text} [indirect]{.fm-code-in-text} in your go.mod file.
The checksum file, go.sum, should also include "v0.8.0" as the installed
version of the AcmeTheme dependency.

[]{#CH08.htm#pgfId-1013171 .calibre9}We can continue to use our website
with AcmeTheme linked as a module in Hugo. We have completely moved off
Eclectic with this change and have taken over complete control of the
Acme Corporation website with every piece of code in our possession. We
will not be using Eclectic or Universal in the rest of this book. We can
remove the entries that were specific to these themes in the
configuration (except for the color and the copyright in
config/\_default/params.yaml), as well delete the assets/image/
background.svg, assets/image/logo.svg, content/data-driven.md,
static/image/\*, and static/favicon.ico files, which we do not use in
the theme Acme. We can delete the themes/AcmeTheme folder if we want to,
and the website will still continue to function.

[]{#CH08.htm#pgfId-1023297}[Code checkpoint]{.fm-callout-head}
[[https://chapter-08-03.hugoinaction.com](https://chapter-08-03.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH08.htm#marker-1023312}[]{#CH08.htm#marker-1023313}[]{#CH08.htm#marker-1023314}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-03](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-03){.url}]{.fm-hyperlink}.

## []{#CH08.htm#pgfId-1013177}8.6 Viewing the dependencies source code {#CH08.htm#sigil_toc_id_178 .fm-head}

[]{#CH08.htm#pgfId-1013293 .calibre9}[]{#CH08.htm#marker-1013285
.calibre9}[]{#CH08.htm#marker-1013287
.calibre9}[]{#CH08.htm#marker-1013289 .calibre9}By moving to Hugo
Modules, we lost the ability to inspect the source code of the
dependencies. Also, because dependencies are not a part of the website's
source code, our website will need internet access to be compiled.
Internet dependency may turn out to be a limitation in certain use
cases. If we archive our website for long-term storage, backing up a
copy of the dependencies is as important as backing up the source code.

[]{#CH08.htm#pgfId-1013298 .calibre9}To perform this task, we can run
[hugo mod vendor]{.fm-code-in-text}. Hugo creates a folder called vendor
with the source code of all the dependencies. Not only that, if this
folder is present and contains the dependencies, Hugo does not go to the
internet to build our website. We can check in this folder, just like
the resources folder, with our source code.

::: fm-sidebar-block
[]{#CH08.htm#pgfId-1025632 .calibre9}Why not vendor by default?

[]{#CH08.htm#pgfId-1025633}Hugo's decision not to have the vendor folder
present by default provides better efficiency. Hugo can download it only
once and share it across multiple projects if two projects use the same
module. Also, keeping the dependencies hidden ensures that we follow the
development practices of not modifying the dependencies and getting the
changes done through official means (updating the dependency version).
In-place hot patches in dependencies have a high possibility of being
missed in a commit to source control, leading to broken builds.
:::

[]{#CH08.htm#pgfId-1023343}[Code checkpoint]{.fm-callout-head}
[[https://chapter-08-04.hugoinaction.com](https://chapter-08-04.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH08.htm#marker-1023361}[]{#CH08.htm#marker-1023362}[]{#CH08.htm#marker-1023363}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-04](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-04){.url}]{.fm-hyperlink}.

## []{#CH08.htm#pgfId-1013329}8.7 Modifying dependencies locally {#CH08.htm#sigil_toc_id_179 .fm-head}

[]{#CH08.htm#pgfId-1013443 .calibre9}[]{#CH08.htm#marker-1013437
.calibre9}[]{#CH08.htm#marker-1013439 .calibre9}We can change the
contents of the \_vendor folder and view the changes live in Hugo, but
this is a bad practice. The next time we update a dependency, our
changes will get overridden. Pushing every commit to the theme
repository can also be tiresome. Hugo has a mechanism to provide a local
version of a hosted dependency for local development. We need to set up
the dependency (the AcmeTheme in this case) as a Hugo module to enable
this. To perform this task, go to the theme folder and run the following
command:

``` programlisting
hugo mod init AcmeTheme     ❶
```

[]{#CH08.htm#pgfId-1025210}[❶]{.fm-combinumeral} Initializes the module
with the name AcmeTheme

[]{#CH08.htm#pgfId-1013530 .calibre9}This command creates a go.mod file
in the theme's folder. With this change, the module system can read the
AcmeTheme as more than a folder, but as a proper Hugo module. Next, we
can provide the path to this module in go.mod for the Acme Corporation
website using []{#CH08.htm#marker-1013509 .calibre9}the
[replace]{.fm-code-in-text} directive under the
[require]{.fm-code-in-text} call as the following listing shows.

[]{#CH08.htm#pgfId-1013590}Listing 8.5 Adding the path to AcmeTheme for
local development (go.mod)

``` programlisting
module AcmeCorporationWebsite 
  
... 
  
replace github.com/hugoinaction/AcmeTheme => 
  <Absolute or relative path to the theme>. 
```

[]{#CH08.htm#pgfId-1013677 .calibre9}With []{#CH08.htm#marker-1013656
.calibre9}this [replace]{.fm-code-in-text} directive, we can easily
continue developing locally in an independent repository and still refer
to it using Hugo Modules. In the code samples present with this book, we
will use the AcmeTheme folder in the code repository to host the theme.
Only the final version of the theme (at the end of the book) is pushed
to the github.com/hugoinaction/Acme folder. Because the \_vendor folder
is present, the [replace]{.fm-code-in-text} directive will
[]{#CH08.htm#marker-1013682 .calibre9}not take effect until we delete
the \_vendor folder, which has higher precedence. We should use the
\_vendor folder for archiving and not development. Although it is good
to use this when the theme does not change (only the content changes),
it is a hindrance when we develop the theme, so we will delete it.

[]{#CH08.htm#pgfId-1013692 .calibre9}We have created a new module we
plan to use outside of the Acme Corporation website. It is a good idea
to declare its requirements so other places can import it. Hugo's
package management needs two files: the go.mod and the config. The
go.mod file lists dependencies, and the config file provides
configuration and package information.

[]{#CH08.htm#pgfId-1013698 .calibre9}Because AcmeTheme does not have a
colossal configuration yet, a config folder will be overkill. We will
place a simple config.yaml in the theme's folder
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-resources/01](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-resources/01){.url}]{.fm-hyperlink}).
In the configuration, we can specify the minimum and maximum versions of
Hugo that this specific module depends on and whether Hugo extended is
needed. Although it is not required, it is a good idea to specify a
minimum version of Hugo that the theme needs. We do this in the
following listing.

[]{#CH08.htm#pgfId-1013773}Listing 8.6 Specifying the minimum version of
Hugo (AcmeTheme/config.yaml)

``` programlisting
module: 
  hugoVersion: 
    min: 0.91.2 
```

[]{#CH08.htm#pgfId-1023391}[Code checkpoint]{.fm-callout-head}
[[https://chapter-08-05.hugoinaction.com](https://chapter-08-05.hugoinaction.com){.url}]{.fm-hyperlink},
and source []{#CH08.htm#marker-1023408}[]{#CH08.htm#marker-1023409}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-05](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-05){.url}]{.fm-hyperlink}.

## []{#CH08.htm#pgfId-1013845}8.8 Adding nested dependencies {#CH08.htm#sigil_toc_id_180 .fm-head}

[]{#CH08.htm#pgfId-1013959 .calibre9}[]{#CH08.htm#marker-1013951
.calibre9}[]{#CH08.htm#marker-1013953
.calibre9}[]{#CH08.htm#marker-1013955 .calibre9}With Hugo Modules so
far, we have been able to load the theme dynamically and provide some
level of checks (like the minimum Hugo version needed) for the theme to
be used correctly. The main power of Hugo Modules is the ability for the
theme to have its own dependencies, which we will use now. Because
turning a theme into a Hugo module makes it possible for theme-specific
dependencies, these will be pulled into the website when installing the
theme. In Hugo, we can have various module dependencies from templates
and content to JavaScript and CSS.

[]{#CH08.htm#pgfId-1013964 .calibre9}We can mount dependencies from any
folder in a dependency to any location in our website. Hugo Modules
coupled with Hugo Pipes can act as a lightweight bundler for linking to
and bringing in resources (for example, themes, layouts, assets,
content) for our website as an alternative to the npm plus webpack
ecosystem in JavaScript or to RubyGems Sprockets in Ruby/Rails. Unlike
asset systems that force content to mount to a specific folder (for
example, node_modules in JavaScript), Hugo Modules can map to anywhere
in its filesystem. We can import the asset template files (\*.css.tpl)
into the assets folder to use them on the website.

[]{#CH08.htm#pgfId-1013983 .calibre9}Additional support files are
present in the
[[github.com/hugoinaction/AcmeSupport](https://github.com/hugoinaction/AcmeSupport){.url}]{.fm-hyperlink}
repository, so we will import those via Hugo Modules. For offline usage,
the chapter resources for chapter 8 also contain the contents of this
repository that we can import using []{#CH08.htm#marker-1013972
.calibre9}the [replace]{.fm-code-in-text} directive previously described
([[https://github.com/hugoinaction/
hugoinaction/tree/chapter-08-resources/02](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-resources/02){.url}]{.fm-hyperlink}).

[]{#CH08.htm#pgfId-1014011 .calibre9}First, we need to add a dependency
to the AcmeSupport repository. By default, Hugo imports all dependencies
into the themes folder. Because themes are the most common dependency,
this default allows us to import a theme by specifying a GitHub location
as described in section 8.3.

[]{#CH08.htm#pgfId-1014017 .calibre9}Hugo mounts all modules in the
/themes folder by default. The AcmeSupport repository consists of CSS
template files. Therefore, we need to manually override the default
location where this dependency is mounted. Hugo allows us to specify
mount points in the source as well as the target repository.

[]{#CH08.htm#pgfId-1014023 .calibre9}The AcmeSupport repository is not a
Hugo module; there is no go.mod file in it. Still, we can import it
successfully. To specify its mount points, we can go in to the
configuration of the integrating repository (the AcmeTheme codebase) and
specify the mount points in the module section as the following listing
shows. We will mount the assets folder (the source name can be anything)
to the assets folder (the destination name, needs to be
[assets]{.fm-code-in-text}) in the theme repository.

[]{#CH08.htm#pgfId-1014089}Listing 8.7 Mounting the AcmeSupport
repository (AcmeTheme/config.yaml)

``` programlisting
module: 
  ... 
  imports: 
    path: github.com/hugoinaction/AcmeSupport 
    mounts: 
      - source: assets 
        target: assets 
```

[]{#CH08.htm#pgfId-1023443}[Code checkpoint]{.fm-callout-head}
[[https://chapter-08-06.hugoinaction.com](https://chapter-08-06.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-06](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-06){.url}]{.fm-hyperlink}.

[]{#CH08.htm#pgfId-1014191 .calibre9}If you remember from chapter 6, we
used Hugo Pipes to merge the \*.css.tpl file into the CSS file used in
the website. The newly added css.tpl files are automatically included
with the changes we previously made and are used on the website. This
CSS file (added in the AcmeSupport repository) reverses the order of the
image and the text on the home page as shown in figure 8.4. The image
goes to the right and the content to the left. We can use this to verify
that the module is loading as expected.

![CH08_F04_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH08_F04_Jain.png){.calibre1}\

[]{#CH08.htm#pgfId-1025652}Figure 8.4 Swapped image and content on the
home page with AcmeSupport

[]{#CH08.htm#pgfId-1014295 .calibre9}If we run [hugo mod
vendor]{.fm-code-in-text} at the root (the Acme Corporation repository),
Hugo creates the AcmeSupport folder in the
\_vendor/github.com/hugoinaction folder, which now contains the contents
of the Git repository. Hugo also updates the go.sum file for the Acme
Corporation website with this dependency. The go.sum file tracks
dependencies as well as subdependencies used in the project. If we want
to audit the dependencies of a website, the go.sum file is the right
place to look.

::: fm-sidebar-block
[]{#CH08.htm#pgfId-1025687 .calibre9}Exercise 8.2

[]{#CH08.htm#pgfId-1025688}What information is present in the go.mod
file? (Select all that apply.)

1.  []{#CH08.htm#pgfId-1025689}Name of the module

2.  []{#CH08.htm#pgfId-1025690}Version of Hugo used to create the module

3.  []{#CH08.htm#pgfId-1025691}List of dependencies (both direct and
    indirect) of the website

4.  []{#CH08.htm#pgfId-1025692}Exact hashes of each website dependency

5.  []{#CH08.htm#pgfId-1025693}Mount paths for various folders in the
    repository
:::

[]{#CH08.htm#pgfId-1014392 .calibre9}We can mount as many subfolders as
we desire because the [mounts]{.fm-code-in-text} option in the
configuration file takes a list of source and target mount locations.
This option allows us to import our JavaScript and CSS dependencies
without needing the originating repositories to be set up as Hugo
Modules or to even understand Hugo as a concept, which opens up the
entire internet as a source of content for a Hugo website. Popular
JavaScript/CSS libraries like Bootstrap
([[https://getbootstrap.com](https://getbootstrap.com){.url}]{.fm-hyperlink}),
jQuery
([[https://jquery.com](https://jquery.com){.url}]{.fm-hyperlink}), etc.,
can be linked via this method. We could also link icon packs like
FontAwesome
([[https://fontawesome.com](https://fontawesome.com){.url}]{.fm-hyperlink})
or SCSS toolkits like Bourbon
([[https://www.bourbon.io](https://www.bourbon.io){.url}]{.fm-hyperlink}).

[]{#CH08.htm#pgfId-1014421}[Note]{.fm-callout-head} Even if you plan to
use the theme for a single website, using Hugo Modules provides the
ability to link to dependencies outside of the theme. Linking through
modules instead of copying offers the benefit of updating the dependency
quickly and tracking the ownership of pieces of code better. We can also
have subdependencies, which makes this very flexible.
[]{#CH08.htm#marker-1014423}[]{#CH08.htm#marker-1014426}[]{#CH08.htm#marker-1014428}

## []{#CH08.htm#pgfId-1014434}8.9 Modules as template plugins {#CH08.htm#sigil_toc_id_181 .fm-head}

[]{#CH08.htm#pgfId-1014453 .calibre9}[]{#CH08.htm#marker-1014445
.calibre9}[]{#CH08.htm#marker-1014447
.calibre9}[]{#CH08.htm#marker-1014449 .calibre9}We can share Hugo's
template code in the form of partials across multiple themes. These
shared partials can act as plugins that wrap reusable functions. One
module that can be useful when developing Hugo templates is the Hugo
debug utilities, which provide the debug button we used with the
Eclectic theme. We will add this module to the AcmeTheme module to be
made available for all websites using this theme.

[]{#CH08.htm#pgfId-1014458 .calibre9}To use this module, we will import
it in the config.yaml for AcmeTheme
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-resources/03](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-resources/03){.url}]{.fm-hyperlink}).
Hugo supports a single module and a list in the [module:
imports]{.fm-code-in-text} section in the configuration. Because we
already have a module, we will need to convert [module:
imports]{.fm-code-in-text} into a list to get multiple modules as the
following listing shows.

[]{#CH08.htm#pgfId-1014553}Listing 8.8 Importing the debug utilities
(AcmeTheme/config.yaml)

``` programlisting
module: 
  ... 
  imports: 
    ... 
    - path: github.com/hugoinaction/hugo-debug-utils 
```

[]{#CH08.htm#pgfId-1014635 .calibre9}Note that the Hugo debug utilities
are already initialized as a Hugo module and provide its mounts
internally. Therefore, we do not need to set the mounts for this module
manually. We can start using this module in our code after inclusion. A
copy of the Hugo debug utilities is also available in the chapter
resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-resources/04](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-resources/04){.url}]{.fm-hyperlink}).
In the base template, layouts/\_default/baseof.html, we can add the code
in the following listing to load the debug bar after defining the footer
block.

[]{#CH08.htm#pgfId-1014710}Listing 8.9 Adding the debug bar
(AcmeTheme/layouts/\_default/baseof.html)

``` programlisting
{{if not hugo.IsProduction}}      ❶
  {{ partial "debug/debug.html" 
      (dict "context" .) }}       ❷
{{end}}  
```

[]{#CH08.htm#pgfId-1025107}[❶]{.fm-combinumeral} Do not load this in
production mode. Alternatively, we can use if site.IsServer to check if
we are in live reload mode.

[]{#CH08.htm#pgfId-1025112}[❷]{.fm-combinumeral} Loads the debug partial

[]{#CH08.htm#pgfId-1023471}[Code checkpoint]{.fm-callout-head}
[[https://chapter-08-07.hugoinaction.com](https://chapter-08-07.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-07](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-07){.url}]{.fm-hyperlink}.

[]{#CH08.htm#pgfId-1014836 .calibre9}If we run the live server mode by
issuing [hugo server]{.fm-code-in-text} on the command line, the module
is downloaded automatically, added to the go.mod and go.sum files, and
the debug button should show up. Hugo Modules makes isolating Hugo
dependencies simple. To understand how this works, we can take a look at
the config.yaml file present in the hugo-debug-utils modules using this
code:

``` programlisting
module: 
  mounts: 
    - source: debug-bar/template 
      target: layouts/partials/debug 
    - source: debug-bar/css 
      target: assets/css 
    - source: debug-bar/js 
      target: assets/js 
    - source: console 
      target: layouts/partials/console 
```

[]{#CH08.htm#pgfId-1015046 .calibre9}The mounts for this module,
including the JavaScript, CSS, and the partial, are specified in its
configuration. The corresponding files are placed in the correct virtual
locations by Hugo during website compilation.

[]{#CH08.htm#pgfId-1015081 .calibre9}The Hugo debug utilities also come
with []{#CH08.htm#marker-1015054 .calibre9}a [console]{.fm-code-in-text}
partial that we can use to log any Hugo variable in the browser's
JavaScript console. This is extremely useful when developing templates.
Say that we want to know the value of an expression. We can pass this to
[]{#CH08.htm#marker-1015070 .calibre9}the [console]{.fm-code-in-text}
partial, and the value of the expression will be made available in the
browser console. The following listing allows us to view the front
matter parameters passed to the page (use
AcmeTheme/layouts/\_default/baseof.html to make these changes).

[]{#CH08.htm#pgfId-1015100}[Note]{.fm-callout-head} You should only add
the code in the following listing when debugging.
[]{#CH08.htm#marker-1015102}[]{#CH08.htm#marker-1015105}[]{#CH08.htm#marker-1015107}

[]{#CH08.htm#pgfId-1015164}Listing 8.10 Passing debugging parameters the
browser console

``` programlisting
{{ partial "console" .Params }} 
```

## []{#CH08.htm#pgfId-1015208}8.10 Shared dependencies across the theme and website {#CH08.htm#sigil_toc_id_182 .fm-head}

[]{#CH08.htm#pgfId-1015227 .calibre9}[]{#CH08.htm#marker-1015219
.calibre9}[]{#CH08.htm#marker-1015221
.calibre9}[]{#CH08.htm#marker-1015223 .calibre9}We copied over the
partial and shortcodes into the Acme Corporation website from the
AcmeTheme module to be portable across themes. That led to duplication
of content, which makes it difficult to maintain. We can potentially
remove the shortcodes from the theme, but the partials are needed for
both the theme and for the website to function. They need to live in the
theme, so that it is reusable across websites, and in the website, so we
can switch themes. This dependency is the perfect use case for moving to
a separate module.

[]{#CH08.htm#pgfId-1015232 .calibre9}We can create a new module called
AcmeCommon and move shared resources needed by both the Acme Corporation
website and AcmeTheme. We set up the data in the folder
[[github.com/hugoinaction/AcmeCommon](https://github.com/hugoinaction/AcmeCommon){.url}]{.fm-hyperlink}
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-resources/05](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-resources/05){.url}]{.fm-hyperlink}).
Using this shared repository in the theme and the website is an exercise
for the reader. The reader should remove the shared layouts present in
this repository from both repositories. You can browse the code at the
code checkpoint ch08-8 to see this in action.

::: fm-sidebar-block
[]{#CH08.htm#pgfId-1025710 .calibre9}Versions and shared dependencies

[]{#CH08.htm#pgfId-1025711}If a Hugo-based website finds a dependency in
two places, Hugo integrates only one version of the dependency even if
different minor versions are present in various sources. Bundling
multiple versions of a dependency is wasteful, increases bloat, and can
make Hugo's caching and, thereby, its performance suffer. Hugo expects
its module developers to follow the Semver guidelines
(https://semver.org/) and to introduce only breaking changes in a new
major build.

\

[]{#CH08.htm#pgfId-1025712}Hugo can use multiple versions of a
dependency (for example, 1.0 and 2.0 are major version changes, and 1.2
and 1.3 are not). *It is strongly advised to remove this duplication to
improve performance, disk utilization, and safety*. This prevents
unknown vulnerabilities from using unsupported older versions of
dependencies.
:::

[]{#CH08.htm#pgfId-1023494}[Code checkpoint]{.fm-callout-head}
[[https://chapter-08-08.hugoinaction.com](https://chapter-08-08.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-08](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-08){.url}]{.fm-hyperlink}.

[]{#CH08.htm#pgfId-1015386}[Note]{.fm-callout-head} Hugo does not add
the AcmeCommon module to the go.mod file of the Acme Corporation website
even though it is present in the configuration. Because there can be
only one AcmeCommon, there was no point in adding it twice. Hugo adds
AcmeCommon to go.mod automatically when we switch to a different theme.
[]{#CH08.htm#marker-1015388}[]{#CH08.htm#marker-1015391}[]{#CH08.htm#marker-1015393}

## []{#CH08.htm#pgfId-1015399}[]{#CH08.htm#marker-1019907}[]{#CH08.htm#marker-1019906}[]{#CH08.htm#marker-1019905}8.11 Content plugins {#CH08.htm#sigil_toc_id_183 .fm-head}

[]{#CH08.htm#pgfId-1015418 .calibre9}[]{#CH08.htm#marker-1015410
.calibre9}[]{#CH08.htm#marker-1015412
.calibre9}[]{#CH08.htm#marker-1015414 .calibre9}Template plugins are
useful abstractions over template code that we can reuse. Hugo Modules
also allows us to have content plugins that can package content that we
can reuse across multiple websites.

[]{#CH08.htm#pgfId-1015423 .calibre9}One example of content shareable
across numerous websites is the Terms of Use and the Privacy Policy
pages. Websites from the same company share the same Terms of Use page.
We can move this page to an independent module and import it across all
company websites for reuse. The page can use the built-in
[param]{.fm-code-in-text} function to access site parameters from the
configuration and can also bundle shortcodes to provide standardized
data across the multiple websites.

[]{#CH08.htm#pgfId-1015448 .calibre9}We need the same Terms of Use and
the Privacy Policy pages across all websites under the Acme umbrella.
The Terms of Use and the Privacy Policy pages for the Acme Corporation
website are also present in the repository in
[[github.com/hugoinaction/TermsAndPrivacy](https://github.com/hugoinaction/TermsAndPrivacy){.url}]{.fm-hyperlink}
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-resources/06](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-resources/06){.url}]{.fm-hyperlink}).
The menu entries are in the front matter, and the hardcoded data values,
which can differ across various websites, are replaced with the
[param]{.fm-code-in-text} shortcode (for example,
[{{\<]{.fm-code-in-text} [param]{.fm-code-in-text}
[\"TermsAndPrivacy.company_name\"]{.fm-code-in-text}
[\>}}]{.fm-code-in-text} for the company name). Performing these changes
has been left as an exercise for the reader.

![CH08_F05_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH08_F05_Jain.png){.calibre1}\

[]{#CH08.htm#pgfId-1025731}Figure 8.5 Months of work: Bob faces the
brunt of the angry marketing head for not having a central place to keep
the Terms of Use and Privacy Policy pages, which puts the marketing
campaign at risk legally with the older Terms of Use.

[]{#CH08.htm#pgfId-1015506 .calibre9}We will integrate a plugin into the
Acme Corporation website (and not the Acme Corporation theme) and
configure it to get rid of our hardcoded Terms of Use and Privacy Policy
pages. To integrate this plugin into the Acme Corporation website, we
will need to perform the following steps.

1.  []{#CH08.htm#pgfId-1015512 .calibre9}Delete the terms.md and the
    privacy.md pages.

2.  []{#CH08.htm#pgfId-1015526 .calibre9}Update the module.yaml file in
    the config/\_default folder with the contents in the following
    listing ([[https://github.com/hugoinaction/hugoinaction/tree/
    chapter-08-resources/07](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-resources/07){.url}]{.fm-hyperlink}).

3.  []{#CH08.htm#pgfId-1015670 .calibre9}Add the terms and privacy
    parameters to the configuration for the TermsAndPrivacy repository
    as the following listing shows.

4.  []{#CH08.htm#pgfId-1015836 .calibre9}Add the menu file to bring back
    the footer menu entries as the following listing shows.

[]{#CH08.htm#pgfId-1015609}Listing 8.11 Adding a new dependency
(config/\_default/module.yaml)

``` programlisting
imports: 
  - path: github.com/hugoinaction/TermsAndPrivacy 
  ... 
```

[]{#CH08.htm#pgfId-1015735}Listing 8.12 Adding the parameters
(config/\_default/params.yaml)

``` programlisting
TermsAndPrivacy: 
  company_name: Acme Corporation 
  contact_email: contact@example.org 
  website: https://hugoinaction.com 
  contact_dpo_email: dpo@hugoinaction.com 
  contact_dpo_phone: 9999999999 
```

[]{#CH08.htm#pgfId-1015901}Listing 8.13 Restoring the footer entries
(config/\_default/menu.yaml)

``` programlisting
footer: 
  - name: Privacy Policy 
    weight: 300 
    url: /privacy 
  - name: Terms of Use 
    weight: 200 
    url: /terms 
```

[]{#CH08.htm#pgfId-1023519}[Code checkpoint]{.fm-callout-head}
[[https://chapter-08-09.hugoinaction.com](https://chapter-08-09.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-09](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-09){.url}]{.fm-hyperlink}.

[]{#CH08.htm#pgfId-1016022 .calibre9}The Privacy Policy and the Terms of
Use pages load from a shared content module with these changes. This
module is generic, and you are free to use this for your own websites
outside of Acme Corporation and *Hugo in Action*.

::: fm-sidebar-block
[]{#CH08.htm#pgfId-1025764 .calibre9}Exercise 8.3

[]{#CH08.htm#pgfId-1025765}Which of the following is an accurate
statement about a content plugin? (Select all that apply.)

1.  []{#CH08.htm#pgfId-1025766}A content plugin creates a link to the
    shared content in the generated website.

2.  []{#CH08.htm#pgfId-1025767}A content plugin cannot have template
    code.

3.  []{#CH08.htm#pgfId-1025768}A content plugin can be used to set up
    access control on the content by splitting each area into a separate
    repository.

4.  []{#CH08.htm#pgfId-1025769}A content plugin moves the common content
    into a separate repository for one place of
    access.[]{#CH08.htm#marker-1025770}[]{#CH08.htm#marker-1025771}[]{#CH08.htm#marker-1025772}
:::

## []{#CH08.htm#pgfId-1016189}[]{#CH08.htm#marker-1016202}[]{#CH08.htm#marker-1016200}8.12 Commonly used Hugo Modules APIs {#CH08.htm#sigil_toc_id_184 .fm-head}

[]{#CH08.htm#pgfId-1016212 .calibre9}[]{#CH08.htm#marker-1025437
.calibre9}[]{#CH08.htm#marker-1025438 .calibre9}Running [hugo
mod]{.fm-code-in-text} provides a great variety of subcommands that are
useful in managing modules in our daily life. For example,

-   []{#CH08.htm#pgfId-1016221 .calibre9}[hugo]{.fm-code-in-text}
    [mod]{.fm-code-in-text} [tidy]{.fm-code-in-text}---Removes
    []{#CH08.htm#marker-1016238 .calibre9}unused entries from the go.sum
    and go.mod files (like getting rid of Eclectic).

-   []{#CH08.htm#pgfId-1016248 .calibre9}[hug]{.fm-code-in-text}
    [mod]{.fm-code-in-text} [clean]{.fm-code-in-text}---Clears
    []{#CH08.htm#marker-1016261 .calibre9}the module cache to pick up
    newer changes (if done locally). Sometimes, the local store may get
    corrupt, giving us incorrect data.

-   []{#CH08.htm#pgfId-1016295 .calibre9}[hugo]{.fm-code-in-text}
    [mod]{.fm-code-in-text}
    [graph]{.fm-code-in-text}[]{#CH08.htm#marker-1020041}---Shows
    []{#CH08.htm#marker-1016284 .calibre9}the list of dependencies of
    the current website or module. Understanding go.sum can be
    challenging, but [hugo mod graph]{.fm-code-in-text} makes this file
    human-readable.

-   []{#CH08.htm#pgfId-1016304 .calibre9}[hugo]{.fm-code-in-text}
    [mod]{.fm-code-in-text} [get]{.fm-code-in-text}
    [-u]{.fm-code-in-text}---Updates []{#CH08.htm#marker-1016317
    .calibre9}all modules.

-   []{#CH08.htm#pgfId-1016327 .calibre9}[{hugo]{.fm-code-in-text}
    [mod]{.fm-code-in-text} [get]{.fm-code-in-text} [-u
    ./\...}]{.fm-code-in-text}---Updates []{#CH08.htm#marker-1016340
    .calibre9}all modules and their dependencies.

-   []{#CH08.htm#pgfId-1016350 .calibre9}[hugo mod get
    \<module\>@\<version\>]{.fm-code-in-text}---Gets
    []{#CH08.htm#marker-1016363 .calibre9}a specific version of a
    module.

[]{#CH08.htm#pgfId-1016373 .calibre9}Remember that we added the Eclectic
theme as a module to try it out when we started with Hugo Modules. It is
still present in go.mod and go.sum. It is costing us the needless waste
of bandwidth by downloading when we are not using it. We can use [hugo
mod tidy]{.fm-code-in-text} to eliminate unused entries from the go.mod
and go.sum files.

[]{#CH08.htm#pgfId-1023544}[Code checkpoint]{.fm-callout-head}
[[https://chapter-08-10.hugoinaction.com](https://chapter-08-10.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-08-10](https://github.com/hugoinaction/hugoinaction/tree/chapter-08-10){.url}]{.fm-hyperlink}.

[]{#CH08.htm#pgfId-1016489 .calibre9}After cleaning up the dependencies,
the correct dependency list can be []{#CH08.htm#marker-1025837
.calibre9}viewed with [hugo mod graph]{.fm-code-in-text} as listing 8.14
shows. This command provides a list of dependencies actively used in a
Hugo website.

::: fm-sidebar-block
[]{#CH08.htm#pgfId-1025858 .calibre9}Exercise 8.4

[]{#CH08.htm#pgfId-1025859}True or False: Hugo Modules are automatically
downloaded every time we build a Hugo-based website.
:::

[]{#CH08.htm#pgfId-1016559}Listing 8.14 Getting the Acme Corporation
website's dependency list

``` programlisting
> hugo mod graph 
AcmeCorporationWebsite github.com/hugoinaction/ 
➥ TermsAndPrivacy@v0.0.0-20200223231951-1c7c1972007a 
AcmeCorporationWebsite github.com/hugoinaction/ 
➥ AcmeCommon@v0.0.0-20210710221623-ca55f92c01bc 
AcmeCorporationWebsite github.com/hugoinaction/ 
➥ AcmeTheme@v0.8.0 => <path>/AcmeTheme 
github.com/hugoinaction/AcmeTheme@v0.8.0 github.com/hugoinaction/ 
➥ AcmeSupport@v0.0.0-20210710141629-d5aef37e0e9c 
github.com/hugoinaction/AcmeTheme@v0.8.0 github.com/hugoinaction/ 
➥ hugo-debug-utils@v0.0.0-20200427035302-d4636e5c27cf 
```

[]{#CH08.htm#pgfId-1016648}[Tip]{.fm-callout-head} When running the
development server, if you face errors that are unrelated to the
website's code, Hugo's module cache has likely gone bad. Hugo keeps its
cache in the temporary data folder so that the operating system can
reclaim the space if needed. Because this data is publicly accessible,
it can get corrupted, leading to weird errors. When facing such issues,
the best solution is to clear the cache entirely with [hugo mod
clean]{.fm-code-in-text1}. Hugo re-fetches the data on the next launch.

[]{#CH08.htm#pgfId-1016663 .calibre9}This chapter completes the first
part of *Hugo in Action*. In the second part of the book, we will move
out of the bounds of the fully static website and see how Hugo interacts
with the rest of the Jamstack. We will continue to complete the Acme
Corporation website with a contact page, a JSON-based API, a small
search engine, and then create an e-commerce area in our website using
Hugo. We will discover some hidden gems in the Hugo template language
and its features that do a lot more than what appears on the surface as
we continue to introduce and learn more Hugo features to simplify web
development. []{#CH08.htm#marker-1016674
.calibre9}[]{#CH08.htm#marker-1016677 .calibre9}

## []{#CH08.htm#pgfId-1016683}Summary {#CH08.htm#sigil_toc_id_185 .fm-head-1-notoc}

-   []{#CH08.htm#pgfId-1016693 .calibre9}Hugo Modules is a powerful way
    to manage dependencies. We can mount any folder in any Git
    repository at any location in our project, even if the source
    repository knows nothing about Hugo or Hugo Modules.

-   []{#CH08.htm#pgfId-1016707 .calibre9}Hugo provides the means to
    manage dependencies in whatever approach we desire. We can keep
    dependencies in the vendor folder, download them on the fly from a
    link, or have a local copy on disk.

-   []{#CH08.htm#pgfId-1016717 .calibre9}We can use Hugo Modules to
    create themes, template plugins, and content plugins. These plugins
    can mount to any location in a Hugo repository and have access to
    the entire template language. We can override specific files in a
    plugin for customization.

-   []{#CH08.htm#pgfId-1016727 .calibre9}Modules can depend on other
    modules, and we can decide to use the dependencies directly.

-   []{#CH08.htm#pgfId-1016737 .calibre9}Hugo makes it easy to
    deduplicate and have one copy of a module.

[]{#P2.htm}

# []{#P2.htm#pgfId-998407}Part 2 Expanding with the Jamstack: Dynamic outside, static inside {#P2.htm#heading_id_2 .tochead}

[]{#P2.htm#pgfId-1030090 .calibre9}Do static websites feel, ummm . . .
too static? They don't have to. We can make them as dynamic as desired
without losing the performance, maintainability, and scalability of
static websites. Part 2 of *Hugo in Action* shows you how to make a
static web page accept dynamic input, react to change, and remain as
accessible and performant as before.

[]{#P2.htm#pgfId-1030091 .calibre9}In chapter 9, we will use APIs from
third-party service providers to accept user input, react to change, and
provide control for the content author to build a custom form-based
system without recoding the site for every form. We will also set up an
API for our website, which we will pick up in chapter 10, to create a
search engine. Also in chapter 10, we will use Hugo's JavaScript
integration features to react better to user input. We will see
firsthand how Hugo enables us to tap into the vast JavaScript ecosystem
when needed, while retaining the power and performance of the static
site we have built so far. We will also see how Hugo can work in a
hybrid website with a single-page application embedded at an endpoint.

[]{#P2.htm#pgfId-1030092 .calibre9}In chapter 11, we will build custom
APIs to extend Hugo and perform tasks that are not natively available in
Hugo. We will embed LaTeX's mathematical rendering system to provide
full support for complex mathematical equations in a Hugo website, using
an approach that retains phenomenal build and run-time performance.

[]{#P2.htm#pgfId-1030093 .calibre9}In chapter 12, we will change gears
and switch over to a completely different web domain. We will use the
learning and the code we have created thus far to build a functional
e-commerce website with complete support for shopping carts, checkout,
and fulfillment of digital assets.

[]{#P2.htm#pgfId-1030094 .calibre9}Chapter 13 will explore some of the
advanced features of Hugo and the Jamstack, including multilingual
websites and scripting-based control of all the services. We will also
explore libraries such as instant page and Turbo that make our already
fast website even faster.

[]{#P2.htm#pgfId-1030083 .calibre9}At the end of part 2, you should be
comfortable with making Hugo an integral part of your web development
arsenal and using it to solve any web development problem while focusing
on performance and maintainability.

[]{#CH09.htm}

# []{#CH09.htm#pgfId-1027424}9 Accessing APIs to enhance functionality {#CH09.htm#heading_id_2 .tochead}

[]{#CH09.htm#pgfId-1030168}This chapter covers

-   []{#CH09.htm#pgfId-1030207 .calibre9}Enhancing the website using
    APIs
-   []{#CH09.htm#pgfId-1030208 .calibre9}Embedding tweets into a web
    page
-   []{#CH09.htm#pgfId-1030209 .calibre9}Creating forms using
    third-party APIs
-   []{#CH09.htm#pgfId-1030210 .calibre9}Using form APIs to create
    dynamic forms
-   []{#CH09.htm#pgfId-1030196 .calibre9}Creating a JSON-based API using
    Hugo's output formats

[]{#CH09.htm#pgfId-1011814 .calibre9}In the first half of this book, we
worked on the Hugo website in isolation. This chapter involves using
Hugo to get access to data from outside of our website. We will also add
dynamic features and learn how the Jamstack can perform tasks requiring
server intervention without sacrificing the website's performance.

[]{#CH09.htm#pgfId-1011820 .calibre9}In this chapter, we will focus on
APIs, the *A* in Jamstack. APIs are mechanisms with which systems or
components in a system can interact. A service exposes certain
functionality through an API, and the client can use the API to consume
it. APIs are everywhere in the web ecosystem. When a web page like
https:[//]{.fm-hyperlink}localhost:1313/ index.html is requested, the
web browser sends a GET API request for /index.html from the localhost
server at port 1313 using the HTTPS protocol. We can use APIs in our
websites to request data processing or to access information stored on a
service. For example, we can access the tweet or an Instagram image
using a given ID and the HTTP-based API exposed by these services. We
will learn about the various ways in which we can consume APIs and write
code in a Hugo-based website to consume third-party APIs (figure 9.1).
We will use Hugo to embed a tweet into our website at compile time and
to create contact forms, a dynamic survey generation system, and a
commenting system to embed comments into our website. We will also set
up a JSON-based API for our website.

![CH09_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F01_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1051471}Figure 9.1 Chapter 9 focuses on the API layer
of the Jamstack. We can consume APIs in Hugo at compile time from
multiple services. We can also create web forms that direct their
responses to services that are configured to receive them, which may
feed the data back into the website on rebuilds.

## []{#CH09.htm#pgfId-1011846}9.1 Build-time vs. run-time API access {#CH09.htm#sigil_toc_id_186 .fm-head}

[]{#CH09.htm#pgfId-1011879 .calibre9}[]{#CH09.htm#marker-1011871
.calibre9}[]{#CH09.htm#marker-1011873
.calibre9}[]{#CH09.htm#marker-1011875 .calibre9}In most websites
developed using traditional web stacks, we access third-party APIs at
run time exclusively. When the user requests a web page, the server
connects to various services that own the information needed to render,
collects the services, and then sends them to the browser to render.
There is another set of requests that come from the client. We implement
these in JavaScript, which calls and assembles the data from all
endpoints.

[]{#CH09.htm#pgfId-1011884 .calibre9}The two approaches we've discussed
so far are access to an API at run time, where the user usually waits
for information that needs to be filled by a spinner or a blank waiting
screen, and the Jamstack-popularized processing at build time, which
provides its results to all users at run time. In this case, the server
requests the data when the builder (for example, Hugo) compiles the
website before pushing it live. The server serves this information as-is
when requested from the client statically.

[]{#CH09.htm#pgfId-1011890 .calibre9}We can use both build-time (or
compile-time) and run-time API access inside the same website for
different things, and each has its use cases. With build-time API
access, the target service is called once per compilation. (Hugo offers
to cache this response for a configured period, and it may not call this
on every build.) This one-time compilation reduces the load on the
target service and can directly save on cost. For example, many websites
load maps in their contact section showing the location of their
offices. Because the office location changes infrequently, we can
realize massive savings by replacing the map with an image generated at
compile time or one that's manually provided. The same is true when we
embed specific tweets, Instagram posts, or product catalogs for a
commercial website.

[]{#CH09.htm#pgfId-1011896 .calibre9}Apart from performance, there are
other advantages for using build-time API access. When using run-time
API access, we provide more information about our system to the target
service than is needed. An Instagram widget provided in JavaScript leaks
a lot of information about our website visitors to Instagram. Instagram
can then mine all the user information and potentially share it with
competitors targeting our users. Even when our server performs the API
access, the load statistics leak to the API. We need to build caching
for the servers to prevent this and to allow cache reuse when
autoscaling (where new machines are added to the cluster dynamically).
We can reuse the API response across web pages easily by compile-time
API access.

[]{#CH09.htm#pgfId-1011902 .calibre9}Build-time API access is
deterministic, testable, cheaper, and more straightforward than run-time
API access. But it comes with its caveats. Updating data requires a new
build to be generated and deployed. We cannot embed a running or live
Twitter feed, for example. This rebuild requirement makes user-generated
data, live updates, and even regular data changes harder to track. In
most cases, though, the information does not change in real time.
Automated continuous integration and subsecond build times (which we
have with Hugo) can ease these limitations.

[]{#CH09.htm#pgfId-1011908 .calibre9}In Hugo websites, we can use both
compile-time API access via Hugo's API access functions and run-time API
access via JavaScript (more on JavaScript in chapter 10). We can use
APIs provided by third parties or build our own. We can also build
pseudo APIs with Hugo (see section 9.7), which act like full APIs but do
not support dynamic queries to a database, and Hugo generates them while
compiling. []{#CH09.htm#marker-1011910
.calibre9}[]{#CH09.htm#marker-1011913
.calibre9}[]{#CH09.htm#marker-1011915 .calibre9}

## []{#CH09.htm#pgfId-1011921}9.2 Embedding tweets at compile time {#CH09.htm#sigil_toc_id_187 .fm-head}

[]{#CH09.htm#pgfId-1011952 .calibre9}[]{#CH09.htm#marker-1011932
.calibre9}[]{#CH09.htm#marker-1011934
.calibre9}[]{#CH09.htm#marker-1011936 .calibre9}In chapter 4, when
introducing shortcodes, we mentioned the []{#CH09.htm#marker-1011941
.calibre9}built-in [tweet]{.fm-code-in-text} shortcode, which is
implemented as a compile-time shortcode in Hugo. This section shows how
that works and then we will replicate that functionality with
compile-time API access. While Twitter provides HTML markup that we can
paste into our website, there are a lot of downsides for copying and
pasting that markup:

-   []{#CH09.htm#pgfId-1011961 .calibre9}The HTML markup embeds tweets
    at run time, which means an extra request goes to Twitter each time
    a user sees a tweet.

-   []{#CH09.htm#pgfId-1011975 .calibre9}The usage data for that page
    gets shared with Twitter.

-   []{#CH09.htm#pgfId-1011985 .calibre9}The design of the embedded
    tweet is controlled by Twitter, and we do not have a lot of
    customization options.

[]{#CH09.htm#pgfId-1011995 .calibre9}Because tweets rarely change, there
is little upside to the run-time API embedding this static data. A plain
copy/paste of the textual content is better than run-time access for
greater performance and security. Linking allows us to have verified
ownership and authenticity of the embedded content and easier access to
updates if the content changes. Compile-time linking allows us to have
these advantages without the downside of slow run-time access and data
usage leaks.

[]{#CH09.htm#pgfId-1012001 .calibre9}On the home page of the Acme
Corporation website are some testimonials from customers about their
products. Many of the product testimonials come from social networking
websites like Twitter and Facebook. While the tweet is public and
embeddable via its native UI, the design of testimonials on the home
page doesn't match Twitter's layout. Although we have testimonials from
various sources, the home page needs to look coherent.

[]{#CH09.htm#pgfId-1012007 .calibre9}To embed the tweet in the format we
desire, we need to get the tweet's text into a variable in Hugo. We can
fetch Twitter data by accessing Twitter's public API using the
[getJSON]{.fm-code-in-text} function[]{#CH09.htm#marker-1031048} in
[]{#CH09.htm#marker-1012018 .calibre9}Hugo for compile-time access.
Figure 9.2 shows the tweet that we want to embed.

![CH09_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F02_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1051512}Figure 9.2 The tweet to embed in the Acme
Corporation website. Hugo allows us to embed tweets using both
compile-time and run-time API access.

[]{#CH09.htm#pgfId-1012069 .calibre9}You can view the tweet online at
[[https://twitter.com/atishay811/status/1259605801968128000](https://twitter.com/atishay811/status/1259605801968128000){.url}]{.fm-hyperlink}.
You can embed it in the Acme Corporation website using the
[tweet]{.fm-code-in-text} shortcode via [{{\<tweet user=\"atishay811\"
id=\"1259605801968128000\"\>}}]{.fm-code-in-text} if you so desire.

### []{#CH09.htm#pgfId-1012078}[]{#CH09.htm#marker-1031065}[]{#CH09.htm#marker-1031064}[]{#CH09.htm#marker-1031063}9.2.1 Understanding the Twitter API {#CH09.htm#sigil_toc_id_188 .fm-head1}

[]{#CH09.htm#pgfId-1012097 .calibre9}[]{#CH09.htm#marker-1012089
.calibre9}[]{#CH09.htm#marker-1012091
.calibre9}[]{#CH09.htm#marker-1012093 .calibre9}Twitter has a variety of
JSON-based APIs to embed tweets. While most require authentication, the
OEmbed API used for embedding tweets does not. The documentation for the
Twitter OEmbed API is available at
[[http://mng.bz/Ex2J](http://mng.bz/Ex2J){.url}]{.fm-hyperlink}. The
OEmbed API takes a URL of the tweet and a bunch of options for the type
of data we want to embed. By default, Twitter's widgets.js script is
loaded, which renders the tweet using Twitter's CSS, and that makes it
look official.

[]{#CH09.htm#pgfId-1012139 .calibre9}An embedded tweet supports a
variety of Twitter features such as threading, embedded images, and
embedded video. We don't need these because we want to style the tweet
differently. We can disable images and videos by passing
[hide_media]{.fm-code-in-text} as a flag, disable threads only via
[hide_thread]{.fm-code-in-text}, and disable the widget.js JavaScript
file with [omit_script]{.fm-code-in-text}. We will also send
[dnt]{.fm-code-in-text} to tell Twitter not to track us. The following
listing provides the call for the request to the Tweet API.

[]{#CH09.htm#pgfId-1012199}Listing 9.1 The Twitter OEmbed API to get a
tweet

``` programlisting
https://publish.twitter.com/oembed?url= 
➥ https%3A%2F%2Ftwitter.com%2Fatishay%2Fstatus%2F1259605801968128000 
➥ &omit_script=1&hide_media=1&hide_thread=1&dnt=true 
```

[]{#CH09.htm#pgfId-1012251 .calibre9}You can directly open the URL in
listing 9.1 in a web browser. It should return a JSON file with the
tweet content, which you can download. The JSON output for the request
in that listing provides the tweet metadata such as author name,
author's Twitter URL, the tweet's URL, etc., along with its content. The
following listing shows the metadata (beautified for readability). We
will fetch this into a Hugo variable and then render the core contents.

[]{#CH09.htm#pgfId-1012308}Listing 9.2 Sample response from the Twitter
OEmbed API for a tweet

``` programlisting
{
   "url": "https://twitter.com/atishay811/status/1259605801968128000",
   "author_name": "atishay811",
   "author_url": "https://twitter.com/atishay811",
   "html": "<blockquote class=\"twitter-tweet\"
    ➥ data-cards=\"hidden\" data-dnt=\"true\"><p lang=\"en\" dir=\"ltr\*>
    ➥ Acme Corporation in Hugo In Action sells digital shapes. It's fun...? 
    ➥ </p>&mdash; atishay811 (@atishay811) <a href=\"
    ➥ https://twitter.com/atishay811/status/1259605801968128000? 
    ➥ ref_src=twsrc%5Etfw\">May 10, 2020\n",
   "width": 550,
   "height": null,
   "type": "rich",
   "cache_age": "3153600000",
   "provider_name": "Twitter",
   "provider_url": "https://twitter.com",
   "version": "1.0"
}
```

::: fm-sidebar-block
[]{#CH09.htm#pgfId-1046263 .calibre9}Exercise 9.1

[]{#CH09.htm#pgfId-1046264}Using compile-time API access allows us to do
which of the following? (Select all that apply.)

1.  []{#CH09.htm#pgfId-1046265}Provide better user performance.

2.  []{#CH09.htm#pgfId-1046266}React to user input.

3.  []{#CH09.htm#pgfId-1046267}Enable better tracking of users.

4.  []{#CH09.htm#pgfId-1046268}Prevent API owners from tracking users.

5.  []{#CH09.htm#pgfId-1046272}Enable content manipulation and reuse of
    data across multiple
    pages.[]{#CH09.htm#marker-1046269}[]{#CH09.htm#marker-1046270}[]{#CH09.htm#marker-1046271}
:::

### []{#CH09.htm#pgfId-1012695}[]{#CH09.htm#marker-1031046}[]{#CH09.htm#marker-1031045}[]{#CH09.htm#marker-1031044}[]{#CH09.htm#marker-1031043}9.2.2 Understanding Hugo's functions for compile-time API access {#CH09.htm#sigil_toc_id_189 .fm-head1}

[]{#CH09.htm#pgfId-1012764 .calibre9}[]{#CH09.htm#marker-1051580
.calibre9}[]{#CH09.htm#marker-1051581
.calibre9}[]{#CH09.htm#marker-1051582
.calibre9}[]{#CH09.htm#marker-1051583 .calibre9}To embed tweets, we need
to get the API response from Twitter into Hugo. To use APIs at compile
time, Hugo []{#CH09.htm#marker-1051585 .calibre9}provides
[]{#CH09.htm#marker-1051586 .calibre9}two functions,
[getJSON]{.fm-code-in-text} and
[getCSV]{.fm-code-in-text}[]{#CH09.htm#marker-1031049}. These methods
can access any HTTP(s) service to access data delivered in JSON or CSV
file formats, respectively. JSON is the most popular data interchange
format on the web. At the same time, CSV can be extremely useful in
reading tabular data (remember, in chapter 5, we used
[resources.Get]{.fm-code-in-text} followed by
[transform.Unmarshal]{.fm-code-in-text} to parse CSV files that provided
product details). Hugo also provides
[resources.GetRemote]{.fm-code-in-text} as a generic method to fetch
remote content that we will use in section 9.6.2.

[]{#CH09.htm#pgfId-1012773 .calibre9}Calling an HTTP service is simple.
For a call to the Twitter API to fetch a specific tweet, we can use the
code in the following listing.

[]{#CH09.htm#pgfId-1012830}Listing 9.3 Using
[getJSON]{.fm-code-in-listingcaption} to fetch a tweet

``` programlisting
{{ $tweet := getJSON "https://publish.twitter.com/oembed? 
➥ url=https%3A%2F%2Ftwitter.com%2Fatishay%2Fstatus%2F1259605801968128000 
➥ &omit_script=1&hide_media=1&hide_thread=1&dnt=true" }} 
```

[]{#CH09.htm#pgfId-1012952 .calibre9}This line calls the Twitter OEmbed
API and stores the response in []{#CH09.htm#marker-1012909 .calibre9}the
[\$tweet]{.fm-code-in-text} variable. If the Twitter API is inaccessible
or returns an error, the static compilation fails. This API can also
join strings if passed several arguments. If the URL of the tweet is
present in a variable []{#CH09.htm#marker-1012925 .calibre9}called
[\$tweet_url]{.fm-code-in-text}, we can pass it as-is. The following
listing shows the code to parameterize []{#CH09.htm#marker-1012941
.calibre9}the [getJSON]{.fm-code-in-text} call.

[]{#CH09.htm#pgfId-1013048}Listing 9.4 Parameterizing
[]{#CH09.htm#marker-1013037}a [getJSON]{.fm-code-in-listingcaption} call

``` programlisting
{{ $tweet := getJSON "https://publish.twitter.com/oembed?url=" $tweet_url 
   "&omit_script=1&hide_media=1&hide_thread=1&dnt=true" }} 
```

[]{#CH09.htm#pgfId-1013134 .calibre9}With the tweet info stored in
[\$tweet]{.fm-code-in-text}, the author name is now available in
[\$tweet .author_name]{.fm-code-in-text}, and the tweet contents are
available as HTML in [\$tweet.html]{.fm-code-in-text}. We can access the
URL of the tweet with [\$tweet.url]{.fm-code-in-text}. We can now use
this information to render the tweet on the home page.

[]{#CH09.htm#pgfId-1013153}[Note]{.fm-callout-head} Nowadays, JSON is
everywhere. Most services provide easy-to-use JSON APIs that we can use
with Hugo. From Instagram to Google Maps, Twitter to Wikipedia, we can
access anything at compile time with Hugo.
[]{#CH09.htm#marker-1013155}[]{#CH09.htm#marker-1013158}[]{#CH09.htm#marker-1013160}[]{#CH09.htm#marker-1013162}

### []{#CH09.htm#pgfId-1013168}9.2.3 Rendering a tweet as a testimonial {#CH09.htm#sigil_toc_id_190 .fm-head1}

[]{#CH09.htm#pgfId-1013203 .calibre9}[]{#CH09.htm#marker-1013179
.calibre9}[]{#CH09.htm#marker-1013181
.calibre9}[]{#CH09.htm#marker-1013183
.calibre9}[]{#CH09.htm#marker-1013185
.calibre9}[]{#CH09.htm#marker-1013187 .calibre9}Now that we have a tweet
to match the same design, we need to update our data with what we get
from Twitter. We will define a key []{#CH09.htm#marker-1013192
.calibre9}called [tweet]{.fm-code-in-text} with an URL and no other
information. We can use it to fetch all the data and then render it.
Let's update the testimonial with that information. The following
listing uses compile-time API access to twitter.com to do just that.

[]{#CH09.htm#pgfId-1013263}Listing 9.5 Embedding tweets
(AcmeTheme/layouts/\_default/index.html)

``` programlisting
{{range .}} 
{{$author := default "" .author}}            ❶
{{$content := default "" .content}}          ❶
{{$from := default "" .from}}                ❶
{{if .tweet}}                                ❷
  {{$tweet := getJSON 
    "https://publish.twitter.com/oembed?url=" .tweet 
    "&omit_script=1&hide_media=1&hide_thread=1&dnt=true" }} 
  {{$author = $tweet.author_name }} 
  {{$from = "via Twitter"}} 
  {{$content = $tweet.html }} 
{{end}} 
 
<li>     <p>{{$content | safeHTML}}</p>      ❸
    <div> 
      <h2>{{$author | title}}</h2>           ❹
      <h3>{{$from}}</h3> 
    </div> 
</li> 
{{end}} 
```

[]{#CH09.htm#pgfId-1044085}[❶]{.fm-combinumeral} Saves the data in
variables so that we can override it from the tweet

[]{#CH09.htm#pgfId-1044102}[❷]{.fm-combinumeral} The getJSON call is
present in the if statement so that we call it if data from Twitter is
needed.

[]{#CH09.htm#pgfId-1044119}[❸]{.fm-combinumeral} Twitter returns HTML,
unlike plain text, which Hugo should not escape.

[]{#CH09.htm#pgfId-1044136}[❹]{.fm-combinumeral} The rendering code is
used as it was before.

[]{#CH09.htm#pgfId-1013823 .calibre9}Next, we need to provide the tweet
URL. The following listing sets the URL in the content/\_index.html file
under the testimonials section in the front matter.

[]{#CH09.htm#pgfId-1013880}Listing 9.6 Adding a tweet URL
(content/\_index.md)

``` programlisting
testimonials: 
  ... 
  - tweet: https://twitter.com/atishay/status/1259605801968128000 
```

[]{#CH09.htm#pgfId-1038207}[Code checkpoint]{.fm-callout-head}
[[https://chapter-09-01.hugoinaction.com](https://chapter-09-01.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-01](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-01){.url}]{.fm-hyperlink}.

[]{#CH09.htm#pgfId-1013942 .calibre9}With these changes, we have enabled
support for embedding tweets into our website's testimonials section
(figure 9.3), and we did it so that these tweets match the website's
design! When Hugo compiles the website, missing tweets are fetched and
updated. We can add new tweets easily by just editing a string in the
testimonials portion of the front matter for the website's index page.
[]{#CH09.htm#marker-1014032 .calibre9}[]{#CH09.htm#marker-1014035
.calibre9}[]{#CH09.htm#marker-1014037
.calibre9}[]{#CH09.htm#marker-1014039
.calibre9}[]{#CH09.htm#marker-1014041 .calibre9}

![CH09_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F03_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1051546}Figure 9.3 Testimonials with embedded tweets
as well as hardcoded strings presented in the same user interface

### []{#CH09.htm#pgfId-1014057}9.2.4 Managing content lifetimes {#CH09.htm#sigil_toc_id_191 .fm-head1}

[]{#CH09.htm#pgfId-1014092 .calibre9}[]{#CH09.htm#marker-1014082
.calibre9}[]{#CH09.htm#marker-1014084
.calibre9}[]{#CH09.htm#marker-1014086
.calibre9}[]{#CH09.htm#marker-1014088 .calibre9}Although we are getting
the data from Twitter successfully now, we need to ensure that our
website can build if Twitter is down and that our build performance
stays good. Unlike Hugo Modules, which have a strong set of versioning
and content guarantees ensured by the go.sum file, HTTP(s) APIs are, in
general, open. The content can change at any time, and the API does not
provide any guarantees for consistency and availability. We should
inspect every request that we make.

[]{#CH09.htm#pgfId-1014097 .calibre9}We also have a huge performance
tradeoff when calling APIs. Network calls cannot provide subsecond
render times. The solution for slow network calls is caching. Hugo can
perform the network call once and keep the response on disk until
changes are needed. By default, Hugo caches the downloaded resources at
a hidden location, just like it does with modules. We can override both
the default cache interval and the cache location using the Hugo
configuration. Let's add a caches.yaml file
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/01](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/01){.url}]{.fm-hyperlink})
to the config/ \_default folder to control the caching of the
[getJSON]{.fm-code-in-text} response.

[]{#CH09.htm#pgfId-1014202 .calibre9}We will tell Hugo to cache the
response from []{#CH09.htm#marker-1014133 .calibre9}the
[getJSON]{.fm-code-in-text} function in the getJSON folder in the
resources directory as listing 9.7 shows. The
[resourceDir]{.fm-code-in-text} variable tells
[]{#CH09.htm#marker-1014159 .calibre9}Hugo to use the value of
[]{#CH09.htm#marker-1014165 .calibre9}the
[resourceDir]{.fm-code-in-text} configuration setting, which, by
default, points to the resources subfolder in the website root folder.
The [maxAge]{.fm-code-in-text} setting specifies
[]{#CH09.htm#marker-1014191 .calibre9}the cache duration. By setting
this to [-1]{.fm-code-in-text}, we inform Hugo to keep the response on
the disk forever. We can delete this folder or its subfolders manually
if we want to update the content of the cache. The first time we build
the website after updating the caching settings, the build takes a bit
more time than usual to fetch the information from the network and store
it on disk.

[]{#CH09.htm#pgfId-1014262}Listing 9.7 Updating the cache location
(config/\_default/caches.yaml)

``` programlisting
getjson: 
  dir: ':resourceDir/getJSON' 
  maxAge: -1 
```

[]{#CH09.htm#pgfId-1014344}[Note]{.fm-callout-head} We can also override
the default hidden folder for modules, which will be an alternative to
the \_vendor folder. We can also change the visible folder for images,
CSS, and JavaScript files cached via Hugo Pipes in the caches.yaml file.

[]{#CH09.htm#pgfId-1038133}[Code checkpoint]{.fm-callout-head}
[[https://chapter-09-02.hugoinaction.com](https://chapter-09-02.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-02](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-02){.url}]{.fm-hyperlink}.

[]{#CH09.htm#pgfId-1014350 .calibre9}We should see a subfolder named
getJSON inside the resources folder with a single file containing the
contents of the API response. The next time we run the Hugo build, it
will not contact the API but will use the cached contents in this file.
We can delete the cache file if we want Hugo to request the API again.
[]{#CH09.htm#marker-1014440 .calibre9}[]{#CH09.htm#marker-1014443
.calibre9}[]{#CH09.htm#marker-1014445
.calibre9}[]{#CH09.htm#marker-1014447
.calibre9}[]{#CH09.htm#marker-1014449
.calibre9}[]{#CH09.htm#marker-1014451
.calibre9}[]{#CH09.htm#marker-1014453 .calibre9}

::: fm-sidebar-block
[]{#CH09.htm#pgfId-1051638 .calibre9}Exercise 9.2

[]{#CH09.htm#pgfId-1051639}By moving the cache location of the
[getJSON]{.fm-code-in-text1} responses to a local folder, we
(enable/disable) data reuse across our projects but (enable/disable)
reuse for the same project across machines.
:::

## []{#CH09.htm#pgfId-1014498}9.3 Hugo and REST APIs {#CH09.htm#sigil_toc_id_192 .fm-head}

[]{#CH09.htm#pgfId-1014517 .calibre9}[]{#CH09.htm#marker-1014509
.calibre9}[]{#CH09.htm#marker-1014511
.calibre9}[]{#CH09.htm#marker-1014513 .calibre9}The getJSON API that we
just used is a wrapper over an HTTP GET API. The Representational State
Transfer (REST) is the software architectural style built around the
concept of stateless API calls using HTTP verbs like GET, POST, DELETE,
HEAD, PUT, and PATCH to perform actions on resources. The main verbs in
a RESTful API are as follows:

-   []{#CH09.htm#pgfId-1014522 .calibre9}GET downloads resources from a
    server at a given URL.

-   []{#CH09.htm#pgfId-1014536 .calibre9}POST allows us to create and
    send new content.

-   []{#CH09.htm#pgfId-1014546 .calibre9}PUT enables providing updates
    to an existing resource.

-   []{#CH09.htm#pgfId-1014556 .calibre9}DELETE removes content.

[]{#CH09.htm#pgfId-1014566 .calibre9}REST has other verbs that web
developers use rarely. Hugo's [getJSON]{.fm-code-in-text} sends an HTTP
GET request and expects the response in the JSON format. While it
primarily downloads, we can provide data via query parameters if needed.
Because Hugo runs while compiling, only GET makes sense in the context
of Hugo. Actions like creating or deleting need to be performed in
response to user activity on the website. Therefore, the focus of Hugo
is on GET and not on PUT, POST, or DELETE. PUTs and DELETEs require
JavaScript to chain together retrieval and then perform the edit and
delete operations.

[]{#CH09.htm#pgfId-1014581 .calibre9}There are definite use cases for a
website developer where data needs to be edited, updated, or deleted.
The Jamstack takes care of this through HTML forms and JavaScript on the
client. Hugo supports the API and JavaScript layers by making it easy to
operate with them. HTML forms are rich in features and powerful.
Browsers perform the bulk of the work including client-side validations,
data encoding, communication, and error handling. Hugo makes form
generation simple, and the Jamstack provides the means to use forms with
minimal work and with a low overhead. In the following sections, we will
discuss how we can use Hugo to utilize HTML forms efficiently and how
forms and [getJSON]{.fm-code-in-text} can provide a lot of power.
[]{#CH09.htm#marker-1014592 .calibre9}[]{#CH09.htm#marker-1014595
.calibre9}[]{#CH09.htm#marker-1014597 .calibre9}

## []{#CH09.htm#pgfId-1014603}9.4 Creating a contact page the Jamstack way {#CH09.htm#sigil_toc_id_193 .fm-head}

[]{#CH09.htm#pgfId-1014622 .calibre9}[]{#CH09.htm#marker-1014614
.calibre9}[]{#CH09.htm#marker-1014616
.calibre9}[]{#CH09.htm#marker-1014618 .calibre9}The Contact Us page for
the Acme Corporation website located in the folder /contact still shows
placeholder content. The Contact Us page lists the means to contact Acme
Corporation and provides a Contact Us form to fill in to send a
question. We will present this form in plain HTML and configure a
service to handle submissions.

[]{#CH09.htm#pgfId-1014627 .calibre9}Forms need server-side code to
handle submissions, which traditionally needed maintaining a 24/7
running server that can respond to requests. We can embed prebuilt forms
hosted by Google Forms or Wufoo that perform this handling if we're
looking for a simple solution. Designing these forms to match our
website is not easy, and these make additional requests to the host
services, adding performance penalties and leaking usage data. These
prebuilt forms are not pregenerated and do not conform to the ideology
of the Jamstack.

[]{#CH09.htm#pgfId-1014633 .calibre9}Services like Netlify forms
([[https://www.netlify.com/products/forms/](https://www.netlify.com/products/forms/){.url}]{.fm-hyperlink}),
Formspree
([[https://formspree.io/](https://formspree.io/){.url}]{.fm-hyperlink}),
FormKeep
([[https://formkeep.com/](https://formkeep.com/){.url}]{.fm-hyperlink}),
and Getform
([[https://getform.io/](https://getform.io/){.url}]{.fm-hyperlink})
provide us with a way to have customized forms, which we can use with
our design. With these services, we can offload the cumbersome
maintenance tasks of maintaining a backend to a third party and focus on
our aesthetics and content. In this section, we will design a fully
functional Contact Us form for our website.

### []{#CH09.htm#pgfId-1014643}9.4.1 Setting up a contact form {#CH09.htm#sigil_toc_id_194 .fm-head1}

[]{#CH09.htm#pgfId-1014664 .calibre9}[]{#CH09.htm#marker-1036223
.calibre9}[]{#CH09.htm#marker-1036224
.calibre9}[]{#CH09.htm#marker-1036225
.calibre9}[]{#CH09.htm#marker-1036226 .calibre9}The Contact Us page
needs different HTML than a regular page. We will define a new layout in
AcmeTheme. We use a layout because the contact page is not a section,
and it does not have list pages to build the page shown in figure 9.4
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/02](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/02){.url}]{.fm-hyperlink}).

![CH09_F04_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F04_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1051658}Figure 9.4 The Contact Us page with a static
image for the map, a CSS-positioned marker, and a basic HTML form. (Map
from OpenGeoFiction.)

[]{#CH09.htm#pgfId-1014698 .calibre9}Many contact pages embed a map of
the office location to help readers looking for physical addresses.
Embedding a live map from a mapping service has performance and privacy
issues. We will use a screenshot of the map instead, which is
pregenerated. Physical offices rarely change locations, and updating the
image when that happens is not too hard. To begin, we will add a new
layout for the contact page with the map and the form as the following
listing shows. The code uses embedded images, rather than mapping to a
website, and a simple CSS form that's custom styled for this page.

[]{#CH09.htm#pgfId-1014769}Listing 9.8 Creating a contact form
(AcmeTheme/layouts/\_default/contact.html)

``` programlisting
{{define "bodyClass"}}contact page{{end}}          ❶
{{define "body"}} 
<main> 
  {{$img := .Resources.GetMatch "cover.*"}} 
  {{ if $img }} 
  <img alt="{{.Title}}" width="1920" height="400" 
      loading="lazy"  
      src="{{($img.Fill                            ❷
        "1920x400 Center").Permalink}}">            ❷
  {{ end }} 
  {{with .Title}} 
    <h1> 
      {{.}} 
    </h1> 
  {{end}} 
  
  <div class="contact-box"> 
    <div class="content"> 
      {{.Content}}                              ❸
    </div> 
  
    <form>                                      ❹
        <div> 
          <label for="name">Name:</label> 
          <input id="name" name="name" type="text" required> 
        </div> 
        <div> 
          <label for="email">Email:</label> 
          <input id="email" name="email" type="email" required> 
        </div> 
        <div> 
          <label id="message" for="message">Message:</label> 
          <textarea name="message" cols="50" rows="10" 
            required></textarea> 
        </div> 
        <div> 
          <button type="submit">Send</button> 
        </div> 
    </form> 
  </div> 
</main> 
{{end}} 
```

[]{#CH09.htm#pgfId-1043777}[❶]{.fm-combinumeral} Adds a class to get the
correct CSS

[]{#CH09.htm#pgfId-1043798}[❷]{.fm-combinumeral} Embeds the map as an
image (cover.\*) and ensures that the image's center is visible when
cropping. The address marker is assumed to be at the center of the
image.

[]{#CH09.htm#pgfId-1043815}[❸]{.fm-combinumeral} This displays the
content provided in Markdown format above the contact form.

[]{#CH09.htm#pgfId-1043832}[❹]{.fm-combinumeral} The form is plain HTML.

[]{#CH09.htm#pgfId-1015687 .calibre9}Next, we move contact.md to a page
bundle and add an image and some markup content as listing 9.9 shows.
The code in this listing moves the contact layout and fills the title
and content with meaningful data. There are blank spaces to create a new
line after each line of the address field.

[]{#CH09.htm#pgfId-1015744}Listing 9.9 Changing the contact.md file
(content/contact/index.md)

``` programlisting
--- 
title: Contact Us 
layout: contact 
--- 
  
Get in touch  
------------ 
  
We pride ourselves on the quality of our work. You can reach us for 
information about our products, sales, queries, concerns, or feedback. 
  
Acme Corporation, 
4398 Central Ave, #420, 
Stanton PE, 
Archanta 
  
 (999) 999 9999 
 contact@example.org 
```

[]{#CH09.htm#pgfId-1015838}[Note]{.fm-callout-head} This form is not
functional yet. It does not send the data anywhere when submitted.

[]{#CH09.htm#pgfId-1038281}[Code checkpoint]{.fm-callout-head}
[[https://chapter-09-03.hugoinaction.com](https://chapter-09-03.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH09.htm#marker-1038346}[]{#CH09.htm#marker-1038347}[]{#CH09.htm#marker-1038348}[]{#CH09.htm#marker-1038349}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-03](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-03){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH09.htm#pgfId-1051690 .calibre9}Exercise 9.3

[]{#CH09.htm#pgfId-1051691}HTTP PUT requests that modify existing data
are best handled at the \_\_\_\_\_\_\_\_\_\_ layer of the Jamstack.
:::

### []{#CH09.htm#pgfId-1015962}9.4.2 Choosing a form provider {#CH09.htm#sigil_toc_id_195 .fm-head1}

[]{#CH09.htm#pgfId-1015989 .calibre9}[]{#CH09.htm#marker-1015973
.calibre9}[]{#CH09.htm#marker-1015975
.calibre9}[]{#CH09.htm#marker-1015977
.calibre9}[]{#CH09.htm#marker-1015979 .calibre9}The form data currently
is not being submitted anywhere. We have a choice to build our own
service with a custom API for form handling or to choose one from a
third party. Unless it is our core competency or there is a lack of good
third-party options available (due to cost, features, or flexibility),
*it is not recommended to build services*. We will use a third-party
form provider to provide support for form APIs. When looking for a form
service for a Hugo-based website, it is a good idea to look for services
that have the following characteristics:

-   []{#CH09.htm#pgfId-1015998 .calibre9}Is stable, well-maintained, and
    not likely to go out of business.

-   []{#CH09.htm#pgfId-1016012 .calibre9}Provides support for
    dynamically generating forms through some API.

-   []{#CH09.htm#pgfId-1016022 .calibre9}Provides the ability to access
    form submissions through an API.

-   []{#CH09.htm#pgfId-1016032 .calibre9}Provides a good set of
    integrations with other services (e.g., email) to use the data to
    trigger actions easily.

[]{#CH09.htm#pgfId-1016042 .calibre9}There are many form providers. Each
brings its own set of features for integration to other services and has
different price points and features. You can get an updated list of
various form providers at
[[https://serverless.css-tricks.com/services/form](https://serverless.css-tricks.com/services/forms/){.url}]{.fm-hyperlink}s.

[]{#CH09.htm#pgfId-1016059}[Note]{.fm-callout-head} Adding APIs
increases maintenance work as the third-party APIs can change, become
expensive, or go away. First-party APIs have similar risks with the
underlying framework and with the hosting provider, as well as potential
security risks depending on the quality of our code and its
dependencies. We can also find a database as a service and a function as
a service in most cloud providers and use those to create our own
Jamstack-based form backend. If we use these, we will have to deal with
spam submissions ourselves.
[]{#CH09.htm#marker-1016061}[]{#CH09.htm#marker-1016064}[]{#CH09.htm#marker-1016066}[]{#CH09.htm#marker-1016068}

### []{#CH09.htm#pgfId-1016074}9.4.3 Using Netlify forms for the Contact Us page {#CH09.htm#sigil_toc_id_196 .fm-head1}

[]{#CH09.htm#pgfId-1016095 .calibre9}[]{#CH09.htm#marker-1016085
.calibre9}[]{#CH09.htm#marker-1016087
.calibre9}[]{#CH09.htm#marker-1016089
.calibre9}[]{#CH09.htm#marker-1016091 .calibre9}Netlify is a
one-stop-shop for Jamstack-based websites. If we are already using
Netlify hosting, it does not make sense to add additional dependencies.
Netlify forms provide a generous free tier, and it meets all our needs
for a form solution as used in this book. For readers not using Netlify
for form hosting, we will use an alternative form host in the next
section.

[]{#CH09.htm#pgfId-1016100 .calibre9}To host our contact form in
Netlify, we need to add a [netlify]{.fm-code-in-text} attribute for
[]{#CH09.htm#marker-1016111 .calibre9}our HTML form as the following
listing shows. Because Netlify also provides builds and hosting support,
it can parse the form and dynamically generate the form based on that
data.

[]{#CH09.htm#pgfId-1016172}Listing 9.10 Enabling Netlify forms
(AcmeTheme/layouts/\_default/contact.html)

``` programlisting
<form netlify="true" name="Contact"> 
```

[]{#CH09.htm#pgfId-1016244 .calibre9}The [name]{.fm-code-in-text}
attribute identifies []{#CH09.htm#marker-1016255 .calibre9}the form in
the Netlify UI. Note that Netlify (figure 9.5) provides emails for form
submissions as well as API and graphical access for all of them.

[]{#CH09.htm#pgfId-1038371}[Code checkpoint]{.fm-callout-head}
[[https://chapter-09-04.hugoinaction.com](https://chapter-09-04.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-04](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-04){.url}]{.fm-hyperlink}.

![CH09_F05_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F05_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1051710}Figure 9.5 The contact form submissions with
Netlify. When forms are submitted, Netlify makes them accessible on the
website and can notify the creator to take action on them.

::: fm-sidebar-block
[]{#CH09.htm#pgfId-1051740 .calibre9}Preventing spam

[]{#CH09.htm#pgfId-1051741}If spam submissions on the forms become a
problem, Netlify provides two options to work around this:

-   []{#CH09.htm#pgfId-1051743}[]{#CH09.htm#marker-1032221}*Captchas*---Captchas
    []{#CH09.htm#marker-1051742}are challenges built so that humans can
    solve them quickly, while bots need many computational resources to
    do so. You can add the []{#CH09.htm#marker-1051744}parameter
    [data-netlify-recaptcha]{.fm-code-in-text1}[]{#CH09.htm#marker-1032223}
    to []{#CH09.htm#marker-1051745}the [form]{.fm-code-in-text1}
    tag[]{#CH09.htm#marker-1032224} and provide
    []{#CH09.htm#marker-1051746}a [div]{.fm-code-in-text1}
    tag[]{#CH09.htm#marker-1032225} with the same attribute to enable
    captchas.

-   []{#CH09.htm#pgfId-1051748}*Honeypots*---Although
    []{#CH09.htm#marker-1051747}[]{#CH09.htm#marker-1032226}captchas are
    a potent means to prevent spam, they are not very user-friendly.
    Bots that generate the most spam parse only HTML. CSS layouts are
    expensive, so many spambots skip CSS altogether. To identify the
    spam posts filled by bots, we can add a dummy field that is not
    expected to be filled by humans (hidden from view using CSS) but
    completed by the bots, which do not understand CSS. We can add an
    HTML []{#CH09.htm#marker-1051749}attribute,
    [netlify-honeypot]{.fm-code-in-text1}[]{#CH09.htm#marker-1032228},
    to a form field to make Netlify treat this as a honeypot. If your
    website does not have high traffic, you can try the honeypot field
    first to see if it meets your needs.
:::

[]{#CH09.htm#pgfId-1016507 .calibre9}With these changes, we have a
working contact form on the Contact Us page. Any website visitor can go
to this page and fill in the form that then triggers an email to the
website administrator via the Netlify Forms service. Netlify also keeps
a copy of all form submissions. []{#CH09.htm#marker-1016509
.calibre9}[]{#CH09.htm#marker-1016512
.calibre9}[]{#CH09.htm#marker-1016514
.calibre9}[]{#CH09.htm#marker-1016516 .calibre9}

### []{#CH09.htm#pgfId-1016522}9.4.4 Using Formspree for contact forms {#CH09.htm#sigil_toc_id_197 .fm-head1}

[]{#CH09.htm#pgfId-1016543 .calibre9}[]{#CH09.htm#marker-1016533
.calibre9}[]{#CH09.htm#marker-1016535
.calibre9}[]{#CH09.htm#marker-1016537
.calibre9}[]{#CH09.htm#marker-1016539 .calibre9}An alternative to
Netlify Forms is Formspree, which supports forms that we can use from
any website. Formspree is an independent alternative that only focuses
on forms and does not support hosting. It provides integration with
services like Zendesk to create support tickets, Mailchimp to manage
mailing lists, Stripe to take payments, and so on. You can also export
the submissions to Google Docs or to Airtable for further processing.
These integrations can save a significant amount of time while, in
parallel, keeping our website lean.

[]{#CH09.htm#pgfId-1016548 .calibre9}Because Formspree does not compile
Hugo's source code, there is no way to know automatically what and how
many forms are needed. Therefore, to create forms using Formspree, we
need to manually make those forms on the Formspree website. The best
part of Formspree is that we need to specify minimal information when we
set up a form, and everything else can be dynamic. To create a contact
form with Formspree, follow these steps:

1.  []{#CH09.htm#pgfId-1016554 .calibre9}After creating an account,
    click New Form to set up a new form (figure 9.6).

    ![CH09_F06_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F06_Jain.png){.calibre1}\

    []{#CH09.htm#pgfId-1051768}Figure 9.6 When logged into Formspree, we
    can click the New Form button to create a new form.

2.  []{#CH09.htm#pgfId-1016614 .calibre9}Fill in the Create Form dialog
    and click Create Form (figure 9.7).

    ![CH09_F07_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F07_Jain.png){.calibre1}\

    []{#CH09.htm#pgfId-1051813}Figure 9.7 The Create Form dialog asks
    for basic information that's required to create a form in Formspree.

3.  []{#CH09.htm#pgfId-1016684 .calibre9}Your form is now ready, and we
    can copy the form URL to use later (figure 9.8).

![CH09_F08_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F08_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1051847}Figure 9.8 Getting the form code for
Formspree for our form. The form code is a part of the form endpoint in
the integration section of the form.

[]{#CH09.htm#pgfId-1038566 .calibre9}Once we have the URL, we can use
this in our form. For the code samples with this book, we will support
both Formspree and Netlify. You can choose to have just one form
service. We will use Hugo's [if]{.fm-code-in-text} statement to
distinguish between Netlify and Formspree. (In development mode, we will
exclusively use Formspree.) Hugo has a function
[]{#CH09.htm#marker-1016779 .calibre9}called [getenv]{.fm-code-in-text}
that gets environment variables; Netlify always sets the
[NETLIFY]{.fm-code-in-text} environment variable in its build
environment. To use the [NETLIFY]{.fm-code-in-text} environment
variable, we will need to enable it in Hugo's security configuration as
shown in the following code snippet:

``` programlisting
.Adding security config for getenv (config/_default/security.yaml)
----
funcs:
  getenv:
    - NETLIFY
----
```

[]{#CH09.htm#pgfId-1036763 .calibre9}The following listing shows how to
add Formspree to the Contact Us form for the Acme Corporation website.

[]{#CH09.htm#pgfId-1016850}Listing 9.11 Adding Formspree
(AcmeTheme/layouts/\_default/contact.html)

``` programlisting
{{if getenv "NETLIFY" }}                 ❶
<form netlify="true" name="Contact"> 
{{ else }} 
<form action="https://formspree.io/f/<Your Formspree code>" method="post"> 
{{ endif }} 
```

[]{#CH09.htm#pgfId-1043711}[❶]{.fm-combinumeral} Uses getenv to check
environment variables

[]{#CH09.htm#pgfId-1017041}[Note]{.fm-callout-head} Readers should
choose one form service and stick with it. Two services are present in
the book for demonstrating how simple it is to switch between services.
We are adding dependencies to provide ourselves with the flexibility,
should the need arise, to switch service providers, by being as close as
possible to the HTML specification. You can set the
[NETLIFY]{.fm-code-in-text1} environment variable locally. This will not
break the website.

[]{#CH09.htm#pgfId-1017047 .calibre9}To isolate the Formspree-related
changes across websites using the same theme, we should move the
Formspree ID in the URL to the website configuration file and use
parameters instead. The following listing shows how.

[]{#CH09.htm#pgfId-1017104}Listing 9.12 Moving a Formspree ID
(AcmeTheme/layouts/\_default/contact.html)

``` programlisting
{{if getenv "NETLIFY" }} 
<form netlify="true" name="Contact"> 
{{ else }} 
<form action="https://formspree.io/f/{{.Param "contact"}}" method="post"> 
{{ end }} 
```

[]{#CH09.htm#pgfId-1017236 .calibre9}We can provide the Contact Us URL
on the contact page itself. The next listing provides the code to do
this in the contact page.

[]{#CH09.htm#pgfId-1017293}Listing 9.13 Adding the Formspree code to
contact (content/contact/index.md)

``` programlisting
contact: <Your Formspree code> 
```

[]{#CH09.htm#pgfId-1017335 .calibre9}Formspree also supports setting a
field as a reply to the email address for any email going to Formspree.
That way, we can directly reply to the sender. The following listing
changes the email field to [\_replyto]{.fm-code-in-text} for Formspree
to understand.

[]{#CH09.htm#pgfId-1017401}Listing 9.14 A reply to address
(AcmeTheme/layouts/\_default/contact.html)

``` programlisting
<input id="email" 
 {{ if getenv "NETLIFY" }} 
 name="email" 
{{ else }} 
name="_replyto" 
{{ end }} 
type="email" required> 
```

[]{#CH09.htm#pgfId-1038496}[Code checkpoint]{.fm-callout-head}
[[https://chapter-09-05.hugoinaction.com](https://chapter-09-05.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-05](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-05){.url}]{.fm-hyperlink}.

[]{#CH09.htm#pgfId-1017531 .calibre9}With this change, we are ready to
receive emails from the Contact Us page via Formspree, which provides
email as well as a graphical view of all submissions. Figure 9.9 shows
the Submissions page on Formspree.

![CH09_F09_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F09_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1051881}Figure 9.9 The contact form submissions on
Formspree. Formspree provides API access, a submissions page, as well as
email notifications for forms. You can also use Formspree integrations
to perform additional actions.

[]{#CH09.htm#pgfId-1017635}[Note]{.fm-callout-head} The integration
mechanism for most form websites is the same. If we replace Formspree
with GetForm or FormKeep, we need to get the action URL for that
service, and everything else should be the same.

[]{#CH09.htm#pgfId-1017675}[tip]{.fm-callout-head} We can submit
Formspree forms by default from any website. We recommend that you
restrict it to your domain in the form settings to prevent misuse. You
can also enable captchas in Formspree, just like in Netlify.
[]{#CH09.htm#marker-1017677}[]{#CH09.htm#marker-1017680}[]{#CH09.htm#marker-1017682}[]{#CH09.htm#marker-1017684}[]{#CH09.htm#marker-1017686}[]{#CH09.htm#marker-1017688}[]{#CH09.htm#marker-1017690}

## []{#CH09.htm#pgfId-1017696}9.5 Building dynamic surveys {#CH09.htm#sigil_toc_id_198 .fm-head}

[]{#CH09.htm#pgfId-1017713 .calibre9}[]{#CH09.htm#marker-1017707
.calibre9}[]{#CH09.htm#marker-1017709 .calibre9}The Contact Us form is
mostly plain HTML and does not show the potential of combining Hugo's
template system with the benefits of dynamically generated forms. In
this section, we will see how the data-driven nature of Hugo, coupled
with the dynamic form providers of the Jamstack, makes a potent
combination. For this, let's look at a survey.

[]{#CH09.htm#pgfId-1017718 .calibre9}A *survey* usually
[]{#CH09.htm#marker-1017729 .calibre9}consists of a dynamic number of
questions with multiple answers or a plain text field to fill in the
answers. YAML is the perfect language for creating a survey form. It
keeps data together and moves the presentation logic to the template. A
proper survey should have content and presentation wholly separated. The
content consists of questions and answers that should be present in the
markup document, whereas the layout and conversion to the final HTML
form should shape the layout.

[]{#CH09.htm#pgfId-1017739 .calibre9}The questions in the survey content
file are presented as a plain list in YAML, with options provided as an
answer where available
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/03](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/03){.url}]{.fm-hyperlink}).
Listing 9.15 provides the code for the content file. Note that Hugo
generates the survey dynamically based on the supplied data. Questions
with answers turn into dropdowns, and simple text replies become text
boxes.

[]{#CH09.htm#pgfId-1017814}Listing 9.15 The content file for a survey
form (content/survey/random.md)

``` programlisting
--- 
title: Random questions from Hugo In Action 
survey: 
- question: Do you like websites that are slow to load? 
  answer: [Yes, No] 
- question: Rate your confidence using Hugo to build fast websites. 
  answer: [1 (Very Low),2,3,4,5 (Very High)] 
- question: What is the answer to life, the universe, and everything? 
- question: Any further comments? 
--- 
  
Please answer a random survey we built in Hugo in Action. 
```

[]{#CH09.htm#pgfId-1017996 .calibre9}We will create a form by looping
through the list of questions and then creating a dropdown if the answer
field is present and a text box if not. We could alternatively add a key
called [type]{.fm-code-in-text} to []{#CH09.htm#marker-1017959
.calibre9}define the form element we want to use for this. Because there
will be multiple surveys on the website, the natural place to put one is
in a custom section with a new content type. For that, we will define a
new content type []{#CH09.htm#marker-1017965 .calibre9}called
[survey]{.fm-code-in-text} and place a single.html template inside it.
With this template, we can loop through the questions provided in the
front matter's survey section and create a dropdown when there are
answers available (HTML [\<select\>]{.fm-code-in-text} element);
otherwise, we resort to a text box (HTML [\<input\>]{.fm-code-in-text}
element). The code in the following listing parses the front matter's
survey parameters and runs that through a loop to create the form
entries.

[]{#CH09.htm#pgfId-1018056}Listing 9.16 Form to create a survey
(AcmeTheme/layouts/survey/single.html)

``` programlisting
{{define "bodyClass"}} page survey{{end}                 ❶
  
{{ define "body" }} 
<main> 
  <h2>{{.Title}}</h2>                                    ❷
{{.Content}}                                             ❷
{{if getenv "NETLIFY" }} 
<form name="{{.Title}}" netlify="true"> 
{{ else }} 
<form action="https://formspree.io/f/{{.Param "form"}}" 
      method="post"> 
{{ end }} 
  <ol> 
{{ range $index, $item := .Params.survey }}               ❸
  <li>  
  <label for="question{{$index}}">{{$item.question}}</label> 
  {{if $item.answer}}                                     ❹
    <select id="question{{$index}}" 
      name="question{{$index}}" required> 
      <option value="" ></option>                         ❺
      {{range $item.answer}} 
        <option value="{{.}}" name="{{.}}">{{.}}</option> 
      {{end}} 
    </select> 
  {{else}}                                                ❻
    <input id="question{{$index}}" 
      name="question{{$index}}" type="text" required> 
  {{end}} 
  </li> 
{{ end }}                                                 ❸
  </ol> 
  <button type="submit">Submit</button> 
</form> 
</main> 
{{ end }} 
```

[]{#CH09.htm#pgfId-1043114}[❶]{.fm-combinumeral} Defines the class for
CSS styling

[]{#CH09.htm#pgfId-1043135}[❷]{.fm-combinumeral} Provides Markdown
content and a title from the header

[]{#CH09.htm#pgfId-1043152}[❸]{.fm-combinumeral} Loops through the
survey section in the front matter

[]{#CH09.htm#pgfId-1043176}[❹]{.fm-combinumeral} Creates the HTML
\<select\> tag if the question has options for answers

[]{#CH09.htm#pgfId-1043193}[❺]{.fm-combinumeral} Does not select
anything by default \...

[]{#CH09.htm#pgfId-1043210}[❻]{.fm-combinumeral} \... else creates the
\<input\> tag for a text box.

[]{#CH09.htm#pgfId-1018996 .calibre9}With this small template, we can
generate as many surveys as we want by placing Markdown documents in the
survey subfolder for the content folder in our website. Note that if we
use Formspree, we will need to create a new form ID for each survey and
provide its code. The survey for random.md should be present at
http:[//]{.fm-hyperlink}localhost :1313/survey/random/ (figure 9.10).

::: fm-sidebar-block
[]{#CH09.htm#pgfId-1051915 .calibre9}Exercise 9.4

[]{#CH09.htm#pgfId-1051916}The form service approach of the Jamstack
allows us to decouple the \_\_\_\_\_\_\_\_\_, \_\_\_\_\_\_\_\_\_, and
the form handling layers of the HTML form submission process.
:::

![CH09_F10_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F10_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1051939}Figure 9.10 Dynamic surveys created with
Hugo. Combining a backend form service, we can get dynamically generated
forms, which provide a considerable amount of flexibility including
creating forms like surveys based on dynamic Markdown content added by
the content author.

[]{#CH09.htm#pgfId-1019066}[Note]{.fm-callout-head} The ability to
create dynamic forms in a website is a compelling feature. A content
author can create surveys using plain Markdown and YAML. The form
contents are dynamic, and we can change them after publishing the form
without involving a single change to the theme code.

[]{#CH09.htm#pgfId-1019072 .calibre9}As mentioned, to use Formspree, we
will need to add the Formspree ID to the front matter. The following
listing shows how to add this ID.

[]{#CH09.htm#pgfId-1019129}Listing 9.17 Adding the Formspree ID for each
form (content/survey/random.md)

``` programlisting
form: <Formspree id>
```

[]{#CH09.htm#pgfId-1038610}[Code checkpoint]{.fm-callout-head}
[[https://chapter-09-06.hugoinaction.com](https://chapter-09-06.hugoinaction.com){.url}]{.fm-hyperlink},
and source []{#CH09.htm#marker-1038665}[]{#CH09.htm#marker-1038666}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-06](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-06){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH09.htm#pgfId-1051971 .calibre9}Marking surveys as unlisted

[]{#CH09.htm#pgfId-1051972}Note that with this change, the survey pages
now show up in the list of pages as we navigate through
[site.Pages]{.fm-code-in-text1}. Survey pages are mainly unlisted. To
ensure the survey pages are unlisted, we can specify build parameters to
Hugo that set []{#CH09.htm#marker-1051973}the [list]{.fm-code-in-text1}
setting[]{#CH09.htm#marker-1032416} to [false]{.fm-code-in-text1} in the
[Surveys]{.fm-code-in-text1} section. The following code snippet
disables the index listing for the survey pages.

``` programlisting
--- 
title: Surveys 
cascade: 
  _build: 
    list: false      ❶
--- 
  
Please use the survey link provided in the email to access the survey. 
```

[]{#CH09.htm#pgfId-1051998}[❶]{.fm-combinumeral} Doesn't include any
pages in the list page (via cascade)

\

[]{#CH09.htm#pgfId-1052000}With this change, the survey pages will have
URLs, but they will not show up in the page lists like
[site.GetPage]{.fm-code-in-text1}. Note that unless the survey section
is disabled in robots.txt, search engines will index the survey links.
Also, if we want to have random URLs for surveys, we can use
[]{#CH09.htm#marker-1052001}the [slug]{.fm-code-in-text1}
key[]{#CH09.htm#marker-1034204} in the front matter to define our custom
URLs.
:::

![CH09_F11_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F11_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1052022}Figure 9.11 No contest! Bob discovers the
joys of the Jamstack. He moves the survey component over to this new
approach and likes it so much that he declares to the management that
they should move to the new stack.

## []{#CH09.htm#pgfId-1019461}9.6 Commenting using the Jamstack {#CH09.htm#sigil_toc_id_199 .fm-head}

[]{#CH09.htm#pgfId-1019494 .calibre9}[]{#CH09.htm#marker-1019486
.calibre9}[]{#CH09.htm#marker-1019488
.calibre9}[]{#CH09.htm#marker-1019490 .calibre9}We have gone through two
distinct concepts around APIs so far: fetching data at compile time
using APIs and submitting data at run time using a web form. The two
together can provide a powerful solution to include user-generated
content in a website. Let's combine a form-based API submission and a
get-based API access to create a commenting system for our website.

[]{#CH09.htm#pgfId-1019499 .calibre9}Although Hugo provides native
support for embedding the Disqus
([[https://disqus.com](https://disqus.com){.url}]{.fm-hyperlink})
comment system, Disqus is not static and loads JavaScript to get the
information needed to display and render comments. The flexibility of
dynamic forms coupled with JSON APIs can make an effective commenting
system for our websites.

### []{#CH09.htm#pgfId-1019506}9.6.1 Displaying a comment form {#CH09.htm#sigil_toc_id_200 .fm-head1}

[]{#CH09.htm#pgfId-1019525 .calibre9}[]{#CH09.htm#marker-1019517
.calibre9}[]{#CH09.htm#marker-1019519
.calibre9}[]{#CH09.htm#marker-1019521 .calibre9}We will create a new
partial for the comment system that will be easy-to-use across multiple
types of pages (the news and blog posts, for example). The HTML comment
form is similar to the Contact Us form that we had created earlier.
Figure 9.12 shows the comment form we will be setting up.

![CH09_F12_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F12_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1052056}Figure 9.12 The comment form can be generated
using a form element in Hugo. If we want one comment form for multiple
pages, we can use a hidden input field in the page's path.

[]{#CH09.htm#pgfId-1019540 .calibre9}The comment form is the same as the
Contact Us form, but instead of including it in a new layout or type, it
needs to be present in a partial. That way, we can reuse it in multiple
templates.

[]{#CH09.htm#pgfId-1019560 .calibre9}Because partials cannot access
variables outside their contexts, we must pass all the variables via the
partial context
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/04](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/04){.url}]{.fm-hyperlink}).
This partial can post to Netlify or Formspree depending on the
environment. The following listing adds a comment partial to display a
comment form on the website.

[]{#CH09.htm#pgfId-1019635}Listing 9.18 A comment partial
(AcmeTheme/layouts/partials/comment.html)

``` programlisting
<div class="comments"> 
<h2> Comments </h2> 
{{if getenv "NETLIFY" }} 
  <form netlify="true" name="{{.RelPermalink}}">     ❶
{{ else }} 
  <form action=                                      ❷
  "https://formspree.io/f/{{.FormspreeCommentForm}}" ❷
  method="post" >                                    ❷
{{ end }} 
  <div> 
    <label for="name">Name:</label> 
    <input id="name" name="name" type="text" required> 
  </div> 
  <div> 
    <label for="email"> 
Email:</label> 
    <input id="email" name="email" type="email" required> 
  </div> 
  <div> 
    <label for="message">Comment:</label> 
    <textarea id="message" name="message" cols="50" 
      rows="10" required></textarea> 
  </div> 
  <div> 
    <button type="submit">Send</button> 
  </div> 
</form> 
</div> 
```

[]{#CH09.htm#pgfId-1042910}[❶]{.fm-combinumeral} Using RelPermalink from
the params as \$.Page is not available in a partial.

[]{#CH09.htm#pgfId-1042931}[❷]{.fm-combinumeral} Gets the comment form
action for form providers like Formspree

[]{#CH09.htm#pgfId-1020351 .calibre9}We want to enable support for post
authors to disable comments on the page. Adding this feature is
straightforward. We use a parameter passed from the front matter that
can prevent this form from ever being generated. The following listing
disables commenting if the admin decides to do so.

[]{#CH09.htm#pgfId-1020408}Listing 9.19 Disabling commenting
(AcmeTheme/layouts/partials/comment.html)

``` programlisting
{{ if .Disabled  }} 
<div> 
  Comments have been disabled by the website administrator. 
</div> 
{{ else }} 
... 
{{ end }} 
```

[]{#CH09.htm#pgfId-1020489 .calibre9}Note that using the
[]{#CH09.htm#marker-1020478 .calibre9}name
[.Permalink]{.fm-code-in-text} creates a new form for each page. Because
Netlify can generate forms dynamically, we do not need to rely on one
form to provide everything. While this is a good approach, creating lots
of forms may not be desirable if our website has low volume. If we want
to use a form service like Formspree, the act of creating a form for
each page can be cumbersome. A simple solution is to use the same form
and pass the permalink as a form parameter via hidden HTML input and
then filter in Hugo. Let's see how the form section looks like now. The
following listing passes the form URL to Formspree.

[]{#CH09.htm#pgfId-1020549}Listing 9.20 Passing the form URL
(AcmeTheme/layouts/partials/comment.html)

``` programlisting
{{if getenv "NETLIFY" }} 
  <form netlify="true" name="Comments" >                           ❶
{{ else }} 
  <form action="https://formspree.io/f/{{.FormspreeCommentForm}}" 
  method="post"> 
{{ end }} 
  
<input type="hidden" name="url" value="{{.RelPermalink}}">         ❷
```

[]{#CH09.htm#pgfId-1042773}[❶]{.fm-combinumeral} Uses Comments as the
form name so we have a single form for all comments.

[]{#CH09.htm#pgfId-1042794}[❷]{.fm-combinumeral} Adds a hidden field
with the page URL

[]{#CH09.htm#pgfId-1020807 .calibre9}With this addition, we can now
include this form in the Blog pages in the main section to provide the
ability to send comments. This partial takes the action URL, which we
can get from the front matter or the website configuration, the link to
the page, and a Boolean flag to check if commenting has been disabled.
The following listing loads the comment form in a blog post.

[]{#CH09.htm#pgfId-1020864}Listing 9.21 Loading the comment form
(AcmeTheme/layouts/blog/single.html)

``` programlisting
{{ partial "comment.html" (dict 
    "FormspreeCommentForm" ($.Param "FormspreeCommentForm") 
    "RelPermalink" .Page.RelPermalink 
    "Disabled" ($.Param "CommentDisabled") 
) }} 
```

[]{#CH09.htm#pgfId-1020974 .calibre9}Next, we add the Formspree action
URL. The following listing adds a form ID that will be converted to a
URL in the template.

[]{#CH09.htm#pgfId-1021031}Listing 9.22 Adding a Formspree ID
(config/\_default/params.yaml)

``` programlisting
FormspreeCommentForm: <Your Formspree code> 
```

[]{#CH09.htm#pgfId-1021089 .calibre9}Note that we can use
[CommentDisabled: true]{.fm-code-in-text} in the front matter for
disabling comments on a single page. Placing it inside
[cascade]{.fm-code-in-text} in \_index.md disables comments in a section
or putting it in config/\_default/params.yaml disables comments for the
entire website.

[]{#CH09.htm#pgfId-1038697}[Code checkpoint]{.fm-callout-head}
[[https://chapter-09-07.hugoinaction.com](https://chapter-09-07.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH09.htm#marker-1038754}[]{#CH09.htm#marker-1038755}[]{#CH09.htm#marker-1038756}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-07](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-07){.url}]{.fm-hyperlink}.

### []{#CH09.htm#pgfId-1021098}9.6.2 Displaying comments {#CH09.htm#sigil_toc_id_201 .fm-head1}

[]{#CH09.htm#pgfId-1021214 .calibre9}[]{#CH09.htm#marker-1021206
.calibre9}[]{#CH09.htm#marker-1021208
.calibre9}[]{#CH09.htm#marker-1021210 .calibre9}Hugo can access the
comments submitted using the comment form during website compilation and
place those in the associated pages. Because Hugo generates the website
statically, the comment embedding process is not in real time. We can
use JavaScript to fetch comments to update the list in real time.
Another approach is to use a webhook by the form service, which rebuilds
the website when a comment is received. We will use the webhook trigger
in chapter 11.

[]{#CH09.htm#pgfId-1021219}Getting access to the forms API

[]{#CH09.htm#pgfId-1021229 .calibre9}[]{#CH09.htm#marker-1021230
.calibre9}Most form services require some form of authentication to
control access to the APIs. The following steps allow you to get the
Netlify access token. Note that because we are building the application
for a single website, a personal access token is enough for our needs.

[]{#CH09.htm#pgfId-1021238 .calibre9}1. Login to Netlify and click the
profile image on the top right to go to the User Settings page (figure
9.13).

![CH09_F13_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F13_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1052090}Figure 9.13 Netlify's User Settings option
lets us create an access token. This setting can be reached by clicking
the profile icon after logging in to Netlify.

[]{#CH09.htm#pgfId-1021298 .calibre9}2. Go to the Applications section
and click New Access Token (figure 9.14).

![CH09_F14_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F14_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1052124}Figure 9.14 From the Netlify User Settings,
we can get to the Applications section, which contains the Personal
Access Token subsection, where we can create new access tokens.

[]{#CH09.htm#pgfId-1021368 .calibre9}3. Provide a friendly name for the
token and click Generate Token (figure 9.15).

![CH09_F15_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F15_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1052158}Figure 9.15 For creating an access token in
Netlify, we need to provide a simple name in the Description field.

[]{#CH09.htm#pgfId-1021438 .calibre9}4. Copy the generated token (figure
9.16). The Netlify access token is now ready for use.

![CH09_F16_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F16_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1052192}Figure 9.16 The access token from Netlify is
available once we click the Generate Token button. It is not present in
Netlify, which stores only its hash in its database. If a copy of the
token is lost, we need to create a new token.

[]{#CH09.htm#pgfId-1021508 .calibre9}Formspree requires Gold membership
to access its API. Once you have the Gold Membership, you can go to the
form's settings and enable the HTTP API section, where you will find the
read-only API key that we can copy over (figure 9.17).
[]{#CH09.htm#marker-1021524 .calibre9}

![CH09_F17_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F17_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1052221}Figure 9.17 We can obtain the Formspree API
key by toggling the HTTP API option in the Settings page of a form in a
Formspree Gold account. We only need the read-only API key for this
book.

[]{#CH09.htm#pgfId-1021541}Securing the tokens

[]{#CH09.htm#pgfId-1021574 .calibre9}[]{#CH09.htm#marker-1021566
.calibre9}[]{#CH09.htm#marker-1021568
.calibre9}[]{#CH09.htm#marker-1021570 .calibre9}Best practices strongly
mention keeping the API key outside of the codebase so that it's not
accidentally lost or misused. Netlify allows storing secrets as
environment variables via the Netlify interface. To create an
environment variable in Netlify, follow these steps:

[]{#CH09.htm#pgfId-1021579 .calibre9}1. Go to the Settings page for the
Acme Corporation website within Netlify.

[]{#CH09.htm#pgfId-1021593 .calibre9}2. In the Build & Deploy section,
select Environment, then click Edit Variables (figure 9.18).

![CH09_F18_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F18_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1052255}Figure 9.18 We can keep secrets outside of
our code by storing them in Netlify environment variables, which we can
add from the Build & Deploy section of the website settings.

[]{#CH09.htm#pgfId-1021649 .calibre9}3. Create a new variable named
[COMMENTS_TOKEN]{.fm-code-in-text}, paste the token for this variable,
and click Save (figure 9.19).

![CH09_F19_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F19_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1052291}Figure 9.19 When editing environment
variables in Netlify, we can add more variables like
[COMMENTS_TOKEN]{.fm-code-in-figurecaption} that we'll use to fetch
comments.

[]{#CH09.htm#pgfId-1021719 .calibre9}In GitHub, we can use GitHub
encrypted secrets to secure the tokens. To create an environment
variable in GitHub, follow these steps:

[]{#CH09.htm#pgfId-1021739 .calibre9}1. In the GitHub repository's
Settings page, go to the Secrets section and click New Secret (figure
9.20).

![CH09_F20_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F20_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1052325}Figure 9.20 We can create GitHub secrets in
the Secrets section in the repository settings.

[]{#CH09.htm#pgfId-1021799 .calibre9}2. Create a new variable named
COMMENTS_TOKEN, paste the token for this variable, and click Add Secret
(figure 9.21).

![CH09_F21_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F21_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1052359}Figure 9.21 A secret in GitHub consists of a
name and a value. These secrets are available as variables in GitHub
Actions.

[]{#CH09.htm#pgfId-1021869 .calibre9}3. In the GitHub Pages build step,
add an environment variable for COMMENTS \_TOKEN. The following listing
shows the code to do this.

[]{#CH09.htm#pgfId-1021948}Listing 9.23 Adding an environment variable
(.github/workflows/gh-pages.yml)

``` programlisting
- name: Build 
  ... 
  env: 
    COMMENTS_TOKEN: ${{ secrets.COMMENTS_TOKEN }} 
```

[]{#CH09.htm#pgfId-1022034 .calibre9}For local development, we will need
to set the appropriate variables for access in the command line. For
Windows, we can []{#CH09.htm#marker-1022023 .calibre9}use the
[set]{.fm-code-in-text} command to set environment variables like this:

``` programlisting
set COMMENTS_TOKEN="<your comments token>" 
```

[]{#CH09.htm#pgfId-1022075 .calibre9}For macOS and Linux, we can use
[]{#CH09.htm#marker-1022064 .calibre9}the [export]{.fm-code-in-text}
command:

``` programlisting
export COMMENTS_TOKEN="<your comments token>" 
```

[]{#CH09.htm#pgfId-1022129}[Note]{.fm-callout-head} These commands set
the environment variables only for the current shell or session. To set
them permanently, you can search for "edit environment variables \<for
your account\>" in the Windows search box. For Linux or macOS, use
[\~/.profile]{.fm-code-in-text1} (bash) or
[\~/.zprofile]{.fm-code-in-text1} (zsh), based on your shell.
[]{#CH09.htm#marker-1022134}[]{#CH09.htm#marker-1022137}[]{#CH09.htm#marker-1022139}

[]{#CH09.htm#pgfId-1022145}[]{#CH09.htm#marker-1024520}[]{#CH09.htm#marker-1024517}Fetching
comments

[]{#CH09.htm#pgfId-1022162 .calibre9}[]{#CH09.htm#marker-1022156
.calibre9}[]{#CH09.htm#marker-1022158 .calibre9}Once we have the API
key, we can query the service using the getJSON API in Hugo to get all
comments for all forms. Unfortunately, this API is outside of Hugo, and
therefore, there is no standardization as each service has its own set
of APIs. The query and parsing mechanisms for each service are
different, and we will need to redo the comment-fetching code if we move
to a new service.

[]{#CH09.htm#pgfId-1022167 .calibre9}In this section, we will create a
Hugo partial that can be cached, which provides a Hugo scratch pad with
a mapping from the comment page permalink to the list of comments for
that page. To use Netlify to fetch comments, we need to do the
following:

-   []{#CH09.htm#pgfId-1022173 .calibre9}To access the submissions of a
    form in Netlify, we need the form's Netlify ID. While we can write
    an API query to dynamically get a form ID because we are using a
    single form for all comments, putting the form ID in the front
    matter is more effortless.

-   []{#CH09.htm#pgfId-1022194 .calibre9}To get a form ID for the
    comment form, first publish the comment form to Netlify. After
    posting, the form will be available in the Forms section on the
    website (figure 9.22).

![CH09_F22_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F22_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1052393}Figure 9.22 Netlify's Forms section contains
all the active forms and provides access to the submissions. We can use
the form URL of an individual form to get its identifier.

[]{#CH09.htm#pgfId-1022221 .calibre9}When we click the form, Netlify
takes us to the Submissions page, whose URL should be something like the
following:

``` programlisting
https://app.netlify.com/sites/hugoinaction/forms/<form id> 
```

[]{#CH09.htm#pgfId-1022260 .calibre9}This code provides us with the
identifier (ID) of the form in Netlify. Let's add this form ID to the
website configuration as the following listing shows.

[]{#CH09.htm#pgfId-1022317}Listing 9.24 Adding a comment form ID
(config/\_default/params.yml)

``` programlisting
NetlifyCommentForm: <form id> 
```

[]{#CH09.htm#pgfId-1022352 .calibre9}To access form submissions from
Netlify, we can use the form submissions API. The following listing
allows us to access this API.

[]{#CH09.htm#pgfId-1022409}Listing 9.25 Accessing the Netlify form
submissions API

``` programlisting
https://api.netlify.com/api/v1/forms/<form id>/submissions? 
➥ access_token=<access token> 
```

[]{#CH09.htm#pgfId-1022463 .calibre9}The following listing shows a
sample response for submissions on the comments form.

[]{#CH09.htm#pgfId-1022520}Listing 9.26 Sample output from Netlify for
submissions

``` programlisting
[{ 
  ... 
  "data": { 
    "url": "/blog/process-4/", 
    "name": "Atishay Jain", 
    "email": "contact@atishay.me", 
    "message": "The quality shows. Connect a few lines and 
    ➥ the shapes come out well. I think you should also sell 
    ➥ shape assemblies.", 
    "ip": "...", 
    "user_agent": "...", 
    "referrer": "https://chapter-09-07.hugoinaction.com/blog/process-4/" 
  }, 
  "created_at": "2021-07-19T06:13:54.724Z", 
  "id": "60f51822e039a4ad6c2f81c7", 
  "form_id": "5f6af880fd7ebf0007984d2f", 
  "site_url": "https://hugoinaction.com" , 
  "form_name": "Comments" 
}, ...] 
```

[]{#CH09.htm#pgfId-1022822 .calibre9}The response JSON schema for each
form service is different. To consume it quickly, we will create
partials that access this service and translate data to a standard
format that makes the most sense for our use case.

[]{#CH09.htm#pgfId-1022838}[Note]{.fm-callout-head} You can use the
Netlify APIs to fetch comments while developing locally.

[]{#CH09.htm#pgfId-1022873 .calibre9}To display comments, we need a
map-like data structure returned from the partial that has the key as
the page URL and the value as a list of all comments for that page. In
Hugo, we can use a scratch pad to provide this functionality. Another
thing to note is that because we are accessing all information globally
available in the environment variables and the global website
configuration, this partial can work without any supplied parameters. We
can use []{#CH09.htm#marker-1022846 .calibre9}the
[site]{.fm-code-in-text} global variable to access the site variables,
and we can use []{#CH09.htm#marker-1022862 .calibre9}the
[getenv]{.fm-code-in-text} function to provide the environment variables
([[https://
github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/05](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/05){.url}]{.fm-hyperlink}).
Note that we will need to enable [COMMENTS_TOKEN]{.fm-code-in-text}
within the [funcs/getenv]{.fm-code-in-text} section of the Hugo security
configuration (config/\_default/security.yaml) to use this variable. We
can use the Netlify comment parsing partial, as the following listing
shows, to request data for the comments form from the Netlify Forms
service and provide it in a map for consumption in
AcmeTheme/layouts/partials/netlifyCommentList.html.

[]{#CH09.htm#pgfId-1022952}Listing 9.27 The Netlify comment parsing
partial

``` programlisting
{{$response := newScratch}}                          ❶
{{if and site.Params.NetlifyCommentForm              ❷
  (getenv "COMMENTS_TOKEN")}}                        ❷
  
  {{$comments:= getJSON   
    "https://api.netlify.com/api/v1/forms/"          ❸
    site.Params.NetlifyCommentForm                   ❸
    "/submissions?access_token="                     ❸
    (getenv "COMMENTS_TOKEN")}}                      ❸
  
  {{ range (sort $comments "created_at" "asc") }}    ❹
    {{if not ($response.Get .data.url)}}             ❺
      {{$response.Set .data.url (slice )}}           ❺
    {{end}}                                          ❺
  
    {{$response.Add .data.url .data}}                ❻
  {{ end }} 
{{ end }} 
  
{{return $response.Values}}                          ❼
```

[]{#CH09.htm#pgfId-1041978}[❶]{.fm-combinumeral} Creates a new scratch
pad for the response

[]{#CH09.htm#pgfId-1042002}[❷]{.fm-combinumeral} Only execute if all
dependencies are present. We do not want to fail the build with a bad
network call.

[]{#CH09.htm#pgfId-1042019}[❸]{.fm-combinumeral} Uses getJSON to call
the URL. getJSON can combine URL fragments if passed as a set of
variables.

[]{#CH09.htm#pgfId-1042036}[❹]{.fm-combinumeral} Returns a slice (array)
of comments sorted by created_at to show the newest comments at the
bottom

[]{#CH09.htm#pgfId-1042053}[❺]{.fm-combinumeral} Creates a slice on
first use with .url as the key to store comments.

[]{#CH09.htm#pgfId-1042070}[❻]{.fm-combinumeral} Appends the data for
the comment. This code might append additional data fields, but we can
ignore them in the consumer.

[]{#CH09.htm#pgfId-1042087}[❼]{.fm-combinumeral} Uses the .Values method
to convert the scratch pad to a dictionary

[]{#CH09.htm#pgfId-1023520 .calibre9}In the listing, the
[site]{.fm-code-in-text} global variable is []{#CH09.htm#marker-1023509
.calibre9}used to access the website configuration, while
[getenv]{.fm-code-in-text} provides access to the environment variables.
Each element in the response has a data entry with the submitted data.
We use the web page's URL as a key. Because we need to add elements to
the slice (array), we need to create a new slice when we encounter the
first comment.

[]{#CH09.htm#pgfId-1023539}[tip]{.fm-callout-head} You can use debugging
utilities by adding ([{{ partialCached]{.fm-code-in-text1} [\"console\"
(partialCached]{.fm-code-in-text1}
[\"netlifyCommentList\"]{.fm-code-in-text1}
[\"none\"]{.fm-code-in-text1} [\"cached\")]{.fm-code-in-text1}
[\"netlifyComments\"]{.fm-code-in-text1} [}}]{.fm-code-in-text1}) to
view the structure of the returned dictionary in the browser console.

[]{#CH09.htm#pgfId-1023576 .calibre9}Formspree's form ID was already
available as [FormspreeCommentForm,]{.fm-code-in-text} and therefore, we
do not need to generate it separately. To fetch comments from Formspree,
Formspree requires []{#CH09.htm#marker-1023565 .calibre9}an
[Authorization]{.fm-code-in-text} header to connect to the Formspree API
and fetch the form data. Hugo's getJSON API supports passing additional
headers in the form of a dictionary. We can complete the authenticated
call for Formspree by opening the URL in the following listing.

[]{#CH09.htm#pgfId-1023636}Listing 9.28 Accessing the Formspree
submissions API

``` programlisting
curl https://formspree.io/api/0/forms/<form id>/submissions -H 
  "Authorization: Bearer <API Key>" 
```

[]{#CH09.htm#pgfId-1023680 .calibre9}The following listing shows the
response for the query to the Formspree form submissions API with the
form submissions for the comment form.

[]{#CH09.htm#pgfId-1023737}Listing 9.29 A sample response for the
comments form

``` programlisting
{ 
  ... 
  "ok": true, 
  "submissions": [{ 
    "_date": "2021-07-19T14:19:12.327527+00:00", 
    "email": "contact@atishay.me", 
    "message": "The quality shows. Connect a few lines and the shapes 
    ➥ come out well. I think you should also sell shape assemblies.", 
    "name": "Atishay Jain", 
    "url": "/blog/process-4/" 
  }, ...] 
} 
```

[]{#CH09.htm#pgfId-1023951 .calibre9}Parsing code for the response JSON
for Formspree is similar to the Netlify parser. The
[\_date]{.fm-code-in-text} field and the headers need to be added to
[getJSON]{.fm-code-in-text} to sort based on these values. These minor
differences are present in listing 9.30
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/05](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/05){.url}]{.fm-hyperlink}).
Listing 9.30 shows the comment parsing partial used to request data for
the comments form from the Formspree service (Acme
Theme/layouts/partials/formspreeCommentList.html) and provides it in a
map for consumption.

[]{#CH09.htm#pgfId-1024036}Listing 9.30 Formspree comment parsing
partial

``` programlisting
{{$response := newScratch}} 
{{if and site.Params.FormspreeCommentForm (getenv "COMMENTS_TOKEN")}} 
  
  {{$comments:= getJSON                                   ❶
    "https://formspree.io/api/0/forms/"                   ❶
      site.Params.FormspreeCommentForm "/submissions"     ❶
        (dict "Authorization"                             ❶
            (printf "Bearer %s"                           ❶
                 (getenv "COMMENTS_TOKEN")                ❶
            )                                             ❶
        ) }}                                              ❶
  
  {{ range sort $comments.submissions                     ❷
    "date" "ASC" }}                                       ❷
    {{if not ($response.Get .url)}} 
      {{$response.Set .url (slice )}} 
    {{end}} 
  
    {{$response.Add .url .}}                              ❸
  {{ end }} 
{{ end }} 

{{return $response.Values}}
```

[]{#CH09.htm#pgfId-1041409}[❶]{.fm-combinumeral} Formspree requires the
Authorization header.

[]{#CH09.htm#pgfId-1041430}[❷]{.fm-combinumeral} The comment list is in
the submissions object sorted by \_date in ascending order.

[]{#CH09.htm#pgfId-1041447}[❸]{.fm-combinumeral} The submission is
directly available in the submissions object inside of Formspree's
response, unlike Netlify, where it is nested under the data object.

::: fm-sidebar-block
[]{#CH09.htm#pgfId-1052425 .calibre9}Exercise 9.5

[]{#CH09.htm#pgfId-1052426}We can include user comments in our
Jamstack-based website without using JavaScript at \_\_\_\_\_\_\_\_
time.
:::

[]{#CH09.htm#pgfId-1024545}Rendering comments

[]{#CH09.htm#pgfId-1024562 .calibre9}[]{#CH09.htm#marker-1024556
.calibre9}[]{#CH09.htm#marker-1024558 .calibre9}With comments populated
in an easy-to-use map, rendering them on the web page is pretty
straightforward. The form-rendering code can loop through the comments
tied to the URL of the current page and display them in HTML. We can
speed up processing by placing the service response code in a cached
partial. Figure 9.23 shows the rendered comments.

[]{#CH09.htm#pgfId-1024593}[Note]{.fm-callout-head} You will need to
delete the cached responses from the resources folder to see the latest
comments. Because we have specified [maxAge]{.fm-code-in-text1} for the
getJSON API as [-1]{.fm-code-in-text1}, Hugo does not recompute the
comment submissions each time we build the website.

![CH09_F23_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH09_F23_Jain.png){.calibre1}\

[]{#CH09.htm#pgfId-1052445}Figure 9.23 Comments rendering for the form
are all generated during build time when Hugo compiles the website.

[]{#CH09.htm#pgfId-1024612 .calibre9}We will use the Gravatar service
for getting the user's avatar. Gravatar is a free service that takes the
hash of a user's email address and returns a profile picture. Both
WordPress and GitHub use Gravatar and, therefore, have the avatars for a
vast number of potential readers. We will be using
[resources.GetRemote]{.fm-code-in-text} API to get a remote resource
(from the Gravatar service via HTTP) at compile time and caching it
locally.

[]{#CH09.htm#pgfId-1024641 .calibre9}Based on the form service used, the
[comment]{.fm-code-in-text} partial calls the appropriate partial method
to get the list of comments for the website as the following listing
shows. Then the comments for the specific page are filtered and
displayed to the end user.

[]{#CH09.htm#pgfId-1024713}Listing 9.31 Getting comments
(AcmeTheme/layouts/partials/comment.html)

``` programlisting
{{$comments := dict}}                          ❶
{{if getenv "NETLIFY" }} 
  {{$comments = partialCached "netlifyCommentList.html" .}} 
{{else}} 
  {{$comments = partialCached "formspreeCommentList.html" .}} 
{{end}} 
  
{{range (index $comments .RelPermalink)}}      ❷
<div class="comment"> 
  <img width="100" height="100" 
    alt="{{.name}} Avatar" 
    {{with resources.GetRemote (print          ❸
      "https://www.gravatar.com/avatar/"       ❸
      ( md5 .email ) "?s=100&d=wavatar") }}    ❸
      {{ with .Err }}                          ❸
        {{ warnf "%s" . }}                     ❸
      {{ else }}                               ❸
        src="{{ .RelPermalink }}"              ❸
      {{end}}                                  ❸
    {{end}}>                                   ❸
  <div class="author">{{.name}}</div>          ❹
  <div class="message">{{.message}}</div>      ❹
</div> 
{{end}} 
```

[]{#CH09.htm#pgfId-1040749}[❶]{.fm-combinumeral} Initializes the
\$comments variable based on NETLIFY environment variable

[]{#CH09.htm#pgfId-1040770}[❷]{.fm-combinumeral} Loops through the
comments for the current page

[]{#CH09.htm#pgfId-1040787}[❸]{.fm-combinumeral} Uses the avatar image
(200×200 px for retina screens) from Gravatar, falling back to Wavatar
(generated faces with differing features and backgrounds) for unknown
emails

[]{#CH09.htm#pgfId-1040804}[❹]{.fm-combinumeral} Renders the comments

[]{#CH09.htm#pgfId-1038818}[Code checkpoint]{.fm-callout-head}
[[https://chapter-09-08.hugoinaction.com](https://chapter-09-08.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH09.htm#marker-1038875}[]{#CH09.htm#marker-1038876}[]{#CH09.htm#marker-1038877}[]{#CH09.htm#marker-1038878}[]{#CH09.htm#marker-1038879}[]{#CH09.htm#marker-1038880}[]{#CH09.htm#marker-1038881}[]{#CH09.htm#marker-1038882}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-08](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-08){.url}]{.fm-hyperlink}.

## []{#CH09.htm#pgfId-1025269}9.7 Pseudo APIs that compile to JSON {#CH09.htm#sigil_toc_id_202 .fm-head}

[]{#CH09.htm#pgfId-1025393 .calibre9}[]{#CH09.htm#marker-1025387
.calibre9}[]{#CH09.htm#marker-1025389 .calibre9}In this chapter, we have
accessed third-party APIs by sending GET requests at compile time and
POST requests from the web form. In this section, we will create custom
APIs to deliver content.

[]{#CH09.htm#pgfId-1025398 .calibre9}Having an API for content has
become an essential aspect of web development. This is due to the
proliferation of native applications that rely on the same data as the
website but render them using a different technology that's more suited
to the hardware. The Jamstack does not prevent us from exposing APIs for
our website. On the contrary, the Jamstack allows us to have the APIs
hosted on a content delivery network (CDN) for greater availability and
performance.

[]{#CH09.htm#pgfId-1025417 .calibre9}For the website serving content
with no need for dynamic data processing, an API can simply be the same
data from the website provided in a machine-friendly format like XML or
JSON. We already handle GET requests to serve HTML so we can serve JSON
from the same endpoint. While JSON cannot have the POST, PUT, or DELETE
pieces, the GET portions of the API can be made very solid. I prefer to
call []{#CH09.htm#marker-1025406 .calibre9}these *pseudo APIs* to
distinguish them from other APIs as these are limited to GET requests
and cannot do dynamic processing on the server.

[]{#CH09.htm#pgfId-1025426 .calibre9}We can achieve a lot using pseudo
APIs. From the perspective of the client, they are as genuine as
server-related ones. Mobile apps can query to display data. Single-page
applications (SPAs) rendering []{#CH09.htm#marker-1025428 .calibre9}the
website through JavaScript can use these APIs to get content. We can
enhance our server rendering website fetching data dynamically through
the JSON-based APIs exposed as pseudo-APIs.

[]{#CH09.htm#pgfId-1025438 .calibre9}GET APIs are among the most used
REST-based APIs. We will create APIs for our website in this section and
start using them via JavaScript in the following chapter.

### []{#CH09.htm#pgfId-1025444}9.7.1 Custom output formats in Hugo {#CH09.htm#sigil_toc_id_203 .fm-head1}

[]{#CH09.htm#pgfId-1025473 .calibre9}[]{#CH09.htm#marker-1025455
.calibre9}[]{#CH09.htm#marker-1025457 .calibre9}The key to creating
pseudo APIs in Hugo is to understand the concept of output formats. So
far, we have generated a single HTML page from the Markdown document for
each page of the website. Hugo supports much more than that. We can
create as many pages from each Markdown document as we desire and in as
many formats as we want. With Hugo, we can build everything from RSS
(Really Simple Syndication) feeds to AMP (Accelerated Mobile Pages) to
JSON APIs. Hugo comes bundled with the knowledge of
[]{#CH09.htm#marker-1025462 .calibre9}many *outputs formats*, but Hugo
users do not use most of them by default. To create a page in a custom
output format, we need two things:

-   []{#CH09.htm#pgfId-1025482 .calibre9}An entry in either the front
    matter or the website configuration informing Hugo which output
    formats a specific page kind supports. (Remember in chapter 7, we
    learned that a page kind determines how the page is represented
    internally in Hugo and cannot be changed.)

-   []{#CH09.htm#pgfId-1025496 .calibre9}A template for rendering the
    page in that output format.

[]{#CH09.htm#pgfId-1025522 .calibre9}For example, say we want to create
the AMP version of a specific blog post page. Then we need to add
[amp]{.fm-code-in-text} in the outputs section in the front matter for
that page and create a single.amp.html template for single blog posts.
Although [amp]{.fm-code-in-text} is predefined, we can define custom
mime types and custom formats in the website configuration, and chapter
13 shows how we can create a custom format in Hugo.
[]{#CH09.htm#marker-1025527 .calibre9}[]{#CH09.htm#marker-1025530
.calibre9}

### []{#CH09.htm#pgfId-1025536}9.7.2 Creating the JSON API for the website {#CH09.htm#sigil_toc_id_204 .fm-head1}

[]{#CH09.htm#pgfId-1025553 .calibre9}[]{#CH09.htm#marker-1025547
.calibre9}[]{#CH09.htm#marker-1025549 .calibre9}Although we can create a
separate JSON API for each web page, we won't use that for this book. We
will expose the entire website's content over a single GET request
(/index.json). It may seem like an anti-pattern to reveal lots of
content over a single request, but the text is surprisingly lightweight,
and a 1 MB JSON response consists of a million English characters. We
can split it into pages or do preprocessing as we desire. Many websites
do not expose the contents of the web pages, just the title and summary
over the API, and that is also an option if we are worried about file
size.

[]{#CH09.htm#pgfId-1025558 .calibre9}To create JSON APIs for the
website, enable the JSON output format for the index page. The following
listing defines the custom output format.

[]{#CH09.htm#pgfId-1025615}Listing 9.32 Defining a custom output format
(content/\_index.md)

``` programlisting
--- 
outputs: [html, json] 
--- 
```

[]{#CH09.htm#pgfId-1025672 .calibre9}Next, we create a new template for
the JSON API. This template will have a new scratch pad for storing the
data we need to expose in the API and then []{#CH09.htm#marker-1025661
.calibre9}uses the [jsonify]{.fm-code-in-text} function to convert to
JSON
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/07](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-resources/07){.url}]{.fm-hyperlink}).
The following listing defines the template we use to create a pseudo API
for our blog. It collects the required data in a Hugo scratch pad and
then uses []{#CH09.htm#marker-1025696 .calibre9}the
[jsonify]{.fm-code-in-text} method to provide the scratch pad contents
as JSON.

[]{#CH09.htm#pgfId-1025767}Listing 9.33 Creating the template
(AcmeTheme/layouts/\_default/index.json)

``` programlisting
{{ $result := newScratch }}                     ❶
{{ $result.Set "pages" slice }}                 ❷
{{ range site.RegularPages }}                   ❸
{{ $cover := $result.Get "Null" }}              ❹
{{ with (.Resources.GetMatch "cover.*")}} 
    {{ $cover = 
      (.Resize "100x100 Center").Permalink}}    ❺
  {{end}} 
{{ $result.Add "pages" (dict                    ❻
    "url" .RelPermalink                         ❻
    "content" .Plain                            ❻
    "title" .Title                              ❻
    "tags" .Params.Tags                         ❻
    "cover" $cover)                             ❻
}}                                              ❻
{{ end }} 
{{ $result.Get ."pages" | jsonify }}            ❼
```

[]{#CH09.htm#pgfId-1040039}[❶]{.fm-combinumeral} Creates a new scratch
pad for storing the results

[]{#CH09.htm#pgfId-1040082}[❷]{.fm-combinumeral} Creates an empty slice
(array) to add the page contents to

[]{#CH09.htm#pgfId-1040099}[❸]{.fm-combinumeral} RegularPages is used
instead of all pages to remove tags, categories, and other
taxonomy-related pages from the JSON.

[]{#CH09.htm#pgfId-1040116}[❹]{.fm-combinumeral} A roundabout way to
initialize to nil

[]{#CH09.htm#pgfId-1040133}[❺]{.fm-combinumeral} Adds a cover image with
a 100 px width

[]{#CH09.htm#pgfId-1040150}[❻]{.fm-combinumeral} Adds the page's link
(RelPermalink), content in plain text format (Plain), title (Title), and
tags (.Params.Tags). .Plain does not convert the content to HTML.

[]{#CH09.htm#pgfId-1040044}[❼]{.fm-combinumeral} Converts to JSON to
return result

::: fm-sidebar-block
[]{#CH09.htm#pgfId-1052477 .calibre9}Exercise 9.6

[]{#CH09.htm#pgfId-1052478}Which of the following is not a useful Hugo
feature for pseudo APIs?

1.  []{#CH09.htm#pgfId-1052479}Content views

2.  []{#CH09.htm#pgfId-1052480}Page bundles

3.  []{#CH09.htm#pgfId-1052481}Related pages

4.  []{#CH09.htm#pgfId-1052482}Taxonomy

5.  []{#CH09.htm#pgfId-1052483}Internal pagination template
:::

[]{#CH09.htm#pgfId-1026346 .calibre9}We can create any GET API we desire
using Hugo. These APIs are available over CDNs and can handle a
significant load, delivering outstanding performance in terms of speed.
The following listing provides a sample output from the pseudo API.

[]{#CH09.htm#pgfId-1026403}Listing 9.34 Sample output from the pseudo
API

``` programlisting
[{ 
  "content": "Acme Corporation™ is ...  Nothing else.\n", 
  "cover": null, 
  "tags": null, 
  "title": "About Us", 
  "url": "/about/" 
},...] 
```

[]{#CH09.htm#pgfId-1026567 .calibre9}Hugo as an API generator adds a
whole new dimension to the use of the static site builder. From page
bundles to taxonomies (chapter 4), most of its key features still make
sense even in an API. We can still use partials (chapter 6) to share
standard code and split functions, paginators (chapter 7) to create
multiple pages, and content layouts to have different types of content.
We can even use content views (chapter 7) to get custom data-specific
JSON.

[]{#CH09.htm#pgfId-1038938}[Code checkpoint]{.fm-callout-head}
[[https://chapter-09-09.hugoinaction.com](https://chapter-09-09.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-09-09](https://github.com/hugoinaction/hugoinaction/tree/chapter-09-09){.url}]{.fm-hyperlink}.

[]{#CH09.htm#pgfId-1026573 .calibre9}The ability to build and access
APIs moves our website to the Web 2.0 world, where readers can
participate and new avenues of functionality are unlocked.

[]{#CH09.htm#pgfId-1026667 .calibre9}In this chapter, we discussed how
Hugo interacts with the rest of the Jamstack ecosystem. We can call REST
APIs like those from Twitter at compile time. The Contact Us page
already sends data to a form provider. Forms can be content-driven
instead of hardcoded as in the case of dynamic surveys. Data retrieval
APIs allow us to display user-generated content in comment forms. With
Hugo's custom output formats feature, we can expose our website over a
GET-based (pseudo) API. []{#CH09.htm#marker-1026669
.calibre9}[]{#CH09.htm#marker-1026672
.calibre9}[]{#CH09.htm#marker-1026674
.calibre9}[]{#CH09.htm#marker-1026676 .calibre9}

## []{#CH09.htm#pgfId-1026682}Summary {#CH09.htm#sigil_toc_id_205 .fm-head}

-   []{#CH09.htm#pgfId-1026692 .calibre9}The Jamstack provides an
    opportunity to access APIs at website compile time, enabling us to
    prebuild pages, thus not incurring the performance overhead and
    usage information leaks to third parties at run time.

-   []{#CH09.htm#pgfId-1026706 .calibre9}With the
    [getJSON]{.fm-code-in-text} function, Hugo provides access to any
    API over HTTP. Most popular websites have a JSON-based API that we
    can use to get content to embed in a Hugo page.

-   []{#CH09.htm#pgfId-1026725 .calibre9}We can create web forms in Hugo
    and then use a form service like Netlify Forms or Formspree to send
    the form data to a third-party service that takes care of the
    day-to-day operations of a form backend.

-   []{#CH09.htm#pgfId-1026735 .calibre9}Having form generation based on
    markup and metadata provides the content creators a lot of
    flexibility with forms generated on the fly and without writing
    server code or HTML.

-   []{#CH09.htm#pgfId-1026745 .calibre9}We can combine form submissions
    with APIs to build a dynamic system that can feed off user-generated
    content.

-   []{#CH09.htm#pgfId-1026755 .calibre9}Using output formats in Hugo,
    we can build our own pseudo APIs that can serve data in any file
    format we desire. While those APIs cannot react to user input, we
    can make many applications, from mobile websites to single-page
    applications (SPAs).

[]{#CH10.htm}

# []{#CH10.htm#pgfId-1026192}10 The power of JavaScript {#CH10.htm#heading_id_2 .tochead}

[]{#CH10.htm#pgfId-1028524}This chapter covers

-   []{#CH10.htm#pgfId-1028563 .calibre9}Evaluating JavaScript's role in
    a Jamstack-based website
-   []{#CH10.htm#pgfId-1028564 .calibre9}Building dynamic features like
    asynchronous form submission
-   []{#CH10.htm#pgfId-1028565 .calibre9}Performing fuzzy searches in
    the JavaScript/TypeScript ecosystem
-   []{#CH10.htm#pgfId-1028566 .calibre9}Embedding single page
    applications
-   []{#CH10.htm#pgfId-1028552 .calibre9}Tips and techniques for
    JavaScript

[]{#CH10.htm#pgfId-1011814 .calibre9}The definition of *dynamic* in
terms of websites has changed over time. In the early days of the web, a
dynamic website was the one that could have user-generated content,
server-side processing, and all the great features we developed in the
previous chapter (like comments and contact forms). This definition
changed with the advent of web applications that redefined "dynamic" as
web pages that could update on the fly without explicitly reloading the
entire content. These pages can fetch content in the background and
provide real-time updates without manually triggering some action. This
modern definition of a dynamic website is possible with client-side
processing, where a script accompanies the website content and runs on
the end-user machine. JavaScript is the standard programming language
used on the browser frontend, and all frameworks, including Hugo, need
to play nice with JavaScript to unlock additional features.

[]{#CH10.htm#pgfId-1011820 .calibre9}In this chapter, we will focus on
JavaScript, the *J* layer of the Jamstack. Prior JavaScript knowledge is
required to be successful with this chapter. We will not use any
specific JavaScript framework and will keep the JavaScript code simple.
This approach does not mean that Hugo is incompatible with any of the
modern JavaScript frameworks. Hugo sits on a different layer of the
Jamstack than JavaScript and performs activities not associated with
client-side processing. We will understand the special place Hugo has
carved out for JavaScript, how to best use JavaScript in a Hugo-based
website, and the set of features client-side JavaScript can enable for
our website.

[]{#CH10.htm#pgfId-1011835 .calibre9}This chapter will show how we can
use JavaScript to communicate with external and internal APIs (pseudo
APIs). We will use JavaScript to control the page flow and make the
server communication happen in the background without refreshing the
user interface. We will also change parts of a web page dynamically for
cases like search results, where all possible options are too many to be
statically built and easier to do in JavaScript. Figure 10.1 describes
the role of this chapter in the Jamstack.

![CH10_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH10_F01_Jain.png){.calibre1}\

[]{#CH10.htm#pgfId-1045951}Figure 10.1 Chapter 10 focuses on the
JavaScript layer of the Jamstack. We can control the flow of web pages,
react to user input, have two-way communication with services, and
dynamically generate portions of a web page using JavaScript.

## []{#CH10.htm#pgfId-1011851}[]{#CH10.htm#marker-1031511}[]{#CH10.htm#marker-1031510}10.1 Why use JavaScript in a Hugo project? {#CH10.htm#sigil_toc_id_206 .fm-head}

[]{#CH10.htm#pgfId-1011882 .calibre9}[]{#CH10.htm#marker-1011876
.calibre9}[]{#CH10.htm#marker-1011878 .calibre9}JavaScript is the only
language that the browser natively understands. It is the only language
with access to the browser's document object model (DOM), and updating
it on the fly provides unique advantages for web developers. In a web
page built without JavaScript, each interaction including the benign
ones like clicking a search box or opening a menu item needs to go to
the server. This server communication causes delay and occasionally
flashes of an empty white screen in the browser. Using JavaScript, we
can hide this network traffic in multiple ways, some of which include:

-   []{#CH10.htm#pgfId-1011887 .calibre9}We can hide the data for
    certain parts of the web page, such as menu items, from the user.

-   []{#CH10.htm#pgfId-1011901 .calibre9}We can prefetch the needed data
    when the user mouses over the search form as a signal to act.

-   []{#CH10.htm#pgfId-1011911 .calibre9}We can show a spinner only in
    the part of the web page we are updating while the rest continues to
    function.

-   []{#CH10.htm#pgfId-1011921 .calibre9}We can hide the entire loading
    activity in a client-side animation.

[]{#CH10.htm#pgfId-1011931 .calibre9}We cannot provide these features by
using a server-side technology or a build-time solution. Another
possibility enabled uniquely by JavaScript is the ability to generate
web applications. Unlike web pages, web applications focus on
manipulating rather than rendering content. For instance, having
Microsoft Word running in the browser is not possible without
JavaScript.

[]{#CH10.htm#pgfId-1011937 .calibre9}Hugo is built for data presentation
and not manipulation. We can get close to a single-page web application
in terms of behavior and performance, but a single-page application does
not play to the strengths of Hugo. Suppose you have a web application
built with the JavaScript framework. In that case, Hugo supports
presenting and embedding the application, making a hybrid website that
we will explore in section 10.6. Our focus in this chapter will be on
rounding the rough edges of the Acme Corporation website with a small
amount of JavaScript.

::: fm-sidebar-block
[]{#CH10.htm#pgfId-1045990
.calibre9}[]{#CH10.htm#marker-1028632}Progressive enhancement

[]{#CH10.htm#pgfId-1045991}Although not officially prescribed in the
Jamstack or in Hugo, a guiding principle to follow in web development
made simple with Hugo's approach []{#CH10.htm#marker-1045992}is
*progressive enhancement*. Progressive enhancement revolves around
putting the web content first and then adding the styling and
interactivity. The basic idea is that the plain HTML version of the
website should have all the textual content that can be read without any
CSS or JavaScript loaded. Then, if CSS is available, it should enhance
the content with styling, and if JavaScript support is available, we
should use it to add interactivity. This approach provides a great
experience for users with bad network connections, older web browsers,
accessibility, and perceptible performance benefits for all other
regular users.

\

[]{#CH10.htm#pgfId-1046010}There is a whole world of JavaScript
frameworks targeting developers looking at progressive enhancement as
the means to developing their websites. For example, alpine.js and
Stimulus.js can generate a JavaScript model for building a web
application directly from an HTML web page. This way, we can create
dynamic pages or any data-based interactivity with the non-interactive
pieces rendered in the template by default.
[]{#CH10.htm#marker-1046011}[]{#CH10.htm#marker-1046012}
:::

## []{#CH10.htm#pgfId-1011986}[]{#CH10.htm#marker-1030379}[]{#CH10.htm#marker-1030377}10.2 Using JavaScript to control the page flow {#CH10.htm#sigil_toc_id_207 .fm-head}

[]{#CH10.htm#pgfId-1012003 .calibre9}[]{#CH10.htm#marker-1011997
.calibre9}[]{#CH10.htm#marker-1011999 .calibre9}Suppose you submit a
comment or the Contact Us form from the previous chapter. In that case,
you might have noticed that the form redirected to the Netlify or
Formspree page, which informed you about the form submission and
requested that the reader return to the web page after submitting the
form. Although this is functional, this page takes us out of our the
website, and its design does not match what we have built in the rest of
the site. Whereas Netlify allows us to define a custom form response
page, an inline form submitted as a message is better because it reduces
the need to generate a whole new page. Full redirect causes a flicker of
whitespace, and the user temporarily loses context (like scrolling
position) and cannot perform any other task on the page while the
content refreshes. This experience is jarring, especially if submitting
comments to an article. We can fix this by using JavaScript to make the
submission and report the response inline.

### []{#CH10.htm#pgfId-1012008}[]{#CH10.htm#marker-1031847}[]{#CH10.htm#marker-1031846}10.2.1 Handling forms in JavaScript {#CH10.htm#sigil_toc_id_208 .fm-head1}

[]{#CH10.htm#pgfId-1012025 .calibre9}[]{#CH10.htm#marker-1012019
.calibre9}[]{#CH10.htm#marker-1012021 .calibre9}The implementation of
the dynamic form handler is fairly straightforward. We need to attach an
event listener to the form's submit event, cancel and submit it
manually, and then inform the user about its submission. Here are some
of the JavaScript-based browser features we will use for this
redirection:

-   []{#CH10.htm#pgfId-1012030
    .calibre9}[event.target]{.fm-code-in-text}---Gets
    []{#CH10.htm#marker-1012047 .calibre9}an element that triggers an
    event.

-   []{#CH10.htm#pgfId-1012057
    .calibre9}[FormData]{.fm-code-in-text}---Converts
    []{#CH10.htm#marker-1012070 .calibre9}a form's data to a JavaScript
    object.

-   []{#CH10.htm#pgfId-1012080
    .calibre9}[fetch]{.fm-code-in-text}---Sends
    []{#CH10.htm#marker-1012093 .calibre9}HTTP(s) requests from
    JavaScript.

-   []{#CH10.htm#pgfId-1012103
    .calibre9}[Event.preventDefault()]{.fm-code-in-text}---Prevents
    []{#CH10.htm#marker-1012116 .calibre9}default execution of an event.

-   []{#CH10.htm#pgfId-1012126
    .calibre9}[submit]{.fm-code-in-text}---Sends
    []{#CH10.htm#marker-1012139 .calibre9}an event via a form when
    submitted by the user.

-   []{#CH10.htm#pgfId-1012149
    .calibre9}[insertAdjacentHTML]{.fm-code-in-text}---Adds
    []{#CH10.htm#marker-1012162 .calibre9}HTML, based on an existing DOM
    node.

[]{#CH10.htm#pgfId-1012182}[Note]{.fm-callout-head} We can use a library
like JQuery for this use case. JQuery takes care of a lot of best
practices like event delegation, page load, and so on. It also comes
with a pleasant, terse, and complete API for DOM manipulation.

[]{#CH10.htm#pgfId-1012211 .calibre9}For submitting forms through
Formspree via Ajax, we need to pass a header informing Formspree that
the response needs to be formatted in JSON format. We can transmit this
information by []{#CH10.htm#marker-1012190 .calibre9}sending the
[Accept]{.fm-code-in-text} header with
[application/json]{.fm-code-in-text} as the value. The code involves
adding a top-level event listener for the submit event. We can get the
submitted form data and send it via the fetch API. We will follow this
up with the addition of a DOM element to inform the user of the
submission
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/01](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/01){.url}]{.fm-hyperlink}).

::: fm-sidebar-block
[]{#CH10.htm#pgfId-1046031
.calibre9}[]{#CH10.htm#marker-1028766}Specific events vs. event
delegation

[]{#CH10.htm#pgfId-1046032}The technique of adding an event listener in
JavaScript at the top level rather than for each element is
[]{#CH10.htm#marker-1046033}called event delegation. When an event gets
fired in the web browser, it bubbles up in the DOM until the event
reaches the root element. If we add an event listener to the document
itself, it will catch all events anywhere in it. We can then use the
[target]{.fm-code-in-text1}
property[]{#CH10.htm#marker-1035257}[]{#CH10.htm#marker-1028767} to
[]{#CH10.htm#marker-1046034}get the specific DOM element where this
event occurs. This approach is, by default, the way libraries like
JQuery deal with events. Event delegation has a few advantages:

-   []{#CH10.htm#pgfId-1046035}*The listeners can continue to work on
    elements currently not present in the DOM but added later*. The
    listener applies to the document and does not change until the page
    reloads.

-   []{#CH10.htm#pgfId-1046036}*We reduce our DOM interaction*. Only one
    listener can take care of all events (as in the case of forms). All
    DOM interactions are expensive operations, and event delegation
    avoids the slow ones.

-   []{#CH10.htm#pgfId-1046037}*We can add event listeners even when the
    page is not ready*. We do not need the page to load and render
    completely. Because the listeners are there even when the DOM is
    loading, if some part takes time to load/render, the available part
    can still be functional.

[]{#CH10.htm#pgfId-1046038}The delegation comes with a few
disadvantages. The order of receivers for the same event may not be as
apparent because there is bubbling involved. We might need to add
additional code to handle that. Also, because the document doesn't clear
until the DOM unloads, the event listeners need to be removed manually
if they are not required. We could leak memory by keeping the listeners
alive for a long time in a never-closing document in the case of
JavaScript-based web applications. If we are careful with how we deploy
event listeners at the root, they can improve performance and reduce the
amount of code we need to manage when event handling on our website.
:::

[]{#CH10.htm#pgfId-1012348 .calibre9}The JavaScript code in the
following listing converts the form submission into an asynchronous
operation with inline feedback. In the listing, we use an asynchronous
operation rather than redirection to a different page.

[]{#CH10.htm#pgfId-1012405}Listing 10.1 Converting the form submission
(AcmeTheme/assets/index.js)

``` programlisting
function addFormHandler() { 
  document.addEventListener('submit', 
      async event => {                                  ❶
      if (!event.target instanceof HTMLFormElement)     ❷
      {                                                 ❷
        return;                                         ❷
      }                                                 ❷
      event.preventDefault();                           ❸
      const form = event.target; 
      const data = new FormData(form);                  ❹
      const action = form.action; 
      const method = form.method; 
      const response = await fetch(action, {            ❺
        method, 
        body: data, 
        headers: {"Accept": "application/json"}         ❻
      }); 
      if (response.ok) {                                ❼
          form.insertAdjacentHTML('afterend',  
            '<div class="success">The form has been submitted.</div>'); 
      } else { 
        form.insertAdjacentHTML('afterend', 
          '<div class="error">The form could not be submitted. 
                          ➥Please try again later.</div>'); 
      } 
      const message = form.nextElementSibling; 
      form.reset();                                     ❽
      setTimeout(() => message.remove(), 10000);        ❾
  }); 
} 
  
addFormHandler(); 
```

[]{#CH10.htm#pgfId-1038271}[❶]{.fm-combinumeral} Event listener for the
submit event

[]{#CH10.htm#pgfId-1038292}[❷]{.fm-combinumeral} Checks if a form
element fired the event

[]{#CH10.htm#pgfId-1038316}[❸]{.fm-combinumeral} Prevents the form's
automatic submission

[]{#CH10.htm#pgfId-1038336}[❹]{.fm-combinumeral} Captures the form's
data via JavaScript. The FormData object supports the same mime type as
an HTML form via JavaScript and also conversion to JSON if needed.

[]{#CH10.htm#pgfId-1038353}[❺]{.fm-combinumeral} Calls the fetch API to
send data to the server

[]{#CH10.htm#pgfId-1038370}[❻]{.fm-combinumeral} Passes the Accept
header to request the server to respond in JSON format

[]{#CH10.htm#pgfId-1038387}[❼]{.fm-combinumeral} Informs if response
used in both success and error scenarios

[]{#CH10.htm#pgfId-1038404}[❽]{.fm-combinumeral} Empties the form after
submitting it to allow for more submissions

[]{#CH10.htm#pgfId-1038421 .calibre9}[❾]{.fm-combinumeral} Clears the
message after 10 seconds []{#CH10.htm#marker-1038426
.calibre9}[]{#CH10.htm#marker-1038427 .calibre9}

### []{#CH10.htm#pgfId-1013477}[]{#CH10.htm#marker-1030378}[]{#CH10.htm#marker-1030376}10.2.2 Building and loading JavaScript using Hugo Pipes {#CH10.htm#sigil_toc_id_209 .fm-head1}

[]{#CH10.htm#pgfId-1013494 .calibre9}[]{#CH10.htm#marker-1013488
.calibre9}[]{#CH10.htm#marker-1013490 .calibre9}The next step is to make
this JavaScript file available in the various web pages that need it.
The index.js JavaScript file (in listing 10.1) is simple, and if we
want, we could pop that into the static folder and link it from the
template HTML. But that approach is fraught with problems:

-   []{#CH10.htm#pgfId-1013499 .calibre9}The handwritten JavaScript has
    extra spaces and comments that can be cleaned up and minified to
    reduce bundle size.

-   []{#CH10.htm#pgfId-1013513 .calibre9}If we add dependencies based on
    the npm ecosystem, we will need a bundler that converts to a single
    JavaScript file for hosting.

[]{#CH10.htm#pgfId-1013523 .calibre9}We therefore recommend using Hugo's
JavaScript builder support right from the start. It is so fast that you
will not notice the build times, and it also provides tons of features
from shimming mount (to target older browsers) to node module bundling
and TypeScript. Just as we needed [resources.ToCSS]{.fm-code-in-text} to
convert SCSS to CSS (as used in chapter 6), JavaScript compilation
requires [js.Build]{.fm-code-in-text} via Hugo Pipes.

[]{#CH10.htm#pgfId-1013529 .calibre9}To use Hugo Pipes with JavaScript,
we can either put the JavaScript files in a page bundle or in the assets
folder. Page-specific JavaScript files are rare, so for this specific
use case, we will use the assets folder. We can load this script like we
loaded CSS files earlier in the book using
[resources.Get]{.fm-code-in-text} and then pass it through js.Build to
compile the JavaScript code. The following listing loads the JavaScript
code using Hugo Pipes.

[]{#CH10.htm#pgfId-1013595}Listing 10.2 Loading JavaScript code
(AcmeTheme/layouts/default/baseof.html)

``` programlisting
{{ $js := resources.Get "index.js" | js.Build}} 
  
<script type="text/javascript" src="{{ $js.RelPermalink }}" defer></script> 
```

[]{#CH10.htm#pgfId-1013760 .calibre9}In the listing, note that we use
[defer]{.fm-code-in-text} to load the JavaScript file without blocking
the HTML content rendering after the []{#CH10.htm#marker-1013743
.calibre9}[script]{.fm-code-in-text} tag[]{#CH10.htm#marker-1026297}.
Also, it reads index.js and combines all the JavaScript code required by
the index.js file. This code can search across the Hugo modules imported
by the current project and all the node modules imported from npm. It
then compiles the JavaScript code to a single file that we have linked
to in the [\<script\>]{.fm-code-in-text} tag.

[]{#CH10.htm#pgfId-1013782 .calibre9}By default, Hugo performs no
minification on the file. We can supply additional options to enable
minification via []{#CH10.htm#marker-1013771 .calibre9}the
[minify]{.fm-code-in-text} flag in the argument as the following listing
shows. We will not be minifying the development server to allow easier
debugging.

[]{#CH10.htm#pgfId-1013842}Listing 10.3 Minifying the JavaScript
(AcmeTheme/layouts/default/baseof.html)

``` programlisting
{{ $js := resources.Get "index.js" | js.Build 
    (dict "minify" hugo.IsProduction) }} 
```

[]{#CH10.htm#pgfId-1034587}[Code checkpoint]{.fm-callout-head}
[[https://chapter-10-01.hugoinaction.com](https://chapter-10-01.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-01](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-01){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH10.htm#pgfId-1046055 .calibre9}Hugo and TypeScript

[]{#CH10.htm#pgfId-1046056}TypeScript is a programming language that is
popular in the JavaScript ecosystem. It adds support for JavaScript data
types, making tools like Visual Studio Code better able to understand
the code and minimizing errors associated with data types and mistyping
when writing JavaScript.

\

[]{#CH10.htm#pgfId-1046057}Hugo supports TypeScript by default, and we
can import any .ts file just like we imported the .js file. However,
Hugo does not type check like the JavaScript compiler, only doing the
conversion. You can run the TypeScript compiler to check or install a
plugin in your text editor while building using Hugo.

\

[]{#CH10.htm#pgfId-1046058}Hugo's TypeScript-to-JavaScript conversion is
an order of magnitude faster than most tools, including the TypeScript
compiler. We therefore recommend sticking with Hugo for the final
compilation of the website. There is no need to pay the additional cost
of slower JavaScript compilation when working on the website's content,
HTML, or CSS portions.
[]{#CH10.htm#marker-1046059}[]{#CH10.htm#marker-1046060}[]{#CH10.htm#marker-1046061}[]{#CH10.htm#marker-1046062}
:::

## []{#CH10.htm#pgfId-1014077}10.3 Approaches for JavaScript handling {#CH10.htm#sigil_toc_id_210 .fm-head}

[]{#CH10.htm#pgfId-1014087 .calibre9}The previous form submission code
has some issues that will come back to haunt us. These are:

-   []{#CH10.htm#pgfId-1014093 .calibre9}*The code acts on all HTML
    forms on the website.* This listener can accidentally add behavior
    to the forms that do not need it or to those that can get broken by
    this code. There should be a cleaner way to control which website
    forms need this code to act on when it executes.

-   []{#CH10.htm#pgfId-1014114 .calibre9}*The textual content becomes a
    part of the template, and a content editor cannot override it.*
    Ideally, the content should all come from the Markdown or YAML files
    supplied by the content editor to allow for easy overrides.

-   []{#CH10.htm#pgfId-1014131 .calibre9}*As we add more code, it will
    become unmanageable as a single file.* We need multiple files to do
    numerous things, each independent and loaded from an index file.

[]{#CH10.htm#pgfId-1014158}[Note]{.fm-callout-head} The CSS files used
in this book are not as organized as they should be on a professionally
developed website. Hugo offers support for SCSS and PostCSS, which
provide the means to manage CSS as efficiently as desired. The CSS,
HTML, JavaScript, and, in some cases, the Hugo template code used in
this book are not what you would expect in a typical website. This book
focuses on demonstrating and explaining the concepts of Hugo rather than
building a properly engineered website theme for production usage.

[]{#CH10.htm#pgfId-1014164 .calibre9}There are two main approaches to
using JavaScript that we can employ to gain scalability for our website:
using the primary code of the website as the template logic that
generates the HTML content and keeping the JavaScript code as its own
entity. We discuss these approaches in the following subsections.

### []{#CH10.htm#pgfId-1014170}10.3.1 HTML as primary JavaScript as a utility {#CH10.htm#sigil_toc_id_211 .fm-head1}

[]{#CH10.htm#pgfId-1014187 .calibre9}[]{#CH10.htm#marker-1014181
.calibre9}[]{#CH10.htm#marker-1014183 .calibre9}This approach is more
traditional to website development. With this approach, the primary code
of the website is the template logic that generates the HTML content,
and the JavaScript pieces support the layers. The JavaScript code is
generic and can activate when we set specific properties in the HTML
DOM. If the corresponding DOM elements are present, the JavaScript code
kicks into performing what we asked.

[]{#CH10.htm#pgfId-1014192 .calibre9}We can extend this approach to
include CSS as a utility and focus only on HTML on day-to-day usage.
Frameworks like Bootstrap
([[https://getbootstrap.com](https://getbootstrap.com){.url}]{.fm-hyperlink})
and Foundation
([[https://get.foundation/](https://get.foundation/){.url}]{.fm-hyperlink})
take this approach. They provide generic CSS and JavaScript files that
we can include in our website to get a good looking and customizable
user interface with added features over plain HTML. Frameworks like htmx
([[https://htmx.org](https://htmx.org){.url}]{.fm-hyperlink}) take this
approach, providing generic support for writing logic in HTML. Let's
look at some advantages and disadvantages of using this approach.

[]{#CH10.htm#pgfId-1014201}Advantages

-   []{#CH10.htm#pgfId-1014228 .calibre9}[]{#CH10.htm#marker-1014220
    .calibre9}[]{#CH10.htm#marker-1014222 .calibre9}*The JavaScript code
    is scalable and reusable by default.* Any theme developer can add
    additional properties to a template to activate this code anywhere.
    We can easily expose the features to the content author, who can
    provide the keys to enable the components in the front matter. This
    flexibility provides the ability for nondevelopers to fine-tune the
    website.

-   []{#CH10.htm#pgfId-1014237 .calibre9}*The JavaScript code is loosely
    coupled and independent.* Removing one of the modules has a slight
    possibility of impacting other modules on the website. We can also
    load the modules independently on demand, reducing the bundle size
    and render time for the website.

-   []{#CH10.htm#pgfId-1014254 .calibre9}*Mixing and matching JavaScript
    frameworks is easy.* Because all scripts share the DOM layer and are
    disabled without the right trigger in the DOM, we can easily use
    multiple frameworks (if required) on the same website.

-   []{#CH10.htm#pgfId-1014271 .calibre9}*Progressive enhancement is
    easy with this approach.* Because the logic lies in the HTML, if the
    JavaScript code is not present, we can use functionality enabled by
    the HTML CSS.

-   []{#CH10.htm#pgfId-1014288 .calibre9}*The JavaScript logic is
    minimal and manageable.* You need to write little JavaScript code.
    There is no state in the frontend beyond what we can represent in
    the URL in many cases. The total JavaScript code written on the
    website can be much less in comparison to other approaches.
    []{#CH10.htm#marker-1014301 .calibre9}[]{#CH10.htm#marker-1014304
    .calibre9}

[]{#CH10.htm#pgfId-1014310}Disadvantages

-   []{#CH10.htm#pgfId-1014337 .calibre9}[]{#CH10.htm#marker-1014329
    .calibre9}[]{#CH10.htm#marker-1014331 .calibre9}*It is effortless to
    write bad or unstructured code (also called spaghetti code) with
    this approach.* Because nothing enforces code organization in a
    particular way, it is tempting to add some quick-and-dirty fix to a
    problem that can make maintenance of the website a mess. This code
    sprinkling can become highly annoying if the state management code
    is not present in a single place.

-   []{#CH10.htm#pgfId-1014346 .calibre9}*The approach starts to break
    down when the JavaScript code becomes too big.* Each check for a DOM
    element to enable a feature is a cost, albeit a small one. But
    thousands of such calls can add up and begin to show their impact on
    the website's performance. There is a workaround that combines some
    routing checks, but at that point, we are not really using
    JavaScript as utility code that can be reused.

-   []{#CH10.htm#pgfId-1014363 .calibre9}*Figuring out unused code is
    hard.* There is no good way to know which JavaScript code is active
    and which is not. Optimizing around dead code removal is difficult.
    []{#CH10.htm#marker-1014376 .calibre9}[]{#CH10.htm#marker-1014379
    .calibre9}[]{#CH10.htm#marker-1014381
    .calibre9}[]{#CH10.htm#marker-1014383 .calibre9}

### []{#CH10.htm#pgfId-1014389}[]{#CH10.htm#marker-1014402}[]{#CH10.htm#marker-1014400}10.3.2 JavaScript as a separate layer to HTML {#CH10.htm#sigil_toc_id_212 .fm-head1}

[]{#CH10.htm#pgfId-1014406 .calibre9}[]{#CH10.htm#marker-1046094
.calibre9}[]{#CH10.htm#marker-1046095 .calibre9}This approach is the
preferred approach of websites with the single-page application (SPA)
style of web development. It works best where the websites have lots of
JavaScript to provide core functionality, although Hugo's approach, in
general, attempts to keep the data closer to the HTML. Keeping the
JavaScript code as an entity can support use cases like per-user
personalization, where server-generated HTML falls short. In websites
like these, we need to tightly couple the JavaScript code and the HTML
code as we tailor the JavaScript code specifically to the HTML that
accompanies it. In many cases, it is specific to the endpoint or the web
page where it is loaded. Although we can reuse parts of this code as
components, there has to be some page-specific JavaScript code, and in
many cases, we may need state management or routing, which is not
reusable.

::: fm-sidebar-block
[]{#CH10.htm#pgfId-1046079 .calibre9}[]{#CH10.htm#marker-1030469}Routing
and state[]{#CH10.htm#marker-1030467} management in JavaScript

[]{#CH10.htm#pgfId-1046080}In an interactive website, we can manipulate
a web page based on user interaction, which leads to a different page
from the one sent by the server. State in []{#CH10.htm#marker-1046081}a
web page represents the changes needed to render the web page to get the
form that we will display rather than the one sent by the server. In
SPAs, the state is too large to be represented in the URL or set up in
the cookies sent to the server. A state management library can help
bridge this gap by providing a data structure in JavaScript that
reflects this state and allows frameworks to update and respond to
changes in this state. Although we will not use a state management
library in this book, in chapter 12, we will create a shopping cart
backed by a variable in JavaScript that works across tabs and
relaunches, forming a rudimentary state management system.

\

[]{#CH10.htm#pgfId-1046082}A web browser represents all web pages with a
URL. Different pieces of code need to be enabled based on the URL to
render the correct page for the user. Routing is
[]{#CH10.htm#marker-1046083}the concept of activating a piece of code
based on the URL that is requested. In server-managed websites, the
routing is server-side, either by selecting the correct file (e.g., LAMP
stack) or via some function (as in Ruby on Rails or in Node.js/Express).
In SPAs, this task lives in JavaScript. In the Jamstack, the routing is
implicit as the contents of each valid URL are pregenerated and stored
on the CDN. Note that with the Jamstack, we still expect to have the
website pregenerated and ready to serve. We are not building pure SPAs
where the entire HTML and CSS live in the JavaScript code, but this is
the closest we can get to a SPA with generated HTML.
:::

[]{#CH10.htm#pgfId-1014463 .calibre9}Hugo generates the initial HTML and
presents it to the user. The JavaScript code then loads and creates a
JavaScript object corresponding to the areas that need JavaScript-based
interactivity, creating the controllers and components that can take
over user interactivity from the pregenerated HTML. The ownership
transition is automatic, and the web developer can decide the boundaries
of the HTML and JavaScript code as they see fit, along with the use
cases when we should load a new web page from the server versus when
JavaScript should update the existing web page. Frameworks like
Alpine.js
([[https://github.com/alpinejs/alpine/](https://github.com/alpinejs/alpine/){.url}]{.fm-hyperlink},
Unpoly
([[https://unpoly.com](https://unpoly.com){.url}]{.fm-hyperlink}), and
Stimulus.js
([[https://stimulusjs.org/](https://stimulusjs.org/){.url}]{.fm-hyperlink})
excel in building this type of logic, which can smoothly transition from
HTML to JavaScript. Let's look at some advantages and disadvantages of
using JavaScript as a separate layer.

[]{#CH10.htm#pgfId-1014472}Advantages

-   []{#CH10.htm#pgfId-1014499 .calibre9}[]{#CH10.htm#marker-1014491
    .calibre9}[]{#CH10.htm#marker-1014493 .calibre9}*We can build a
    highly interactive SPA for the parts of the website that form the
    application.* We can still use the precompiled HTML for the
    non-interactive pages like the Privacy Policy page using the
    Jamstack.

-   []{#CH10.htm#pgfId-1014508 .calibre9}*The JavaScript code is easier
    to maintain.* This is because learning from more than a decade of
    SPA development can be brought and applied to this setup.

-   []{#CH10.htm#pgfId-1014525 .calibre9}*With a proper router, we can
    scale the JavaScript code quickly.* This allows us to build as
    complex an application as needed. []{#CH10.htm#marker-1014538
    .calibre9}[]{#CH10.htm#marker-1014541 .calibre9}

[]{#CH10.htm#pgfId-1014547}Disadvantages

-   []{#CH10.htm#pgfId-1014574 .calibre9}[]{#CH10.htm#marker-1014566
    .calibre9}[]{#CH10.htm#marker-1014568 .calibre9}*The JavaScript
    logic can become complex.* Additionally, there is an overhead to
    understand the JavaScript and the corresponding template code.

-   []{#CH10.htm#pgfId-1014583 .calibre9}*The JavaScript code is mostly
    not portable across different independent web pages and websites.*
    It is written mainly as a one-off implementation for a specific use
    case. We can reuse components as modules if we so desire.

-   []{#CH10.htm#pgfId-1014600 .calibre9}*The code is different across
    different frameworks.* Although we can use two frameworks together,
    it might be cumbersome to do that. []{#CH10.htm#marker-1014613
    .calibre9}[]{#CH10.htm#marker-1014616
    .calibre9}[]{#CH10.htm#marker-1014618
    .calibre9}[]{#CH10.htm#marker-1014620 .calibre9}

## []{#CH10.htm#pgfId-1014626}[]{#CH10.htm#marker-1035272}[]{#CH10.htm#marker-1035270}10.4 Converting JavaScript to a utility controlled by the HTML code {#CH10.htm#sigil_toc_id_213 .fm-head}

[]{#CH10.htm#pgfId-1014643 .calibre9}[]{#CH10.htm#marker-1014637
.calibre9}[]{#CH10.htm#marker-1014639 .calibre9}For the form-handling
use case, focusing on the HTML is more manageable than splitting it for
each form and each web page. Therefore, we will stick with the first
approach for keeping JavaScript as a utility.

### []{#CH10.htm#pgfId-1014648}10.4.1 Enabling dynamic forms through JavaScript {#CH10.htm#sigil_toc_id_214 .fm-head1}

[]{#CH10.htm#pgfId-1014665 .calibre9}[]{#CH10.htm#marker-1014659
.calibre9}[]{#CH10.htm#marker-1014661 .calibre9}Using the JavaScript as
a utility approach, we will move the content and the logic that we have
built for dynamic submission into our template code, making it
controllable by the developer and the content editor via the website
configuration. We will enable the dynamic form submission using an
attribute in the form that will trigger the JavaScript code to perform
pending tasks. We also need to move the error and the success text to
the markup document controlled by the content author (see figure 10.2).
A default value of the count, though, should be baked into the template
([[https://
github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/02](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/02){.url}]{.fm-hyperlink}).

![CH10_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH10_F02_Jain.png){.calibre1}\

[]{#CH10.htm#pgfId-1046118}Figure 10.2 Submission success message that
the JavaScript renders after asynchronous submission of the form

[]{#CH10.htm#pgfId-1014702 .calibre9}The template is explicitly marked
with []{#CH10.htm#marker-1014691 .calibre9}a
[data-dynamic-form]{.fm-code-in-text} attribute to tell the JavaScript
code to convert this form to a dynamic one as the following listing
shows. We also provide the success and error messages inline.

[]{#CH10.htm#pgfId-1014762}Listing 10.4 Converting the form
(AcmeTheme/layouts/partials/comment.html)

``` programlisting
<template id="comment-success">                           ❶
<div class="success"> 
{{default "Your comment has been successfully submitted 
➥ for moderation. It will be available on the website 
➥ soon." (site.Param "comment-success")}}                ❷
</div> 
</template> 
<template id="comment-error" >                            ❸
<div class="error"> 
{{default "We are facing an issue submitting the comment. 
-->  Please try again later." 
-->  (site.Param "comment-error")}}                       ❹
</div> 
</template> 
<form data-dynamic-form 
  data-success=" comment-success" 
  data-error="comment-error" ...>                         ❺
... 
</form> 
```

[]{#CH10.htm#pgfId-1037915}[❶]{.fm-combinumeral} Template for the
success message

[]{#CH10.htm#pgfId-1037936}[❷]{.fm-combinumeral} Uses the default
function to provide default data for a comment form and the \$.Param
function to allow reading from front matter, falling back to the website
configuration if needed

[]{#CH10.htm#pgfId-1037953}[❸]{.fm-combinumeral} Template for the error
message

[]{#CH10.htm#pgfId-1037970}[❹]{.fm-combinumeral} Uses the default
function to provide default data for a comment form and the \$.Param
function to allow reading from front matter, falling back to the website
configuration if needed

[]{#CH10.htm#pgfId-1037987 .calibre9}[❺]{.fm-combinumeral} Updates the
form with the data-\* properties meant to be read by JavaScript

[]{#CH10.htm#pgfId-1015225 .calibre9}We need similar changes on the
contact form. This is an exercise for the reader. The code is provided
in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/02](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/02){.url}]{.fm-hyperlink}).

[]{#CH10.htm#pgfId-1015281 .calibre9}Next, we need to update the
JavaScript code so that it does not take all the forms but uses the data
from the labeled ones instead. The code in listing 10.5 reads all forms
marked with [data-dynamic-form]{.fm-code-in-text} and converts those to
asynchronous requests, taking the post submission messages from
[]{#CH10.htm#marker-1033281 .calibre9}the
[data-success]{.fm-code-in-text} and [data-error]{.fm-code-in-text}
fields associated with the form. This allows us to dynamically handle
form submissions with form selection and handling controlled by the HTML
code. We will read the various variables from the DOM itself.

[]{#CH10.htm#pgfId-1015341}Listing 10.5 Restricting the JavaScript code
(AcmeTheme/assets/index.js)

``` programlisting
function addFormHandler() { 
  document.addEventListener('submit', async event => { 
    if (event.target?.dataset?.dynamicForm 
      === undefined) {                                ❶
      return; 
    } 
    ... 
    if (response.ok) { 
        form.insertAdjacentHTML('afterend', 
          document.querySelector(form.dataset.success) 
            .innerHTML);                              ❷
    } else { 
      form.insertAdjacentHTML('afterend', 
        document.querySelector(form.dataset.error) 
          .innerHTML);                                ❷
    } 
    ... 
  })); 
} 
  
... 
```

[]{#CH10.htm#pgfId-1037704}[❶]{.fm-combinumeral} Uses only the elements
with the attribute data-dynamic-form

[]{#CH10.htm#pgfId-1037721 .calibre9}[❷]{.fm-combinumeral} Uses
data-success and data-error attributes to get data from the form

[]{#CH10.htm#pgfId-1015805}[Note]{.fm-callout-head} If the backend is
acting slow, the form should be disabled to prevent resubmission, and we
should inform the user that some activity is in progress with a UI
affordance like a spinner (not implemented in this book).

[]{#CH10.htm#pgfId-1034665}[Code checkpoint]{.fm-callout-head}
[[https://chapter-10-02.hugoinaction.com](https://chapter-10-02.hugoinaction.com){.url}]{.fm-hyperlink},
and source []{#CH10.htm#marker-1034720}[]{#CH10.htm#marker-1034721}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-02](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-02){.url}]{.fm-hyperlink}.

### []{#CH10.htm#pgfId-1015916}10.4.2 Splitting JavaScript into multiple files {#CH10.htm#sigil_toc_id_215 .fm-head1}

[]{#CH10.htm#pgfId-1015947 .calibre9}[]{#CH10.htm#marker-1015941
.calibre9}[]{#CH10.htm#marker-1015943 .calibre9}Our JavaScript code,
although still small and manageable, needs some organization. If we plan
to have more JavaScript code, now would be a good time to think about
organizing it into multiple files. We can split the form-handling code
into two separate files and the form and initialization into individual
files. The following listing splits the code into multiple files, then
the index file for the entire project initializes all the modules rather
than focusing on the contents of a single module.

[]{#CH10.htm#pgfId-1016003}Listing 10.6 Organizing JavaScript code
(AcmeTheme/assets/index.js)

``` programlisting
import FormHandler from "./formHandler" 
  
function init() { 
  FormHandler.init(); 
  
} 
  
init(); 
```

[]{#CH10.htm#pgfId-1016119 .calibre9}We can use the index file to
initialize multiple modules that live in their independent files. The
following listing moves all the code for the form handler to the
formHandler .js file.

[]{#CH10.htm#pgfId-1016176}Listing 10.7 Moving JavaScript code
(AcmeTheme/assets/formHandler.js)

``` programlisting
export default { 
  init() { 
    document.addEventListener('submit', async event => { ... } 
  } 
} 
```

[]{#CH10.htm#pgfId-1034742}[Code checkpoint]{.fm-callout-head}
[[https://chapter-10-03.hugoinaction.com](https://chapter-10-03.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-03](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-03){.url}]{.fm-hyperlink}.

[]{#CH10.htm#pgfId-1016356 .calibre9}Hugo's build pipeline takes care of
taking these JavaScript files and converting them to an optimized bundle
for use in the website. With these changes, we can forget about the
JavaScript code and focus on the website's contents instead.
[]{#CH10.htm#marker-1016446 .calibre9}[]{#CH10.htm#marker-1016449
.calibre9}

### []{#CH10.htm#pgfId-1016455}[]{#CH10.htm#marker-1035271}[]{#CH10.htm#marker-1035269}10.4.3 Passing variables when building JavaScript {#CH10.htm#sigil_toc_id_216 .fm-head1}

[]{#CH10.htm#pgfId-1016484 .calibre9}[]{#CH10.htm#marker-1016466
.calibre9}[]{#CH10.htm#marker-1016468 .calibre9}JavaScript can also get
variables and compilation parameters directly from js.Build so we can
tailor our JavaScript code based on these. One such example is
[]{#CH10.htm#marker-1016473 .calibre9}the [defines]{.fm-code-in-text}
key in the JavaScript build configuration. We can use this to expose the
option in the website configuration to not display the form again after
submission.

[]{#CH10.htm#pgfId-1016493 .calibre9}We can potentially expose this as
an HTML property as well, but that comes with a drawback. If we do not
want to use a feature, the code for that feature is still present in our
JavaScript bundle, wasting bandwidth to download it for our use and to
verify it with another DOM property for accessing it. Although the form
removal code is minimal, the concept applies to large pieces of
JavaScript code used for any custom feature that we need to turn off
until it is ready to be released or included by the website admin.
Because Hugo is all about compile-time optimization, removing unused
code during compilation would be ideal.

[]{#CH10.htm#pgfId-1016515 .calibre9}Let's start by adding the code to
remove the form after submission. We can replace
[form.reset]{.fm-code-in-text} with [form.remove]{.fm-code-in-text} in
our JavaScript code to perform this task. The following listing removes
the form on submission if [REMOVE_FORM_ON_SUBMISSION]{.fm-code-in-text}
is passed as [true]{.fm-code-in-text}.

[]{#CH10.htm#pgfId-1016575}Listing 10.8 Removing the form
(AcmeTheme/assets/formHandler.js)

``` programlisting
if (REMOVE_FORM_ON_SUBMISSION) { 
  form.remove(); 
} else { 
  form.reset(); 
  setTimeout(() => message.remove(), 10000); 
} 
```

[]{#CH10.htm#pgfId-1016742 .calibre9}Next, we need to pass the value
[]{#CH10.htm#marker-1016721 .calibre9}of the
[REMOVE_FORM_ON_SUBMISSION]{.fm-code-in-text} variable from the website
configuration during compilation. We can use the
[defines]{.fm-code-in-text} option in Hugo's js.Build to achieve that
task as the following listing shows. You'll need to add the code in this
listing to AcmeTheme/layouts/default/baseof.html.

[]{#CH10.htm#pgfId-1016802}Listing 10.9 Passing
[REMOVE_FORM_ON_SUBMISSION]{.fm-code-in-listingcaption}

``` programlisting
{{ $defines := dict "REMOVE_FORM_ON_SUBMISSION" 
  (default "false" 
    (site.Param "RemoveFormOnSubmission") 
  ) 
}} 
  
{{ $js := resources.Get "index.js" 
  | js.Build (dict "defines" $defines 
                   "minify" hugo.IsProduction )}} 
```

[]{#CH10.htm#pgfId-1017028 .calibre9}We can control the code to either
reset or remove the form after submission in the Hugo configuration with
this small change. The best part about this is that not even a trace of
another piece of code that's turned off remains in the compiled
JavaScript once it goes through the minifier in the production build. To
test this, we can set [RemoveFormOnSubmission]{.fm-code-in-text} to
[true]{.fm-code-in-text} in the config/\_default/params.yml file, which
returns a view similar to figure 10.3. The following listing enables
form removal on submission from the Hugo configuration.

![CH10_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH10_F03_Jain.png){.calibre1}\

[]{#CH10.htm#pgfId-1046152}Figure 10.3 Removal of the form on submission
from the Contact Us page is achieved with JavaScript, replacing the form
with a message post submission.

[]{#CH10.htm#pgfId-1017088}Listing 10.10 Enabling form removal
(config/\_default/params.yaml)

``` programlisting
RemoveFormOnSubmission: true 
```

[]{#CH10.htm#pgfId-1034815}[Code checkpoint]{.fm-callout-head}
[[https://chapter-10-04.hugoinaction.com](https://chapter-10-04.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-04](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-04){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH10.htm#pgfId-1046188 .calibre9}More options to customize js.Build

[]{#CH10.htm#pgfId-1046189}Hugo's js.Build exposes a lot of options to
customize JavaScript compilation. Here is a subset of the options that
are most useful for our daily use:

-   []{#CH10.htm#pgfId-1046191}[params]{.fm-code-in-text1}[]{#CH10.htm#marker-1035253}---Like
    []{#CH10.htm#marker-1046190}defines, there are parameters that are
    available as variables (think about the default values for the
    configuration). The JavaScript code can supply these. Unlike defines
    that find and replace and need unique names, parameters participate
    as valid JavaScript values in the parser and minifier.

-   []{#CH10.htm#pgfId-1046210}[sourceMap]{.fm-code-in-text1}[]{#CH10.htm#marker-1035255}---Enables
    []{#CH10.htm#marker-1046209}source maps for debugging JavaScript
    code from the minified output.

-   []{#CH10.htm#pgfId-1046212}[target]{.fm-code-in-text1}---Targets
    []{#CH10.htm#marker-1046211}older browsers. The JavaScript compiler
    can convert modern JavaScript to older formats automatically for
    compatibility.

-   []{#CH10.htm#pgfId-1046214}[externals]{.fm-code-in-text1}[]{#CH10.htm#marker-1035265}---Ignores
    []{#CH10.htm#marker-1046213}specific packages that can be assumed to
    be loaded by a CDN.

[]{#CH10.htm#pgfId-1046215}Full configuration options for js.Build are
available on Hugo's JavaScript Building page at
[[https://gohugo.io/hugo-pipes/js/](https://gohugo.io/hugo-pipes/js/){.url}]{.fm-hyperlink}.
[]{#CH10.htm#marker-1046217}[]{#CH10.htm#marker-1046218}[]{#CH10.htm#marker-1046219}[]{#CH10.htm#marker-1046220}
:::

## []{#CH10.htm#pgfId-1017380}10.5 Enabling client-side search {#CH10.htm#sigil_toc_id_217 .fm-head}

[]{#CH10.htm#pgfId-1017397 .calibre9}[]{#CH10.htm#marker-1017391
.calibre9}[]{#CH10.htm#marker-1017393 .calibre9}Just like dynamic form
submissions, a search widget with real-time results as you type requires
JavaScript. Now that we have a skeleton structure of the JavaScript code
and JSON-based pseudo API for the website ready, we can use a search
widget to provide client-side searching.

### []{#CH10.htm#pgfId-1017402}10.5.1 Concept of a client-side search {#CH10.htm#sigil_toc_id_218 .fm-head1}

[]{#CH10.htm#pgfId-1017419 .calibre9}[]{#CH10.htm#marker-1017413
.calibre9}[]{#CH10.htm#marker-1017415 .calibre9}In traditional systems,
search is server-based, where the keyword supplied by the client maps to
values in a search index that provides the best ranking pages for the
keyword. A client-side search is a concept where the server supplies
this index to the client (or the client builds it dynamically), and the
mapping happens on the client. Client-side search has many advantages
over server-based search:

-   []{#CH10.htm#pgfId-1017424 .calibre9}The search index is static
    (like everything else in the Jamstack). It can be distributed over a
    CDN and provide all the advantages of caching and performance that a
    CDN has to offer.

-   []{#CH10.htm#pgfId-1017445 .calibre9}The search index is pushed to
    the client on demand or even preloaded. No roundtrip time is lost in
    sending keystrokes to the server, so the search becomes faster.

-   []{#CH10.htm#pgfId-1017462 .calibre9}There is no additional server
    to maintain and keep in sync with the database. The user's machine
    supplies the resources required to perform the search.

-   []{#CH10.htm#pgfId-1017479 .calibre9}The search can work even if the
    user goes offline after loading the initial web page.

[]{#CH10.htm#pgfId-1017493 .calibre9}The significant limitation of the
client-side search is the size of the index. If we have an extensive
index, preloading the search index can prove to be too
bandwidth-intensive to be of any practical use. We can split the index
and load it in parts on demand, but stretching that approach goes back
to the world of having the entire index maintained by the server.

[]{#CH10.htm#pgfId-1017499 .calibre9}For most websites, the textual
content is not huge from the eyes of the modern web; 2 MB of data can
store 2 million characters. That number is considerable for a text-based
search index but is not a massive overhead for a web page where we often
have images of this size on websites. Although we can create a more
optimized and robust search index in Hugo, the amount of data in the
Acme Corporation website is so tiny that we will supply all of it via
the JSON pseudo API. We can even move the search index creation to
JavaScript if we want. []{#CH10.htm#marker-1017501
.calibre9}[]{#CH10.htm#marker-1017504 .calibre9}

### []{#CH10.htm#pgfId-1017510}10.5.2 Showing the search box in the header {#CH10.htm#sigil_toc_id_219 .fm-head1}

[]{#CH10.htm#pgfId-1017529 .calibre9}[]{#CH10.htm#marker-1017521
.calibre9}[]{#CH10.htm#marker-1017523
.calibre9}[]{#CH10.htm#marker-1017525 .calibre9}A search widget consists
of an input box and a dropdown to show results from partial queries. The
following listing adds this widget to the website header.

[]{#CH10.htm#pgfId-1017585}Listing 10.11 Adding a search form
(AcmeTheme/layouts/\_default/baseof.html)

``` programlisting
<header> 
  ... 
  <span id="search">                               ❶
    <input type="search" placeholder="Search">     ❷
    <div></div>                                    ❸
  </span> 
   
{{ partialCached "menu.html" ... }} 
  ... 
</header> 
```

[]{#CH10.htm#pgfId-1037489}[❶]{.fm-combinumeral} Wrapper div that
contains the search form and the list

[]{#CH10.htm#pgfId-1037510}[❷]{.fm-combinumeral} Actual search form for
the website

[]{#CH10.htm#pgfId-1037527 .calibre9}[❸]{.fm-combinumeral} Placeholder
for search results

[]{#CH10.htm#pgfId-1017828 .calibre9}That is all that is needed. Next,
we will use JavaScript to make this search field active.
[]{#CH10.htm#marker-1017830 .calibre9}[]{#CH10.htm#marker-1017833
.calibre9}[]{#CH10.htm#marker-1017835 .calibre9}

### []{#CH10.htm#pgfId-1017841}[]{#CH10.htm#marker-1030826}[]{#CH10.htm#marker-1030825}[]{#CH10.htm#marker-1030824}10.5.3 Loading the website data {#CH10.htm#sigil_toc_id_220 .fm-head1}

[]{#CH10.htm#pgfId-1017866 .calibre9}[]{#CH10.htm#marker-1017852
.calibre9}[]{#CH10.htm#marker-1017854
.calibre9}[]{#CH10.htm#marker-1017856 .calibre9}To fill the search
results in JavaScript, we need to load the website content from the
pseudo API and create a search index. We can use JavaScript's
[fetch]{.fm-code-in-text} function to push the website data into a
variable
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/03](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/03){.url}]{.fm-hyperlink}).
The following listing loads the website data using this function.

[]{#CH10.htm#pgfId-1017945}Listing 10.12 Loading the website data
(AcmeTheme/assets/search.js)

``` programlisting
export default { 
  async init() { 
    try { 
      const response = 
        await window.fetch("/index.json");    ❶
      if (!response.ok) {                     ❷
        this.removeSearch(); 
        return; 
      } 
      let data = await response.json();       ❸
      // Just for now. 
      console.log(data); 
    } catch(e) { 
      this.removeSearch();                    ❷
    } 
  }, 
  
  removeSearch() { 
    document.querySelector("#search")?.remove(); 
  } 
} 
```

[]{#CH10.htm#pgfId-1037262}[❶]{.fm-combinumeral} Uses fetch() to
download the index file with all the website content

[]{#CH10.htm#pgfId-1037290}[❷]{.fm-combinumeral} In case of error,
removes the search box

[]{#CH10.htm#pgfId-1037307 .calibre9}[❸]{.fm-combinumeral} Gets the
response data from JSON as an object

[]{#CH10.htm#pgfId-1018499 .calibre9}The previous code has one problem
that will break the website if hosted in a subfolder in GitHub Pages.
This code assumes the root directory, /index.json, is where the JSON
version of the code lives. Listing 10.13 passes
[site.BaseURL]{.fm-code-in-text} as another variable to
[defines]{.fm-code-in-text} to fix this. This value needs to be
surrounded by quotation marks to be valid JavaScript. (We could use
[params]{.fm-code-in-text} instead of [defines]{.fm-code-in-text}, which
does not have this limitation.)

[]{#CH10.htm#pgfId-1018559}Listing 10.13 Adding the
[BaseURL]{.fm-code-in-listingcaption}
(AcmeTheme/layouts/default/baseof.html)

``` programlisting
{{ $defines := dict 
  "REMOVE_FORM_ON_SUBMISSION" (default "false" 
          (site.Param "RemoveFormOnSubmission")) 
  "BASE_URL" (print "\"" site.BaseURL "\"") }}      ❶
```

[]{#CH10.htm#pgfId-1037207 .calibre9}[❶]{.fm-combinumeral} Surround with
quotes to make this a valid JavaScript string

[]{#CH10.htm#pgfId-1018738 .calibre9}We will also need to fix our
JavaScript code. The following listing adds [BASE_URL]{.fm-code-in-text}
to ensure that the search always picks up from the correct endpoint.

[]{#CH10.htm#pgfId-1018804}Listing 10.14 Adding
[BASE_URL]{.fm-code-in-listingcaption} (AcmeTheme/assets/search.js)

``` programlisting
const response = await window.fetch(BASE_URL + "/index.json"); 
```

[]{#CH10.htm#pgfId-1018950 .calibre9}Next, we will invoke
[]{#CH10.htm#marker-1018929 .calibre9}the [init]{.fm-code-in-text}
method of the search form from the index as listing 10.15 shows. Even
though the function is asynchronous, we can call it without using
[await]{.fm-code-in-text} if we do not need to wait for it to return a
valid value. This code should log the entire contents of the website in
the browser console.

[]{#CH10.htm#pgfId-1019010}Listing 10.15 Initializing the search query
(AcmeTheme/assets/index.js)

``` programlisting
import Search from "./search" 
  
function init() { 
  ... 
  Search.init(); 
}   
```

::: fm-sidebar-block
[]{#CH10.htm#pgfId-1046239
.calibre9}[]{#CH10.htm#marker-1030742}Handling CORS errors

[]{#CH10.htm#pgfId-1046240}If we read index.json from a different
website in a different domain than the current website, a header [Access
Control Allow Origin]{.fm-code-in-text1} with
[]{#CH10.htm#marker-1046241}the value of [\*]{.fm-code-in-text1} is
required for the browser to allow cross-origin access. If this is not
present, a cross-domain request will fail with an error similar to the
following:

\

[]{#CH10.htm#pgfId-1046242}[No
[]{#CH10.htm#marker-1030740}\'Access-Control-Allow-Origin\' header is
present on the requested resource. If an opaque response serves your
needs, set the request's mode to \'no-cors\' to fetch the resource with
CORS disabled.]{.fm-code-in-text1}

[\
]{.fm-code-in-text1}

[]{#CH10.htm#pgfId-1046244}Cross-origin resource sharing (CORS) is
[]{#CH10.htm#marker-1046243}the standard we need to implement if we want
resources accessible across domains. For this, GitHub Pages provides
[Access-Control-Allow-Origin]{.fm-code-in-text1} by default, but for
Netlify, we need to configure it. As of writing this book, Netlify did
not expose this option in the UI, though we can enable it through the
Netlify configuration.

\

[]{#CH10.htm#pgfId-1046245}If you are using pull request previews in
Netlify, you are likely to hit this error. A sample configuration file
(netlify.toml) is provided in the chapter resources ([[https://
github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/04](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/04){.url}]{.fm-hyperlink}).
:::

 

[]{#CH10.htm#pgfId-1034874}[Code checkpoint]{.fm-callout-head}
[[https://chapter-10-05.hugoinaction.com](https://chapter-10-05.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-05](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-05){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH10.htm#pgfId-1046263 .calibre9}Exercise 10.1

[]{#CH10.htm#pgfId-1046264}Why is Hugo a good choice as a static site
builder even for heavy JavaScript-based projects? (Select all that
apply.)

1.  []{#CH10.htm#pgfId-1046265}Hugo is written in Go and, therefore,
    causes less confusion.

2.  []{#CH10.htm#pgfId-1046266}Hugo has great support for playing nicely
    with client-side JavaScript with a well-defined interface for
    transferring compile-time data.

3.  []{#CH10.htm#pgfId-1046267}Hugo can cross-compile to JavaScript and
    run in a web browser.

4.  []{#CH10.htm#pgfId-1046268}Hugo provides a clear, well-defined
    separation of concerns for build-time and run-time processing.

5.  []{#CH10.htm#pgfId-1046272}Hugo Pipes delivers a rich, powerful, and
    extremely fast JavaScript
    builder.[]{#CH10.htm#marker-1046269}[]{#CH10.htm#marker-1046270}[]{#CH10.htm#marker-1046271}
:::

### []{#CH10.htm#pgfId-1019381}10.5.4 Importing a search library {#CH10.htm#sigil_toc_id_221 .fm-head1}

[]{#CH10.htm#pgfId-1019412 .calibre9}[]{#CH10.htm#marker-1019392
.calibre9}[]{#CH10.htm#marker-1019394
.calibre9}[]{#CH10.htm#marker-1019396 .calibre9}When the data on the
website is small, we can use regular expressions and loop through the
content to find results. It may work, but an excellent full-text search
library can be helpful when we need features []{#CH10.htm#marker-1019401
.calibre9}like *fuzzy matching* (which allows for results with partial
terms and autocompletes) and properly weighted scoring of search
results. The JavaScript ecosystem has many ready-to-use libraries, which
are well-maintained, easy-to-use, and readily available. Node.js
([[https://nodejs.org](https://nodejs.org){.url}]{.fm-hyperlink}) needs
to be installed (we can use any stable version) on the machine for
getting community modules. Once Node.js is available, we can use the npm
(node package manager) command line.

[]{#CH10.htm#pgfId-1019422 .calibre9}Before installing a Node.js
dependency, we need to initialize it for our project. We have multiple
projects on our website: the AcmeTheme project and the Acme Corporation
website project. Because the search code lives in AcmeTheme and is
shared, we need to initialize Node.js in the AcmeTheme project as the
following listing shows. To do that, we will run [npm
init]{.fm-code-in-text} to get a package.json file that can list our
JavaScript-based dependencies.

[]{#CH10.htm#pgfId-1019488}Listing 10.16 Initializing Node.js (in
AcmeTheme/)

``` programlisting
npm init 
```

[]{#CH10.htm#pgfId-1019545 .calibre9}Next, we need to search for and
download a Node.js module to help users with fuzzy
searches[]{#CH10.htm#marker-1019636}. To find a library, you can use
[]{#CH10.htm#marker-1019534 .calibre9}the [npm search]{.fm-code-in-text}
command as shown in listing 10.17; listing 10.18 shows the results.

[]{#CH10.htm#pgfId-1019605}Listing 10.17 Searching for a fuzzy search
library

``` programlisting
search fuzzy search 
```

[]{#CH10.htm#pgfId-1019713}Listing 10.18 Search results for [fuzzy
search]{.fm-code-in-listingcaption}

``` programlisting
> npm search fuzzy search 
NAME                 | DESCRIPTION           | AUTHOR          | DATE      | 
fuse.js              | Lightweight...        | =krisk          | 2021-01-05| 
fastest-levenshtein  | Fastest Levenshtein...| =ka-weihe       | 2020-08-07| 
fuzzy-search         | Simple fuzzy search   | =wouter2203     | 2020-02-20| 
feathers-mongodb-f...| hook which adds...    | =arve0          | 2020-09-13| 
minisearch           | Tiny but powerful...  | =lucaong        | 2021-06-25| 
mongoose-fuzzy-sea...| Mongoose fuzzy...     | =vspallas       | 2020-11-03| 
fuzzy-tools          | Functions for fuzzy...| =axules         | 2021-04-18| 
fuzzy                | small, standalone...  | =mattyork       | 2016-10-01| 
leven-match          | Return all word...    | =eklem          | 2021-06-11| 
fuzzysearch          | Tiny and...           | =bevacqua       | 2015-03-06| 
mongoose-fuzzy       | Mongoose fuzzy...     | =pabloc         | 2020-07-28| 
scored-fuzzysearch   | Tiny and...           | =jhudson        | 2020-07-31| 
neofuzzy             | Quick fuzzy search... | =jeanno         | 2020-11-26| 
fuzzy-search-mongo...| Fuzzy search          | =piotreksl      | 2020-09-28| 
vue-fuse             | A Vue.js pluggin...   | =shayneosulli...| 2021-07-02| 
liblevenshtein       | Various utilities...  | =dylon.edwards  | 2015-07-04| 
fuzzy-pop            | Simple fuzzy search...| =yoshokatana    | 2015-05-05| 
fast-fuzzy           | Fast and tiny...      | =ethanrutherf...| 2021-05-19| 
react-fuzzy-picker   | Search through a...   | =1egoman        | 2019-09-29| 
```

[]{#CH10.htm#pgfId-1020093 .calibre9}Here the root command passed to npm
is [search]{.fm-code-in-text}; we are searching for a library that
provides [fuzzy search]{.fm-code-in-text}. The top result from npm is
Fuse.js. A quick check over the internet shows us that Fuse.js has an
Apache license, reasonably small (\< 50 KB), has no other dependencies,
and has been maintained regularly for almost a decade with regular
releases along with having a lot of downloads and packages that depend
on it.

[]{#CH10.htm#pgfId-1020151 .calibre9}To add a dependency, we can use
[]{#CH10.htm#marker-1020104 .calibre9}the [npm
install]{.fm-code-in-text} command. The [\--save-dev]{.fm-code-in-text}
flag saves []{#CH10.htm#marker-1020130 .calibre9}the development
dependency in package.json so that it is available for use if we run
[npm install]{.fm-code-in-text} on a new machine. A *development
dependency* means []{#CH10.htm#marker-1020156 .calibre9}that it is used
only during development and is not required in the released website.
Because we compile our dependencies, we do not need them at run time.
For the sake of maintaining compatibility in the book, we would
recommend using version 6 of Fuse.js. The following listing adds this as
a dependency.

[]{#CH10.htm#pgfId-1020217}Listing 10.19 Adding Fuse.js as a dependency
(in AcmeTheme/)

``` programlisting
npm install --save-dev fuse.js@6 
```

[]{#CH10.htm#pgfId-1020261 .calibre9}This command generates a file
called package-lock.json along with a node_modules folder at the root
directory in parallel to package.json. The package-lock.json is
equivalent to go.sum in Netlify and holds the checksums to ensure the
integrity of our dependencies. The node_modules folder is similar to the
\_vendor folder, which stores our dependencies. Note that npm does not
create a hidden folder for the dependencies. []{#CH10.htm#marker-1020263
.calibre9}[]{#CH10.htm#marker-1020266
.calibre9}[]{#CH10.htm#marker-1020268 .calibre9}

### []{#CH10.htm#pgfId-1020274}10.5.5 Updating our build systems to support npm {#CH10.htm#sigil_toc_id_222 .fm-head1}

[]{#CH10.htm#pgfId-1020311 .calibre9}[]{#CH10.htm#marker-1020285
.calibre9}[]{#CH10.htm#marker-1020287
.calibre9}[]{#CH10.htm#marker-1020289
.calibre9}[]{#CH10.htm#marker-1020291 .calibre9}Unless archiving, it
does not make sense to submit the node_modules folder to source control.
But that may be easier said than done because we need to run
[npm]{.fm-code-in-text} [install]{.fm-code-in-text} from the AcmeTheme
module to get its contents. And, running [npm]{.fm-code-in-text}
[install]{.fm-code-in-text} from the AcmeTheme module may not be
possible because Hugo, by default, puts modules in a hidden folder.
Therefore, we need a way to get the Fuse.js dependency exposed to the
top-level AcmeCorporationWebsite project.

[]{#CH10.htm#pgfId-1020320 .calibre9}To perform this task, we need to
rename package.json in the AcmeTheme module to package.hugo.json. If
there is a package.hugo.json file present in a Hugo module, Hugo
understands that this module depends on npm, and Hugo is allowed to copy
its dependencies to the top-level project. To transfer our dependency to
the top-level project for the Acme Corporation website, we can run the
command in the following listing to pack all the module packages in the
website root folder.

[]{#CH10.htm#pgfId-1020377}Listing 10.20 Generating the top-level
package.json

``` programlisting
hugo mod npm pack 
```

[]{#CH10.htm#pgfId-1020453 .calibre9}After we run this command, Hugo
initializes the top-level project for the Acme Corporation website as an
npm-based project and creates a package.hugo.json and a package .json.
Now we can run [npm install]{.fm-code-in-text} at the top-level project
to get the node_modules and package-lock.json files in that folder. The
ones in the AcmeTheme project are redundant, and we can delete them. If
we ever add a new dependency to the AcmeTheme project, we need to add it
to the package.hugo.json file and run []{#CH10.htm#marker-1020442
.calibre9}the [hugo mod npm pack]{.fm-code-in-text} command again.

[]{#CH10.htm#pgfId-1020504 .calibre9}Next, we need to update our build
script to install npm-based dependencies. For this to work, we need the
[npm install]{.fm-code-in-text} command installed
[]{#CH10.htm#marker-1020473 .calibre9}on the build machines. Netlify's
build machines come preinstalled with npm, although for GitHub Actions,
we need to add a step. (Note that [npm i]{.fm-code-in-text} is shorthand
for [npm install]{.fm-code-in-text}.) There is also an [npm
ci]{.fm-code-in-text} command that []{#CH10.htm#marker-1020509
.calibre9}ensures the dependencies match package-lock.json, but it
deletes the already installed node_modules and can cause builds to take
longer.

[]{#CH10.htm#pgfId-1020519 .calibre9}Note that because we have the same
version of our Hugo Modules-based dependencies in go.sum, the npm-based
dependencies of Hugo Modules cannot change across builds. Therefore, we
need to run [hugo mod npm pack]{.fm-code-in-text} when we change our
modules and check in the generated package.json in source control.

[]{#CH10.htm#pgfId-1020534}Updating Netlify

[]{#CH10.htm#pgfId-1020561 .calibre9}[]{#CH10.htm#marker-1020545
.calibre9}[]{#CH10.htm#marker-1020547
.calibre9}[]{#CH10.htm#marker-1020549
.calibre9}[]{#CH10.htm#marker-1020551 .calibre9}We can update the build
command in Netlify from the Site Settings \> Build & Deploy \>
Continuous Deployment \> Build Command section. Because the Netlify UI
takes only one text box for the build command, we can use the
[&&]{.fm-code-in-text} operator to pipe commands as the following
listing shows to ensure both commands succeed to call the build a
success.

[]{#CH10.htm#pgfId-1020621}Listing 10.21 Setting up npm dependencies to
build the website using Hugo

``` programlisting
npm i && hugo --minify --baseURL $DEPLOY_PRIME_URL  
```

::: fm-sidebar-block
[]{#CH10.htm#pgfId-1046289 .calibre9}Older commits and build machine
changes

[]{#CH10.htm#pgfId-1046290}If we change the build settings, our older
commits where package.json is not present will not build on Netlify.
Although that is rarely a problem, it is good to have the older builds
deployable. The ideal solution is to move the Netlify configuration from
the UI to a file as discussed in chapter 13. If we want to continue
using the Netlify UI, we can change the build script to run [npm
i]{.fm-code-in-text1} only if a package.json file is present and,
otherwise, skip [npm i]{.fm-code-in-text1}. The
[]{#CH10.htm#marker-1046291}following [test]{.fm-code-in-text1}
command[]{#CH10.htm#marker-1030896} checks if package.json exists and
runs [npm i]{.fm-code-in-text1} if it does. Irrespective of what
happens, [hugo]{.fm-code-in-text1} is run after that:

``` programlisting
(test -f package.json && npm i || true ) && 
➥ hugo --minify --baseURL $DEPLOY_PRIME_URL
```
:::

::: fm-sidebar-block
[]{#CH10.htm#pgfId-1046320 .calibre9}Exercise 10.2

[]{#CH10.htm#pgfId-1046321}We can use \_\_\_\_\_\_\_\_ as a means to
expose the data available to the static site builder and the run-time
processing code that needs it.
:::

[]{#CH10.htm#pgfId-1020865}Updating GitHub Actions

[]{#CH10.htm#pgfId-1020892 .calibre9}[]{#CH10.htm#marker-1020876
.calibre9}[]{#CH10.htm#marker-1020878
.calibre9}[]{#CH10.htm#marker-1020880
.calibre9}[]{#CH10.htm#marker-1020882 .calibre9}For GitHub Pages, we
need to add a set of build steps in gh-pages.yml to set up Node.js and
then run [npm i]{.fm-code-in-text}. The code in the following listing
makes these changes to GitHub Actions to install npm and npm-based
dependencies.

[]{#CH10.htm#pgfId-1020952}Listing 10.22 Changes to GitHub Actions
(.github/workflows/.gh-pages.yml)

``` programlisting
jobs: 
  deploy: 
    steps: 
      ... 
      - name: Use Node.js 
        uses: actions/setup-node@v1 
        with: 
          node-version: '16.x' 
  
      - name: Install NPM Dependencies 
        run: npm i 
```

[]{#CH10.htm#pgfId-1021074 .calibre9}With these changes, we have the
Fuse.js search library ready to use in our JavaScript code.
[]{#CH10.htm#marker-1021076 .calibre9}[]{#CH10.htm#marker-1021079
.calibre9}[]{#CH10.htm#marker-1021081
.calibre9}[]{#CH10.htm#marker-1021083
.calibre9}[]{#CH10.htm#marker-1021085
.calibre9}[]{#CH10.htm#marker-1021087
.calibre9}[]{#CH10.htm#marker-1021089
.calibre9}[]{#CH10.htm#marker-1021091 .calibre9}

### []{#CH10.htm#pgfId-1021097}10.5.6 Creating a search index {#CH10.htm#sigil_toc_id_223 .fm-head1}

[]{#CH10.htm#pgfId-1021152 .calibre9}[]{#CH10.htm#marker-1021108
.calibre9}[]{#CH10.htm#marker-1021110
.calibre9}[]{#CH10.htm#marker-1021112 .calibre9}We can import Fuse.js by
using the [import]{.fm-code-in-text} statement in JavaScript. After
fetching the website data, we need to pass this to Fuse.js to create a
search index. We will be making a weighted search index that allows for
having the word in the web page title given a much higher value than one
that's present in the web page content. The title gets a weight of
[20]{.fm-code-in-text}, a tag score of [5]{.fm-code-in-text}, and the
content gets a weight of [1]{.fm-code-in-text}.

[]{#CH10.htm#pgfId-1021161 .calibre9}We store the search index as a
local variable of the module. This way, it can be used by all methods in
the modules. Because search is not a class and we expect only one
instance, a local variable of the module acts like a private variable
that's not accessible outside of this file. Listing 10.23 imports the
Fuse.js library to perform a search with JSON-based content. Fuse.js
provides support for fuzzy matching and weighted searches to provide a
great searching experience. Running this in JavaScript makes the search
responsive and fast.

[]{#CH10.htm#pgfId-1021218}Listing 10.23 Importing the Fuse.js library
(AcmeTheme/assets/search.js)

``` programlisting
import Fuse from 'fuse.js' 
  
let index = null;                                ❶
export default { 
  init() { 
    ... 
  
    let data = await response.json(); 
    index= new Fuse(data, {                      ❷
      keys: [{ 
        name: 'title',                           ❸
        weight: 20 
      }, { 
        name: 'tag', 
        weight: 5 
      }, { 
        name: 'content'                          ❹
      }] 
    }); 
    // Just to test. Do not leave in code. 
    console.log(index.search('acme'));           ❺
  } 
} 
```

[]{#CH10.htm#pgfId-1036806}[❶]{.fm-combinumeral} Creates a module
variable to store the index to use in all functions

[]{#CH10.htm#pgfId-1036830}[❷]{.fm-combinumeral} Creates a Fuse.js index

[]{#CH10.htm#pgfId-1036854}[❸]{.fm-combinumeral} Adds title with a
weight of 20

[]{#CH10.htm#pgfId-1036876}[❹]{.fm-combinumeral} If not provided, weight
is treated as 1.

[]{#CH10.htm#pgfId-1036893 .calibre9}[❺]{.fm-combinumeral} When
developing, leaving a test query can help. We log the search results to
the browser's console.

[]{#CH10.htm#pgfId-1021820}[Note]{.fm-callout-head} If we have a lot of
data on a website and think that index.json is too big, we can process
the file in Hugo and remove common words like "and", "or", and so forth
that we do not care about in the search index.

[]{#CH10.htm#pgfId-1034931}[Code checkpoint]{.fm-callout-head}
[[https://chapter-10-06.hugoinaction.com](https://chapter-10-06.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH10.htm#marker-1034952}[]{#CH10.htm#marker-1034953}[]{#CH10.htm#marker-1034954}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-06](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-06){.url}]{.fm-hyperlink}.

### []{#CH10.htm#pgfId-1021826}10.5.7 Getting search input and showing results {#CH10.htm#sigil_toc_id_224 .fm-head1}

[]{#CH10.htm#pgfId-1021946 .calibre9}[]{#CH10.htm#marker-1021934
.calibre9}[]{#CH10.htm#marker-1021936 .calibre9}With the search input
box and the search method ready, the next step is to link the two
together. The first thing we need to do is listen to the input event on
the search box. We will run a search query as soon as the user enters a
single character in the search box and display the page title in the
[result div]{.fm-code-in-text}. If the user presses the Enter key, we
will navigate to the first search result. We will also limit the number
of search results to a reasonable number.

[]{#CH10.htm#pgfId-1021955 .calibre9}We also need to show the search
result dropdown when the user moves the focus to the search box and
remove it when the user clicks outside. Listing 10.24 shows the search
results inline via a dropdown. The code is relatively straightforward.
We use the [input]{.fm-code-in-text} event to
[]{#CH10.htm#marker-1021966 .calibre9}take keyboard and context menu
entries. The input event is the best one for a text box because it
handles uncommon cases like copy and paste via mouse as well as regular
keyboard presses. The full file after this change is present in the
chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/05](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/05){.url}]{.fm-hyperlink}).

[]{#CH10.htm#pgfId-1022046}Listing 10.24 Showing the search results
(AcmeTheme/assets/search.js)

``` programlisting
import Fuse from 'fuse.js' 
  
let index = null; 
const MAX_SEARCH_RESULTS = 5; 
  
export default { 
  init() { 
    ... 
    document.addEventListener("input",                       ❶
         this.showResults);                                  ❶
  } 
  
  showResults(event) { 
    const searchBox = document.querySelector("search input"); 
    if (event.target !== searchBox) { 
      return; 
    } 
    const result = document.querySelector("#search div"); 
    result.style.display = "block"; 
    if (searchBox.value.length > 0) { 
      const results = index.search(searchBox.value); 
      result.innerHTML = results                             ❷
        .slice(0, MAX_SEARCH_RESULTS)                        ❸
        .map(x => `<a href="${x.item.url}"> 
          <img src="${x.item.cover || ""}" 
             width="40" height="40"> 
          <h3>${x.item.title}</h3> 
          <span>${x.item.content.substr(0,40)}</span> 
        </a>`)                                               ❹
        .join(""); 
    } else { 
      result.innerHTML = ''; 
    } 
  }, 
  ... 
} 
```

[]{#CH10.htm#pgfId-1036417}[❶]{.fm-combinumeral} Adds the input event

[]{#CH10.htm#pgfId-1036438}[❷]{.fm-combinumeral} innerHTML replaces the
contents of the dropdown. We can update existing DOM elements instead if
performance is a concern.

[]{#CH10.htm#pgfId-1036455}[❸]{.fm-combinumeral} Limits the number of
search results to MAX_SEARCH_RESULTS

[]{#CH10.htm#pgfId-1036472 .calibre9}[❹]{.fm-combinumeral} Provides a
rich dropdown experience with an image and accompanying text

[]{#CH10.htm#pgfId-1035010}[Code checkpoint]{.fm-callout-head}
[[https://chapter-10-07.hugoinaction.com](https://chapter-10-07.hugoinaction.com){.url}]{.fm-hyperlink},
and source []{#CH10.htm#marker-1035034}[]{#CH10.htm#marker-1035035}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-07](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-07){.url}]{.fm-hyperlink}.

[]{#CH10.htm#pgfId-1023178 .calibre9}Note that the variable
[MAX_SEARCH_RESULTS]{.fm-code-in-text} can []{#CH10.htm#marker-1023157
.calibre9}come from the Hugo configuration as [define]{.fm-code-in-text}
or as [param]{.fm-code-in-text}. With these changes, we have a working
search box (figure 10.4) in our website to help users navigate the
entire content. The GitHub Pages repository with the npm changes is
present at
[[https://github.com/hugoinaction/GitHubPagesNpm](https://github.com/hugoinaction/GitHubPagesNpm){.url}]{.fm-hyperlink}.

![CH10_F04_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH10_F04_Jain.png){.calibre1}\

[]{#CH10.htm#pgfId-1046340}Figure 10.4 The search box with a results
dropdown in the Acme Corporation website. The search box can be added in
Jamstack-based websites using a pseudo API to get all contents and then
using JavaScript to filter it.

### []{#CH10.htm#pgfId-1023198}10.5.8 Using Hugo modules with JavaScript {#CH10.htm#sigil_toc_id_225 .fm-head1}

[]{#CH10.htm#pgfId-1023326 .calibre9}[]{#CH10.htm#marker-1023318
.calibre9}[]{#CH10.htm#marker-1023320
.calibre9}[]{#CH10.htm#marker-1023322 .calibre9}Although using npm is
straightforward, we can continue to use Hugo modules to load
dependencies. Hugo Modules allow dependencies to provide template code,
bundled content, and other Hugo-specific data alongside JavaScript. The
assets folder in a Hugo module acts as the node_modules folder in
Node.js.

[]{#CH10.htm#pgfId-1023331 .calibre9}We did not add any keyboard
handling in our search handler. We will import a Hugo module called
AcmeSearchSupport
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/06](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/06){.url}]{.fm-hyperlink})
to perform this task. Let's start by adding this as a dependency to the
AcmeTheme project in listing 10.25.

::: fm-sidebar-block
[]{#CH10.htm#pgfId-1046441 .calibre9}Exercise 10.3

[]{#CH10.htm#pgfId-1046442}Although npm is a huge ecosystem and has many
times more content than that of Hugo Modules, we can choose to use Hugo
Modules due to the ability to load Hugo-specific \_\_\_\_\_\_\_\_\_.
:::

[]{#CH10.htm#pgfId-1023425}Listing 10.25 Adding AcmeSearchSupport
(AcmeTheme/config.yaml)

``` programlisting
module: 
  ... 
  imports: 
    ... 
    - path: github.com/hugoinaction/AcmeSearchSupport 
```

[]{#CH10.htm#pgfId-1023487 .calibre9}Next, we load this module as our
search.js and call it during initialization. The following listing loads
the JavaScript code from Hugo Modules, which is compiled by js.Build.

[]{#CH10.htm#pgfId-1023544}Listing 10.26 Loading JavaScript code
(AcmeTheme/assets/search.js)

``` programlisting
import AcmeSearchSupport from "SearchSupport" 
... 
export default { 
  async init() { 
  ... 
    try { 
      ... 
      AcmeSearchSupport(); 
    } catch (e) { 
      this.removeSearch(); 
    } 
  }, 
  ... 
} 
```

[]{#CH10.htm#pgfId-1035090}[Code checkpoint]{.fm-callout-head}
[[https://chapter-10-08.hugoinaction.com](https://chapter-10-08.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH10.htm#marker-1035113}[]{#CH10.htm#marker-1035114}[]{#CH10.htm#marker-1035115}[]{#CH10.htm#marker-1035116}[]{#CH10.htm#marker-1035117}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-08](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-08){.url}]{.fm-hyperlink}.

## []{#CH10.htm#pgfId-1023798}10.6 An SPA in a Hugo website {#CH10.htm#sigil_toc_id_226 .fm-head}

[]{#CH10.htm#pgfId-1023916 .calibre9}[]{#CH10.htm#marker-1023910
.calibre9}[]{#CH10.htm#marker-1023912 .calibre9}Hugo does not target the
creation of SPAs. The whole concept behind Hugo is getting a static
website with content built from text stored as markup-based documents on
disk. Hugo is not the right technology if we want to create an SPA like
Google Docs. A JavaScript-based frontend framework may be a better
choice for this use case.

[]{#CH10.htm#pgfId-1023921 .calibre9}That does not mean that Hugo has
nothing to offer for single-page scenarios. An SPA also needs a
content-based website like some help or documentation pages, a privacy
policy page, (optionally) a landing page used for introducing the users
to the product, and (maybe) a blog. Adding those pages with the
technology used to build SPAs is not the best strategy. SPAs are
difficult to index by search engines. SPAs require a time-consuming
download, the execution of vast blobs of JavaScript, and are not great
citizens of the document-based web. They need to manually handle use
cases like the mouse middle click and the browser back icon.

[]{#CH10.htm#pgfId-1023927 .calibre9}One advantage of using Hugo with an
SPA is clear demarcation of the prebuilt and run-time code. Because Hugo
is agnostic of a JavaScript framework and all the logic resides entirely
in the build process, there are minimal chances of collisions with the
JavaScript code and framework used for the SPA.

[]{#CH10.htm#pgfId-1023933 .calibre9}This section creates a new web page
for the Acme Corporation website that will be a single-page application,
which provides an SVG shape editor for its users. This page will share a
header generated and managed by Hugo, and the contents will come from
JavaScript as an SPA. We will use the EasyLogic editor
([[https://editor.easylogic.studio/](https://editor.easylogic.studio/){.url}]{.fm-hyperlink})
as the SPA embedded in the web page. The EasyLogic editor is
MIT-licensed and is available as a packaged npm module that we can
import into our website. This editor will be managed as an independent
SPA outside the website but will be assembled at the right endpoint by
Hugo and fully functional and integrated into the website.

### []{#CH10.htm#pgfId-1023940}10.6.1 Importing a node module in the root project {#CH10.htm#sigil_toc_id_227 .fm-head1}

[]{#CH10.htm#pgfId-1023987 .calibre9}[]{#CH10.htm#marker-1023951
.calibre9}[]{#CH10.htm#marker-1023953
.calibre9}[]{#CH10.htm#marker-1023955
.calibre9}[]{#CH10.htm#marker-1023957 .calibre9}The EasyLogic editor is
available as an npm-based node module that we will import into our
project. Because we do not want to expose this editor to AcmeTheme, we
will import this directly into the Acme Corporation website. We need to
convert the website into a Node.js project as well, and we will need to
run [npm init]{.fm-code-in-text} and set up package.json like we did in
the AcmeTheme repository. Next, we can install the EasyLogic editor via
npm (using 0.10.72 for compatibility with the book). To do that, we can
update package.hugo.json with this new dependency as shown in the
following listing.

[]{#CH10.htm#pgfId-1024047}Listing 10.27 Adding the EasyLogic editor as
a dependency (package.hugo.json)

``` programlisting
{ 
  ... 
  "devDependencies": { 
    "@easylogic/editor": "0.10.72" 
  } 
} 
```

[]{#CH10.htm#pgfId-1035321 .calibre9}Then after we update the
dependency, we run [hugo]{.fm-code-in-text} [mod]{.fm-code-in-text}
[npm]{.fm-code-in-text} [pack]{.fm-code-in-text} and
[npm]{.fm-code-in-text} [install]{.fm-code-in-text}:

``` programlisting
hugo mod npm pack 
npm i 
```

[]{#CH10.htm#pgfId-1024178 .calibre9}The final generated package.json is
provided in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/07](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-resources/07){.url}]{.fm-hyperlink}).
[]{#CH10.htm#marker-1024198 .calibre9}[]{#CH10.htm#marker-1024201
.calibre9}[]{#CH10.htm#marker-1024203
.calibre9}[]{#CH10.htm#marker-1024205 .calibre9}

### []{#CH10.htm#pgfId-1024211}10.6.2 Creating a template for the SPA {#CH10.htm#sigil_toc_id_228 .fm-head1}

[]{#CH10.htm#pgfId-1024230 .calibre9}[]{#CH10.htm#marker-1024222
.calibre9}[]{#CH10.htm#marker-1024224
.calibre9}[]{#CH10.htm#marker-1024226 .calibre9}We can put an HTML file
directly in our content folder, but if we need to use Hugo's variables,
we will need to create a template. Using a Hugo template, we can control
information with the configuration and front matter, reuse the shared
code to create the header, and have tighter integration with the rest of
the website.

[]{#CH10.htm#pgfId-1024264 .calibre9}Let's create a new layout called
"editor" in the default layout folder. We do not need a new content type
as we are not making a section but instead a single page. In this new
layout, we will leave the website's header intact, replacing the body
section with the SPA that we need to display. For the SPA, we will
create a new JavaScript file in the assets folder. Because the editor
has a large JavaScript file, we do not want to load this on every web
page, so we will leave this independent. Let's call this Editor.js and
load the file in the new template as the following listing shows. We
will give the editor []{#CH10.htm#marker-1024237 .calibre9}layout the
[editor]{.fm-code-in-text} class for []{#CH10.htm#marker-1024253
.calibre9}the [body]{.fm-code-in-text} tag.

[]{#CH10.htm#pgfId-1024324}Listing 10.28 Loading Editor.js
(layouts/\_default/editor.html)

``` programlisting
{{define "bodyClass"}}editor{{end}} 
{{define "body"}} 
{{ $js := resources.Get "editor.js" | js.Build }} 
<div id="app"> 
  <div class="loader"></div> 
</div> 
{{end}} 
```

[]{#CH10.htm#pgfId-1024512}[Note]{.fm-callout-head} If we want to import
the JavaScript files to the [\<head\>]{.fm-code-in-text1} section of our
website, we will need to create a new block in the base template.

[]{#CH10.htm#pgfId-1024527 .calibre9}In Editor.js, we will import the
EasyLogic editor. The following listing shows how to do this.

[]{#CH10.htm#pgfId-1024584}Listing 10.29 Importing the EasyLogic editor
(assets/editor.js)

``` programlisting
import EasyLogic from "@easylogic/editor"; 
  
const app = new EasyLogic.createDesignEditor({ 
  container: document.getElementById('app') 
}); 
```

[]{#CH10.htm#pgfId-1024750 .calibre9}Because the editor is packaged and
ready-to-use, we do not need to configure it for it to work. It does not
require any initialization to function. []{#CH10.htm#marker-1046476
.calibre9}[]{#CH10.htm#marker-1046477
.calibre9}[]{#CH10.htm#marker-1046478 .calibre9}

::: fm-sidebar-block
[]{#CH10.htm#pgfId-1046532 .calibre9}Exercise 10.4

[]{#CH10.htm#pgfId-1046533}Hugo (is/is not) a great tool for building a
single-page application (SPA). If we build the SPA in a different
framework Hugo (can/cannot) play nicely with it.
:::

![CH10_F05_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH10_F05_Jain.png){.calibre1}\

[]{#CH10.htm#pgfId-1046502}Figure 10.5 It's a win-win! Engineering plans
to shift to the Jamstack, and management gets huge savings for the
release schedule.

### []{#CH10.htm#pgfId-1024797}10.6.3 Importing CSS {#CH10.htm#sigil_toc_id_229 .fm-head1}

[]{#CH10.htm#pgfId-1024822 .calibre9}[]{#CH10.htm#marker-1024808
.calibre9}[]{#CH10.htm#marker-1024810
.calibre9}[]{#CH10.htm#marker-1024812 .calibre9}The EasyLogic editor
calls for a CSS file that needs to be loaded. Although CSS does not come
with its module system, developers have used npm to export CSS files.
Hugo does not support the resolution of CSS files in the JavaScript code
as of version 0.91.2. We need to use either PostCSS or SCSS to import
the CSS file outside of the assets folder. PostCSS and SCSS (via a
plugin) support [\@import]{.fm-code-in-text} statements to
[]{#CH10.htm#marker-1024827 .calibre9}import external SCSS or CSS files
into an existing file. Alternatively, we can use a readFile to read the
CSS file and import it into Hugo directly. We will use the readFile
solution as it is the simplest for our use case. The following listing
reads the EasyLogic CSS file and embeds it in the editor page.

[]{#CH10.htm#pgfId-1024888}Listing 10.30 Reading the EasyLogic CSS file
(layouts/default/editor.html)

``` programlisting
{{define "body"}} 
... 
{{ $style := readFile "node_modules/@easylogic/editor/dist/editor.css" | 
  resources.FromString "editor.scss" | toCSS | minify }}                  ❶
<link rel="stylesheet" href="{{ $style.Permalink }}"> 
<div id="app"></div> 
{{end}} 
```

[]{#CH10.htm#pgfId-1036330 .calibre9}[❶]{.fm-combinumeral} Uses the
shorthand toCSS for resources.ToCSS, which is available in each resource
object []{#CH10.htm#marker-1036353 .calibre9}[]{#CH10.htm#marker-1036354
.calibre9}[]{#CH10.htm#marker-1036355 .calibre9}

### []{#CH10.htm#pgfId-1025153}10.6.4 Creating a web page {#CH10.htm#sigil_toc_id_230 .fm-head1}

[]{#CH10.htm#pgfId-1025172 .calibre9}[]{#CH10.htm#marker-1025164
.calibre9}[]{#CH10.htm#marker-1025166
.calibre9}[]{#CH10.htm#marker-1025168 .calibre9}Once we have a working
template, we need to create a markup document to use the EasyLogic
editor. We will add editor.md to the content folder with this new
layout. We will also add an entry to our top menu for the editor
endpoint as the following listing shows.

[]{#CH10.htm#pgfId-1025228}Listing 10.31 Creating a markup page for the
editor (content/editor.md)

``` programlisting
--- 
layout: editor 
menu: 
  main: 
    name: Editor 
    identifier: editor 
    weight: 130 
    post: Build it your way 
--- 
```

[]{#CH10.htm#pgfId-1035181}[Code checkpoint]{.fm-callout-head}
[[https://chapter-10-09.hugoinaction.com](https://chapter-10-09.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-10-09](https://github.com/hugoinaction/hugoinaction/tree/chapter-10-09){.url}]{.fm-hyperlink}.

[]{#CH10.htm#pgfId-1025342 .calibre9}With these changes, we now have a
shape editor (figure 10.6) built into the Acme Corporation website,
loaded as an SPA, and managed in JavaScript. Although decoupled from the
Hugo website, it still uses Hugo for the website's content, which
supports the SPA.

![CH10_F06_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH10_F06_Jain.png){.calibre1}\

[]{#CH10.htm#pgfId-1046554}Figure 10.6 The EasyLogic editor is embedded
in the Acme Corporation website, converting it into a hybrid website
with an SPA in a Hugo website.

[]{#CH10.htm#pgfId-1025446 .calibre9}JavaScript, just like an API, is
such a vast topic that even an entire book is not enough to cover it
completely. In this chapter, we focused on Hugo's touchpoints to
interact with JavaScript to have the Acme Corporation website delve into
the entire Jamstack. In the next chapter, we will be showing some
advanced features enabled by creating custom APIs to extend the power of
Hugo, keeping in alignment with the principles of website compilation
that form its founding guidelines. []{#CH10.htm#marker-1025462
.calibre9}[]{#CH10.htm#marker-1025465
.calibre9}[]{#CH10.htm#marker-1025467
.calibre9}[]{#CH10.htm#marker-1025469
.calibre9}[]{#CH10.htm#marker-1025471 .calibre9}

## []{#CH10.htm#pgfId-1025477}Summary {#CH10.htm#sigil_toc_id_231 .fm-head}

-   []{#CH10.htm#pgfId-1025487 .calibre9}JavaScript is one of the three
    pillars of the Jamstack for a simple reason: the browser reserves
    some web features to be available only to the client-side JavaScript
    language.

-   []{#CH10.htm#pgfId-1025501 .calibre9}Hugo has built a unique
    pipeline to play nicely with the JavaScript ecosystem and goes to
    great lengths to ensure that we can achieve the full capabilities
    that we desire from our JavaScript code.

-   []{#CH10.htm#pgfId-1025511 .calibre9}When building its JavaScript
    integration, the Hugo team reinforced its performance objectives,
    ensuring that Hugo has one of the fastest JavaScript builders with
    full support for interacting with the Node Package Manager (npm) and
    the entire JavaScript/TypeScript ecosystem.

-   []{#CH10.htm#pgfId-1025521 .calibre9}We can use JavaScript to reload
    parts of a web page and submit forms dynamically to a website.

-   []{#CH10.htm#pgfId-1025531 .calibre9}JavaScript can do calculations
    on the client, providing cheaper, faster, and easier-to-maintain
    versions of what used to be server-bound features such as search.

-   []{#CH10.htm#pgfId-1025541 .calibre9}We can build a decoupled
    single-page application (SPA) in a Hugo website and have a good
    division of responsibilities, where JavaScript is responsible for
    the interactive pieces. At the same time, Hugo focuses on the
    content-based parts of the entire web-based solution.

[]{#CH11.htm}

# []{#CH11.htm#pgfId-1027126}11 Breaking barriers with custom APIs and webhooks {#CH11.htm#heading_id_2 .tochead}

[]{#CH11.htm#pgfId-1029521}This chapter covers

-   []{#CH11.htm#pgfId-1029560 .calibre9}Creating custom API endpoints
    and hosting them as cloud functions
-   []{#CH11.htm#pgfId-1029561 .calibre9}Creating and calling APIs to
    extend Hugo's core functionality
-   []{#CH11.htm#pgfId-1029562 .calibre9}Adding compile-time LaTeX
-   []{#CH11.htm#pgfId-1029549 .calibre9}Hooking up webhooks with APIs
    to automate manual tasks

[]{#CH11.htm#pgfId-1011804 .calibre9}APIs are marvelous. We can
encapsulate the most complicated functionality behind an easy-to-use
API, and its users don't need to know the logic or the details of how an
API works. Chapter 9 went over some APIs provided by third parties,
which worked for us. But it is not always possible to get APIs for
everything we need. Some functionality might be particular to our
website or be our secret sauce. We need to write this ourselves. The
Jamstack identifies that as a valid and practical use case and provides
support for this functionality.

[]{#CH11.htm#pgfId-1011810 .calibre9}In this chapter, we will go over
some of the means that the Jamstack provides to handle cases where Hugo
might not have the features we need (figure 11.1). We will embed
LaTeX-based math inside our project---the Jamstack way---compiled during
the build and delivered without any excess JavaScript or additional
network request. The conversion from textual to a visual representation
of the mathematics will be done outside Hugo and integrated into the web
page at build time. We will also look at the concept of webhooks and how
we can use them to link together independent services.

![CH11_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F01_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1041491}Figure 11.1 Chapter 11 enables us to build
custom APIs using some Jamstack-based services to keep maintenance low
and to provide the same high-speed experience we expect from the
Jamstack.

## []{#CH11.htm#pgfId-1011826}[]{#CH11.htm#marker-1029701}11.1 Building custom APIs {#CH11.htm#sigil_toc_id_232 .fm-head}

[]{#CH11.htm#pgfId-1011850 .calibre9}[]{#CH11.htm#marker-1011851
.calibre9}Third-party APIs have their distinct advantages: we do not
have to maintain them on a day-to-day basis. We pay for the maintenance
overhead and enjoy a safe, functional, and improved service. But they
come with their caveats. Third parties may not provide the precise
service we need. Third parties can also change their terms of service,
pricing, or availability on short notice. Considering the tradeoffs, it
may make sense to build custom APIs for specific use cases.

### []{#CH11.htm#pgfId-1011859}11.1.1 Choosing the layer of the application stack {#CH11.htm#sigil_toc_id_233 .fm-head1}

[]{#CH11.htm#pgfId-1011869 .calibre9}[]{#CH11.htm#marker-1011870
.calibre9}When we build custom APIs, we need to decide which layer from
a third-party provider to rely on. It is impractical to create
everything needed to get our APIs up and running ourselves. Most
companies do not build the lowest layer: the hardware, operating system,
and programming language toolchain. But maintaining hardware is a huge
undertaking and requires constant struggles. It is worth paying a third
party for this work.

[]{#CH11.htm#pgfId-1011878 .calibre9}Cloud vendors can provide API
encapsulations over hardware in an infrastructure as a service (IaaS)
system. We can move a layer up if we desire []{#CH11.htm#marker-1011880
.calibre9}[]{#CH11.htm#marker-1011883 .calibre9}to platform as a service
(PaaS), where the operating system and the programming toolchain are
kept up-to-date and managed by the service provider. A blurred line
separates []{#CH11.htm#marker-1011888
.calibre9}[]{#CH11.htm#marker-1011891 .calibre9}PaaS from FaaS (function
as a service), where the service provider encapsulates everything until
the invocation of our code. All we need to do is provide our code and
see it in action.

[]{#CH11.htm#pgfId-1011900 .calibre9}This chapter uses Netlify Functions
(an FaaS)[]{#CH11.htm#marker-1029693}[]{#CH11.htm#marker-1029694} to
host the cloud functions for the Netlify-hosted website. We advise
relying on the FaaS and PaaS layers and building our secret sauce rather
than redoing tasks like managing hardware that others do best. The cloud
vendors that we already rely on for hosting our websites can also host
our cloud functions, so we do not have any additional dependencies. In
this chapter, we will also look at Heroku
([[https://www.heroku.com/](https://www.heroku.com/){.url}]{.fm-hyperlink}),
a popular PaaS platform that provides a generous free tier, which is
more than enough for our simple use case.

[]{#CH11.htm#pgfId-1011907 .calibre9}As a user, FaaS solutions benefit
from writing the absolute minimum code we need to get some
functionality. All scaling is automatic. The billing is granular,
sometimes up to a millisecond of invocation. This power does come at a
cost. FaaS solutions, by nature, are tied to a vendor, and there is some
degree of vendor lock in involved. If the function runs continuously due
to our load on them, FaaS can be a lot more expensive than PaaS. Apart
from being vendor-neutral, PaaS solutions leave a lot more control in
the developer's hands from managing the load, providing the ability to
cache, preconnecting to other services, and precomputing data based on
some expected user state. FaaS may be a better choice until we have a
certain load threshold, after which switching over to PaaS or even IaaS
may make more sense. []{#CH11.htm#marker-1011909 .calibre9}

### []{#CH11.htm#pgfId-1011916}[]{#CH11.htm#marker-1029700}[]{#CH11.htm#marker-1029699}[]{#CH11.htm#marker-1029698}11.1.2 Monoliths vs. microservices {#CH11.htm#sigil_toc_id_234 .fm-head1}

[]{#CH11.htm#pgfId-1011941 .calibre9}[]{#CH11.htm#marker-1011927
.calibre9}[]{#CH11.htm#marker-1011929
.calibre9}[]{#CH11.htm#marker-1011931 .calibre9}Another significant
consideration to make when building custom APIs is the monolithic
services versus microservices debate. A *monolithic service* is one
where one codebase performs all the functions needed by the website,
which are all hosted together, exposing multiple endpoints that perform
numerous tasks. A monolithic service allows for maximum code sharing and
reuse. It also enables smoother caching and handoff where one API
request can trigger a pre-emptive cache warmup for another. This
increases the perceived performance of a second API request. A
monolithic service has fewer moving parts and may be easier to manage by
an individual or a small team.

[]{#CH11.htm#pgfId-1011950 .calibre9}A *microservice* takes
[]{#CH11.htm#marker-1011961 .calibre9}the opposite approach, where each
endpoint is separate. The objective of the microservice architecture is
to decouple independent tasks from one another where one change cannot
take down the whole system. If some services are stable and do not
change regularly, it may be better to siphon the code off to a separate
microservice that keeps chugging along without bothering us.
Microservices can become simpler to manage than monolithic ones if they
combine with PaaS or FaaS platforms where the service provider handles
the ongoing maintenance.

[]{#CH11.htm#pgfId-1011971 .calibre9}The Jamstack advocates using
microservices for building APIs. Because most of the jobs are handled at
compile time or by third-party services, the code in the API layer is
relatively small and does not change frequently. FaaS solutions don't
cater to monolithic services. With microservices, it is much easier to
live the dream of having a low-maintenance system where we can get good
up time and an acceptable performance all around the planet.

::: fm-sidebar-block
[]{#CH11.htm#pgfId-1041523 .calibre9}Function-based microservices

[]{#CH11.htm#pgfId-1041524}In the broad definition of microservices,
there is no definite specification of the size of the service and its
boundaries. In general, if breaking away from an extensive monolithic
application, the developer decides how many services to employ. FaaS
stretches this definition, where each function or API in our code is a
small microservice that focuses on handling responses for a particular
type of request. The Jamstack aligns well with this but allows scope for
having some looser versions, as well as where we can club group path
functions associated with the same data into one microservice.

\

[]{#CH11.htm#pgfId-1041525}PaaS is a lot more nuanced than FaaS. We can
define whole services, but we have to be careful to split them into
smaller ones at the appropriate places.
:::

[]{#CH11.htm#pgfId-1041540 .calibre9} 

::: fm-sidebar-block
[]{#CH11.htm#pgfId-1041544 .calibre9}Exercise 11.1

[]{#CH11.htm#pgfId-1041545}To keep maintenance low, which of the
following act as good practices at the start of a project?

1.  []{#CH11.htm#pgfId-1041546}Opting to build custom APIs even if the
    exact functionality required is readily available via multiple
    third-party, industry-standard service providers.

2.  []{#CH11.htm#pgfId-1041547}Building a data center to host physical
    machines to perform custom tasks.

3.  []{#CH11.htm#pgfId-1041550}Using a function as a service (FaaS)
    solution []{#CH11.htm#marker-1041548}[]{#CH11.htm#marker-1041549}and
    only writing our core business logic.

4.  []{#CH11.htm#pgfId-1041551}Investing in a custom flavor of Linux,
    which is more optimized for our use case.

5.  []{#CH11.htm#pgfId-1041552}Using an infrastructure as a service
    (IaaS) solution and building our database schemas and application
    servers, and then investing in scaling and DevOps.

6.  []{#CH11.htm#pgfId-1041557}Keeping processes manual and hiring
    contract firms to do things for
    us.[]{#CH11.htm#marker-1041553}[]{#CH11.htm#marker-1041554}[]{#CH11.htm#marker-1041555}[]{#CH11.htm#marker-1041556}
:::

## []{#CH11.htm#pgfId-1012093}11.2 Adding LaTeX rendering to our website {#CH11.htm#sigil_toc_id_235 .fm-head}

[]{#CH11.htm#pgfId-1012116 .calibre9}[]{#CH11.htm#marker-1012104
.calibre9}[]{#CH11.htm#marker-1012106 .calibre9}Acme Corporation is all
about digital shapes. Shapes as a concept interlink with geometry, and
we need to reach into the arsenal of mathematical notations to express
and understand them better. We will use this as the means to render
LaTeX to represent mathematical notations in our markup. The end goal of
this section is to create a shortcode like
[{{\<latex\>}}\\frac{a}{b}{{\</latex\>}}]{.fm-code-in-text} that can be
placed anywhere in Markdown for a page that will render appropriately as
mathematical. We will use this to render complicated LaTeX equations
like the own shown in figure 11.2.

![CH11_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F02_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1041579}Figure 11.2 Sample rendering for a complex
LaTeX string: \\mathbf {B} (t)&=\\sum +\_+{i=0}\^{n}{n \\choose
i}(1−t)\^{n−i}t\^{i}\\mathbf {P} +\_+{i}. We will look at LaTeX
equations in this chapter.

### []{#CH11.htm#pgfId-1012135}11.2.1 What is LaTeX? {#CH11.htm#sigil_toc_id_236 .fm-head1}

[]{#CH11.htm#pgfId-1012208 .calibre9}[]{#CH11.htm#marker-1012160
.calibre9}[]{#CH11.htm#marker-1012162 .calibre9}*LaTeX* is a markup
language that has great support for defining mathematical notations. It
is prevalent in the academic and scientific world as a typesetting
system for paper publications and books. The mathematical notations
described in LaTeX have been standardized and used in various scenarios
outside of the LaTeX typesetting system. LaTeX is text-based and,
therefore, a great fit for the Jamstack. For example, for a fraction
with a numerator *a* and denominator *b*, we can write \\frac {*a*}{*b*}
in LaTeX. The full LaTeX specification is out of scope for this book,
but you can read about it at
[[https://www.latex-project.org](https://www.latex-project.org){.url}]{.fm-hyperlink}.
As of v0.91.2, Hugo natively does not support rendering LaTeX.

[]{#CH11.htm#pgfId-1012228}[Note]{.fm-callout-head} If future Hugo
versions support LaTeX natively, there will be use cases that Hugo does
not support for which the exercises in this chapter will be applicable.
[]{#CH11.htm#marker-1012230}[]{#CH11.htm#marker-1012233}

### []{#CH11.htm#pgfId-1012239}11.2.2 How can we render LaTeX? {#CH11.htm#sigil_toc_id_237 .fm-head1}

[]{#CH11.htm#pgfId-1012265 .calibre9}[]{#CH11.htm#marker-1012250
.calibre9}[]{#CH11.htm#marker-1012252
.calibre9}[]{#CH11.htm#marker-1012254 .calibre9}Although we can use the
official TeX system to render LaTeX, it is geared towards full documents
and is not friendly to embedding. Therefore, it's not suitable for our
use case. A JavaScript library called MathJax
([[https://www.mathjax.org/](https://www.mathjax.org/){.url}]{.fm-hyperlink})
supports rendering LaTeX-based mathematical notations in the web
browser. The library is very popular. It works similarly to how we
implemented the search box in chapter 10. It scans the LaTeX-based
mathematical expressions on the web page and replaces them with the
equivalent SVG rendition. *SVG* is []{#CH11.htm#marker-1012270
.calibre9}an image format that web browsers natively support. It is
lightweight and does not lose its quality on zoom. This ability makes it
a perfect image format for mathematical equations. Although using
MathJax directly is the easiest solution to getting mathematical
notations on our websites, it has its drawbacks:

-   []{#CH11.htm#pgfId-1012280 .calibre9}*MathJax is large.* Although
    []{#CH11.htm#marker-1012297 .calibre9}it does code splitting and
    tries to get the minimal payload to render what is needed,
    additional JavaScript still needs to be downloaded by and run on
    every customer's machine.

-   []{#CH11.htm#pgfId-1012307 .calibre9}*MathJax does not add any
    interactivity to our website.* The []{#CH11.htm#marker-1012320
    .calibre9}output is a static image, and there is no advantage of
    doing this in the browser. Rendering math on the server is more
    performant and faster than adding the extra hop to download this
    library and then performing the calculations and updating the image.

-   []{#CH11.htm#pgfId-1012330 .calibre9}*MathJax output is difficult to
    cache.* Because []{#CH11.htm#marker-1012343 .calibre9}it needs to do
    all the work on demand, we cannot pre-generate the images for our
    mathematical symbols and save them. []{#CH11.htm#marker-1012349
    .calibre9}[]{#CH11.htm#marker-1012352
    .calibre9}[]{#CH11.htm#marker-1012354 .calibre9}

### []{#CH11.htm#pgfId-1012360}11.2.3 Server-side LaTeX rendering {#CH11.htm#sigil_toc_id_238 .fm-head1}

[]{#CH11.htm#pgfId-1012381 .calibre9}[]{#CH11.htm#marker-1012371
.calibre9}[]{#CH11.htm#marker-1012373
.calibre9}[]{#CH11.htm#marker-1012375
.calibre9}[]{#CH11.htm#marker-1012377 .calibre9}It is a superior user
experience if we can move mathematical rendering to the server and cache
the results across page loads or even website rebuilds. This caching
follows the Jamstack approach of compiling the content when publishing
without wasting time when the data is requested. Because Hugo does not
understand LaTeX and does not have an external helper to communicate
with MathJax, we will create a separate API to perform this task.
Instead of relying on a third-party API, we will create custom APIs to
convert LaTeX to SVG. Here are the steps required to do this:

1.  []{#CH11.htm#pgfId-1012386 .calibre9}Create a function to convert
    the LaTeX string to an SVG image.

2.  []{#CH11.htm#pgfId-1012400 .calibre9}Host this function on the cloud
    to get an HTTP API.

3.  []{#CH11.htm#pgfId-1012410 .calibre9}Call the HTTP API in Hugo and
    embed the generated SVG in our website.

4.  []{#CH11.htm#pgfId-1012420 .calibre9}Create a shortcode in Hugo to
    allow content authors to use this functionality.
    []{#CH11.htm#marker-1012426 .calibre9}[]{#CH11.htm#marker-1012429
    .calibre9}[]{#CH11.htm#marker-1012431
    .calibre9}[]{#CH11.htm#marker-1012433 .calibre9}

::: fm-sidebar-block
[]{#CH11.htm#pgfId-1041611 .calibre9}Exercise 11.2

[]{#CH11.htm#pgfId-1041612}True or False: LaTeX meets the definition of
a markup language of the Jamstack.
:::

### []{#CH11.htm#pgfId-1012449}[]{#CH11.htm#marker-1031247}[]{#CH11.htm#marker-1031246}[]{#CH11.htm#marker-1031245}11.2.4 Writing the code to render LaTeX {#CH11.htm#sigil_toc_id_239 .fm-head1}

[]{#CH11.htm#pgfId-1012494 .calibre9}[]{#CH11.htm#marker-1032633
.calibre9}[]{#CH11.htm#marker-1032634
.calibre9}[]{#CH11.htm#marker-1032635 .calibre9}Because MathJax is a
JavaScript library, we will use Node.js to interface with it. We will
start by installing the Node.js version of MathJax as a dependency on
our website by adding [mathjax]{.fm-code-in-text} to package.hugo.json
(set up in the previous chapter) as listing 11.1 shows. We will use the
[dependency]{.fm-code-in-text} and not the
[devDependency]{.fm-code-in-text} attribute in package .hugo.json as we
need this when live. For this book, we use version 3.2.0 of MathJax.

[]{#CH11.htm#pgfId-1012554}Listing 11.1 Adding MathJax as a dependency
(package.hugo.json)

``` programlisting
{ 
  ... 
  "dependencies": { 
    "mathjax": "3.2.0" 
  } 
} 
```

[]{#CH11.htm#pgfId-1012646 .calibre9}Next, we need to regenerate
package.json via Hugo and then install it as a dependency. Marking it as
a dependency ensures that it will be available in production when
deployed (instead of [devDependency]{.fm-code-in-text}, which we can
remove). This command downloads MathJax as a dependency for our website:

``` programlisting
hugo mod npm pack 
npm i 
```

[]{#CH11.htm#pgfId-1012700 .calibre9}Next, we will create a tex2svg
folder that contains the code to convert LaTeX to SVG. This task
involves initializing MathJax, taking the LaTeX string as an input,
defining the parameters that we can use to perform the SVG conversion,
and then returning the output as a string. We will save our API code to
a folder called api, with a subfolder called tex2svg that exposes this
function. Inside tex2svg, the file called index.js will export this as a
cloud function.

[]{#CH11.htm#pgfId-1012755 .calibre9}Instead of creating an arbitrary
function with custom arguments, we'll use
[exports.handler]{.fm-code-in-text} [=]{.fm-code-in-text}
[async]{.fm-code-in-text} [function(event,]{.fm-code-in-text}
[context){}]{.fm-code-in-text}, which is the format AWS Lambda and
Netlify functions employ for this method (see
[[http://mng.bz/M2g7](http://mng.bz/M2g7){.url}]{.fm-hyperlink} for more
information). This format is required if we want to use Netlify to host
this function. This function []{#CH11.htm#marker-1012718 .calibre9}takes
[]{#CH11.htm#marker-1012724 .calibre9}two parameters,
[event]{.fm-code-in-text} and [context]{.fm-code-in-text}. The
[event]{.fm-code-in-text} object has the []{#CH11.htm#marker-1012760
.calibre9}following properties:

-   []{#CH11.htm#pgfId-1012798 .calibre9}[path]{.fm-code-in-text}---Path
    to []{#CH11.htm#marker-1012787 .calibre9}the request (e.g.,
    [/latex2svg]{.fm-code-in-text})

-   []{#CH11.htm#pgfId-1012807
    .calibre9}[httpMethod]{.fm-code-in-text}---Incoming
    []{#CH11.htm#marker-1012820 .calibre9}request's method name (GET,
    POST, PUT, etc.)

-   []{#CH11.htm#pgfId-1012854
    .calibre9}[headers]{.fm-code-in-text}---Incoming
    []{#CH11.htm#marker-1012843 .calibre9}request headers (e.g.,
    [{\'Content-Type\':]{.fm-code-in-text} [\'application/
    json\'}]{.fm-code-in-text})

-   []{#CH11.htm#pgfId-1012887
    .calibre9}[queryStringParameters]{.fm-code-in-text}---The
    []{#CH11.htm#marker-1012876 .calibre9}query string parameters (e.g.,
    [{tex: \'\\frac{1} {2}\'}]{.fm-code-in-text})

-   []{#CH11.htm#pgfId-1012896 .calibre9}[body]{.fm-code-in-text}---A
    []{#CH11.htm#marker-1012909 .calibre9}JSON string of the request
    payload (empty in a GET request)

-   []{#CH11.htm#pgfId-1012919
    .calibre9}[isBase64Encoded]{.fm-code-in-text}---A
    []{#CH11.htm#marker-1012932 .calibre9}Boolean flag to indicate if
    the applicable request payload is in Base64 format

[]{#CH11.htm#pgfId-1012952}[Note]{.fm-callout-head} We will wrap this
function in an HTTP server to create a RESTful API layer for use outside
of Netlify.

[]{#CH11.htm#pgfId-1012958 .calibre9}The code for this script is shared
in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-11-resources/01](https://github.com/hugoinaction/hugoinaction/tree/chapter-11-resources/01){.url}]{.fm-hyperlink}).
In this code, we initialize MathJax and then pass the supplied LaTeX
code through it, along with the [display]{.fm-code-in-text} parameter
for []{#CH11.htm#marker-1012988 .calibre9}inline rendering (versus block
rendering). We output the JSON string instead of the SVG to get this in
to Hugo as a JSON object via [getJSON]{.fm-code-in-text}. We can
alternatively output as SVG and use
[resources.GetRemote]{.fm-code-in-text} to fetch this file. We can pass
additional information (if required) to Hugo in the response JSON. The
following listing shows the source code for the cloud function to
convert LaTeX to SVG.

[]{#CH11.htm#pgfId-1013059}Listing 11.2 Converting LaTeX to SVG
(api/latex2svg.js)

``` programlisting
const MathjaxModule = require("mathjax");        ❶
  
let MathJax = null; 
module.exports = { 
  async handler(event, context) { 
    if (!event.queryStringParameters || 
      !event.queryStringParameters.tex) {        ❷
      return { 
        statusCode: 400, 
        headers: {'Content-Type': 'application/json'}, 
        body: JSON.stringify({ 
          error: "The required `tex` parameter not supplied.", 
        }) 
      } 
    } 
    if (!MathJax) {                              ❸
      MathJax = await MathjaxModule.init({ 
        loader: { load: ['input/tex', 'output/svg'] } 
      }); 
    } 
  
    const svg = MathJax.tex2svg(                 ❹
      event.queryStringParameters.tex, {         ❹
        display: event.queryStringParameters.display 
      }); 
  
    return {                                     ❺
      statusCode: 200, 
      headers: {'Content-Type': 'application/json'}, 
      body: JSON.stringify({ 
        data: MathJax.startup.adaptor.outerHTML(svg) 
      }) 
    };  
  }, 
} 
```

[]{#CH11.htm#pgfId-1040300}[❶]{.fm-combinumeral} Imports the MathJax
dependency

[]{#CH11.htm#pgfId-1040321}[❷]{.fm-combinumeral} Ensures that the tex
parameter is available

[]{#CH11.htm#pgfId-1040338}[❸]{.fm-combinumeral} Initializes MathJax
only if needed. It takes input as LaTeX and outputs SVG.

[]{#CH11.htm#pgfId-1040355}[❹]{.fm-combinumeral} Passes all parameters
from the query string to MathJax

[]{#CH11.htm#pgfId-1040372 .calibre9}[❺]{.fm-combinumeral} Returns the
status code 200 with the results as JSON

[]{#CH11.htm#pgfId-1014073 .calibre9}We can deploy this code to a FaaS
solution like AWS Lambda or Netlify Functions. For PaaS solutions, we
need a little more work.

::: fm-sidebar-block
[]{#CH11.htm#pgfId-1041629 .calibre9}Child processes vs. APIs

[]{#CH11.htm#pgfId-1041630}Theoretically, running additional code
associated with a project as a subprocess is more manageable, and this
has been the go-to mechanism of interfacing with other tools everywhere.
Hugo calls external helpers like AsciiDoc (chapter 3) and tools like
PostCSS (chapter 6) via the command line. But this is not available for
generic use. Child processes have a nasty habit of getting the full
credentials and then control of the parent process that launched them.
This means any malware can easily hide in a module or some sample source
code and do immense damage to a system if run via a child process.

\

[]{#CH11.htm#pgfId-1041631}APIs accessed over HTTP are present in a
sandbox by running in a different machine. Keeping extensibility via
APIs makes the Hugo ecosystem secure. Although you need to be careful
running [npm install]{.fm-code-in-text1} to make sure you do not run
into malicious software, running the Hugo command is unlikely to cause
any damage to your machine. Hugo cannot write outside of the public
directory, and this makes everything safe. As a bonus, creating APIs
promotes reuse across multiple systems because these APIs form
microservices that are loosely coupled and are available at both compile
time and run time.
[]{#CH11.htm#marker-1041632}[]{#CH11.htm#marker-1041633}[]{#CH11.htm#marker-1041634}
:::

### []{#CH11.htm#pgfId-1014117}11.2.5 Adding a HTTP server to call this function {#CH11.htm#sigil_toc_id_240 .fm-head1}

[]{#CH11.htm#pgfId-1014140 .calibre9}[]{#CH11.htm#marker-1014128
.calibre9}[]{#CH11.htm#marker-1014130
.calibre9}[]{#CH11.htm#marker-1014132
.calibre9}[]{#CH11.htm#marker-1014134
.calibre9}[]{#CH11.htm#marker-1014136 .calibre9}To execute this function
on our developer machine, we need to convert it to an HTTP API. Whereas
Netlify provides Netlify Dev, we will instead opt to create a custom
HTTP server. This approach will make our code portable outside of
Netlify, and for readers who are not using Netlify for hosting, we will
still be able to use the cloud function we just wrote. We will, instead,
host this on Heroku, a PaaS solution. PaaS solutions do not take a
function but the entire Node.js application.

[]{#CH11.htm#pgfId-1014155}[Note]{.fm-callout-head} Although you do not
need to create this file if you use Netlify for hosting, this can be
useful in testing locally if not using Netlify Dev.

::: fm-sidebar-block
[]{#CH11.htm#pgfId-1041651 .calibre9}Exercise 11.3

[]{#CH11.htm#pgfId-1041652}Calling \_\_\_\_\_ at build time provides us
with the ability to extend Hugo and to keep integration minimal and
implementation sandboxed.
:::

[]{#CH11.htm#pgfId-1014180 .calibre9}Let's create a new file, api.js, at
the root of our project (creating it in the API folder makes Netlify
treat that as a function) with a simple Node.js-based HTTP server that
responds to HTTP requests and calls this method
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-11-resources/02](https://github.com/hugoinaction/hugoinaction/tree/chapter-11-resources/02){.url}]{.fm-hyperlink}).
The following listing creates the Node .js-based HTTP server, which
routes requests to the proper functions for handling in a PaaS solution.

[]{#CH11.htm#pgfId-1014255}Listing 11.3 Creating a Node.js-based HTTP
server (api.js)

``` programlisting
const http = require('http);
const querystring = require('querystring');
const latex2svg = require('./api/latex2svg'); 
  
const port = process.env.PORT || 3000;                        ❶
const server = http.createServer().listen(port); 
  
server.on('request', async function (req, res) {              ❷
    const url = new URL(req.url, `http://${req.headers.host}`); 
    const queryStringParameters = url.search && 
                             querystring.parse(url.search.slice(1)); 
    const request = {                                         ❸
      queryStringParameters, 
      path: url.pathname, 
      httpMethod: req.method, 
      headers: req.headers, 
      body: req.body 
    } 
    let response = {                                          ❹
      statusCode: 404, 
      headers: { 'Content-Type': 'application/json'}, 
      body: JSON.stringify({error: "Page not found"}) 
    } 
  
    try { 
      switch (url.pathname) {                                 ❺
        case '/latex2svg': 
          response = await latex2svg.handler(request); 
          break; 
      } 
    } catch(e) {                                              ❻
      response.statusCode = 500; 
      response.body = JSON.stringify(e); 
    } 
  
    response.headers = response.headers ||  {}; 
    response.headers['Access-Control-Allow-Origin'] = 
                         '*';                                 ❼
    res.writeHead(response.statusCode, 
                  response.headers);                          ❽
    res.end(response.body); 
}); 
  
console.log(`Listening on port ${port}`);
```

[]{#CH11.htm#pgfId-1039641}[❶]{.fm-combinumeral} Asks for the port from
the environment variables or defaults to 3,000

[]{#CH11.htm#pgfId-1039669}[❷]{.fm-combinumeral} Sets up an HTTP server

[]{#CH11.htm#pgfId-1039689}[❸]{.fm-combinumeral} Creates a request
object compatible with AWS Lambda

[]{#CH11.htm#pgfId-1039706}[❹]{.fm-combinumeral} Creates a default
response

[]{#CH11.htm#pgfId-1039723}[❺]{.fm-combinumeral} Creates a lightweight
router

[]{#CH11.htm#pgfId-1039740}[❻]{.fm-combinumeral} Gracefully handles
exceptions

[]{#CH11.htm#pgfId-1039757}[❼]{.fm-combinumeral} Allows cross-origin
access to prevent blockage to Heroku from our website

[]{#CH11.htm#pgfId-1039774 .calibre9}[❽]{.fm-combinumeral} Returns the
response to the client

[]{#CH11.htm#pgfId-1015670 .calibre9}We can run this code by calling
[node api]{.fm-code-in-text} at the root of our project. We can navigate
to
http:[//]{.fm-hyperlink}localhost:3000/latex2svg?tex=%5Cfrac%7Ba%7D%7Bb%7D
to get the JSON output for the inline version of the \\frac{a}{b} LaTeX
string. We can append [&display =true]{.fm-code-in-text} to get the
display version.

[]{#CH11.htm#pgfId-1015705 .calibre9}At this point, we should update the
entry for [main]{.fm-code-in-text} in package.json to point to api.js.
This allows running our API as a valid project in the JavaScript
ecosystem. We will also add a start script to run our API server when we
write [npm start]{.fm-code-in-text}. We need to update package.hugo.json
and run [hugo mod npm pack]{.fm-code-in-text} as the following listing
shows.

[]{#CH11.htm#pgfId-1015765}Listing 11.4 An initialization script to run
the API (package.hugo.json)

``` programlisting
{ 
  ... 
  "main": "api.js", 
  "scripts": { 
    "start": "node api.js" 
  } 
} 
```

[]{#CH11.htm#pgfId-1015916 .calibre9}Listing 11.5 shows the JSON
response. The LaTeX-to-SVG conversion API takes the input as a query
[]{#CH11.htm#marker-1015879 .calibre9}parameter (called
[tex]{.fm-code-in-text}) along with other []{#CH11.htm#marker-1015895
.calibre9}parameters like [display]{.fm-code-in-text} to generate an SVG
version of the supplied LaTeX string and return that in the key called
[data]{.fm-code-in-text}. []{#CH11.htm#marker-1015921
.calibre9}[]{#CH11.htm#marker-1015924
.calibre9}[]{#CH11.htm#marker-1015926
.calibre9}[]{#CH11.htm#marker-1015928
.calibre9}[]{#CH11.htm#marker-1015930 .calibre9}

[]{#CH11.htm#pgfId-1015987}Listing 11.5 JSON response for the
LaTeX-to-SVG conversion API

``` programlisting
{ "data": "<mjx-container class=\"MathJax\" jax=\"SVG\" 
➥ display=\"true\"><svg ...>...</svg></mjx-container>" } 
```

### []{#CH11.htm#pgfId-1016040}11.2.6 Adding some security to prevent unauthorized access {#CH11.htm#sigil_toc_id_241 .fm-head1}

[]{#CH11.htm#pgfId-1016063 .calibre9}[]{#CH11.htm#marker-1016051
.calibre9}[]{#CH11.htm#marker-1016053
.calibre9}[]{#CH11.htm#marker-1016055
.calibre9}[]{#CH11.htm#marker-1016057
.calibre9}[]{#CH11.htm#marker-1016059 .calibre9}Although our function is
ready to be hosted on the cloud, we do have one problem. It will be
available on the public internet, and anyone can call it even from
outside our website. We do not want to pay for that additional load by
an unauthorized website. A simple solution to prevent this is to add a
password requirement for using our function. Checking in a password with
our source code is a flawed approach. Instead, we will place the
password in an environment variable in Netlify (and Heroku) and access
it dynamically.

[]{#CH11.htm#pgfId-1016078}[Note]{.fm-callout-head} A better solution
for compile-time API access is to have an internal service hosting this
API and not expose it to the internet. This requires support from cloud
providers like Netlify or GitHub Pages to provide such a feature.

[]{#CH11.htm#pgfId-1016113 .calibre9}In latex2svg.js, before checking
for []{#CH11.htm#marker-1016086 .calibre9}the [tex]{.fm-code-in-text}
query parameter, we should check for []{#CH11.htm#marker-1016102
.calibre9}the [password]{.fm-code-in-text} query parameter and return an
access denied error without it. The following listing performs this
check to prevent unauthorized access.

[]{#CH11.htm#pgfId-1016173}Listing 11.6 Adding a password to our API
(api/latex2svg.js)

``` programlisting
... 
async handler(event, context) { 
  if (!event.queryStringParameters || 
      !process.env.LATEX2SVG_PASSWORD ||            ❶
      event.queryStringParameters.password !== 
          process.env.LATEX2SVG_PASSWORD) { 
    return { 
      statusCode: 401,                              ❷
      headers: {'Content-Type': 'application/json'}, 
      body: JSON.stringify({ 
        error: "Access Denied.", 
      }) 
    } 
  } 
  ... 
} 
```

[]{#CH11.htm#pgfId-1039485}[❶]{.fm-combinumeral} Disallows a blank
LATEX2SVG_PASSWORD

[]{#CH11.htm#pgfId-1039506 .calibre9}[❷]{.fm-combinumeral} Uses HTTP 401
if the password is incorrect. If the password is correct, and the user
still does not have access, HTTP 403 would be the correct error code.

[]{#CH11.htm#pgfId-1016597 .calibre9}For testing locally, we can expose
[LATEX2SVG_PASSWORD]{.fm-code-in-text} as an environment variables for
our system. We can configure the cloud provider to pass this on to both
Hugo and our cloud function. []{#CH11.htm#marker-1016599
.calibre9}[]{#CH11.htm#marker-1016602
.calibre9}[]{#CH11.htm#marker-1016604
.calibre9}[]{#CH11.htm#marker-1016606
.calibre9}[]{#CH11.htm#marker-1016608 .calibre9}

### []{#CH11.htm#pgfId-1016614}[]{#CH11.htm#marker-1033977}11.2.7 Deploying to the cloud via Netlify Functions {#CH11.htm#sigil_toc_id_242 .fm-head1}

[]{#CH11.htm#pgfId-1016637 .calibre9}[]{#CH11.htm#marker-1016625
.calibre9}[]{#CH11.htm#marker-1016627
.calibre9}[]{#CH11.htm#marker-1016629
.calibre9}[]{#CH11.htm#marker-1016631
.calibre9}[]{#CH11.htm#marker-1016633 .calibre9}After setting up and
verifying the function using local execution, we need to get it to the
cloud. Netlify offers a service, called Netlify Functions, where we can
build custom APIs managed by Netlify. We need to provide the source code
as a file along with the rest of the website. Netlify packages it as a
cloud function and makes it live. Because we have already built the
function in the Netlify format, there isn't much work needed to deploy
it to Netlify. The first step is to tell Netlify the location of the
functions folder. To set up a folder for Netlify functions,

[]{#CH11.htm#pgfId-1016642 .calibre9}1. Go to Site Settings \> Functions
\> Deploy Settings and click Edit Settings (fig-ure 11.3).

![CH11_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F03_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1041671}Figure 11.3 Settings for Netlify functions to
specify the folder location where the website's source code is present

[]{#CH11.htm#pgfId-1016702 .calibre9}2. Specify [api]{.fm-code-in-text}
and click Save (figure 11.4).

![CH11_F04_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F04_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1041705}Figure 11.4 Specifying the directory for
Netlify Functions in the deployment settings

[]{#CH11.htm#pgfId-1016781 .calibre9}We also need to add the
[LATEX2SVG_PASSWORD]{.fm-code-in-text} variable in the environment. The
steps are the same as we used in setting the
[COMMENTS_TOKEN]{.fm-code-in-text} earlier in chapter 9. Go to Site
Settings \> Build & Deploy \> Environment \> Environment Variables.
Click Edit Variables \> New Variable (see figure 11.5). Add a complex
password for [LATEX2SVG_PASSWORD]{.fm-code-in-text} and click Save. We
only need this password to test Netlify Functions after deployment. You
do not need to remember this password.

![CH11_F05_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F05_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1041739}Figure 11.5 Storing the password for limiting
unauthorized access to our function. Environment variables are a great
way to keep passwords out of our codebase.

[]{#CH11.htm#pgfId-1016841 .calibre9}Next, we can push our code to
Netlify to try out Netlify Functions. After the code goes live, we can
call the
[https://\<endpoint\>/.netlify/functions/latex2svg]{.fm-code-in-text}
endpoint with
[?tex=%5Cfrac%7Ba%7D%7Bb%7D&password=\<password\>]{.fm-code-in-text} as
the argument to get the same response that we got previously when we ran
locally.

[]{#CH11.htm#pgfId-1016850 .calibre9}We can also view our function in
the Functions tab of the Netlify website. Here we can get debugging logs
to figure out what happened on each invocation (figure 11.6).

![CH11_F06_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F06_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1041773}Figure 11.6 Accessing debugging logs for
Netlify Functions. The Functions tab in Netlify provides access to
Netlify parts, which we can use to see all the functions active in our
website and then debug the errors associated with them.

[]{#CH11.htm#pgfId-1016866 .calibre9}Netlify automatically reports all
errors. We can put the console.log statements in our JavaScript code and
view the logs in this summary page (figure 11.7).

![CH11_F07_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F07_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1041807}Figure 11.7 Detailed logs in this summary
page are available for each function in Netlify.

[]{#CH11.htm#pgfId-1036806}[Code checkpoint]{.fm-callout-head}
[[https://chapter-11-01.hugoinaction.com](https://chapter-11-01.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH11.htm#marker-1036837}[]{#CH11.htm#marker-1036838}[]{#CH11.htm#marker-1036839}[]{#CH11.htm#marker-1036840}[]{#CH11.htm#marker-1036841}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-11-01](https://github.com/hugoinaction/hugoinaction/tree/chapter-11-01){.url}]{.fm-hyperlink}.

### []{#CH11.htm#pgfId-1016896}[]{#CH11.htm#marker-1033981}[]{#CH11.htm#marker-1033980}[]{#CH11.htm#marker-1033979}[]{#CH11.htm#marker-1033978}11.2.8 Deploying to the cloud via Heroku {#CH11.htm#sigil_toc_id_243 .fm-head1}

[]{#CH11.htm#pgfId-1017034 .calibre9}[]{#CH11.htm#marker-1017022
.calibre9}[]{#CH11.htm#marker-1017024
.calibre9}[]{#CH11.htm#marker-1017026
.calibre9}[]{#CH11.htm#marker-1017028
.calibre9}[]{#CH11.htm#marker-1017030 .calibre9}In case you are not
using Netlify, you need to select a vendor to host APIs. Many cloud
vendors support both the PaaS and the FaaS models, and we are free to
decide what approach we want to take to deploy our website. Because
Netlify uses the FaaS solution, which we already discussed, we will
demonstrate a PaaS solution.

[]{#CH11.htm#pgfId-1017039 .calibre9}Heroku is used as the PaaS
platform, although we use little of its features, so the the code should
work in any PaaS platform we choose. Heroku provides integrations with
both the Node.js ecosystem and GitHub, making the deployment job easy.
Heroku also provides continuous integration and deployment for our code
without us having to write anything in our GitHub actions. This makes
our job easier. Once configured, we just need to push the code to GitHub
to get it live in Heroku.

[]{#CH11.htm#pgfId-1017045 .calibre9}1. When you sign up for Heroku, you
will land at
[[https://dashboard.heroku.com/apps](https://dashboard.heroku.com/apps){.url}]{.fm-hyperlink}.
Go to New \> Create New App to create a new application (figure 11.8).

![CH11_F08_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F08_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1041841}Figure 11.8 Creating a new application in
Heroku to host our APIs

[]{#CH11.htm#pgfId-1017106 .calibre9}2. Give the application a name.
Application names are unique in Heroku. This book has reserved
[latex2svg]{.fm-code-in-text}. You will need to provide a unique name
for your API (figure 11.9).

![CH11_F09_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F09_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1041875}Figure 11.9 Naming an application in Heroku

[]{#CH11.htm#pgfId-1017185 .calibre9}3. We can now decide the mode of
integration. Direct GitHub integration is the easiest, and we will use
that for our use case. To connect to GitHub, you can go to Deploy \>
Deployment Method \> GitHub and then click Connect to GitHub (figure
11.10).

![CH11_F10_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F10_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1041909}Figure 11.10 Connecting Heroku to GitHub

[]{#CH11.htm#pgfId-1017255 .calibre9}4. After providing credentials, we
can search for repositories to connect to Heroku. Select the correct Git
repository and click Connect (figure 11.11).

![CH11_F11_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F11_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1041950}Figure 11.11 Finding and connecting the right
repository from GitHub to Heroku

[]{#CH11.htm#pgfId-1017325 .calibre9}5. Before triggering the
deployment, we need to go to the Settings tab (figure 11.12). In the
Buildpacks section, click Add Buildpack.

![CH11_F12_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F12_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1041984}Figure 11.12 The Settings tab of Heroku
contains Buildpacks, which is the configuration for the programming
platform for Heroku.

[]{#CH11.htm#pgfId-1017395 .calibre9}6. In the Add Buildpack dialog,
select nodejs (figure 11.13). (Because we have both go.sum and
package.json, Heroku can get confused.) We need the Node.js buildpack
for our APIs. This allows us to run the MathJax code.

![CH11_F13_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F13_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042018}Figure 11.13 Heroku supports multiple
platforms to deploy our applications. Node.js is the one we need to get
our MathJax code up and running.

[]{#CH11.htm#pgfId-1017465 .calibre9}7. In Settings, there is also a
Config Vars section to define our environment variables. We need to
define [LATEX2SVG_PASSWORD]{.fm-code-in-text} to get a password to
restrict access (see figure 11.14).

![CH11_F14_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F14_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042052}Figure 11.14 Configuration variables in Hugo
are passed as environment variables to the running code.

[]{#CH11.htm#pgfId-1017535 .calibre9}Now we can trigger the deployment
from Deploy \> Manual Deploy (figure 11.15). We should do a manual
deployment first for verification that everything is correct and then
switch to automatic.

![CH11_F15_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F15_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042086}Figure 11.15 Manual and automatic deployments
in Heroku. We should use Manual Deploy for verification, and once we
know everything is working, we can use the automatic deploy option.

[]{#CH11.htm#pgfId-1017595 .calibre9}Hugo provides step-by-step progress
of the deployment as it happens (figure 11.16). After the code goes
live, we can call
[https://\<endpoint\>.herokuapp.com/latex2svg]{.fm-code-in-text} with
[?tex=%5Cfrac%7Ba%7D%7Bb%7D&password=\<password\>]{.fm-code-in-text} to
get the same response that we got locally.

![CH11_F16_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F16_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042120}Figure 11.16 When we trigger manual
deployment in Heroku, Heroku provides step-by-step progress (the
checkmarks on the right) until everything is ready.

[]{#CH11.htm#pgfId-1017614 .calibre9}We can troubleshoot any issues by
looking at the application logs, which are present in the More menu on
the top right (figure 11.17). Here we can click on View Logs to display
the run-time logs in a separate web page (figure 11.18).

![CH11_F17_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F17_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042152}Figure 11.17 Displaying the run-time logs in
Heroku. Heroku provides access to machine logs and build logs
separately, and we can look at those to find issues with our function.

![CH11_F18_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F18_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042184}Figure 11.18 Viewing a sample log from the
Node.js process running in Heroku. We can use this console log to get
all the logs from Node.js. All crashes and error logs are also
available.

::: fm-sidebar-block
[]{#CH11.htm#pgfId-1042233 .calibre9}Monorepo vs. separate repositories
for APIs and markup

[]{#CH11.htm#pgfId-1042234}We decided to use the repository that we used
for the website for the API code as well. This approach has a clear
disadvantage of pushing the needless markup code to Heroku and
rebuilding the Heroku-based APIs each time a markup-based document
changes. If this becomes a big problem, we can choose a separate branch
for the API or a separate repository. We can also change our integration
to happen via GitHub Actions instead of the direct Heroku import, where
we can recognize whether the API has changed. We can also move to manual
deploys if the APIs change infrequently.

\

[]{#CH11.htm#pgfId-1042235}The choice of a monorepo has nothing to do
with Hugo or the Jamstack. It is a matter of personal preference.
Netlify works better with one repository and manages the changes across
APIs. Its invocation in the core template code may be more
straightforward using a monorepo, however.
[]{#CH11.htm#marker-1042236}[]{#CH11.htm#marker-1042237}[]{#CH11.htm#marker-1042238}[]{#CH11.htm#marker-1042239}[]{#CH11.htm#marker-1042240}
:::

### []{#CH11.htm#pgfId-1017715}11.2.9 Creating shortcode to render LaTeX {#CH11.htm#sigil_toc_id_244 .fm-head1}

[]{#CH11.htm#pgfId-1017736 .calibre9}[]{#CH11.htm#marker-1017726
.calibre9}[]{#CH11.htm#marker-1017728
.calibre9}[]{#CH11.htm#marker-1017730
.calibre9}[]{#CH11.htm#marker-1017732 .calibre9}We need to call this API
from our Hugo website to be able to use it. To make LaTeX rendering
available as a feature to our content authors, we will create a
shortcode.

[]{#CH11.htm#pgfId-1017751}[Note]{.fm-callout-head} Although we are
using the APIs at compile time, if we want to use them at run time, the
steps to set up the APIs will be precisely the same. For example,
instead of calling the API via Hugo in chapter 10, we could have used
the [fetch]{.fm-code-in-text1} function for getting the content for our
search widget.

[]{#CH11.htm#pgfId-1017766 .calibre9}In the shortcode, we will use the
LaTeX code as the inner content of the shortcode and then call the
latex2svg API to get the SVG version of this LaTeX document. We can
convert that to a resource using
[resources.FromString]{.fm-code-in-text} or render it inline as an SVG
document. We will provide the SVG inline for our use case.

[]{#CH11.htm#pgfId-1017797 .calibre9}Although we can use the
[site.baseURL]{.fm-code-in-text} in the endpoint if we use Netlify, it
does not work for compile-time API access when the website has never
been pushed live before. The compile-time need for a run-time function
causes us to deploy twice: once to get the function up and the second
time to call it. *Unless you use JavaScript, it is advisable to have a
static URL for the API present in the configuration. Note that we will
also need to enable* [LATEX2SVG_PASSWORD]{.fm-code-in-text} *within*
[funcs/getenv]{.fm-code-in-text} *of the Hugo security config
(config/\_default/security.yaml) to fetch the value from the environment
variables.*

[]{#CH11.htm#pgfId-1017816 .calibre9}We can convert
[]{#CH11.htm#marker-1017805 .calibre9}the [display]{.fm-code-in-text}
parameter of the API into arguments for the shortcode as the following
listing shows. The corresponding file is also present in the chapter
resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-11-resources/03](https://github.com/hugoinaction/hugoinaction/tree/chapter-11-resources/03){.url}]{.fm-hyperlink}).

[]{#CH11.htm#pgfId-1017895}Listing 11.7 Shortcode to render LaTeX as SVG
(layouts/shortcodes/latex.html)

``` programlisting
{{/*  a Boolean specifying whether the math is in 
     display-mode or inline mode */}} 
{{ $display := true }}                                 ❶
{{ with .Get "display" }}{{ $display = . }}{{ end }} 
  
{{ if (and site.Params.Latex2Svg 
           (getenv "LATEX2SVG_PASSWORD") ) }}          ❷
  {{ $json := getJSON site.Params.Latex2Svg "?" 
     (querify "tex" .Inner) 
     "&password=" (getenv "LATEX2SVG_PASSWORD") 
     "&display=" $display}} 
  {{ with $json.data }} 
  {{. | safeHTML}}                                     ❸
{{ end }} 
{{ end }} 
```

[]{#CH11.htm#pgfId-1039259}[❶]{.fm-combinumeral} Sets up the parameters
with meaningful defaults

[]{#CH11.htm#pgfId-1039280}[❷]{.fm-combinumeral} Disallows calling the
server if there is no LATEX2SVG_PASSWORD or the endpoint is not defined

[]{#CH11.htm#pgfId-1039297 .calibre9}[❸]{.fm-combinumeral} Embeds the
data without escaping the SVG content inline

[]{#CH11.htm#pgfId-1018260 .calibre9}Next, we need to enter
[]{#CH11.htm#marker-1018249 .calibre9}the [Latex2Svg]{.fm-code-in-text}
endpoint in the website configuration, depending on whether you used
Heroku or Netlify for deployment. The following listing adds the path
for this endpoint.

[]{#CH11.htm#pgfId-1018320}Listing 11.8 Adding latex2svg path
(config/\_default/params.yaml)

``` programlisting
Latex2Svg: https://<endpoint>.herokuapp.com/latex2svg 
 or 
Latex2Svg: https://<endpoint>/.netlify/functions/latex2svg 
```

[]{#CH11.htm#pgfId-1018382 .calibre9}If we do not want to call the cloud
service, we can use [http://localhost :3000/latex2svg]{.fm-code-in-text}
as the URL in config/development/params.yaml. We can also disable the
call during development by setting this to blank.
[]{#CH11.htm#marker-1018393 .calibre9}[]{#CH11.htm#marker-1018396
.calibre9}[]{#CH11.htm#marker-1018398
.calibre9}[]{#CH11.htm#marker-1018400 .calibre9}

### []{#CH11.htm#pgfId-1018406}11.2.10 Adding some LaTeX to our website {#CH11.htm#sigil_toc_id_245 .fm-head1}

[]{#CH11.htm#pgfId-1018425 .calibre9}[]{#CH11.htm#marker-1018417
.calibre9}[]{#CH11.htm#marker-1018419
.calibre9}[]{#CH11.htm#marker-1018421 .calibre9}Now we can finally have
mathematical functions on our website! Let's use our shortcode to add
some math to our website. In our blog, we have a page about triangles.
Listing 11.9 adds the formula for the area of a triangle to the Tropical
Triangles page. Then listing 11.10 does the same for a circle.

[]{#CH11.htm#pgfId-1018481}Listing 11.9 LaTeX for triangles
(content/blog/tropical triangles/index.md)

``` programlisting
Equation 
--------- 
  
{{<latex>}}\text{Area} = \frac{b \times h}{2}{{</latex>}} 
```

[]{#CH11.htm#pgfId-1018596}Listing 11.10 LaTeX for circles
(content/blog/community/circle/index.md)

``` programlisting
Equation 
-------- 
  
{{<latex>}}\text{Area} = \pi r^2{{</latex>}} 
```

[]{#CH11.htm#pgfId-1018660 .calibre9}We can also do complex mathematical
equations to get the SVG rendering. For example, figure 11.19 shows the
mathematical definition of a Bézier curve. The following listing adds
that equation to index.md.

![CH11_F19_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F19_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042263}Figure 11.19 LaTeX is rendered as SVG on the
Curve web page. Using compile-time API access, we can convert LaTeX to
SVG without requiring any JavaScript on the client.

[]{#CH11.htm#pgfId-1018717}Listing 11.11 The Bézier curve equation
(content/blog/community/curve/index.md)

``` programlisting
Equation 
--------- 
  
{{<latex>}} 
\mathbf {B} (t) = \sum __{i=0}^{n}{n \choose i}(1−t)^ {n−i}t^ {i}\mathbf {P} __{i} 
{{</latex>}} 
```

[]{#CH11.htm#pgfId-1018781 .calibre9}We can do inline LaTeX as well. The
following listing adds inline LaTeX to the Circles page.

[]{#CH11.htm#pgfId-1018838}Listing 11.12 Adding inline LaTeX
(content/blog/community/circle/index.md)

``` programlisting
The area of a circle is {{<latex display="false">}}  
\pi r^2 {{</latex>}}  
```

[]{#CH11.htm#pgfId-1036897}[Code checkpoint]{.fm-callout-head}
[[https://chapter-11-02.hugoinaction.com](https://chapter-11-02.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH11.htm#marker-1036924}[]{#CH11.htm#marker-1036925}[]{#CH11.htm#marker-1036926}[]{#CH11.htm#marker-1036927}[]{#CH11.htm#marker-1036928}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-11-02](https://github.com/hugoinaction/hugoinaction/tree/chapter-11-02){.url}]{.fm-hyperlink}.

![CH11_F20_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F20_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042296}Figure 11.20 Uptime: Bob is confident about
the freedom obtained by handing over up-time management to a FaaS
hosting provider.

## []{#CH11.htm#pgfId-1019037}11.3 Using webhooks to rebuild automatically {#CH11.htm#sigil_toc_id_246 .fm-head}

[]{#CH11.htm#pgfId-1019068 .calibre9}[]{#CH11.htm#marker-1019062
.calibre9}[]{#CH11.htm#marker-1019064 .calibre9}When someone submits a
comment to our website, the current approach is to rebuild it to make it
available to the readers manually. This section will automate that
rebuild so that the comments get posted by themselves when submitted.

[]{#CH11.htm#pgfId-1019089 .calibre9}So far, in this book, we have seen
APIs called manually, either from the build system (through Hugo) or via
JavaScript (through [window.fetch]{.fm-code-in-text}). Services can also
contact an API in response to some action (including actions from the
users). *Webhooks* are invocations of a web URL from within a service.
When an event happens, any service (first party or third party) can send
an HTTP request (via a preconfigured URL) and the payload format to
another service, causing some other linked action. With webhooks, we can
connect services to perform tasks across multiple service boundaries
without writing explicit code. Services like Heroku, which we have used
so far, automatically configure webhooks for determining repository
changes (figure 11.21).

![CH11_F21_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F21_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042330}Figure 11.21 A webhook registered by Heroku
notifies GitHub when changes are pushed to our repository to rebuild
Heroku.

[]{#CH11.htm#pgfId-1019114 .calibre9}Both Formspree and Netlify support
webhooks for form submissions. We can use these to rebuild our website
when a comment is submitted to remove the need for manual moderation.
When users submit comments, the website rebuilds, and the comment is
made available on the website.

[]{#CH11.htm#pgfId-1019144}[Note]{.fm-callout-head} Webhooks are used
extensively in the modern web. When we push a change to GitHub, GitHub
invokes a webhook that notifies Netlify or Hero to rebuild. When we give
Netlify or Heroku access to our GitHub account, the services register
their webhooks at that time, which GitHub invokes on specific actions.
(The webhooks in GitHub can be at the repository or organization level.
GitHub also has the concept of GitHub Apps, which get a single webhook
for multiple actions across multiple repositories and support login via
GitHub.) All this happens behind the scenes, and the two services work
seamlessly together due to this integration.

### []{#CH11.htm#pgfId-1019150}11.3.1 Creating a webhook for Netlify rebuilds {#CH11.htm#sigil_toc_id_247 .fm-head1}

[]{#CH11.htm#pgfId-1019169 .calibre9}[]{#CH11.htm#marker-1019161
.calibre9}[]{#CH11.htm#marker-1019163
.calibre9}[]{#CH11.htm#marker-1019165 .calibre9}To create a webhook in
Netlify, you need to go to Site Settings \> Build & Deploy \> Continuous
Deployment \> Build Hooks and click Add Build Hook (figure 11.22). We
need to name the build hook and select the branch that you want to build
(figure 11.23).

![CH11_F22_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F22_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042364}Figure 11.22 The Build Hooks section on the
Netlify website. Build hooks allow triggering the deployment of a
Netlify website from anywhere by just opening a URL.

![CH11_F23_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F23_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042396}Figure 11.23 Creating build hooks on the
Netlify website. A build hook needs a name and the default branch to
build. We can override both of these when calling the build hook if we
want.

[]{#CH11.htm#pgfId-1019238 .calibre9}The build hook is a URL like
[https://api.netlify.com/build_hooks/\<hook hash\>]{.fm-code-in-text}.
We can call [curl -X POST -d {} \<url\>]{.fm-code-in-text} in the
command line and then go to the deploy tab to see the build hook
triggered. []{#CH11.htm#marker-1019243
.calibre9}[]{#CH11.htm#marker-1019246
.calibre9}[]{#CH11.htm#marker-1019248 .calibre9}

::: fm-sidebar-block
[]{#CH11.htm#pgfId-1042428 .calibre9}Exercise 11.4

[]{#CH11.htm#pgfId-1042429}Webhooks are APIs that enable a server to
\_\_\_\_\_\_\_\_ communication.
:::

### []{#CH11.htm#pgfId-1019273}[]{#CH11.htm#marker-1032058}[]{#CH11.htm#marker-1032057}[]{#CH11.htm#marker-1032056}11.3.2 Adding the webhook to Netlify Forms {#CH11.htm#sigil_toc_id_248 .fm-head1}

[]{#CH11.htm#pgfId-1019292 .calibre9}[]{#CH11.htm#marker-1019284
.calibre9}[]{#CH11.htm#marker-1019286
.calibre9}[]{#CH11.htm#marker-1019288 .calibre9}We can add the webhook
in Netlify Forms to rebuild the website when a new comment is posted. We
can create this webhook by going to Site Settings \> Forms \> Form
Notifications, click Add Notification to the right of Outgoing
Notifications, and then select Outgoing Webhook (figure 11.24).

![CH11_F24_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F24_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042448}Figure 11.24 Adding an outgoing webhook to
Netlify Forms involves going to the Site Settings page and adding an
entry.

[]{#CH11.htm#pgfId-1019307 .calibre9}From the Event to Listen For
dropdown, we can select the form whose submission should trigger the
webhook. Then we can enter the corresponding URL and click Save (figure
11.25). The webhook is triggered when the comments form is submitted.

![CH11_F25_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F25_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042512}Figure 11.25 Outgoing webhook screen showing
the details when adding a webhook to Netlify. We want to trigger the
most fine-tuned webhook to prevent excessive builds by selecting the
right form.

[]{#CH11.htm#pgfId-1019337 .calibre9}With these steps, every comment
submission should trigger a rebuild of our website. This deploys the
comment to our website within a few minutes.

::: fm-sidebar-block
[]{#CH11.htm#pgfId-1042489 .calibre9}Triggering via IFTTT or Zapier

[]{#CH11.htm#pgfId-1042490}Many form services including Netlify Forms
and Formspree integrate piping services. Piping services like IFTTT or
Zapier support taking webhook data and converting it into another format
to trigger an API in another service. These services act like hubs that
connect to hundreds of services initiated from a webhook, most of them
with no code at our end.
[]{#CH11.htm#marker-1042491}[]{#CH11.htm#marker-1042492}[]{#CH11.htm#marker-1042493}
:::

### []{#CH11.htm#pgfId-1019380}11.3.3 Preventing abuse {#CH11.htm#sigil_toc_id_249 .fm-head1}

[]{#CH11.htm#pgfId-1019397 .calibre9}[]{#CH11.htm#marker-1019391
.calibre9}[]{#CH11.htm#marker-1019393 .calibre9}Although we have a
functional setup, where a comment issues a retrigger, we have added a
cost risk to our website. Netlify charges its users for build minutes
beyond its free tier. We have opened ourselves to the potential of many
expensive rebuilds by triggering it on form submission, especially if we
get a sudden influx of users or bots who leave comments on our website.
It is always a good idea to keep tabs on the expensive operations on the
website. We can turn them off when required, but we must safeguard
against malicious actors on the open internet by default.

[]{#CH11.htm#pgfId-1019412}[Tip]{.fm-callout-head} Investigate your
build costs before adding abuse prevention. This additional work is
unnecessary for most use cases.

[]{#CH11.htm#pgfId-1019418 .calibre9}To add this layer of additional
security, we can limit deployments to once per minute, once per hour, or
even once per day, depending on the time a rebuild consumes and the
website's requirements. For this, we will need to create another Netlify
function that queries the Netlify API to get the last build time and to
react based on its value.

[]{#CH11.htm#pgfId-1019424 .calibre9}To query the Netlify API for the
last build time, we first need to get the API ID of the website. This ID
is available in Site Settings \> General \> Site Details (figure 11.26).

![CH11_F26_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F26_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042546}Figure 11.26 Getting the API ID of a Netlify
website. We can use the API ID to contact the Netlify API to get further
details about the site.

[]{#CH11.htm#pgfId-1019440 .calibre9}We can store this API ID in an
environment variable called [NETLIFY_SITE_ID]{.fm-code-in-text}. We can
now call the Netlify deploys API
(https:[//]{.fm-hyperlink}api.netlify.com/api/v1/sites/#{site_id}/
deploys) to get the last deployment time and trigger deployment if it is
more than the configured rebuild time. We should also store the ID of
the webhook in [BUILD \_HOOK_ID]{.fm-code-in-text} to keep it out of our
codebase. In parallel, we will be password-protecting this API similar
to the latex2svg API via the [REBUILD_PASSWORD]{.fm-code-in-text}
environment variable.

[]{#CH11.htm#pgfId-1019471}[Note]{.fm-callout-head} Because the sample
code hosts multiple branches, we need to perform many rebuilds on each
comment submission. Additional checks like captchas can be added, or
webhooks can be disabled if the API gets a lot of abuse.

[]{#CH11.htm#pgfId-1019499 .calibre9}We will also need to add a
dependency on [node-fetch]{.fm-code-in-text} to call
[]{#CH11.htm#marker-1019488 .calibre9}the [fetch]{.fm-code-in-text}
function from Node.js, which is used to call the Netlify API. The
following listing adds this dependency.

[]{#CH11.htm#pgfId-1019559}Listing 11.13 Adding
[node-fetch]{.fm-code-in-listingcaption} as a dependency
(package.hugo.json)

``` programlisting
{ 
  ... 
  "dependencies": { 
    ... 
    "node-fetch": "2.6.1" 
  } 
} 
```

[]{#CH11.htm#pgfId-1019680 .calibre9}We now need to call [hugo mod npm
pack]{.fm-code-in-text} and [npm install]{.fm-code-in-text}. The rebuild
code for calling to Netlify is fairly simple. We can directly call the
build hook API and share its results with the caller for our webhook
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-11-resources/04](https://github.com/hugoinaction/hugoinaction/tree/chapter-11-resources/04){.url}]{.fm-hyperlink}).
The following listing shows the core rebuild functionality via a webhook
that forwards requests to the Netlify API.

[]{#CH11.htm#pgfId-1019759}Listing 11.14 Core rebuild functionality
(api/rebuild.js)

``` programlisting
const fetch = require("node-fetch"); 
module.exports = { 
  async handler(event, context) { 
    const rebuild = await fetch( 
        "https://api.netlify.com/build_hooks/" + process.env.BUILD_HOOK_ID, 
        { method: 'POST' }); 
    if (rebuild.ok) { 
      return { 
        statusCode: 200, 
        headers: { "Content-Type": "application/json" }, 
        body: JSON.stringify({response: "Triggered successfully"}) 
      }; 
    } else { 
      return { 
        headers: rebuild.headers, 
        statusCode: rebuild.status, 
        body: await rebuild.text() 
      }; 
    } 
  } 
} 
```

[]{#CH11.htm#pgfId-1020325 .calibre9}We will use
[NETLIFY_SITE_ID]{.fm-code-in-text} and
[COMMENTS_TOKEN]{.fm-code-in-text} to call the deploys API. If the
deploy is old enough to allow rebuilds, we'll need to trigger the build
hook. The following listing does this and then checks if the last
deployment was within the [DEPLOY_MIN_INTERVAL]{.fm-code-in-text}. If
so, the deploy action is ignored, and we return HTTP 429 (Too Many
Requests).

[]{#CH11.htm#pgfId-1020382}Listing 11.15 Calling the deploys API from
Netlify (api/rebuild.js)

``` programlisting
const DEPLOY_MIN_INTERVAL = 60 * 1000; // 1 minute 
... 
module.exports = { 
  async handler(event, context) { 
    if (process.env.NETLIFY_SITE_ID && process.env.COMMENTS_TOKEN) { 
      const deploys = await fetch( 
        "https://api.netlify.com/api/v1/sites/" + 
        process.env.NETLIFY_SITE_ID + "/deploys?access_token=" + 
        process.env.COMMENTS_TOKEN);                    ❶
  
      if (deploys.ok) { 
        const list = await deploys.json(); 
        if ( Array.isArray(list) && (!list[0] 
            || new Date().getTime() - 
            new Date(list[0].created_at).getTime()      ❷
             > DEPLOY_MIN_INTERVAL)                     ❷
        ) { 
  
          ... // Rebuild code 
        } else { 
          return { 
            statusCode: 429, 
            headers: { 
              'Retry-After': Array.isArray(list) && 
                list[0] ? (DEPLOY_MIN_INTERVAL - 
                  new Date().getTime() + 
                  new Date(list[0].created_at).getTime() 
                )/1000  : 1,                            ❸
            } 
          } 
        } 
      } 
    } 
    return { 
      statusCode: 400, 
      headers: { "Content-Type": "application/json" }, 
      body: JSON.stringify({ 
        error: "Missing data.", 
      }), 
    }; 
  } 
} 
```

[]{#CH11.htm#pgfId-1039016}[❶]{.fm-combinumeral} Fetches the list of
deploys from Netlify

[]{#CH11.htm#pgfId-1039037}[❷]{.fm-combinumeral} Checks if it exceeds
DEPLOY_MIN_INTERVAL since the last trigger

[]{#CH11.htm#pgfId-1039054 .calibre9}[❸]{.fm-combinumeral} Retry-After
tells the server to try again at a specific time in the future.

[]{#CH11.htm#pgfId-1021494 .calibre9}We will also add a password check
and surround our code with a [try..catch]{.fm-code-in-text} block to
prevent accidental crashes. The following listing adds these measures to
ensure that the code is safe to be deployed from crashes and adds a
rebuild password security check.

[]{#CH11.htm#pgfId-1021560}Listing 11.16 Measures to ensure safe code
and security (api/rebuild.js)

``` programlisting
... 
  async handler(event, context) { 
    try { 
      if ( 
        !event.queryStringParameters || 
        !process.env.REBUILD_PASSWORD || 
        event.queryStringParameters.password !== process.env.REBUILD_PASSWORD 
      ) { 
        return { 
          statusCode: 401, 
          headers: { "Content-Type": "application/json" }, 
          body: JSON.stringify({ 
            error: "Access Denied.", 
          }), 
        }; 
      } 
      ... 
    } catch (e) { 
      return { 
        statusCode: 500, 
        headers: { "Content-Type": "application/json" }, 
        body: JSON.stringify({ 
          error: "Please try again later.", 
        }), 
      }; 
    } 
  } 
... 
```

[]{#CH11.htm#pgfId-1022156 .calibre9}Because this code does not trigger
rebuilds after every comment, not all comments may be available on the
website. We might have to manually rebuild if no build happens after a
particular comment. We recommend keeping the throttle duration short to
provide a good user experience.

::: fm-sidebar-block
[]{#CH11.htm#pgfId-1042605 .calibre9}Triggering builds on multiple
branches

[]{#CH11.htm#pgfId-1042606}Although Netlify supports building one branch
with a single build hook call, it is straightforward to trigger multiple
branch builds with a hook. A hook can optionally take a branch name to
build and a message to associate a trigger with. The following code
snippet creates a Netlify function that goes in a loop to trigger
rebuilds of all the branches we desire:

``` programlisting
const branches = [...]; 
let rebuild = {ok: false, status: 400}; 
do { 
  const branch = branches.shift(); 
  rebuild = await fetch( 
    "https://api.netlify.com/build_hooks/" + 
      process.env.BUILD_HOOK_ID + "?trigger_branch=" + branch, 
    { method: 'POST' } 
  ); 
  
} while(rebuild.ok && branches.length > 0); 
```

[]{#CH11.htm#pgfId-1042618}The sample website for this book uses
multiple branches to host various checkpoints. After the abuse
prevention function, this code will trigger rebuilds on all relevant
branches.
:::

[]{#CH11.htm#pgfId-1036991}[Code checkpoint]{.fm-callout-head}
[[https://chapter-11-03.hugoinaction.com](https://chapter-11-03.hugoinaction.com){.url}]{.fm-hyperlink},
and source []{#CH11.htm#marker-1037018}[]{#CH11.htm#marker-1037019}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-11-03](https://github.com/hugoinaction/hugoinaction/tree/chapter-11-03){.url}]{.fm-hyperlink}.

### []{#CH11.htm#pgfId-1022571}11.3.4 Creating a GitHub Pages rebuild webhook {#CH11.htm#sigil_toc_id_250 .fm-head1}

[]{#CH11.htm#pgfId-1022713 .calibre9}[]{#CH11.htm#marker-1022677
.calibre9}[]{#CH11.htm#marker-1022679
.calibre9}[]{#CH11.htm#marker-1022681 .calibre9}In GitHub, webhooks to
trigger GitHub actions []{#CH11.htm#marker-1022686 .calibre9}are
[]{#CH11.htm#marker-1022692 .calibre9}called *workflow dispatch events*
or *repository dispatch events*. Workflow dispatch events start a single
workflow, and repository dispatch events trigger multiple workflows in a
single repository. We will use the workflow dispatch event (also used
for manually triggering rebuilds) set up in chapter 2 as the following
listing shows.

[]{#CH11.htm#pgfId-1022773}Listing 11.17 The
[workflow_dispatch]{.fm-code-in-listingcaption}
property[]{#CH11.htm#marker-1022824} (.github/workflows/gh-pages.yml)

``` programlisting
pages 
  
on: 
  push: 
      branches: 
        - main 
  workflow_dispatch: # Kept empty. Can have parameters if needed. 
```

::: fm-sidebar-block
[]{#CH11.htm#pgfId-1042635 .calibre9}Scheduling rebuilds

[]{#CH11.htm#pgfId-1042637}GitHub also supports
[]{#CH11.htm#marker-1042636}the [cron-job]{.fm-code-in-text1}
syntax[]{#CH11.htm#marker-1032298} to schedule builds to run at
specified intervals. We can use these to update our builds regularly.
[]{#CH11.htm#marker-1042638}[]{#CH11.htm#marker-1042639}[]{#CH11.htm#marker-1042640}
:::

### []{#CH11.htm#pgfId-1022923}11.3.5 Creating a function to trigger GitHub webhooks {#CH11.htm#sigil_toc_id_251 .fm-head1}

[]{#CH11.htm#pgfId-1022942 .calibre9}[]{#CH11.htm#marker-1022934
.calibre9}[]{#CH11.htm#marker-1022936
.calibre9}[]{#CH11.htm#marker-1022938 .calibre9}To trigger a workflow in
GitHub, we need to provide the corresponding branch and the workflow's
name to the fixed workflow dispatch endpoint. Because Formspree does not
support sending an arbitrary payload to a workflow, we need a function
to perform this task. This function will also perform abuse filtering in
GitHub Actions and limit the number of rebuilds that happen within a
short duration on GitHub.

[]{#CH11.htm#pgfId-1022947 .calibre9}We need a personal access token
from GitHub to trigger builds. To get a personal access token, in
GitHub, click the Profile icon on the top right, go to Settings. Then in
the left-hand menu, click Developer Settings (figure 11.27) followed by
Personal Access Token.

![CH11_F27_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F27_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042693}Figure 11.27 Getting to Developer Settings on
GitHub to create a personal access token

[]{#CH11.htm#pgfId-1022963 .calibre9}In the Personal Access Token area,
we can click Generate New Token to get a new token (figure 11.28).

![CH11_F28_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F28_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042659}Figure 11.28 The Personal Access Token area
in GitHub settings to generate a new access token

[]{#CH11.htm#pgfId-1022993 .calibre9}The access token needs workflow
permissions to access and trigger workflows associated with GitHub
actions. Figure 11.29 shows the steps to take for this.

![CH11_F29_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F29_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042727}Figure 11.29 The Personal Access Token area
in GitHub settings to generate a new access token

[]{#CH11.htm#pgfId-1023023 .calibre9}Once generated, copy the access
token and save this to the environment variables in Heroku as
[GITHUB_ACCESS_TOKEN]{.fm-code-in-text}. We can use this token to access
the GitHub API. There are two APIs we will use to trigger a workflow:

-   []{#CH11.htm#pgfId-1023075 .calibre9}*GET
    /repos/:owner/:repo/actions/workflows/:workflow_id/runs*---This API
    provides the last run of a workflow with the provided name. We can
    use this to get the [created_at]{.fm-code-in-text} date from the
    deploys API for Netlify. In our case, the
    [workflow_id]{.fm-code-in-text} is the filename in the
    .github/workflows subfolder, gh_pages.

-   []{#CH11.htm#pgfId-1023084 .calibre9}*POST
    /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches*---This
    []{#CH11.htm#marker-1023097 .calibre9}API triggers an action.

[]{#CH11.htm#pgfId-1023107 .calibre9}We will use the function to trigger
rebuilds as we used for Netlify. As with [NETLIFY
\_SITE_ID]{.fm-code-in-text}, we will check for
[GITHUB_ACCESS_TOKEN]{.fm-code-in-text} to see if this is a GitHub Pages
deployment. We have to set up a new repository, GitHubPagesRebuild, for
this deployment as listing 11.18 shows. GitHub provides APIs to
programmatically invoke dispatches on workflows where we can rebuild the
website. We can use the workflow runs API from GitHub to get the
previous workflow runs to figure out if we need to throttle rebuilds.

[]{#CH11.htm#pgfId-1023164}Listing 11.18 Triggering rebuilds on GitHub
Pages (api/rebuild.js)

``` programlisting
if (process.env.GITHUB_ACCESS_TOKEN) { 
  const response = await fetch(                                     ❶
    "https://api.github.com/repos/hugoinaction/" + 
    "GitHubPagesRebuild/actions/workflows/gh-pages.yml/runs", { 
    headers: { 
      'Accept': 'application/vnd.github.v3+json',                   ❷
      'Authorization': `token ${process.env.GITHUB_ACCESS_TOKEN}` 
    } 
  }); 
  if (response.ok) { 
    const data = await response.json(); 
    const list = data.workflow_runs; 
    if (Array.isArray(list) && (!list[0] || 
      new Date().getTime() - new Date(!list[0].created_at).getTime() 
            > DEPLOY_MIN_INTERVAL)) { 
        const rebuild = await fetch(                                ❸
          "https://api.github.com/repos/hugoinaction/" + 
          "GitHubPagesRebuild/workflows/gh-pages.yml/dispatches", { 
          method: 'POST', 
          headers: { 
              'Accept': 'application/vnd.github.v3+json', 
              'Authorization': `token ${process.env.GITHUB_ACCESS_TOKEN}` 
            }, 
            body: JSON.stringify({ 
              "ref": "main", 
            }) 
        }); 
        if (rebuild.ok) { 
          return { 
            statusCode: 200, 
            headers: { "Content-Type": "application/json" }, 
            body: JSON.stringify({response: "Triggered successfully"}) 
          }; 
        } else { 
          return { 
            headers: rebuild.headers, 
            statusCode: rebuild.status, 
            body: await rebuild.text() 
          }; 
        } 
      } 
  } 
} 
```

[]{#CH11.htm#pgfId-1038781}[❶]{.fm-combinumeral} Fetches the list of
runs for the gh-pages workflow in hugoinaction/ hugoinaction on GitHub

[]{#CH11.htm#pgfId-1038802}[❷]{.fm-combinumeral} Tells GitHub we want to
use the V3 API

[]{#CH11.htm#pgfId-1038819 .calibre9}[❸]{.fm-combinumeral} Posts a new
dispatch to the gh-pages workflow

[]{#CH11.htm#pgfId-1024341 .calibre9}We also need to update api.js to
handle []{#CH11.htm#marker-1024330 .calibre9}the
[rebuild]{.fm-code-in-text} workflow. The following listing provides the
code for this update. With this change, the rebuild API is ready to
handle rebuilds from the comments form. []{#CH11.htm#marker-1024346
.calibre9}[]{#CH11.htm#marker-1024349
.calibre9}[]{#CH11.htm#marker-1024351 .calibre9}

[]{#CH11.htm#pgfId-1024408}Listing 11.19 Providing an endpoint for the
rebuild API (api.js)

``` programlisting
const rebuild = require('./api/rebuild'); 
  
switch (url.pathname) { 
  case '/latex2svg': 
    response = await latex2svg.handler(request); 
    break; 
  case '/rebuild': 
    response = await rebuild.handler(request); 
    break; 
} 
```

### []{#CH11.htm#pgfId-1024642}[]{#CH11.htm#marker-1024657}[]{#CH11.htm#marker-1024655}[]{#CH11.htm#marker-1024653}11.3.6 Adding a webhook to Formspree to rebuild the website {#CH11.htm#sigil_toc_id_252 .fm-head1}

[]{#CH11.htm#pgfId-1024661 .calibre9}[]{#CH11.htm#marker-1042821
.calibre9}[]{#CH11.htm#marker-1042822
.calibre9}[]{#CH11.htm#marker-1042823 .calibre9}The final step is
updating Formspree to submit a request to our rebuild API when a new
comment is submitted. Go to the Plugins tab in the Formspree Form
Details page for the Hugo in Action comments and select Webhook (figure
11.30).

![CH11_F30_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F30_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042848}Figure 11.30 Creating a webhook in Formspree.
Each form has a plugins page from where we can create a webhook in
Formspree.

[]{#CH11.htm#pgfId-1024676 .calibre9}We will use the build hooks version
of the webhooks. We do not need the information submitted in the form to
trigger a rebuild (figure 11.31).

![CH11_F31_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F31_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042882}Figure 11.31 Formspree needs the endpoint and
the type of webhook we want to create to render it. The build hook is
the simplest because it requires no pre-registration and no data.

[]{#CH11.htm#pgfId-1024706 .calibre9}We can then click the webhook again
to get to the Webhook Settings page. Once there, we can test our webhook
(figure 11.32).[ ]{.calibre22}

![CH11_F32_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH11_F32_Jain.png){.calibre1}\

[]{#CH11.htm#pgfId-1042916}Figure 11.32 Validating a webhook in
Formspree involves going to the Webhook Settings page and clicking Send
Test.

::: fm-sidebar-block
[]{#CH11.htm#pgfId-1042946 .calibre9}Do rebuilds get us to the same
architecture as a traditional web app in a roundabout way?

[]{#CH11.htm#pgfId-1042947}With the changes we have done to perform
rebuilds, it may appear that we have gone back to the same architecture
as we had in traditional application layers, but worse! We have added
long delays to trigger rebuilds. Even if we wanted to put the CDN layer
with the traditional stacks, we could fine-tune the invalidation logic
to the specific change needed. We do not need to rebuild the whole
website again.

\

[]{#CH11.htm#pgfId-1042948}This observation is correct and valid.
Rebuild is more of a hack for getting dynamic behavior rather than a
perfect solution. Another solution is to build a service that does
commenting and exposes them through a JavaScript-based API. (We could
potentially use the Netlify forms API on the client side.) This causes a
lot more load on the forms retrieval service and incurs the most cost,
especially if the creation of new comments is rare. There will also be a
performance penalty for the client-side API communication. This tradeoff
of dynamic behavior and cost is something to consider on a case-by-case
basis. The Jamstack allows for the low-cost approach of rebuilds that we
just did as well as an API-based solution that offers more dynamic
behavior at a potentially higher cost.
:::

[]{#CH11.htm#pgfId-1037068}[Code checkpoint]{.fm-callout-head}
[[https://chapter-11-04.hugoinaction.com](https://chapter-11-04.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH11.htm#marker-1037096}[]{#CH11.htm#marker-1037097}[]{#CH11.htm#marker-1037098}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-11-04](https://github.com/hugoinaction/hugoinaction/tree/chapter-11-04){.url}]{.fm-hyperlink}.

### []{#CH11.htm#pgfId-1024772}11.3.7 Updating the JavaScript code for some immediate feedback on the comment submission {#CH11.htm#sigil_toc_id_253 .fm-head1}

[]{#CH11.htm#pgfId-1024890 .calibre9}[]{#CH11.htm#marker-1024880
.calibre9}[]{#CH11.htm#marker-1024882
.calibre9}[]{#CH11.htm#marker-1024884
.calibre9}[]{#CH11.htm#marker-1024886 .calibre9}With automatic rebuilds,
we have removed the moderation step before taking the website live.
Therefore, we can immediately show the comment to the user that posted
the comment via JavaScript. At the same time, the rebuild takes place
behind the scenes. Waiting for the comment to be made available causes
needless worry, especially in the most likely case where the comment is
present in the next build.

[]{#CH11.htm#pgfId-1024974 .calibre9}To match the JavaScript-as-utility
architecture used with comments, we can add another
[]{#CH11.htm#marker-1024897 .calibre9}template, called
[comment-pre]{.fm-code-in-text}, and []{#CH11.htm#marker-1024913
.calibre9}another property, called [data-pre]{.fm-code-in-text}. We will
use placeholders for the [name]{.fm-code-in-text} and
[message]{.fm-code-in-text} fields, which we will fill up with
JavaScript. Listing 11.20 shows a sample template to render comments as
soon as they are submitted, using [comments-pre]{.fm-code-in-text} as an
identifier to be picked up by JavaScript. We use
[\[\[key\]\]]{.fm-code-in-text} as the syntax for placeholders to
disambiguate from Hugo template markers ([{{key}}]{.fm-code-in-text}).

[]{#CH11.htm#pgfId-1025034}Listing 11.20 Template for comments
(AcmeTheme/layouts/partials/comment.html)

``` programlisting
<template id="comment-pre"> 
  <div class="comment" > 
    <img alt="[[name]] Avatar"                  ❶
      src= "https://www.gravatar.com/avatar/ 
      ➥ [[emailhash]]#?s=100&amp;d=wavatar"    ❷
      width="100" height="100"> 
    <div class="author">[[name]]</div> 
    <div class="message">[[message]]</div> 
  </div> 
</template> 
  
... 
  
<form data-pre="#comment-pre" ...> 
```

[]{#CH11.htm#pgfId-1038662}[❶]{.fm-combinumeral} Uses \[\[key\]\] for
placeholders. If we want double brackets, we need to use {{
\"{{title}}\" }} to override Hugo's template system that uses the same
syntax.

[]{#CH11.htm#pgfId-1038679 .calibre9}[❷]{.fm-combinumeral} Adds email
hash via JavaScript code

[]{#CH11.htm#pgfId-1025418 .calibre9}Next, we can update our JavaScript
code. We need an md5 library to calculate the [md5]{.fm-code-in-text} in
JavaScript. [md5]{.fm-code-in-text} with npm is small and well used. The
following listing adds this as a [devDependency]{.fm-code-in-text}.

[]{#CH11.htm#pgfId-1025478}Listing 11.21 Adding a dependency on the md5
library (package.hugo.json)

``` programlisting
  ... 
  "devDependencies": { 
  ... 
    "md5": "2.3.0" 
  }  
```

::: fm-sidebar-block
[]{#CH11.htm#pgfId-1042975 .calibre9}Exercise 11.5

[]{#CH11.htm#pgfId-1042976}Immediate feedback via \_\_\_\_\_\_\_\_ is a
critical element in making the Jamstack-based websites feel dynamic,
fast, and modern.
:::

[]{#CH11.htm#pgfId-1025571 .calibre9}Now we can load the content marked
with [data-pre]{.fm-code-in-text} when submitting a form, placing it
before the form. The following listing uses JavaScript to accomplish
this.

[]{#CH11.htm#pgfId-1025637}Listing 11.22 Moving content before the form
(AcmeTheme/assets/formHandler.js)

``` programlisting
import md5 from "md5" 
  
... 
if (response.ok) { 
  if (form.dataset.pre) {                                ❶
    let content = document.querySelector(form.dataset.pre).innerHTML; 
    for (let pair of  data) { 
      let key = pair[0], value = pair[1]; 
      content = content.replaceAll( 
          `[[${key}]]`,value);                           ❷
      if (key === "email") { 
        content = content.replaceAll( 
            `[[emailhash]]`,md5(value));                 ❸
      } 
    } 
    form.insertAdjacentHTML('beforebegin', content);     ❹
  } 
  ... 
} 
```

[]{#CH11.htm#pgfId-1038400}[❶]{.fm-combinumeral} Checks for the
existence of the data-pre property in the form

[]{#CH11.htm#pgfId-1038444}[❷]{.fm-combinumeral} Specifies a simple
key-value replacement in the template exposed to JavaScript

[]{#CH11.htm#pgfId-1038461}[❸]{.fm-combinumeral} Adds support for the
email hash needed for Gravatar

[]{#CH11.htm#pgfId-1038405 .calibre9}[❹]{.fm-combinumeral} Inserts the
predata before the form

[]{#CH11.htm#pgfId-1026231}[Note]{.fm-callout-head} We will remove the
cached file in the resources folder associated with comments from the
commit to update comments on rebuild.

[]{#CH11.htm#pgfId-1037148}[Code checkpoint]{.fm-callout-head}
[[https://chapter-11-05.hugoinaction.com](https://chapter-11-05.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-11-05](https://github.com/hugoinaction/hugoinaction/tree/chapter-11-05){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH11.htm#pgfId-1042993 .calibre9}Eventual consistency and instant
gratification

[]{#CH11.htm#pgfId-1042994}It is a form of cheating to show the readers
the comment inline. Even if we ignore the time it takes to rebuild, we
will need network communication between the user submission and the
availability of the comment. This limitation does not come from the
Jamstack but from fundamental physics. It does take time even for
network traffic to travel throughout the planet. Traditional stacks
solve this problem with the concept of eventual consistency. The write
API records the data, but it may not instantly appear with a read
request because updating the data through a network takes time. Rebuilds
in the Jamstack do the same thing.

\

[]{#CH11.htm#pgfId-1043012}Once the user has submitted a comment and
received a 200 series HTTP response, the backend service records the
comment. At this point, there is nothing the user can do to prevent it.
If we wait for the comment to be made available, it might take several
seconds, which can cause a horrible user experience. To provide
immediate feedback for the audience looking for instant gratification,
we can send the comment early because we as the client have everything
we need.

\

[]{#CH11.htm#pgfId-1043013}This technique is not new and has been
popular over the internet for a long time. In the early days,
unconfirmed data used to be shown as grayed out, switching to the
regular color when we received confirmation. This approach used to cause
a lot of confusion and often blame for a slow service. Many modern
applications still follow this show approach and then apologize in case
of failure. The failed use cases are rare, and the developer should
actively work to fix them. The majority of the users don't need to know
about this and do appreciate instant gratification for their effort.

\

[]{#CH11.htm#pgfId-1043014}Note that we can make this round trip faster
if we move the comments out of the deploy layer to JavaScript, calling
the API to fetch the comments. This approach comes with the disadvantage
of additional requests, which can cause both performance compromises for
the end user and extra costs for the developer.
:::

[]{#CH11.htm#pgfId-1026359 .calibre9}APIs are such a vast subject that
we can dedicate entire books to them, and we still keep learning
something new. This chapter explored ways to use APIs that are not
commonly used in most traditional web architectures but that are staples
in the Jamstack world. We can also use all the other techniques used in
communication with a regular website with the Jamstack.

[]{#CH11.htm#pgfId-1026365 .calibre9}In this chapter, we completed the
introduction to the Jamstack and Hugo's support for close interaction
with advanced APIs. In the next chapter, we will take what we've learned
from this website and apply that to a different type of
website---e-commerce. []{#CH11.htm#marker-1026367
.calibre9}[]{#CH11.htm#marker-1026370
.calibre9}[]{#CH11.htm#marker-1026372
.calibre9}[]{#CH11.htm#marker-1026374
.calibre9}[]{#CH11.htm#marker-1026376
.calibre9}[]{#CH11.htm#marker-1026378 .calibre9}

## []{#CH11.htm#pgfId-1026384}Summary {#CH11.htm#sigil_toc_id_254 .fm-head-1-notoc}

-   []{#CH11.htm#pgfId-1026394 .calibre9}There is always a tradeoff we
    must make when choosing between a third-party API and developing our
    own. From additional work to ongoing maintenance, there is more to
    do when we create custom APIs. Still, we do get to control its
    feature set or price, and we don't have the assurance that it will
    not change its business model or go out of business outside of our
    control.

-   []{#CH11.htm#pgfId-1026408 .calibre9}In case we need to make a
    custom API, the Jamstack suggests using a function as a service
    (FaaS) model or a platform as a service(PaaS) model to keep our
    day-to-day maintenance work low.

-   []{#CH11.htm#pgfId-1026418 .calibre9}Netlify provides Netlify
    Functions as an FaaS solution, which we can use to customize
    processing such as converting LaTeX text to SVG.

-   []{#CH11.htm#pgfId-1026428 .calibre9}We can use a PaaS provider like
    Heroku if we are looking for an independent solution for our API
    hosting needs.

-   []{#CH11.htm#pgfId-1026438 .calibre9}Hugo can consume the
    first-party APIs by the same means as we used for third-party APIs,
    both at build time and at run time. We can wrap APIs in partials or
    shortcodes, which can act like plugins to Hugo with additional
    safety safeguards, thanks to running in an external service.

-   []{#CH11.htm#pgfId-1026448 .calibre9}Webhooks are the means for
    service-to-service communication. We can configure webhooks in most
    Jamstack services to transfer data.

-   []{#CH11.htm#pgfId-1026458 .calibre9}Many services from GitHub to
    Netlify can consume webhooks directly. We can also write custom
    handlers to react to a webhook.

-   []{#CH11.htm#pgfId-1026468 .calibre9}Jamstack-based websites can be
    rebuilt using a webhook that gives us the best of both worlds:
    reaction to user feedback on the website and low maintenance, high
    performance CDN-based hosting.

-   []{#CH11.htm#pgfId-1026478 .calibre9}Although actions like rebuilds
    take time, we can do some preprocessing and rendering in JavaScript
    to provide the user with instant gratification for an effort that
    might take some processing time.

[]{#CH12.htm}

# []{#CH12.htm#pgfId-1032921}12 Adding e-commerce capabilities using the Jamstack {#CH12.htm#heading_id_2 .tochead}

[]{#CH12.htm#pgfId-1035171}This chapter covers

-   []{#CH12.htm#pgfId-1035203 .calibre9}Creating product pages for an
    e-commerce website
-   []{#CH12.htm#pgfId-1035204 .calibre9}Adding a shopping cart via
    JavaScript
-   []{#CH12.htm#pgfId-1035205 .calibre9}Using APIs to handle payments
-   []{#CH12.htm#pgfId-1035192 .calibre9}Fulfilling a purchase using a
    webhook in a cloud function

[]{#CH12.htm#pgfId-1011804 .calibre9}After 11 chapters on Hugo and the
Jamstack, we have a complete, fast, and modern corporate website. We can
use it to present any content, authored and managed as Markdown
documents, with a custom theme. We can offer dynamic surveys, a fuzzy
search on the client with support for comments, a contact form, and an
[]{#CH12.htm#marker-1011806 .calibre9}embedded single-page application
(SPA).

[]{#CH12.htm#pgfId-1011816 .calibre9}Hugo is applicable in a much wider
variety of use cases. A documentation website is relatively static. A
portfolio page or a media website needs image manipulation (Hugo Pipes),
and the rest is all static content. An educational website is all about
presenting content. This chapter will use what you've learned to build
another website domain suited for the Jamstack---e-commerce. An
e-commerce domain has many static pieces like product pages that need to
provide excellent load performance and require user-specific shopping
cart management. This makes it an ideal use case for utilizing the
entire Jamstack.

[]{#CH12.htm#pgfId-1011822 .calibre9}In this chapter, we will add a
functional e-commerce section to our existing website using the entire
Jamstack. We will have separate product and index pages, operational
checkout, and email-based purchase fulfillment. We will reuse many
skills we have developed in this book and understand how to apply them
to a different domain.

[]{#CH12.htm#pgfId-1011838}[Note]{.fm-callout-head} This chapter runs at
a much faster pace than the previous chapters. Some readers may need to
go to the official Hugo documentation
([[https://gohugo.io/documentation/](https://gohugo.io/documentation/){.url}]{.fm-hyperlink})
to understand the solutions as well as the services presented. Some
prior experience with Hugo might be necessary to get comfortable with
the contents of this chapter. This chapter will not introduce any new
Hugo or Jamstack concepts. This chapter presents an alternate way to
bring together the elements of the Jamstack.

## []{#CH12.htm#pgfId-1011845}12.1 Creating e-commerce pages {#CH12.htm#sigil_toc_id_255 .fm-head}

[]{#CH12.htm#pgfId-1011864 .calibre9}[]{#CH12.htm#marker-1011856
.calibre9}[]{#CH12.htm#marker-1011858
.calibre9}[]{#CH12.htm#marker-1011860 .calibre9}The most elaborate
element in an e-commerce website is the product information pages that
allow the customers to decide on what they want to purchase. An
e-commerce system can have hundreds to thousands of pages based on the
number of products. In a Hugo-based website, each product page has two
parts: the content type or layout for the single page and the markup
document for its description.

### []{#CH12.htm#pgfId-1011869}12.1.1 Creating the product content view {#CH12.htm#sigil_toc_id_256 .fm-head1}

[]{#CH12.htm#pgfId-1011892 .calibre9}[]{#CH12.htm#marker-1011880
.calibre9}[]{#CH12.htm#marker-1011882
.calibre9}[]{#CH12.htm#marker-1011884
.calibre9}[]{#CH12.htm#marker-1011886
.calibre9}[]{#CH12.htm#marker-1011888 .calibre9}We already have the view
of the product listing present on the home page of the website (in the
Our Products section). We will move the various product assets from the
assets folder to a new subfolder called store within the content folder.
We will also add description pages for these products. The pricing will
continue to come from the products.csv file. This way, the rarely
changing description is stored away from regularly changing inventory
and pricing information. Note that these prices could potentially come
from an API call as well. The sample content for the product pages is
present in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-12-resources/01](https://github.com/hugoinaction/hugoinaction/tree/chapter-12-resources/01){.url}]{.fm-hyperlink}).
The completed view should look like figure 12.1.

![CH12_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH12_F01_Jain.png){.calibre1}\

[]{#CH12.htm#pgfId-1064443}Figure 12.1 A content view allows us to reuse
the logic to render the list page from the other sections to the store.

[]{#CH12.htm#pgfId-1011926 .calibre9}Next, we will refactor the
product's HTML from the home page to a content view for reuse across
different pages. Although keeping the rest of the content the same, we
will add an Add to Cart button and a color selector to allow the users
to take action on the product list across the website
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-12-resources/02](https://github.com/hugoinaction/hugoinaction/tree/chapter-12-resources/02){.url}]{.fm-hyperlink}).
With the changes from the following listing, the list page for the store
renders appropriately.

[]{#CH12.htm#pgfId-1012015}Listing 12.1 Content view for a store
(AcmeTheme/layouts/store/card.html)

``` programlisting
{{$products := (partialCached "products.html" "cache")}} 
{{$data := index $products .Params.product}}                    ❶
<li class="product" >                                           ❷
  <a href="{{.Permalink}}"> 
  {{with (.Resources.GetMatch "cover.*")}}                      ❸
    {{$img := . | images.Filter 
      (images.Overlay (resources.GetMatch "image/watermark.*") 0 0 )}} 
    {{$img := $img.Resize "1000x"}} 
    <img loading="lazy" src="{{$img.Permalink}}" alt="{{$.Title}}"> 
  {{end}} 
    <h2>{{.Title}}</h2> 
    <div class="price">$ {{$data.Price}}</div> 
    <div class="rating"> 
      {{range (seq $data.Rating)}}&starf;{{end}} 
      {{- range seq (sub 5 ($data.Rating | int))}}&star;{{end}} 
    </div> 
  </a> 
  <form>                                                        ❹
    <input type="hidden" name="name" value="{{.Title }}">       ❺
    <div class="colors"> 
      {{range $i, $c := split $data.Colors ","}} 
        <label> 
          <input type="radio" name="color" 
          value="{{trim $c " "}}" 
          {{if eq $i 0}}checked{{end}}>                         ❻
          <span class="sr-only">{{$c}}</span> 
        </label> 
      {{end}} 
    </div> 
    <button class="addToCart" type="submit">Add to Cart</button> 
  </form> 
</li> 
```

[]{#CH12.htm#pgfId-1052629}[❶]{.fm-combinumeral} Gets the product
information from the partial

[]{#CH12.htm#pgfId-1052650}[❷]{.fm-combinumeral} The product class
designs this card's layout CSS.

[]{#CH12.htm#pgfId-1052667}[❸]{.fm-combinumeral} Uses the cover image
from the page data

[]{#CH12.htm#pgfId-1052684}[❹]{.fm-combinumeral} Adds the purchase
options and button

[]{#CH12.htm#pgfId-1052701}[❺]{.fm-combinumeral} Adds a hidden field to
submit the product name as form data

[]{#CH12.htm#pgfId-1052718 .calibre9}[❻]{.fm-combinumeral} Selects the
first color by default

[]{#CH12.htm#pgfId-1013277 .calibre9}Next, in the index layout, we can
swap over the logic to use this content view. The code is similar to
what we used for rendering the blog section pages. Listing 12.2 shows
the HTML for a sample page for an individual product sold in the store.

[]{#CH12.htm#pgfId-1013334}Listing 12.2 Sample product page
(AcmeTheme/layouts/\_default/index.html)

``` programlisting
{{with (where site.RegularPages ".Section" "store")}} 
<section id="store"> 
  <h1>Our Products</h1> 
  <ul class="products"> 
  {{ range first 5 .}} 
    {{.Render "card"}} 
  {{ end }} 
  </ul> 
</section> 
{{end}} 
```

[]{#CH12.htm#pgfId-1044590}[Code checkpoint]{.fm-callout-head}
[[https://chapter-12-01.hugoinaction.com](https://chapter-12-01.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH12.htm#marker-1044630}[]{#CH12.htm#marker-1044631}[]{#CH12.htm#marker-1044632}[]{#CH12.htm#marker-1044633}[]{#CH12.htm#marker-1044634}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-12-01](https://github.com/hugoinaction/hugoinaction/tree/chapter-12-01){.url}]{.fm-hyperlink}.

### []{#CH12.htm#pgfId-1013532}12.1.2 Building a single product page {#CH12.htm#sigil_toc_id_257 .fm-head1}

[]{#CH12.htm#pgfId-1013654 .calibre9}[]{#CH12.htm#marker-1013644
.calibre9}[]{#CH12.htm#marker-1013646
.calibre9}[]{#CH12.htm#marker-1013648
.calibre9}[]{#CH12.htm#marker-1013650 .calibre9}The single page using
the default layout does not have purchase buttons for the product. We
will redesign this page to be more suited to our e-commerce needs
(figure 12.2).

![CH12_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH12_F02_Jain.png){.calibre1}\

[]{#CH12.htm#pgfId-1068793}Figure 12.2 Core part of the single product
page (related pages and comment section are not shown here). The single
product page has an image in a sidebar along with purchase buttons and
details on the right.

[]{#CH12.htm#pgfId-1013669 .calibre9}We can reuse the comment and the
related page code from the Blog page, adding only the core product
information and the purchase buttons
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-12-resources/03](https://github.com/hugoinaction/hugoinaction/tree/chapter-12-resources/03){.url}]{.fm-hyperlink}).
In the following listing, we use a new body class called
[store]{.fm-code-in-text} to identify the product page via CSS.

[]{#CH12.htm#pgfId-1013768}Listing 12.3 A single product template
(AcmeTheme/layouts/store/single.html)

``` programlisting
{{define "bodyClass"}} store page {{end}}                      ❶
  
{{define "body"}} 
{{$products := (partialCached "products.html" "cache")}} 
{{$data := index $products .Params.product}} 
 <main> 
  {{with (.Resources.GetMatch "coer.*")}}                      ❷
    {{$img := . | images.Filter (images.Overlay 
      (resources.GetMatch "image/watermark.*") 0 0 )}} 
    {{$img := $img.Resize "1000x"}} 
    <img loading="lazy" src="{{$img.Permalink}} 
      " alt="{{$.Title}}"> 
  {{end}} 
  <div> 
    <h1>{{.Title}}</h1> 
    <div class="rating">                                       ❷
      {{range (seq $data.Rating)}}&starf;{{end}} 
      {{- range seq (sub 5 ($data.Rating | int))}}&star;{{end}} 
    </div> 
    <p>{{.Summary}}</p> 
    <div class="price">$ {{$data.Price}}</div> 
    <form> 
      <input type="hidden" name="name" value="{{.Title }}"> 
      <label for="color-selector">Select Color</label> 
      <div class="colors" >                                    ❷
      {{range $i, $c := split $data.Colors ","}} 
        <label> 
          <input type="radio" name="color" value="{{trim $c " "}}" 
            {{if eq $i 0}}checked{{end}}> 
          <span class="sr-only">{{$c}}</span> 
        </label> 
      {{end}} 
      </div> 
      <button class="addToCart" type="submit"> 
        Add to Cart 
      </button> 
      <button class="buyNow" type="submit">                    ❸
        Buy Now                                                ❸
      </button>                                                ❸
    </form> 
    <h2>Specifications</h2> 
    {{.Content}} 
  </div> 
</main> 
```

[]{#CH12.htm#pgfId-1052196}[❶]{.fm-combinumeral} Adds a class for the
CSS

[]{#CH12.htm#pgfId-1052217}[❷]{.fm-combinumeral} Contains the same logic
as the card view

[]{#CH12.htm#pgfId-1052234 .calibre9}[❸]{.fm-combinumeral} Introduces a
Buy Now button

[]{#CH12.htm#pgfId-1015116 .calibre9}We can also reuse the comments and
the related pages from the Blog page for the store pages. The following
listing shows the code for this step.

[]{#CH12.htm#pgfId-1015173}Listing 12.4 Reusing blog components
(AcmeTheme/layouts/store/single.html)

``` programlisting
{{with where (site.RegularPages.Related .)  ❶
  ".Section" "store"}}                      ❶
<div id="related"> 
  <h2>Related Products</h2> 
  <ul class="products"> 
    {{range first 3 .}} 
     {{.Render "card"}} 
    {{end}} 
  </ul> 
</div> 
{{end}} 
{{ partial "comment.html" (dict 
  "FormspreeCommentForm" ($.Param "FormspreeCommentForm") 
  "RelPermalink" .Page.RelPermalink 
  "Disabled" ($.Param "CommentDisabled") 
)}} 
{{end}} 
```

[]{#CH12.htm#pgfId-1052106 .calibre9}[❶]{.fm-combinumeral} Only allows
related pages from the store section

[]{#CH12.htm#pgfId-1044692}[Code checkpoint]{.fm-callout-head}
[[https://chapter-12-02.hugoinaction.com](https://chapter-12-02.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH12.htm#marker-1044735}[]{#CH12.htm#marker-1044736}[]{#CH12.htm#marker-1044737}[]{#CH12.htm#marker-1044738}[]{#CH12.htm#marker-1044739}[]{#CH12.htm#marker-1044740}[]{#CH12.htm#marker-1044741}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-12-02](https://github.com/hugoinaction/hugoinaction/tree/chapter-12-02){.url}]{.fm-hyperlink}.

## []{#CH12.htm#pgfId-1015487}[]{#CH12.htm#marker-1044875}[]{#CH12.htm#marker-1044870}[]{#CH12.htm#marker-1044867}12.2 Creating a shopping cart {#CH12.htm#sigil_toc_id_258 .fm-head}

[]{#CH12.htm#pgfId-1015617 .calibre9}[]{#CH12.htm#marker-1015603
.calibre9}[]{#CH12.htm#marker-1015605
.calibre9}[]{#CH12.htm#marker-1015607 .calibre9}A *shopping cart* in an
e-commerce website is a data structure that holds a list of all the
items the user intends to purchase. It also provides a user interface to
add or remove items and to navigate to the Checkout page where the
actual billing information is present. The ideal shopping cart should
work across user sessions carrying the information until they manually
remove it or checkout. We can decide to use either a service-side
technology to store a user's shopping cart (which would require us to
force the user to login to purchase), or use the browser's local storage
(which does not work across machines). For small websites, a login
requirement is a huge hurdle and more challenging to implement, so we
will use local storage.

### []{#CH12.htm#pgfId-1015626}[]{#CH12.htm#marker-1037247}[]{#CH12.htm#marker-1037246}[]{#CH12.htm#marker-1037245}[]{#CH12.htm#marker-1037244}[]{#CH12.htm#marker-1037243}12.2.1 Creating a cart button in the header {#CH12.htm#sigil_toc_id_259 .fm-head1}

[]{#CH12.htm#pgfId-1015649 .calibre9}[]{#CH12.htm#marker-1015637
.calibre9}[]{#CH12.htm#marker-1015639
.calibre9}[]{#CH12.htm#marker-1015641
.calibre9}[]{#CH12.htm#marker-1015643
.calibre9}[]{#CH12.htm#marker-1015645 .calibre9}The shopping cart is a
button in the header whose implementation is similar to the search box.
When the user hovers or taps the cart icon, the cart should open with
the list of items and the checkout option. The following listing adds
the shopping cart to the Acme Corporation website header.

[]{#CH12.htm#pgfId-1015705}Listing 12.5 Adding a shopping cart
(AcmeTheme/layouts/\_default/baseof.html)

``` programlisting
<span id="search"> 
  ... 
</span> 
<span id="cart"> 
  <button> 
    Cart 
    <div class="badge"></div>              ❶
  </button> 
  <div> 
    <div class="empty">                    ❷
      Please add some items to the cart.   ❷
    </div>                                 ❷
  </div> 
</span> 
```

[]{#CH12.htm#pgfId-1051898}[❶]{.fm-combinumeral} A badge indicates the
number of items in the shopping cart.

[]{#CH12.htm#pgfId-1051919}[❷]{.fm-combinumeral} The empty container for
a user without content in the cart. This text ensures the cart button is
always usable.

::: fm-sidebar-block
[]{#CH12.htm#pgfId-1068825 .calibre9}Exercise 12.1

[]{#CH12.htm#pgfId-1068826}Which of the following Hugo features apply
across domains like blogs, business websites, and e-commerce
applications? (Select all that apply.)

1.  []{#CH12.htm#pgfId-1068827}Taxonomy

2.  []{#CH12.htm#pgfId-1068828}Page bundles

3.  []{#CH12.htm#pgfId-1068829}Related pages

4.  []{#CH12.htm#pgfId-1068830}Menus

5.  []{#CH12.htm#pgfId-1068831}Custom output formats (JSON pages)

6.  []{#CH12.htm#pgfId-1068837}Cascade[]{#CH12.htm#marker-1068832}[]{#CH12.htm#marker-1068833}[]{#CH12.htm#marker-1068834}[]{#CH12.htm#marker-1068835}[]{#CH12.htm#marker-1068836}
:::

### []{#CH12.htm#pgfId-1016121}[]{#CH12.htm#marker-1044874}[]{#CH12.htm#marker-1044873}[]{#CH12.htm#marker-1044869}[]{#CH12.htm#marker-1044866}12.2.2 Creating the cart in JavaScript {#CH12.htm#sigil_toc_id_260 .fm-head1}

[]{#CH12.htm#pgfId-1016142 .calibre9}[]{#CH12.htm#marker-1016132
.calibre9}[]{#CH12.htm#marker-1016134
.calibre9}[]{#CH12.htm#marker-1016136
.calibre9}[]{#CH12.htm#marker-1016138 .calibre9}The shopping cart needs
to be filled by the website users in their browsers. Therefore, the cart
cannot be processed at compile time and requires some JavaScript.

[]{#CH12.htm#pgfId-1016147}Managing shopping cart across tabs

[]{#CH12.htm#pgfId-1016194 .calibre9}[]{#CH12.htm#marker-1016158
.calibre9}[]{#CH12.htm#marker-1016160
.calibre9}[]{#CH12.htm#marker-1016162 .calibre9}We will create a new
file, store.js, to handle all the user interactions within the store
section. We will use the localStorage API to store the cart locally to
ensure the store is workable across browser sessions. We will also
[]{#CH12.htm#marker-1016167 .calibre9}use a [storage]{.fm-code-in-text}
event from []{#CH12.htm#marker-1016183 .calibre9}the
[window]{.fm-code-in-text} object to keep the cart in sync across all
tabs. The completed store.js for the entire cart creation is present in
the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-12-resources/04](https://github.com/hugoinaction/hugoinaction/tree/chapter-12-resources/04){.url}]{.fm-hyperlink}).
The following listing shows the code associated with the management of
the shopping cart on local storage.

[]{#CH12.htm#pgfId-1016273}Listing 12.6 Managing the shopping cart
(AcmeTheme/assets/store.js)

``` programlisting
let cart = [];                               ❶
export default { 
  async init() { 
    window.addEventListener('storage', 
      this.updateCart.bind(this));           ❷
    this.updateCart(); 
  }, 
  updateCart() {                             ❸
    const disk = JSON.parse(                 ❸
      window.localStorage.getItem("cart")    ❸
      || "[]");                              ❸
    cart = Array.isArray(disk) ? disk : [];  ❸
  },                                         ❸
  save() { 
    window.localStorage.setItem("cart", JSON.stringify(store)); 
  }, 
} 
```

[]{#CH12.htm#pgfId-1051607}[❶]{.fm-combinumeral} One way to use private
variables is to move them out of scope. We can also use a more modern
this.#store as a variable.

[]{#CH12.htm#pgfId-1051628}[❷]{.fm-combinumeral} Updates if the user
changes local storage by using a different browser

[]{#CH12.htm#pgfId-1051645 .calibre9}[❸]{.fm-combinumeral} Reads the
data from local storage and ensures that it is in the correct format
before updating the store object

[]{#CH12.htm#pgfId-1016841 .calibre9}Next, we initialize the store in
index.js. The following listing shows the code to do this.
[]{#CH12.htm#marker-1016843 .calibre9}[]{#CH12.htm#marker-1016846
.calibre9}[]{#CH12.htm#marker-1016848 .calibre9}

[]{#CH12.htm#pgfId-1016905}Listing 12.7 Initializing the store module
(AcmeTheme/assets/index.js)

``` programlisting
... 
import Store from "./store" 
... 
Store.init(); 
... 
```

[]{#CH12.htm#pgfId-1017015}[]{#CH12.htm#marker-1039984}[]{#CH12.htm#marker-1039983}[]{#CH12.htm#marker-1039982}Adding
data when clicking Add to cart

[]{#CH12.htm#pgfId-1017040 .calibre9}When stored in local storage,
[]{#CH12.htm#marker-1017026 .calibre9}[]{#CH12.htm#marker-1017028
.calibre9}[]{#CH12.htm#marker-1017030 .calibre9}the shopping cart has no
access to the backend. If details like price and availability change, we
should not hold on to cached values. Therefore, it is advisable to store
just the [id]{.fm-code-in-text} and always fetch the information from
the server. The Add to Cart button takes the form data and saves it in
local storage instead of submitting it to a server.

[]{#CH12.htm#pgfId-1017049 .calibre9}Most commerce solutions have
*stock-keeping units* (SKUs) used to identify any product uniquely,
which provide all variations a unique ID. In Acme Corporation, a
combination of name and color is enough to identify a product uniquely.
As the following listing shows, we will use the combination as the
unique set of keys to identify the product in the cart.

[]{#CH12.htm#pgfId-1017115}Listing 12.8 Add products on Add button click
(AcmeTheme/assets/store.js)

``` programlisting
... 
export default { 
  async init() { 
    document.addEventListener("click", 
      this.handleClick.bind(this));             ❶
    ... 
  }, 
  handleClick(event) { 
    if (event.target 
      .classList.contains("addToCart")) {       ❷
      event.preventDefault();                   ❸
      this.addToCart(event.target.form);        ❹
    } 
  } 
  addToCart(form) { 
    const data = new FormData(form);            ❺
    const name = data.get("name");              ❺
    const color = data.get("color");            ❺
    if (!cart.find(x =>                         ❻
        x.name === name &&                      ❻
        x.color === color)) {                   ❻
      cart.push({ name, color });               ❼
    } 
    this.save(); 
  }, 
} 
```

[]{#CH12.htm#pgfId-1051021}[❶]{.fm-combinumeral} Adds a click handler

[]{#CH12.htm#pgfId-1051042}[❷]{.fm-combinumeral} Handles the click event
for each Add to Cart button

[]{#CH12.htm#pgfId-1051059}[❸]{.fm-combinumeral} Prevents the default
action of the form (submit or reset)

[]{#CH12.htm#pgfId-1051076}[❹]{.fm-combinumeral} Gets the form
associated with the button

[]{#CH12.htm#pgfId-1051093}[❺]{.fm-combinumeral} Gets the values of all
the elements in the HTML form for the product added to the cart

[]{#CH12.htm#pgfId-1051110}[❻]{.fm-combinumeral} Ensures that we do not
add the same item twice. Because we sell digital items, we do not need
to provide duplicate copies.

[]{#CH12.htm#pgfId-1051127 .calibre9}[❼]{.fm-combinumeral} Adds name and
color to the cart

[]{#CH12.htm#pgfId-1017966}[]{#CH12.htm#marker-1038001}[]{#CH12.htm#marker-1038000}[]{#CH12.htm#marker-1037999}Creating
an API for product information

[]{#CH12.htm#pgfId-1017985 .calibre9}[]{#CH12.htm#marker-1017977
.calibre9}[]{#CH12.htm#marker-1017979
.calibre9}[]{#CH12.htm#marker-1017981 .calibre9}Because only the
identifying information (name and color) is present in the cart, we need
an API to fetch the rest of the product information to render the cart
correctly. We have all the information available at compile time, so we
will create a pseudo API for this use case.

[]{#CH12.htm#pgfId-1018003 .calibre9}In this pseudo API, we will use the
scratch data structure to create JSON output containing all the pages
present in our store. The following listing creates a JSON pseudo API to
provide the product details in the shopping cart. This API automatically
hides products that do not have web pages and, if they do, includes data
from the web page associated by using a loop through
[]{#CH12.htm#marker-1017992 .calibre9}the [.Pages]{.fm-code-in-text}
variable of a section.

[]{#CH12.htm#pgfId-1018063}Listing 12.9 Providing product details
(AcmeTheme/layouts/store/list.json)

``` programlisting
{{$values := newScratch}} 
  {{range .Pages}}                                 ❶
    {{if .Params.product}} 
      {{$values.Add .Params.product 
        (index 
          (partialCached "products.html" "nothing") 
          .Params.product)}}                       ❷
      {{ if (.Resources.GetMatch "cover.")}} 
        {{$img := 
          (.Resources.GetMatch "cover.") | 
          images.Filter (images.Overlay 
            (resources.GetMatch "image/watermark.*") 
          0 0 ) 
        }} 
        {{$values.SetInMap .Params.product 
            "Cover" ($img.Fill 
                "80x80 center").Permalink}}        ❸
      {{end}} 
    {{end}} 
  {{end}} 
{{$values.Values | jsonify}}                       ❹
```

[]{#CH12.htm#pgfId-1050741}[❶]{.fm-combinumeral} Loops through all pages

[]{#CH12.htm#pgfId-1050762}[❷]{.fm-combinumeral} Calls the product
partial and adds the returned information to the values scratch

[]{#CH12.htm#pgfId-1050779}[❸]{.fm-combinumeral} Adds the product's
image, reducing its size with Hugo Pipes

[]{#CH12.htm#pgfId-1050796 .calibre9}[❹]{.fm-combinumeral} Uses the
Values property to convert a scratch to a map that can be converted to
JSON using jsonify

[]{#CH12.htm#pgfId-1018518 .calibre9}Next, the following listing enables
this output format within the store's list page (via
[outputs]{.fm-code-in-text}). We can specify new output formats on
individual pages by using the output front matter property.

[]{#CH12.htm#pgfId-1018584}Listing 12.10 Enabling JSON APIs
(content/store/\_index.md)

``` programlisting
--- 
outputs: [html, json] 
--- 
```

::: fm-sidebar-block
[]{#CH12.htm#pgfId-1068854 .calibre9}Exercise 12.2

[]{#CH12.htm#pgfId-1068855}Which of the following is a limitation of the
client-side storage model? (Select all that apply.)

1.  []{#CH12.htm#pgfId-1068856}It costs more at the server.

2.  []{#CH12.htm#pgfId-1068857}It requires a powerful client machine.

3.  []{#CH12.htm#pgfId-1068858}It does not sync across multiple
    machines.

4.  []{#CH12.htm#pgfId-1068859}It is less reliable for both persistence
    and accuracy than a server-side storage model.

5.  []{#CH12.htm#pgfId-1068863}It is has major performance bottlenecks
    even for a small amount of
    data.[]{#CH12.htm#marker-1068860}[]{#CH12.htm#marker-1068861}[]{#CH12.htm#marker-1068862}
:::

[]{#CH12.htm#pgfId-1018722}[]{#CH12.htm#marker-1044872}[]{#CH12.htm#marker-1044871}[]{#CH12.htm#marker-1044868}Render
the shopping cart

[]{#CH12.htm#pgfId-1018753 .calibre9}[]{#CH12.htm#marker-1018733
.calibre9}[]{#CH12.htm#marker-1018735
.calibre9}[]{#CH12.htm#marker-1018737 .calibre9}We have all the
requirements to render the shopping cart: a variable in JavaScript with
the cart's contents, the HTML template used to view the cart, and all
the data associated with it. We can now write a function to render it in
DOM. Then we can call this from within []{#CH12.htm#marker-1018742
.calibre9}the [init]{.fm-code-in-text} function. Clicking the Add to
Cart button renders the UI correctly. The completed cart is shown in
figure 12.3.

![CH12_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH12_F03_Jain.png){.calibre1}\

[]{#CH12.htm#pgfId-1073197}Figure 12.3 The rendered shopping cart on
hovering over the cart icon in the header in the store section of the
website

[]{#CH12.htm#pgfId-1018772 .calibre9}Before rendering, we need to fetch
the product information from the pseudo API that we just created in the
previous section. The following listing uses the fetch HTTP API (just
like we used to get the search index) to do this.

[]{#CH12.htm#pgfId-1018843}Listing 12.11 Fetching the product
information (AcmeTheme/assets/store.js)

``` programlisting
... 
let products = {}; 
export default { 
  async init() { 
    ... 
    await this.productInfo(); 
    this.updateCart(); 
  } 
  async productInfo() { 
    const response = await window.fetch(BASE_URL + "/store/index.json"); 
    if (response.ok) { 
      products = await response.json(); 
    } 
  }, 
} 
```

[]{#CH12.htm#pgfId-1019251 .calibre9}We will use the
[render]{.fm-code-in-text} function to []{#CH12.htm#marker-1019234
.calibre9}update the badge next to the cart button. We have added a
Delete button to remove the element from the cart as well. The following
listing renders the shopping cart, then takes the template to fill up
the data from []{#CH12.htm#marker-1019240 .calibre9}the
[cart]{.fm-code-in-text} object present in local storage with details
for each item fetched via the pseudo API.

[]{#CH12.htm#pgfId-1019311}Listing 12.12 Rendering the shopping cart
(AcmeTheme/assets/store.js)

``` programlisting
export default { 
  ... 
  render() { 
    let badge = document.querySelector("#cart .badge"); 
    let itemList = document.querySelector("#cart > div "); 
    if (badge) { badge.innerText = cart.length || ""; }           ❶
    if (!products || !Object.keys(products).length) { return; } 
  
    const info = cart.map(x => ({                                 ❷
      ...x, price: parseFloat(products[x.name].Price), 
      cover: products[x.name].Cover 
    })); 
  
    if (itemList) {                                               ❸
      itemList.innerHTML = info 
        .map(x => `<div class="item"> 
          <img src="${x.cover}" lazy="true" width="40px"> 
          <div class="details"> 
            <h3> ${x.name} </h3> 
            <div class="color ${x.color}"></div> 
            <a class="delete" data-name="${x.name}" 
              data-color="${x.color}"> Delete </a>                ❹
          </div> 
          <div class="price"> 
           $${x.price.toFixed(2)} 
          </div> 
        </div>`).join("\n") 
        + 
        `<div class="empty"> 
          Please add some items to the cart. 
        </div>`; 
    } 
  } 
  ... 
} 
```

[]{#CH12.htm#pgfId-1050441}[❶]{.fm-combinumeral} Updates the badge with
the number of items in the cart

[]{#CH12.htm#pgfId-1050462}[❷]{.fm-combinumeral} Creates the data used
to render the shopping cart

[]{#CH12.htm#pgfId-1050479}[❸]{.fm-combinumeral} Do not update the
shopping cart if it doesn't exist.

[]{#CH12.htm#pgfId-1050496 .calibre9}[❹]{.fm-combinumeral} Adds a Delete
button

[]{#CH12.htm#pgfId-1020478 .calibre9}The [render]{.fm-code-in-text}
method can []{#CH12.htm#marker-1020467 .calibre9}be called from multiple
places when the shopping cart changes. The following listing calls it on
[init]{.fm-code-in-text} so that it is up and ready.

[]{#CH12.htm#pgfId-1020538}Listing 12.13 Calling
[render]{.fm-code-in-listingcaption} for cart changes
(AcmeTheme/assets/store.js)

``` programlisting
addToCart() { ... 
  this.render() 
  this.save(); 
}, 
async productInfo() { ... 
  this.render(); 
} 
updateCart() { ... 
  this.render(); 
} 
```

[]{#CH12.htm#pgfId-1020757 .calibre9}Next, we add an
[onDelete]{.fm-code-in-text} handler that []{#CH12.htm#marker-1020768
.calibre9}removes the element from the cart, saves the information, and
re-renders the cart. The following listing shows how this is done.

[]{#CH12.htm#pgfId-1020829}Listing 12.14 Removing an item from cart
(AcmeTheme/assets/store.js)

``` programlisting
handleClick(event) { 
  ... 
  else if (event.target.matches(".cart .delete")) { 
    this.onDelete(event); 
  } 
}, 
onDelete: function (e) { 
  cart.splice(cart.findIndex(x => 
    x.name == e.target.dataset.name && 
    x.color === e.target.dataset.color), 1); 
  this.render(); 
  this.save(); 
}, 
```

[]{#CH12.htm#pgfId-1044783}[Code checkpoint]{.fm-callout-head}
[[https://chapter-12-03.hugoinaction.com](https://chapter-12-03.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH12.htm#marker-1053137}[]{#CH12.htm#marker-1053138}[]{#CH12.htm#marker-1053139}[]{#CH12.htm#marker-1053140}[]{#CH12.htm#marker-1053141}[]{#CH12.htm#marker-1053142}[]{#CH12.htm#marker-1053143}[]{#CH12.htm#marker-1053144}[]{#CH12.htm#marker-1053145}[]{#CH12.htm#marker-1053146}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-12-03](https://github.com/hugoinaction/hugoinaction/tree/chapter-12-03){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH12.htm#pgfId-1073235 .calibre9}Exercise 12.3

[]{#CH12.htm#pgfId-1073236}To create a shopping cart using the Jamstack,
we need JavaScript support because the data is \_\_\_\_\_\_\_-specific.
:::

## []{#CH12.htm#pgfId-1021251}12.3 Checkout support {#CH12.htm#sigil_toc_id_261 .fm-head}

[]{#CH12.htm#pgfId-1021270 .calibre9}[]{#CH12.htm#marker-1021262
.calibre9}[]{#CH12.htm#marker-1021264
.calibre9}[]{#CH12.htm#marker-1021266 .calibre9}With a functional
shopping cart, we need to get the user to a purchase page to get the
payment details and complete the purchase. Let's look at what it takes
to do this.

### []{#CH12.htm#pgfId-1021275}12.3.1 Setting up the billing provider {#CH12.htm#sigil_toc_id_262 .fm-head1}

[]{#CH12.htm#pgfId-1021296 .calibre9}[]{#CH12.htm#marker-1021286
.calibre9}[]{#CH12.htm#marker-1021288
.calibre9}[]{#CH12.htm#marker-1021290
.calibre9}[]{#CH12.htm#marker-1021292 .calibre9}The purchase workflow
has many moving parts with currencies and payment methods. Creating the
infrastructure to take payments is a lot of work without relying on an
external payment processor. Most of the traditional websites rely on a
third party to provide this support. We will use Stripe
([[https://stripe.com/](https://stripe.com/){.url}]{.fm-hyperlink}) as
our payment processor due to its simple developer-friendly API and
fantastic debugging support. We can use the techniques discussed in this
section for other payment providers like Authorize.net, PayPal, and
Amazon Pay.

[]{#CH12.htm#pgfId-1021302 .calibre9}When you log in to Stripe for the
first time, it provides a checklist to enable test mode (figure 12.4).
The checklist goes through the steps to activate and accept payments.

![CH12_F04_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH12_F04_Jain.png){.calibre1}\

[]{#CH12.htm#pgfId-1077564}Figure 12.4 Checklist for using with Stripe
when we log in for the first time

[]{#CH12.htm#pgfId-1021318 .calibre9}A single Stripe account can have
multiple stores. Use the menu on the top left of the Stripe dashboard
(which opens when you log in) to create a new store in Stripe to accept
payment (figure 12.5 shows that Hugo In Action is already created) or
switch to a different store using the header on the top left. Copy the
test API keys. We will use both the publishable and the secret keys and
store the secret key in Netlify/Heroku as an environment variable named
[STRIPE_PRIVATE_KEY]{.fm-code-in-text}.

![CH12_F05_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH12_F05_Jain.png){.calibre1}\

[]{#CH12.htm#pgfId-1077598}Figure 12.5 Creating and switching stores on
Stripe

[]{#CH12.htm#pgfId-1021348 .calibre9}We can use the Settings \> Branding
screen in Stripe to upload our logo and set up colors to customize the
generated checkout form so it looks closer to our website's theme
(figure 12.6). Stripe will show these branded pages to the end users.
[]{#CH12.htm#marker-1021364 .calibre9}[]{#CH12.htm#marker-1021367
.calibre9}[]{#CH12.htm#marker-1021369
.calibre9}[]{#CH12.htm#marker-1021371 .calibre9}

![CH12_F06_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH12_F06_Jain.png){.calibre1}\

[]{#CH12.htm#pgfId-1077632}Figure 12.6 Controlling the branding of our
web pages through Stripe's Branding screen

### []{#CH12.htm#pgfId-1021387}[]{#CH12.htm#marker-1042861}[]{#CH12.htm#marker-1042860}[]{#CH12.htm#marker-1042859}12.3.2 Creating a checkout session {#CH12.htm#sigil_toc_id_263 .fm-head1}

[]{#CH12.htm#pgfId-1021420 .calibre9}[]{#CH12.htm#marker-1021412
.calibre9}[]{#CH12.htm#marker-1021414
.calibre9}[]{#CH12.htm#marker-1021416 .calibre9}There are multiple ways
to use Stripe on our website. We will use the most straightforward
approach, where the Checkout page is present on Stripe's website. We
will pass Stripe the cart information, and it will come back to us after
payment. This solution for accepting payments is present, step by step,
in Stripe's official documentation at
[[https://stripe.com/docs/payments/accept-a-payment](https://stripe.com/docs/payments/accept-a-payment){.url}]{.fm-hyperlink}.

[]{#CH12.htm#pgfId-1021426 .calibre9}Alternatively, some mechanisms are
available to perform purchases within our website, fully controlling the
UI and then sending the details to Stripe to execute the payment. That
approach is more involved and beyond the scope of this book. The
following lists the required steps to set up checkout using the hosted
approach via Stripe:

1.  []{#CH12.htm#pgfId-1021432 .calibre9}Create a shopping cart and pass
    that information to the server.

2.  []{#CH12.htm#pgfId-1021446 .calibre9}Create a checkout session on
    the server, providing the necessary product details for purchase
    directly to Stripe.

3.  []{#CH12.htm#pgfId-1021456 .calibre9}Pass the checkout ID to the
    client and call the Stripe JavaScript library to navigate to Stripe
    to complete the purchase.

4.  []{#CH12.htm#pgfId-1021466 .calibre9}Handle the success/cancel
    navigation on the supplied URLs.

[]{#CH12.htm#pgfId-1021476 .calibre9}Stripe cannot work purely with a
frontend (JavaScript) and needs a server API to perform the purchase so
that no client can meddle with the data sent to Stripe. The Stripe
server API needs the Stripe secret key that we copied in the previous
section for it to function.

[]{#CH12.htm#pgfId-1021482 .calibre9}Before adding a Checkout button, we
need to create a cloud function for step 2. In the checkout
server-hosted function, the frontend passes us the product identifying
information. We can then calculate the price and hand it to Stripe to
create a checkout session. The cloud function gets its price from
outside the caller to ensure that a client does not have the power to
manipulate those values and inject custom prices during checkout.
Because the backend exposes the prices via a JSON pseudo API over HTTPS,
we can reuse that to get the price information.

[]{#CH12.htm#pgfId-1021504 .calibre9}To call the Stripe API, we need to
add a dependency on Stripe's Node.js SDK. The following listing runs
[hugo]{.fm-code-in-text} [mod]{.fm-code-in-text} [npm]{.fm-code-in-text}
[pack]{.fm-code-in-text} to add this dependency to package.hugo .json,
followed by [npm install]{.fm-code-in-text} to make this available
locally.

[]{#CH12.htm#pgfId-1021564}Listing 12.15 Adding a dependency to Stripe's
Node.js SDK (package.hugo.json)

``` programlisting
{ 
  ... 
  "dependencies": { 
    ... 
    "stripe": "8.169.0" 
  } 
  ... 
} 
```

[]{#CH12.htm#pgfId-1021618 .calibre9}A checkout function also takes the
success and error paths to pass to Stripe. We will also provide the
Stripe checkout API
([[http://mng.bz/J11o](http://mng.bz/J11o){.url}]{.fm-hyperlink})
product images and individual prices to track the receipt easily. For
security reasons, we will use only URLs relative to the base URL of the
website, which will be hardcoded in the function. The code for the
checkout function is present in the chapter resources at
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-12-resources/05](https://github.com/hugoinaction/hugoinaction/tree/chapter-12-resources/05){.url}]{.fm-hyperlink}).

[]{#CH12.htm#pgfId-1021643 .calibre9}Before calling Stripe to show a
Checkout page, we need to create a checkout session from the server with
the exact details of the items in the cart. We recommend passing only
the product IDs to this backend function, which should fetch the product
details and price internally to prevent manipulation. The skeleton code
in the following listing ensures that the parameters are passed
correctly and that meaningful error messages are sent.

[]{#CH12.htm#pgfId-1021700}Listing 12.16 Creating a checkout session
(api/checkout.js)

``` programlisting
const stripe = require('stripe') 
  (process.env.STRIPE_PRIVATE_KEY);                                 ❶
const fetch = require("node-fetch"); 
const endpoint = "<Your website endpoint>"                          ❷
const origin = new URL(endpoint).origin; 
  
module.exports = { 
  async handler(event, context) { 
    if (                                                            ❸
      !event.queryStringParameters ||                               ❸
      !event.queryStringParameters.products                         ❸
    ) {                                                             ❸
      return {                                                      ❸
        statusCode: 400,                                            ❸
        headers: { "Content-Type": "application/json" },            ❸
        body: JSON.stringify({ error: "No products supplied." }),   ❸
      };                                                            ❸
    }                                                               ❸
  
    let error = "Unknown error"; 
    try { 
      let products = event.queryStringParameters.products; 
      if (!Array.isArray(products)) {                               ❹
        products = products.split(",");                             ❹
      }                                                             ❹
      ... 
      } else { 
        error = `Could not fetch pricing table due to ${ 
          await data.text()} ${data.statusCode}`; 
      } 
    } catch (e) { 
      error = e.message; 
    } 
    return { 
      statusCode: 500, 
      headers: { "Content-Type": "application/json" }, 
      body: JSON.stringify({error}), 
    }; 
  }, 
}; 
```

[]{#CH12.htm#pgfId-1049476}[❶]{.fm-combinumeral} Passes the Stripe
private key to initialize the Stripe API

[]{#CH12.htm#pgfId-1049497}[❷]{.fm-combinumeral} Hardcodes the website
endpoint

[]{#CH12.htm#pgfId-1049514}[❸]{.fm-combinumeral} Ensures there are some
products to buy

[]{#CH12.htm#pgfId-1049531 .calibre9}[❹]{.fm-combinumeral} Supports
supplied parameters about product details in both an array and a
comma-separated string

[]{#CH12.htm#pgfId-1022904 .calibre9}In the listing, passing the Stripe
private key initializes the Stripe API. All variables set in the Netlify
UI are available in the cloud functions. Always use the hardcoded
website endpoint as the base to prevent a malicious user from pointing
to a different endpoint with a changed price. This function accepts
multiple products as a JSON array and also as a comma-separated string.
Commas are converted to an array via [products.split]{.fm-code-in-text}.

[]{#CH12.htm#pgfId-1022929}[Note]{.fm-callout-head} Netlify environment
variables do not work in Netlify functions. The code present in the code
checkpoints accompanying this book uses a post-install script to dump
the variables in a file, which the function reads at run time. The
readers are advised to hardcode these values in checkout.js for
simplicity. Hardcoding is safe because a function's source code is not
publicly exposed.

[]{#CH12.htm#pgfId-1022961 .calibre9}The checkout core implementation
includes calling the same index API used in the shopping cart and
creating [stripeData]{.fm-code-in-text} for Stripe support as listing
12.17 shows. This involves sending the product information to Stripe to
get a session ID. Stripe sends back the session ID, which we can then
pass on to the JavaScript layer. Each product ID is in the
[name]{.fm-code-in-text}/[color]{.fm-code-in-text} format, and we will
use that to split out the name and color to get the price and image to
add to the Stripe line items.

[]{#CH12.htm#pgfId-1023021}Listing 12.17 Implementing checkout using
Stripe (api/checkout.js)

``` programlisting
const data = await fetch(`${endpoint}/store/index.json`); 
if (data.ok) { 
  const table = await data.json(); 
  const stripeData = {                                  ❶
    payment_method_types: ['card'], 
    line_items: [], 
    mode: 'payment', 
    success_url: `${origin}${decodeURIComponent( 
      event.queryStringParameters.success)}`, 
    cancel_url: `${origin}${decodeURIComponent( 
      event.queryStringParameters.cancel)}`, 
    metadata: { } 
  }; 
  
  products.forEach((x, i) => { 
    const name = x.split("_")[0].trim();                ❷
    const color = x.split("_")[1].trim(); 
    stripeData.line_items.push({ 
      price_data: { 
        currency: 'usd', 
        product_data: { 
          name: `${name}(${color})`, 
          images: [table[name].Cover], 
        }, 
        unit_amount: parseFloat(table[name].Price.trim()) * 100, 
      }, 
      quantity: 1, 
    }) 
  }); 
  
  const session = await 
    stripe.checkout.sessions.create(stripeData);        ❸
  return { 
    statusCode: 200, 
    headers: { "Content-Type": "application/json" }, 
    body: JSON.stringify({ 
      sessionId: session.id, stripeData, products 
    }), 
  }; 
```

[]{#CH12.htm#pgfId-1049274}[❶]{.fm-combinumeral} Sets up the data that
we send to create a checkout session

[]{#CH12.htm#pgfId-1049291}[❷]{.fm-combinumeral} Splits out the name and
color to get the price and image for each product ID

[]{#CH12.htm#pgfId-1049308 .calibre9}[❸]{.fm-combinumeral} Calls Stripe
to create a checkout session

[]{#CH12.htm#pgfId-1024233 .calibre9}The GitHub pages sample with
checkout support is present at
[[https://github.com/hugoinaction/GitHubPagesStore](https://github.com/hugoinaction/GitHubPagesStore){.url}]{.fm-hyperlink}.
For supporting a PAAS like Heroku, we need to invoke this from the
api.js file as the following listing shows.

[]{#CH12.htm#pgfId-1024291}Listing 12.18 Integrating checkout with a
PAAS API (api.js)

``` programlisting
... 
switch (url.pathname) { 
      ... 
      case '/checkout': 
        response = await checkout.handler(request); 
        break; 
  } 
```

[]{#CH12.htm#pgfId-1024454 .calibre9}We can now add a Checkout button to
our shopping cart and then pass the product information in the cart to
the server to create a checkout session. When the user clicks the
Checkout button, we can call the checkout server function we just built
to get the checkout session ID. We then load the Stripe JavaScript SDK,
using the publishable key to initialize it. Using the Stripe API, we can
redirect the user to the checkout session. Because we are using the
hosted Stripe solution, we need to pass the success and error URLs to
allow Stripe to send the user back to our website after checkout or
before as needed. The following listing loads
[]{#CH12.htm#marker-1053214 .calibre9}the Stripe JavaScript library
(SDK)[]{#CH12.htm#marker-1024443}, adds a Checkout button, and then
calls [checkout]{.fm-code-in-text} at the appropriate time.

[]{#CH12.htm#pgfId-1024514}Listing 12.19 Completing a purchase
(AcmeTheme/assets/store.js)

``` programlisting
... 
let stripe = undefined; 
  
export default { 
  async init() { 
    const s = document.createElement('script');            ❶
    s.setAttribute('src', "https://js.stripe.com/v3/");    ❶
    s.onload = () => {                                     ❶
      stripe = Stripe("<Your Stripe publishable key>");    ❶
    };                                                     ❶
    s.defer = true;                                        ❶
    document.body.appendChild(s);                          ❶
    ... 
  }, 
  handleClick(event) { 
    ... else if (event.target.id === "checkout") { 
      this.onCheckout();                                   ❷
    } ...  
  } 
  render() { 
    ... 
        `<div class="empty"> 
          Please add some items to the cart. 
        </div> 
          <button id="checkout">Checkout</button>`         ❸
    } 
    ... 
  }, 
} 
```

[]{#CH12.htm#pgfId-1048817}[❶]{.fm-combinumeral} Asynchronously loads
the Stripe JavaScript SDK and initializes with the publishable key

[]{#CH12.htm#pgfId-1048838}[❷]{.fm-combinumeral} Adds an event handler
for the click event on the Checkout button

[]{#CH12.htm#pgfId-1048855 .calibre9}[❸]{.fm-combinumeral} Adds a
Checkout button at the end of the shopping cart

[]{#CH12.htm#pgfId-1025295 .calibre9}The checkout call to the Stripe
JavaScript SDK involves getting the session ID and passing that along
with the return URLs for both success and failure. The following listing
implements this call, redirecting to the Checkout page.

[]{#CH12.htm#pgfId-1025352}Listing 12.20 Getting the session ID
(AcmeTheme/assets/store.js)

``` programlisting
  async onCheckout() { 
    try { 
      const url = NETLIFY ? new URL(window.location.origin 
       + "/.netlify/functions/checkout") 
        : new URL( 
        "https://hugoinaction.herokuapp.com/checkout");    ❶
      cart.forEach(x => 
        url.searchParams.append("products", 
              `${x.name}_${x.color}`));                    ❷
  
      url.searchParams.append("success", 
        encodeURIComponent(window.location.pathname + 
          "?purchase=success"));                           ❸
  
      url.searchParams.append("cancel", 
        encodeURIComponent(window.location.pathname + 
          "?purchase=cancel"));                            ❸
  
      const response = await window.fetch(url.href);       ❹
  
      if (response.ok) { 
        const resp = await response.json(); 
        stripe.redirectToCheckout({ 
          sessionId: resp.sessionId                        ❺
        }); 
      } 
  
    } catch (e) { 
      console.log("Error", e); 
    } 
  }, 
```

[]{#CH12.htm#pgfId-1048454}[❶]{.fm-combinumeral} Gets the location of
the server-hosted cloud function

[]{#CH12.htm#pgfId-1048475}[❷]{.fm-combinumeral} Converts cart
information into a list of product IDs to be sent to the server

[]{#CH12.htm#pgfId-1048492}[❸]{.fm-combinumeral} Adds success and cancel
links to return to the current page to continue the user session

[]{#CH12.htm#pgfId-1048509}[❹]{.fm-combinumeral} Calls the checkout
function to get the checkout session to launch

[]{#CH12.htm#pgfId-1048526 .calibre9}[❺]{.fm-combinumeral} Launches the
checkout session using the official Stripe JavaScript API

[]{#CH12.htm#pgfId-1026183 .calibre9}The code in the listing needs us to
expose a variable []{#CH12.htm#marker-1042832 .calibre9}named
[NETLIFY]{.fm-code-in-text} from Hugo into JavaScript. We can do this
with [defines]{.fm-code-in-text} just like we did with the
[REMOVE_FORM_ON \_SUBMISSION]{.fm-code-in-text} option in chapter 10.

::: fm-sidebar-block
[]{#CH12.htm#pgfId-1081973 .calibre9}Exercise 12.4

[]{#CH12.htm#pgfId-1081974}Stripe requires us to create a checkout
session on the server because the client-side data cannot be trusted and
the \_\_\_\_\_\_\_ need to be provided by a trusted server.
:::

[]{#CH12.htm#pgfId-1081989 .calibre9}

::: fm-sidebar-block
[]{#CH12.htm#pgfId-1081993 .calibre9}Sharing the cloud function code via
the theme

[]{#CH12.htm#pgfId-1081994}We kept the store inside the AcmeTheme
template and, ideally, should have all the checkout code used in Netlify
functions controlled by Heroku via AcmeTheme and reused across websites
that use the theme. Because Netlify does not understand Hugo's virtual
filesystem, using Hugo Modules path mapping does not work. A better
solution is to convert these functions into node modules and use Hugo's
npm integration to provide them from the theme to the website project.
With this approach, we can turn the code for the checkout function into
its own npm module with an independent package.json, whose
[main]{.fm-code-in-text1} entry point is the function script.

[]{#CH12.htm#pgfId-1081995}The following code snippet shows how to
create a checkout npm module in package .json:

``` programlisting
{ 
  "main": "checkout.js" 
} 
```

[]{#CH12.htm#pgfId-1082016}Then in package.json in our AcmeTheme
template, we can add this new module as a dependency:

``` programlisting
{ 
  "dependencies": { 
    "acme-theme-checkout": "https://github.com/<path to checkout repository>" 
  } 
} 
```

[]{#CH12.htm#pgfId-1082022}Now in the Acme Corporation website
repository (api/checkout.js), we can call directly into this module via
the [require]{.fm-code-in-text1} statement:

::: programlisting
**module.exports = require(**\"acme-theme-checkout\"**);**
:::
:::

[]{#CH12.htm#pgfId-1042812 .calibre9}With these changes, the store
section of the website is usable. The readers can purchase products, and
we can access Stripe to get the customer's information and fulfill it
manually. In the case of physical products ordered through the store,
this is all that's needed to run the store effectively. Stripe provides
a mechanism to send a payment receipt to the end user, collect shipping
addresses, process refunds, and manage users.

[]{#CH12.htm#pgfId-1044902}[Code checkpoint]{.fm-callout-head}
[[https://chapter-12-04.hugoinaction.com](https://chapter-12-04.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-12-04](https://github.com/hugoinaction/hugoinaction/tree/chapter-12-04){.url}]{.fm-hyperlink}.

### []{#CH12.htm#pgfId-1026474}12.3.3 Handling success and failure {#CH12.htm#sigil_toc_id_264 .fm-head1}

[]{#CH12.htm#pgfId-1026497 .calibre9}[]{#CH12.htm#marker-1026485
.calibre9}[]{#CH12.htm#marker-1026487
.calibre9}[]{#CH12.htm#marker-1026489
.calibre9}[]{#CH12.htm#marker-1026491
.calibre9}[]{#CH12.htm#marker-1026493 .calibre9}When a user completes a
successful purchase, we should inform the user that the items purchased
are on their way. Also, we should clear the cart of the purchased
products. If the user cancels the purchase, however, the cart should
stay intact so that the user can continue shopping and checkout later if
desired. To enable the users not to lose context, we can add support in
Stripe to return to the same URL that sent the users to checkout with
additional parameters, which allows us to react to the actions during
checkout.

[]{#CH12.htm#pgfId-1026502 .calibre9}During the initialization of the
store component, we will parse the supplied parameters for a success
page. There is nothing to do if the user cancels the purchase. If there
is a successful purchase, we need to perform these two associated tasks:
clearing the cart and showing a message. The [init]{.fm-code-in-text}
method also []{#CH12.htm#marker-1026513 .calibre9}updates the URL to
ensure that, if the user accidentally lands on this page via the
browser's Back button, we do not clear the cart.

[]{#CH12.htm#pgfId-1026574}Listing 12.21 Completing a successful
purchase (AcmeTheme/assets/store.js)

``` programlisting
... 
async init() { 
  ... 
  const location = new URL(window.location.href); 
  if (location.searchParams.get("purchase") === "success") { 
    cart.length = 0;                                          ❶
    this.save(); 
    document.body.insertAdjacentHTML("beforeend", ` 
    <div class="alert success"> 
      <div class="head">Order Confirmed.</div> 
      Your product will be e-mailed soon. 
      <a href="close">Close</a> 
    </div>`);                                                 ❷
    location.searchParams.delete("purchase");                 ❸
    window.history.replaceState(null, "", location);          ❸
    document.querySelector(".alert.success .close") 
      .addEventListener("click", e => { 
      document.body.removeChild(document.querySelector(".alert.success")); 
      e.preventDefault(); 
    });                                                       ❹
    setTimeout(() => { 
      document.body.removeChild(document.querySelector(".alert.success")); 
    }, 5000);                                                 ❺
  } 
} 
```

[]{#CH12.htm#pgfId-1047965}[❶]{.fm-combinumeral} Empties the cart

[]{#CH12.htm#pgfId-1047993}[❷]{.fm-combinumeral} Adds some messages on
the top of the page for the customer

[]{#CH12.htm#pgfId-1048010}[❸]{.fm-combinumeral} Removes the purchase
property from the URL to prevent clearing the cart with an accidental
browser Back button click

[]{#CH12.htm#pgfId-1048027}[❹]{.fm-combinumeral} Makes the Close button
functional

[]{#CH12.htm#pgfId-1048044}[❺]{.fm-combinumeral} Autohides the
notification after 5 seconds

[]{#CH12.htm#pgfId-1027270}[Note]{.fm-callout-head} Using Stripe test
accounts on our sample website, we do not need to enter an actual credit
card number for a purchase. The dummy credit card number is
4242-4242-4242-4242 with a random zip code and random expiry date. These
are valid for testing purposes.
[]{#CH12.htm#marker-1027272}[]{#CH12.htm#marker-1027275}[]{#CH12.htm#marker-1027277}[]{#CH12.htm#marker-1027279}[]{#CH12.htm#marker-1027281}

### []{#CH12.htm#pgfId-1027287}12.3.4 Enabling the Buy Now button {#CH12.htm#sigil_toc_id_265 .fm-head1}

[]{#CH12.htm#pgfId-1027308 .calibre9}[]{#CH12.htm#marker-1027298
.calibre9}[]{#CH12.htm#marker-1027300
.calibre9}[]{#CH12.htm#marker-1027302
.calibre9}[]{#CH12.htm#marker-1027304 .calibre9}The Buy Now button is a
minor addition to the cart feature. Clicking Buy Now directly sends the
current item to checkout, and we don't need to clear the cart upon
return. In the store module, we can add a click handler to the Buy Now
button and send the current item to checkout via the existing mechanism
used in the cart-based checkout. The shopping cart should not be cleared
on success with a Buy Now action. This functionality is an exercise for
the reader. You can look at the code checkpoint for assistance.

[]{#CH12.htm#pgfId-1044967}[Code checkpoint]{.fm-callout-head}
[[https://chapter-12-05.hugoinaction.com](https://chapter-12-05.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH12.htm#marker-1045007}[]{#CH12.htm#marker-1045008}[]{#CH12.htm#marker-1045009}[]{#CH12.htm#marker-1045010}[]{#CH12.htm#marker-1045011}[]{#CH12.htm#marker-1045012}[]{#CH12.htm#marker-1045013}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-12-05](https://github.com/hugoinaction/hugoinaction/tree/chapter-12-05){.url}]{.fm-hyperlink}.

## []{#CH12.htm#pgfId-1027313}12.4 Fulfillment {#CH12.htm#sigil_toc_id_266 .fm-head}

[]{#CH12.htm#pgfId-1027437 .calibre9}[]{#CH12.htm#marker-1027429
.calibre9}[]{#CH12.htm#marker-1027431
.calibre9}[]{#CH12.htm#marker-1027433 .calibre9}Acme Corporation is a
digital company; its products are not physical goods shipped by regular
mail. Because these are digital entities, these can be supplied to the
end user by a password-protected page, a logged-in account, or an email
directly on purchase.

[]{#CH12.htm#pgfId-1027442 .calibre9}It may seem easier to provide
downloads for the purchased product on the success page itself, but that
is not a good idea. The purchase result page is public, and security by
having an obscure URL is no security. Purchases can take time in some
instances. It is safer to provide instant information about a purchase
coming asynchronously rather than having a bad user experience in some
edge cases. When money gets involved, lapses in the user experience can
evoke a stronger reaction than in other cases.

### []{#CH12.htm#pgfId-1027448}12.4.1 Receiving and verifying webhooks {#CH12.htm#sigil_toc_id_267 .fm-head1}

[]{#CH12.htm#pgfId-1027469 .calibre9}[]{#CH12.htm#marker-1027459
.calibre9}[]{#CH12.htm#marker-1027461
.calibre9}[]{#CH12.htm#marker-1027463
.calibre9}[]{#CH12.htm#marker-1027465 .calibre9}Stripe provides the
ability to register a webhook that can be called when a purchase
succeeds. This webhook has access to all the information taken from the
user during the purchase and any metadata that we supply. We can react
to the purchase from within this webhook.

[]{#CH12.htm#pgfId-1027474 .calibre9}We will create a new webhook to
handle successful purchases, where we will parse the user information
and then send the user their purchased product(s) as an attachment over
email. We already saved the Stripe private key (as
[STRIPE_PRIVATE_KEY]{.fm-code-in-text}) in Heroku/Netlify, so we can use
that to verify that the webhook came from Stripe. Stripe webhooks come
with a signature that we can use to verify the origin. This signature is
what we can use to weed out fake webhook calls. The following listing
provides the code to require this signature.

[]{#CH12.htm#pgfId-1027531}Listing 12.22 Verifying Stripe's webhook
(api/webhook.js)

``` programlisting
const stripe = require('stripe')(process.env.STRIPE_PRIVATE_KEY); 
  
module.exports = { 
  async handler(event, context) { 
    const sig = event.headers['stripe-signature']; 
    let stripeEvent = {}; 
    try { 
      stripeEvent = stripe.webhooks                ❶
        .constructEvent(event.body,                ❶
        sig, process.env.STRIPE_SIGN_SECRET);      ❶
  
    } catch (err) {                                ❷
      return { 
        statusCode: 400, 
        err: JSON.stringify(err) 
      } 
    } 
    console.log('Received webhook with data: ',    ❸
      JSON.stringify(stripeEvent, null, 2))        ❸
    return { 
      statusCode: 200                              ❹
    }; 
  }, 
}; 
```

[]{#CH12.htm#pgfId-1047620}[❶]{.fm-combinumeral} Calls the construct
event API to verify the event's signature and ensures that it came from
Stripe

[]{#CH12.htm#pgfId-1047641}[❷]{.fm-combinumeral} Handles errors if the
event came from elsewhere

[]{#CH12.htm#pgfId-1047658}[❸]{.fm-combinumeral} Logs the details for
now. Note that the event details are also available in the Stripe user
interface.

[]{#CH12.htm#pgfId-1047675 .calibre9}[❹]{.fm-combinumeral} Calls the
construct event API to verify the event's signature and ensures that it
came from Stripe

[]{#CH12.htm#pgfId-1028201}[tip]{.fm-callout-head} If we keep getting
the non-success error codes, Stripe provides us with the ability to
retry a webhook in its user interface. When testing, this can come in
handy because we do not need to go through the entire workflow of
checking something to call the webhook correctly.

[]{#CH12.htm#pgfId-1028207 .calibre9}For supporting PAAS like Heroku, we
need to invoke the webhook endpoint within api.js. The following listing
shows how this is done.

[]{#CH12.htm#pgfId-1028264}Listing 12.23 Exporting the webhook endpoint
(api.js)

``` programlisting
... 
switch (url.pathname) { 
  case '/webhook': 
    response = await webhook.handler(request); 
    break; 
} 
```

[]{#CH12.htm#pgfId-1028400 .calibre9}Next, we need to enable webhooks
using Stripe's Add a Webhook Endpoint page. To get to this page, select
Developer \> Webhooks and then click Add Endpoint (figure 12.7).

![CH12_F07_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH12_F07_Jain.png){.calibre1}\

[]{#CH12.htm#pgfId-1086365}Figure 12.7 Webhooks are available in the
Developer section in Stripe. These allow us to listen to events in
Stripe.

[]{#CH12.htm#pgfId-1028416 .calibre9}Provide the details of the endpoint
just created. Then select the checkout.session .completed event to
listen to completed checkouts (figure 12.8).

![CH12_F08_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH12_F08_Jain.png){.calibre1}\

[]{#CH12.htm#pgfId-1086399}Figure 12.8 The checkout.session.completed
event is triggered when checkout is complete. We can listen to it in our
webhook.

[]{#CH12.htm#pgfId-1028446 .calibre9}We can use the webhook interface to
send test webhooks and to view historical webhooks. We can then act on
the failed webhooks (figure 12.9).

![CH12_F09_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH12_F09_Jain.png){.calibre1}\

[]{#CH12.htm#pgfId-1086440}Figure 12.9 The Stripe Webhook Details page
provides all the information about a webhook and the actions. This
allows us to test the webhook without going through the entire flow.

[]{#CH12.htm#pgfId-1028476 .calibre9}Note that the test webhooks sent by
the Stripe interface do not contain all the data we need. We will,
therefore, need to use proper webhooks via a checkout and utilize test
mode to get the correct data.

[]{#CH12.htm#pgfId-1028506}[tip]{.fm-callout-head} For testing locally,
Stripe provides a mechanism via its command-line tool to listen to and
forward the webhook to a local server for verification. This tool comes
in handy when debugging. Read more about it in the official Stripe
documentation at
[[https://stripe.com/docs/stripe-cli/webhooks](https://stripe.com/docs/stripe-cli/webhooks){.url}]{.fm-hyperlink}.
[]{#CH12.htm#marker-1041789}[]{#CH12.htm#marker-1041790}[]{#CH12.htm#marker-1041791}[]{#CH12.htm#marker-1041792}

![CH12_F10_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH12_F10_Jain.png){.calibre1}\

[]{#CH12.htm#pgfId-1086474}Figure 12.10 All the way: Alex and Bob
realize that Jamstack is not a toy anymore---it can do all that they
need!

### []{#CH12.htm#pgfId-1028532}[]{#CH12.htm#marker-1041956}[]{#CH12.htm#marker-1041955}[]{#CH12.htm#marker-1041954}[]{#CH12.htm#marker-1041953}12.4.2 Getting purchase details {#CH12.htm#sigil_toc_id_268 .fm-head1}

[]{#CH12.htm#pgfId-1028567 .calibre9}[]{#CH12.htm#marker-1028557
.calibre9}[]{#CH12.htm#marker-1028559
.calibre9}[]{#CH12.htm#marker-1028561
.calibre9}[]{#CH12.htm#marker-1028563 .calibre9}The Stripe webhook gives
specific information about the event, but that may not be complete for
our use case. We can ask the Stripe API for additional information about
the event. Stripe has a concept of expandable fields, which by default
are returned as an ID but can be expanded to full details if needed. We
will use this to get the customer's email address and then the name used
for the credit card to personalize the email to the customer. The
following listing uses expandable fields to fetch the payment details as
well as the additional context information.

[]{#CH12.htm#pgfId-1028623}Listing 12.24 Getting customer details
(api/webhook.js)

``` programlisting
try { 
      stripeEvent = ... 
} catch(e) { 
} 
try { 
const session = await stripe.checkout.sessions.retrieve 
    (stripeEvent.data.object.id, { 
      expand: [ 
        'customer', 
        'payment_intent', 
        'payment_intent.payment_method' 
    ], 
});                                                       ❶
if (!(session.customer && session.customer.email && 
      session.payment_status === 'paid' && 
      Object.values(session.metadata || {}) 
        .length > 0)) {                                   ❷
  throw new Error(                                        ❷
   "Could not get customer or payment information.");     ❷
}                                                         ❷
const name = session.payment_intent && 
             session.payment_intent.payment_method && 
             session.payment_intent.payment_method.billing_details && 
             session.payment_intent 
               .payment_method.billing_details.name;      ❸
const email = session.customer.email; 
 } catch (e) {                                            ❹
  return { 
    statusCode: 500, 
    err: JSON.stringify(e) 
  }  
}; 
```

[]{#CH12.htm#pgfId-1047128}[❶]{.fm-combinumeral} Asks for all relevant
information from Stripe

[]{#CH12.htm#pgfId-1047149}[❷]{.fm-combinumeral} Ensures that the event
is actionable

[]{#CH12.htm#pgfId-1047166}[❸]{.fm-combinumeral} Gets the customer name
(but prepares for the fact that it may not be present)

[]{#CH12.htm#pgfId-1047183 .calibre9}[❹]{.fm-combinumeral} Always
handles failures gracefully []{#CH12.htm#marker-1047188
.calibre9}[]{#CH12.htm#marker-1047189
.calibre9}[]{#CH12.htm#marker-1047190
.calibre9}[]{#CH12.htm#marker-1047191 .calibre9}

### []{#CH12.htm#pgfId-1029470}[]{#CH12.htm#marker-1045290}[]{#CH12.htm#marker-1045289}[]{#CH12.htm#marker-1045288}[]{#CH12.htm#marker-1045287}[]{#CH12.htm#marker-1045286}12.4.3 Setting up an email provider {#CH12.htm#sigil_toc_id_269 .fm-head1}

[]{#CH12.htm#pgfId-1029493 .calibre9}[]{#CH12.htm#marker-1029481
.calibre9}[]{#CH12.htm#marker-1029483
.calibre9}[]{#CH12.htm#marker-1029485
.calibre9}[]{#CH12.htm#marker-1029487
.calibre9}[]{#CH12.htm#marker-1029489 .calibre9}Just like billing,
modern email implementation is complicated. From having a reputed IP
address to following the various authentication schemes, it is better to
rely on a third party unless your core product is sending emails. We use
SendGrid in this book, but the steps to send emails are similar in other
email providers like MailGun, Amazon SES, and Mandrill. Any provider
that provides a REST-based API to send emails makes our life as
developers easier.

[]{#CH12.htm#pgfId-1029498 .calibre9}After signing up for SendGrid
([[https://sendgrid.com/](https://sendgrid.com/){.url}]{.fm-hyperlink}),
you will land at a Getting Started page, which takes you through the
account setup and verification before you can send an email (figure
12.11).

![CH12_F11_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH12_F11_Jain.png){.calibre1}\

[]{#CH12.htm#pgfId-1086508}Figure 12.11 SendGrid has an onboarding guide
that helps new users set up a sender that we can use to send emails.

[]{#CH12.htm#pgfId-1029515 .calibre9}There are two sets of steps needed
to enable SendGrid: account validation and sender validation. Account
validation involves verifying your account email address and setting up
two-factor authentication along with a payment method if you plan to use
more than the free tier of emails. With sender validation, you can use
single sender or domain-based veri-fication. When using single sender
verification, you need to fill in a small form and click an email
verification link (figure 12.12).

![CH12_F12_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH12_F12_Jain.png){.calibre1}\

[]{#CH12.htm#pgfId-1086542}Figure 12.12 Single sender verification in
SendGrid involves filling in a short form and then verifying the
ownership of an email address by clicking a link sent via email.

[]{#CH12.htm#pgfId-1029545 .calibre9}Domain-based validation re-quires
setting up a few entries in the DNS records of the domain. Full text of
these entries is available on the SendGrid website at
[[http://mng.bz/wnnO](http://mng.bz/wnnO){.url}]{.fm-hyperlink}. In case
you are using Netlify DNS, the DNS settings can be updated via Site
Settings \> Domain Management \> Options \> Go to DNS Panel and then
clicking the Add New Record button.

[]{#CH12.htm#pgfId-1029566 .calibre9}After verifying a sender, you will
need to create an API key in SendGrid to send emails. The API key should
be saved to environment variables in Heroku and Netlify as
[SENDGRID_API_KEY]{.fm-code-in-text} (figure 12.13).

::: fm-sidebar-block
[]{#CH12.htm#pgfId-1086584 .calibre9}Public clouds provide a single
place for all APIs

[]{#CH12.htm#pgfId-1086585}If your workflow involves many third parties
to handle different parts of your infrastructure, a public cloud may be
a better place to access third-party dependencies. The big cloud
providers have equivalents to most services under one billing and
management system. For example, AWS Amplify is a Netlify hosting
equivalent with AWS Lambda for functions. We can use Amazon Pay for
payments and Amazon Simple Email Service for Email.

\

[]{#CH12.htm#pgfId-1086586}One significant disadvantage of a public
cloud is the added complexity of services due to interoperability
support and the management of services that we might not even be using.
Another disadvantage is the service quality itself. Although some
services like AWS Lambda receive a lot of love from Amazon, other
services like a simple email service might not be as friendly and
up-to-date as third parties, especially for less technical audiences.
[]{#CH12.htm#marker-1086609}[]{#CH12.htm#marker-1086610}[]{#CH12.htm#marker-1086611}[]{#CH12.htm#marker-1086612}[]{#CH12.htm#marker-1086613}
:::

![CH12_F13_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH12_F13_Jain.png){.calibre1}\

[]{#CH12.htm#pgfId-1086624}Figure 12.13 API keys are needed to send
emails from SendGrid. We can create API keys in the Settings \> API Keys
section of SendGrid.

### []{#CH12.htm#pgfId-1029629}12.4.4 Sending emails {#CH12.htm#sigil_toc_id_270 .fm-head1}

[]{#CH12.htm#pgfId-1029668 .calibre9}[]{#CH12.htm#marker-1029640
.calibre9}[]{#CH12.htm#marker-1029642
.calibre9}[]{#CH12.htm#marker-1029644
.calibre9}[]{#CH12.htm#marker-1029646
.calibre9}[]{#CH12.htm#marker-1029648 .calibre9}After a successful
purchase, the objective of email is to provide access to the digital
assets that the user has purchased. Before providing access, however,
let's use the SendGrid API to verify that we can send a purchase
confirmation email to the end user from our webhook. To access the
SendGrid API, we need to add that dependency to package.hugo.json and
run [npm mod hugo pack]{.fm-code-in-text} and [npm
install]{.fm-code-in-text}. The following listing sets up the
dependency.

[]{#CH12.htm#pgfId-1029728}Listing 12.25 Adding a dependency for
SendGrid (package.hugo.json)

``` programlisting
{ 
  "dependencies": { 
    "@sendgrid/mail": "7.4.6", 
  ... 
} 
```

[]{#CH12.htm#pgfId-1029782 .calibre9}Now we can use the SendGrid mail
API to send an email to the end user. This API requires all the
parameters to create a valid email including the from, to, and subject
lines and, of course, some text. We can also supply the email message in
HTML format if we so desire. The following listing sets this up for us.
[]{#CH12.htm#marker-1029784 .calibre9}[]{#CH12.htm#marker-1029787
.calibre9}[]{#CH12.htm#marker-1029789
.calibre9}[]{#CH12.htm#marker-1029791
.calibre9}[]{#CH12.htm#marker-1029793 .calibre9}

[]{#CH12.htm#pgfId-1029850}Listing 12.26 Sending an email via SendGrid
(api/webhook.js)

``` programlisting
... 
const email = session.customer.email; 
  
sgMail.setApiKey(process.env.SENDGRID_API_KEY); 
  
const msg = { 
  to: session.customer.email, 
  from: 'noreply@hugoinaction.com', 
  subject: 'Your purchase with Acme Corporation (Hugo In Action)', 
  text: `Dear ${name || "User"}, 
  
Thank you for purchasing digital shapes from the Acme Corporation.`, 
}; 
  
await sgMail.send(msg); 
... 
```

### []{#CH12.htm#pgfId-1030162}12.4.5 Preparing content to send to the users {#CH12.htm#sigil_toc_id_271 .fm-head1}

[]{#CH12.htm#pgfId-1030185 .calibre9}[]{#CH12.htm#marker-1030173
.calibre9}[]{#CH12.htm#marker-1030175
.calibre9}[]{#CH12.htm#marker-1030177
.calibre9}[]{#CH12.htm#marker-1030179
.calibre9}[]{#CH12.htm#marker-1030181 .calibre9}One way to send the
purchased assets is to provide a signed link to the assets (with a
one-time password or a multi-use password). Services like Netlify
provide password-protected pages where you can host the content on the
CDN with a password. Alternatively, you can host a password-protected
archive on the regular website and share the link and the password to it
via email. You can also encrypt the content and provide its path with a
password as a URL parameter over email and decrypt the content using
JavaScript on the client. Another option is to attach the purchased
assets to the email itself. This way, there is no hosting involved, and
in case the user has purchased multiple files, we can provide them
together rather than asking the user to download and decrypt each file
one by one.

[]{#CH12.htm#pgfId-1030190 .calibre9}In this section, we will use the
second approach for our use case because the images are small enough to
be linked to the email. This provides the added benefit of not worrying
about keeping the website online for users who would expect the links to
work in the far future.

[]{#CH12.htm#pgfId-1030254 .calibre9}The images sold through the Acme
Corporation website are present in PNG format in the chapter resources.
Because SendGrid takes photos in Base64 file format to create
attachments, it is a good idea to adhere to the Jamstack principles of
preparing the Base64 versions of the images at compile time. The
[npm]{.fm-code-in-text} command provides []{#CH12.htm#marker-1030207
.calibre9}a handy way to run a script at installation time. We can add
entries in []{#CH12.htm#marker-1030213 .calibre9}the
[scripts]{.fm-code-in-text} section for [preinstall]{.fm-code-in-text},
[install]{.fm-code-in-text}, or [postinstall]{.fm-code-in-text} to run
custom scripts with npm. The following listing adds a postinstall script
in package.hugo.json to prepare the Base64 version of all images.

[]{#CH12.htm#pgfId-1030314}Listing 12.27 Adding a postinstall script
(package.hugo.json)

``` programlisting
{ 
  ... 
  "scripts": { 
    "postinstall": "node api/postinstall.js" 
  } 
} 
```

[]{#CH12.htm#pgfId-1030368 .calibre9}Next, we run [hugo mod npm
pack]{.fm-code-in-text} to get this into package.json. Finally, we can
fill in the postinstall script, which reads each image from the
api/assets folder and creates a Base64-encoded version of it that we
will send via SendGrid as an attachment. We will then save the entire
set as a map in result.json. The following listing uses a postinstall
hook in node.js to preprocess the data.

[]{#CH12.htm#pgfId-1030434}Listing 12.28 Converting images to Base64
(api/postinstall.js)

``` programlisting
#! env node                                                ❶
  
const fs = require('fs').promises; 
const path = require('path'); 
  
(async () => {                                             ❷
  const data = {}; 
  
  const images = await fs.readdir(                         ❸
    __dirname + "/assets");                                ❸
  await Promise.all(images.map(async image => { 
  const extname = path.extname(image); 
    if (extname === '.png') { 
  const buffer = await                                     ❹
        fs.readFile(__dirname + "/assets/" + image);       ❹
      data[path.basename(image, path.extname(image))] =    ❺
        buffer.toString('base64');                         ❺
    } 
  })); 
  
  await fs.writeFile(dirname +__ "/result.json", 
      JSON.stringify(data, null, 2));                      ❻
  
  
})(); 
```

[]{#CH12.htm#pgfId-1046534}[❶]{.fm-combinumeral} Uses a hash bang to
identify the file to run directly

[]{#CH12.htm#pgfId-1046555}[❷]{.fm-combinumeral} Creates a
self-executing function to allow using await at the top level. (This
limitation is not present if using Node.js v.14.8+.)

[]{#CH12.htm#pgfId-1046579}[❸]{.fm-combinumeral} Reads through all the
files in the assets folder

[]{#CH12.htm#pgfId-1046596}[❹]{.fm-combinumeral} Reads images whose
extension is png

[]{#CH12.htm#pgfId-1046613}[❺]{.fm-combinumeral} Adds the image name
without the extension as the key and the Base64 version as the value

[]{#CH12.htm#pgfId-1046630 .calibre9}[❻]{.fm-combinumeral} Saves this to
result.json. Note the additional parameters passed to JSON.stringify
format the JSON into a more readable way.

### []{#CH12.htm#pgfId-1031405}12.4.6 Attaching files to email {#CH12.htm#sigil_toc_id_272 .fm-head1}

[]{#CH12.htm#pgfId-1031428 .calibre9}[]{#CH12.htm#marker-1031416
.calibre9}[]{#CH12.htm#marker-1031418
.calibre9}[]{#CH12.htm#marker-1031420
.calibre9}[]{#CH12.htm#marker-1031422
.calibre9}[]{#CH12.htm#marker-1031424 .calibre9}With the data available
in Base64 format, adding it to the email is relatively straightforward.
We will read the result.json file, and for each entry in the metadata,
we will attach the file corresponding to the supplied name. The
following listing shows how digital orders can be fulfilled via email
and sent as an attachment. With these changes, we will receive an email
with the purchase contents soon after checkout.

[]{#CH12.htm#pgfId-1031484}Listing 12.29 Fulfilling digital orders via
email (api/webhook.js)

``` programlisting
const result = require('./result.json'); 
... 
const msg = { 
  to: email, 
  from: 'noreply@hugoinaction.com', 
  subject: 'Your purchase with Acme Corporation (Hugo In Action)', 
  text: `Dear ${name || "User"}, 
  
Thank you for purchasing digital shapes from the Acme Corporation. 
Your purchased shapes are attached to this email.`, 
  attachments: Object.values(session.metadata).       ❶
    filter(img => result[img])                        ❷
      .map(img => ({ 
        content: result[img],                         ❸
        filename: img + '.png',                       ❹
        type: "image/png", 
        disposition: "attachment"                     ❺
      }) 
    ) 
}; 
```

[]{#CH12.htm#pgfId-1046186}[❶]{.fm-combinumeral} Reads the metadata

[]{#CH12.htm#pgfId-1046240}[❷]{.fm-combinumeral} Uses the Base64 content
of the file

[]{#CH12.htm#pgfId-1046259}[❸]{.fm-combinumeral} Removes all metadata
where we do not have an image

[]{#CH12.htm#pgfId-1046276}[❹]{.fm-combinumeral} Gives it a good
filename

[]{#CH12.htm#pgfId-1046191 .calibre9}[❺]{.fm-combinumeral} Marks it as
an attachment

[]{#CH12.htm#pgfId-1045055}[Code checkpoint]{.fm-callout-head}
[[https://chapter-12-06.hugoinaction.com](https://chapter-12-06.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH12.htm#marker-1045048}[]{#CH12.htm#marker-1045049}[]{#CH12.htm#marker-1045050}[]{#CH12.htm#marker-1045051}[]{#CH12.htm#marker-1045052}[]{#CH12.htm#marker-1045053}[]{#CH12.htm#marker-1045054}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-12-06](https://github.com/hugoinaction/hugoinaction/tree/chapter-12-06){.url}]{.fm-hyperlink}.

[]{#CH12.htm#pgfId-1032112 .calibre9}In this chapter, we used what you
learned from the entire book to build a whole e-commerce application. We
created custom product pages, product lists, shopping cart, checkout,
and email-based fulfillment of a digital purchase on the Acme
Corporation website. We saw how the various concepts of Hugo and the
Jamstack can come together in a completely different context. We also
witnessed the modularity of Hugo's approach, where we use a lot of
existing pieces (like a comment form) as-is in a different context. The
next chapter will discuss some of Hugo's more advanced features that we
can use in particular circumstances and other essential areas in the
Jamstack. []{#CH12.htm#marker-1032202
.calibre9}[]{#CH12.htm#marker-1032205
.calibre9}[]{#CH12.htm#marker-1032207
.calibre9}[]{#CH12.htm#marker-1032209
.calibre9}[]{#CH12.htm#marker-1032211
.calibre9}[]{#CH12.htm#marker-1032213
.calibre9}[]{#CH12.htm#marker-1032215
.calibre9}[]{#CH12.htm#marker-1032217 .calibre9}

## []{#CH12.htm#pgfId-1032223}Summary {#CH12.htm#sigil_toc_id_273 .fm-head-1-notoc}

-   []{#CH12.htm#pgfId-1032233 .calibre9}We can use Hugo in different
    contexts outside of a regular blog or website. This includes
    portfolios, media, or educational websites.

-   []{#CH12.htm#pgfId-1032247 .calibre9}In an e-commerce application,
    the single pages reflect the product details, and the list pages can
    become the product lists.

-   []{#CH12.htm#pgfId-1032257 .calibre9}The JavaScript layer of the
    Jamstack coupled with the browser's [localStorage]{.fm-code-in-text}
    can provide the means to customize and personalize the website.
    Using this layer, we can also store user-specific data (like a
    shopping cart) and provide user-specific pages.

-   []{#CH12.htm#pgfId-1032276 .calibre9}Third-party APIs are available
    in a developer-friendly format for complex tasks such as billing
    management or email delivery. These provide advanced functionality
    in a developer-friendly solution that can be picked up off the shelf
    and reused.

[]{#CH13.htm}

# []{#CH13.htm#pgfId-1035306}13 Wrapping it up {#CH13.htm#heading_id_2 .tochead}

[]{#CH13.htm#pgfId-1038820}This chapter covers

-   []{#CH13.htm#pgfId-1038855 .calibre9}Building special pages and
    multilingual websites
-   []{#CH13.htm#pgfId-1038856 .calibre9}Speeding up our website with
    Turbo, instant pages, and service workers
-   []{#CH13.htm#pgfId-1038857 .calibre9}Learning about CLIs,
    configurations as files, and other ways to automate the Jamstack
-   []{#CH13.htm#pgfId-1038841 .calibre9}Getting help from the Hugo
    community, showcasing your work, and contributing to Hugo

[]{#CH13.htm#pgfId-1011804 .calibre9}Hugo websites have handled many use
cases, some of which are more complicated than the examples discussed in
this book. The core features of Hugo, such as page bundles, taxonomies,
and its template lookup order, form the building blocks of any
Hugo-based website. But there is a lot more that you might want to
consider once you go one step deeper into a more complex website. There
are features within Hugo that enable advanced functionality as well as
modern web development practices that can make our websites faster and
more complete. In this chapter, we will go over some of the obscure
features of Hugo and the Jamstack, which are essential to complete and
maintain a modern website.

[]{#CH13.htm#pgfId-1011820}[Note]{.fm-callout-head} This chapter
introduces a lot of unrelated features with short examples to provide a
starting point for building further ahead.

## []{#CH13.htm#pgfId-1011826}13.1 Developing multilingual websites {#CH13.htm#sigil_toc_id_274 .fm-head}

[]{#CH13.htm#pgfId-1011865 .calibre9}[]{#CH13.htm#marker-1011837
.calibre9}[]{#CH13.htm#marker-1011839 .calibre9}As soon as you add the
need for more than one language (human language and not programming
language) into a web development system, things get a lot more complex.
Hugo embraces *multilingual* websites and handles the complexity right
from the start with proper forethought. To enable new languages, we need
to update the global website configuration to be language-specific in
[]{#CH13.htm#marker-1011854 .calibre9}the [languages]{.fm-code-in-text}
section. We can then create a file called languages in the config folder
to provide language-specific preferences.

[]{#CH13.htm#pgfId-1011917 .calibre9}In []{#CH13.htm#marker-1011876
.calibre9}the [languages]{.fm-code-in-text} section, each key becomes a
new language. The list of values for the key acts as overrides to the
default values provided in the configuration. We can override all
[params]{.fm-code-in-text} and top-level textual properties such as
title. Even the [baseURL]{.fm-code-in-text} can have different domains
such as example.com for English and example.com.fr for French. The
default language is English, though we can override it by setting
[defaultContentLanguage]{.fm-code-in-text} in the configuration.

[]{#CH13.htm#pgfId-1011972}[Note]{.fm-callout-head} For Hugo, the
language name is just a string. This string can be anything as far as
Hugo is concerned. For example, we can define a language called
[elvish]{.fm-code-in-text1} if we so desire or a language called
[abcd]{.fm-code-in-text1} and Hugo does not care. It creates an endpoint
at [/elvish]{.fm-code-in-text1} or [/abcd]{.fm-code-in-text1} as
specified and assigns markup files as .elvish.md or .abcd.md to those
specific languages.

### []{#CH13.htm#pgfId-1011981}13.1.1 Overrides and defaults for content in a multilingual website {#CH13.htm#sigil_toc_id_275 .fm-head1}

[]{#CH13.htm#pgfId-1012004 .calibre9}[]{#CH13.htm#marker-1011992
.calibre9}[]{#CH13.htm#marker-1011994
.calibre9}[]{#CH13.htm#marker-1011996
.calibre9}[]{#CH13.htm#marker-1011998
.calibre9}[]{#CH13.htm#marker-1012000 .calibre9}One important thing to
note is to understand how overrides and defaults for the website's
content work in a multilingual Hugo website. It is essential to know
that textual content is the only difference between a localized website
and the default language. Some images or settings may differ, but in
most cases, the configuration and assets are the same across multiple
languages in a website. This section provides a few things to remember
when building a multilingual website.

[]{#CH13.htm#pgfId-1012022 .calibre9}First, all languages share all the
configurations present on the website apart from
[]{#CH13.htm#marker-1012011 .calibre9}the [languages]{.fm-code-in-text}
section. Because a configuration is simply a setting, by default Hugo
shares them across all languages. Hugo reuses the themes,
configurations, and variables, so we can get up and running with a new
language in seconds. We can also use the configuration to provide
localized data. To do this, we need to override the defaults in the
language-specific section
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/01](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/01){.url}]{.fm-hyperlink}).

[]{#CH13.htm#pgfId-1012050 .calibre9}The following listing provides the
configuration to enable the French language. We customize the copyright
text for French, and update the menu within the French version of the
website.

[]{#CH13.htm#pgfId-1012107}Listing 13.1 Configuration to enable French
(config/\_default/languages.yaml)

``` programlisting
en:
  params:
fr:
  params:
      copyright: "droits d'auteur &copy; 2022 Acme Corporation.
                 Tous les droits sont réservés."
  menu:
    main:
      - identifier: about
        name: À propos
        url: /about
        weight: 100
        post: Nos origines fascinantes
      - identifier: contact
        name: contact
        url: /contact
        weight: 200 
        post: A votre service
    footer: 
      - name: Politique de confidentialité
        weight: 300 
        url: /privacy
      - name: Conditions d'utilisation
        weight: 200 
        url: /terms
```

[]{#CH13.htm#pgfId-1012455}[Note]{.fm-callout-head} The endpoint for the
default language is [/]{.fm-code-in-text1} instead of
[/en]{.fm-code-in-text1}, but we can override it using
[defaultContentLanguageInSubdir]{.fm-code-in-text1} in the
configuration.

[]{#CH13.htm#pgfId-1012464 .calibre9}Second, all markup-based content
that is not assigned a language belongs to the default language. The
content documents and bundles are language-specific. If we were to
render the website right now, there would be no pages in the French
section due to a lack of French content. This default language logic is
present in Hugo because the markup content of the web pages needs
localization. The individual markup document decides both the existence
of the web page and its content.

[]{#CH13.htm#pgfId-1012470 .calibre9}To create language-specific web
pages for the French language, we need to create the files \_index.fr.md
(branch bundle), index.fr.md (in a leaf bundle), or about.fr.md (as a
top-level Markdown document), where "fr" is the name specified in the
language's configuration. If a language-specific page is not present,
Hugo does not render the corresponding web page in the language-specific
website.

[]{#CH13.htm#pgfId-1012476 .calibre9}Language-specific versions of the
various pages in our website are present in the chapter resources. (For
French readers, we use an online translation website that may not
appropriately translate contents.) Note that localized content is
entirely independent of the content in the default language. We can
remove sections (like news), remove or add pages (like blog, process-3,
or shape), change parts of the content or front matter, and or anything
else we have linked in the content folder
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/02](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/02){.url}]{.fm-hyperlink}).
Figure 13.1 shows the French version of the home page.

![CH13_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH13_F01_Jain.png){.calibre1}\

[]{#CH13.htm#pgfId-1050708}Figure 13.1 French version of the home page
Acme Corporation website. We can create multilingual websites in Hugo by
specifying a languages configuration and providing localized content
files like [\_index.fr.md]{.fm-code-in-figurecaption}.

[]{#CH13.htm#pgfId-1012519 .calibre9}Third, assets like images present
in the page bundles are automatically available for translated content
and shared across all languages. Images are rarely localized. Add to
that, they are not independent entities. Therefore, by default, they are
shared across all languages. For example, the image for draw.jpg is
available with the French translation for the About page.

[]{#CH13.htm#pgfId-1045827}[Code checkpoint]{.fm-callout-head}
[[https://chapter-13-01.hugoinaction.com](https://chapter-13-01.hugoinaction.com/fr/){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-01](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-01){.url}]{.fm-hyperlink}.

[]{#CH13.htm#pgfId-1012539 .calibre9}If we want, we could create
draw.fr.jpg
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/03](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/03){.url}]{.fm-hyperlink})
that would override draw.jpg. If draw.fr.jpg is present, the French page
should link to that by convention and not to draw.jpg. The index.fr.md
file needs to change if we add draw.fr.jpg. We should also do the same
with []{#CH13.htm#marker-1042082 .calibre9}the
[productInfo]{.fm-code-in-text} shortcode.

[]{#CH13.htm#pgfId-1045901}[Code checkpoint]{.fm-callout-head}
[[https://chapter-13-02.hugoinaction.com](https://chapter-13-02.hugoinaction.com/fr/about){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-02](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-02){.url}]{.fm-hyperlink}.

[]{#CH13.htm#pgfId-1012777 .calibre9}We can also create draw.en.jpg for
English-specific overrides. We can also decide the priority for
overrides if an asset is not present. In the
[languages]{.fm-code-in-text} section of the configuration, we can pass
a property []{#CH13.htm#marker-1012766 .calibre9}called
[weight]{.fm-code-in-text}. For the fallback, Hugo sorts the languages
by weight. Hugo selects the language with the highest weight where the
asset is present and uses it for all languages without it.

[]{#CH13.htm#pgfId-1012786 .calibre9}Finally, it is easier to manage
separate content directories for separate content. Although creating
localized files in the content directory is functional, this can become
an organization and management headache. There is no easy way to know
which pages have a French variant. There might be different teams
working across languages, and bundling them all together is likely to be
confusing.

[]{#CH13.htm#pgfId-1012824 .calibre9}The following listing sets
[contentDir]{.fm-code-in-text} to [contentFr]{.fm-code-in-text} in
[]{#CH13.htm#marker-1012813 .calibre9}the [fr]{.fm-code-in-text}
configuration. Then we can move the French-specific files to a separate
folder called contentFr. If we want, we can rename draw.fr.jpg to
draw.jpg in the contentFr/about folder.

[]{#CH13.htm#pgfId-1012884}Listing 13.2 Moving the French content
(config/\_default/languages.yaml)

``` programlisting
...
fr:
  contentDir: contentFr
  ...
```

[]{#CH13.htm#pgfId-1045961}[Code checkpoint]{.fm-callout-head}
[[https://chapter-13-03.hugoinaction.com](https://chapter-13-03.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH13.htm#marker-1045982}[]{#CH13.htm#marker-1045983}[]{#CH13.htm#marker-1045984}[]{#CH13.htm#marker-1045985}[]{#CH13.htm#marker-1045986}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-03](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-03){.url}]{.fm-hyperlink}.

### []{#CH13.htm#pgfId-1012938}[]{#CH13.htm#marker-1044759}[]{#CH13.htm#marker-1044758}[]{#CH13.htm#marker-1044757}[]{#CH13.htm#marker-1044756}13.1.2 Accessing strings within the theme {#CH13.htm#sigil_toc_id_276 .fm-head1}

[]{#CH13.htm#pgfId-1013060 .calibre9}[]{#CH13.htm#marker-1013050
.calibre9}[]{#CH13.htm#marker-1013052
.calibre9}[]{#CH13.htm#marker-1013054
.calibre9}[]{#CH13.htm#marker-1013056 .calibre9}Not all strings come
from the content in the content folder. We have hardcoded text (for
example, "search") inside the search box and the comment form in the
theme. One way to work around this is to use the front matter and site
configuration to provide the strings for these fields. The significant
disadvantage of this approach is the inability to provide reasonable
defaults and the clunky way the language-specific and default values
need to be set up in the configuration. Localized strings are different
from settings, and conflating the two into the configuration options is
a recipe for confusion. Hugo provides an easy means of externalizing the
strings into separate files for these labels, which can be kept in the
individual files and then requested via a function in code.

[]{#CH13.htm#pgfId-1013065 .calibre9}We can create a top-level folder
called i18n (short for internationalization) inside our website or in
the theme. Inside this folder, we can add the files en.yaml for English
strings and fr.yaml for French translations. (Note that JSON and TOML
are also supported.) The following listing adds IDs and translations for
various string labels used on the French website to these files
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/04](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/04){.url}]{.fm-hyperlink}).

[]{#CH13.htm#pgfId-1013140}Listing 13.3 Adding a translation string
(AcmeTheme/i18n/fr.yaml)

``` programlisting
- id: search
  translation: chercher
...
```

[]{#CH13.htm#pgfId-1013230 .calibre9}Then we can access these values
using a function called [i18n]{.fm-code-in-text}. For example, [{{i18n
\"search\"}}]{.fm-code-in-text} gives us the translation for the word
"search" from the i18n files. Hugo also provides a language fallback to
the default language ([hugo \--i18n-warnings]{.fm-code-in-text}) and
placeholder support via
[enableMissingTranslationPlaceholders]{.fm-code-in-text} in the
configuration to determine which words we have not translated. Playing
with this configuration option is an exercise for the reader.

[]{#CH13.htm#pgfId-1013239 .calibre9}Some strings may be present in the
JavaScript file, where we either need to pass all languages to
JavaScript or move them over to HTML. Additionally, it is good to bundle
some i18n strings for all keys in the theme for portability. The user
can override these by creating the i18n folder at the website level and
using the same key with the overridden value.

[]{#CH13.htm#pgfId-1013307}[Note]{.fm-callout-head} We can also use
Hugo's mustaches in the translated string inside fr.yaml. For example,
[Welcome to {{.Title}}]{.fm-code-in-text1} is a supported translation.
We need to pass a variable with []{#CH13.htm#marker-1013266}a
[Title]{.fm-code-in-text1} property like [{{i18n \"search\"
\$.Page}}]{.fm-code-in-text1} ([\$.Page]{.fm-code-in-text1} has a
[\$.Page.Title]{.fm-code-in-text1}) for this to work.

[]{#CH13.htm#pgfId-1013385 .calibre9}Hugo also supports having different
strings for singular and plural forms of content. If the parameter
passed to the i18n function is a map or a variable with a
[]{#CH13.htm#marker-1013318 .calibre9}property called
[Count]{.fm-code-in-text}, we can use [one]{.fm-code-in-text} instead of
[translation]{.fm-code-in-text} as the key to get a singular version of
the string, and [other]{.fm-code-in-text} would give us the plural
version. Most Hugo variables like [Pages]{.fm-code-in-text} already
[]{#CH13.htm#marker-1013374 .calibre9}have the [Count]{.fm-code-in-text}
property that []{#CH13.htm#marker-1013390 .calibre9}we can use for this
purpose. The following listing provides an example of singular and
plural content.

[]{#CH13.htm#pgfId-1013451}Listing 13.4 Localized content (not to be
used in Acme Corporation website)

``` programlisting
- id: pageKey
  one: page
  other: pages
```

::: fm-sidebar-block
[]{#CH13.htm#pgfId-1050747 .calibre9}Exercise 13.1

[]{#CH13.htm#pgfId-1050748}Which of the following is, by default, not
considered language-specific in Hugo? (Select all that apply.)

1.  []{#CH13.htm#pgfId-1050749}Markup

2.  []{#CH13.htm#pgfId-1050750}Images

3.  []{#CH13.htm#pgfId-1050751}JavaScript

4.  []{#CH13.htm#pgfId-1050752}Front matter

5.  []{#CH13.htm#pgfId-1050753}Templates

6.  []{#CH13.htm#pgfId-1050758}Config[]{#CH13.htm#marker-1050754}[]{#CH13.htm#marker-1050755}[]{#CH13.htm#marker-1050756}[]{#CH13.htm#marker-1050757}
:::

### []{#CH13.htm#pgfId-1013572}13.1.3 Linking to translated pages {#CH13.htm#sigil_toc_id_277 .fm-head1}

[]{#CH13.htm#pgfId-1013645 .calibre9}[]{#CH13.htm#marker-1013583
.calibre9}[]{#CH13.htm#marker-1013585
.calibre9}[]{#CH13.htm#marker-1013587
.calibre9}[]{#CH13.htm#marker-1013589 .calibre9}Most of the Hugo
functions that []{#CH13.htm#marker-1013594 .calibre9}we use, like
[Permalink]{.fm-code-in-text}, automatically localize. We should stop
using [absURL]{.fm-code-in-text} or [relURL]{.fm-code-in-text} but
instead use [absLangURL]{.fm-code-in-text} or
[relLangURL]{.fm-code-in-text} to get the localized URLs of the web
pages. No other APIs require this language change as of Hugo v0.91.2. We
should also avoid direct URL linking and use variables instead.

[]{#CH13.htm#pgfId-1013667 .calibre9}A variable
[]{#CH13.htm#marker-1013656 .calibre9}called
[Translations]{.fm-code-in-text} is available on our web page. We can
use this variable to figure out the translations available for the page.
This variable has a list of languages that we can use to link to
language-specific pages if needed. One place to add the list of
translations available for a web page is in the website footer. The
following listing adds this link to the translated versions at the
bottom of the page in AcmeTheme/ layouts/\_default/baseof.html.

[]{#CH13.htm#pgfId-1013727}Listing 13.5 Adding a link to the translated
versions

``` programlisting
{{ if .IsTranslated }}
  <ul>
       <li>{{i18n "translations"}}:</li>
       {{ range .Translations }}
        <li>
           <a href="{{ .Permalink }}">{{ .Lang }}</a>
       </li>
       {{ end }}
  </ul>
{{end}}
<div>{{.Param "copyright" | markdownify}}</div>
```

[]{#CH13.htm#pgfId-1013924}[Note]{.fm-callout-head} The Universal theme
used in this book supports multilingual websites.

[]{#CH13.htm#pgfId-1046048}[Code checkpoint]{.fm-callout-head}
[[https://chapter-13-04.hugoinaction.com](https://chapter-13-04.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH13.htm#marker-1046090}[]{#CH13.htm#marker-1046091}[]{#CH13.htm#marker-1046092}[]{#CH13.htm#marker-1046093}[]{#CH13.htm#marker-1046094}[]{#CH13.htm#marker-1046095}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-04](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-04){.url}]{.fm-hyperlink}.

## []{#CH13.htm#pgfId-1013930}13.2 Special pages {#CH13.htm#sigil_toc_id_278 .fm-head}

[]{#CH13.htm#pgfId-1014043 .calibre9}[]{#CH13.htm#marker-1014044
.calibre9}Apart from regular HTML content, there are non-HTML pages that
a website needs to serve to be correctly indexed by search engines and
social bots and to be successful on the modern web. The following
sections cover two such pages: sitemaps and the file, robots.txt.

### []{#CH13.htm#pgfId-1014052}[]{#CH13.htm#marker-1041764}[]{#CH13.htm#marker-1041763}13.2.1 Sitemaps {#CH13.htm#sigil_toc_id_279 .fm-head1}

[]{#CH13.htm#pgfId-1014075 .calibre9}[]{#CH13.htm#marker-1042123
.calibre9}[]{#CH13.htm#marker-1042124 .calibre9}Websites need a
*sitemap* in XML format to submit to various search engines and to bots
to access and index all the pages on the website. In Hugo, the sitemap
is a top-level template (a new Hugo Kind parallel to page and taxonomy).
Sitemaps have their own set of variables that we can use to customize
them in the Hugo configuration or use within our template. Hugo comes
bundled with a sitemap, and unless we are doing something special, there
is no need to meddle with that sitemap. We can place a sitemap template
in layouts/ sitemap.xml, in layouts/\_default/sitemap.xml in the theme,
or directly on the website.

[]{#CH13.htm#pgfId-1014100 .calibre9}Suppose we want to disable the
[store]{.fm-code-in-text} and [survey]{.fm-code-in-text} sections from
[]{#CH13.htm#marker-1014105 .calibre9}being submitted to search engines.
For that, we can create a sitemap template using the code in the
following listing
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/5](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/05){.url}]{.fm-hyperlink}).
We should add this code to AcmeTheme/layouts/sitemap.xml.

[]{#CH13.htm#pgfId-1014185}Listing 13.6 Excluding sections from the
sitemap

``` programlisting
{{ printf "<?xml 
version=\"1.0\"" "encoding=\"utf-8\" standalone=\"yes\" ?>"
  | safeHTML }}
 
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
  xmlns:xhtml="http://www.w3.org/1999/xhtml">
  {{ range (where .Data.Pages "Section"
            "not in" (slice "store" "survey") )}}
  <url>
     <loc>{{ .Permalink }}</loc>
     {{ if not .Lastmod.IsZero }}
      <lastmod>{{ safeHTML
         ( .Lastmod.Format "2006-01-02T15:04:05-07:00" ) }}
      </lastmod>
    {{ end }}
    {{ with .Sitemap.ChangeFreq }}
    <changefreq>{{ . }}</changefreq>
    {{ end }}
    {{ if ge .Sitemap.Priority 0.0 }}
    <priority>{{ .Sitemap.Priority }}</priority>
    {{ end }}
    {{ if .IsTranslated }}
      {{ range .Translations }}
        <xhtml:link           rel="alternate"
          hreflang="{{ .Lang }}"
          href="{{ .Permalink }}"
          />
      {{ end }}
      <xhtml:link
         rel="alternate"
         hreflang="{{ .Lang }}"
         href="{{ .Permalink }}"
         />
      {{ end }}
  </url>
  {{ end }}
</urlset>
```

[]{#CH13.htm#pgfId-1014715 .calibre9}For multilingual websites, Hugo has
the sitemapindex.xml template for the top-level sitemap.xml. This links
to the other sitemaps on the website.

::: fm-sidebar-block
[]{#CH13.htm#pgfId-1050775 .calibre9}Automatically submitting sitemaps

[]{#CH13.htm#pgfId-1050776}Using the Jamstack, we can automatically
submit sitemaps on each build to the search engines if we desire. We can
write a webhook from Netlify or GitHub in response to a build event to
reach the search engines directly. For example, to submit to Google, we
can call the API https://www.google.com/ping?sitemap=https://
example.com/sitemap.xml.

\

[]{#CH13.htm#pgfId-1050777}Netlify provides webhooks in Settings \>
Build & Deploy \> Deploy Notifications and then click Add Notification
\> Outgoing Webhook to put the URL in the Deploy succeeded event.
Alternatively, we can add a new step in the gh-params.yml with a custom
script to call this URL for GitHub pages. Because this step happens
after the website goes live, it acts as a webhook.
[]{#CH13.htm#marker-1050778}[]{#CH13.htm#marker-1050779}
:::

### []{#CH13.htm#pgfId-1014749}13.2.2 robots.txt {#CH13.htm#sigil_toc_id_280 .fm-head1}

[]{#CH13.htm#pgfId-1014772 .calibre9}[]{#CH13.htm#marker-1014760
.calibre9}[]{#CH13.htm#marker-1014762 .calibre9}Like sitemaps, we have
*robots.txt*, a file that tells bots what pages they are allowed and
disallowed to index. Although bots can ignore or misuse this request,
most do honor it. The robots.txt file is also a template that can access
all page variables.

[]{#CH13.htm#pgfId-1014781 .calibre9}To use robots.txt as a template, we
need to enable it on the website configuration
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/06](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/06){.url}]{.fm-hyperlink})
as the following listing shows.

[]{#CH13.htm#pgfId-1014856}Listing 13.7 Enabling robots.txt
(config/\_default/config.yaml)

``` programlisting
enableRobotsTXT: true
```

[]{#CH13.htm#pgfId-1014905 .calibre9}There is rarely a use case that
needs to list all disallowed pages because we can directly disallow
sections. In case we wanted to, though, we could write the template in
the following listing, which disallows robots from accessing the pages
in the store and survey sections. In the listing, we could also use
[Disallow: /store/]{.fm-code-in-text} to disallow everything, which does
not list the disallowed URLs in the store for malicious actors to find.

[]{#CH13.htm#pgfId-1014971}Listing 13.8 Disallowing access to robots
(AcmeTheme/layouts/robots.txt)

``` programlisting
User-agent: *
{{ range (where .Data.Pages "Section" "in"
  (slice "store" "survey") )}}               ❶
Disallow: {{.RelPermalink}}                  ❷
{{end}}
```

[]{#CH13.htm#pgfId-1049835}[❶]{.fm-combinumeral} Loops through all the
pages in the store and survey sections

[]{#CH13.htm#pgfId-1049856}[❷]{.fm-combinumeral} Disallows the main
URLs. We should ideally disallow all aliases as well.

[]{#CH13.htm#pgfId-1015141}[Note]{.fm-callout-head} The sample code with
this website has an additional file, static/ robots.txt, that disables
all search engine indexing. This file overrides the one generated by
this page.

[]{#CH13.htm#pgfId-1046136}[Code checkpoint]{.fm-callout-head}
[[https://chapter-13-05.hugoinaction.com](https://chapter-13-05.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH13.htm#marker-1046179}[]{#CH13.htm#marker-1046180}[]{#CH13.htm#marker-1046181}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-05](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-05){.url}]{.fm-hyperlink}.

![CH13_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH13_F02_Jain.png){.calibre1}\

[]{#CH13.htm#pgfId-1050798}Figure 13.2 Promise? Gabby shares the news,
now management needs to honor its promise.

## []{#CH13.htm#pgfId-1015254}13.3 Different versions using different output formats {#CH13.htm#sigil_toc_id_281 .fm-head}

[]{#CH13.htm#pgfId-1015309 .calibre9}[]{#CH13.htm#marker-1015279
.calibre9}[]{#CH13.htm#marker-1015281 .calibre9}We briefly touched on
custom output formats in chapter 9 when we built our JSON pseudo API. In
Hugo, we can use as many output formats as we desire and have different
templates to render the same content in different ways. This way, we can
build a mobile version of the website with the [/m]{.fm-code-in-text}
endpoint, which can have a different layout but render the same content
for mobile, or create a version []{#CH13.htm#marker-1015296
.calibre9}[]{#CH13.htm#marker-1015299 .calibre9}for Accelerated Mobile
Pages (AMP) with [/amp]{.fm-code-in-text}. We can keep the same endpoint
and have a different file extension much like how we did with JSON.

[]{#CH13.htm#pgfId-1015328}[Note]{.fm-callout-head} We can have our
hierarchy of content types and layout templates for each output format,
including the baseof template that supports creating placeholders.

### []{#CH13.htm#pgfId-1015334}13.3.1 Built-in RSS formats {#CH13.htm#sigil_toc_id_282 .fm-head1}

[]{#CH13.htm#pgfId-1015361 .calibre9}[]{#CH13.htm#marker-1015345
.calibre9}[]{#CH13.htm#marker-1015347
.calibre9}[]{#CH13.htm#marker-1015349
.calibre9}[]{#CH13.htm#marker-1015351 .calibre9}The most popular custom
output format is the *RSS format*, which provides the website content in
an XML feed that various RSS readers can parse. RSS is a popular
XML-based format for website content that's readable by multiple
clients. Hugo, by default, enables the RSS output format for most pages
and bundles a template to convert the page data to RSS format. If you go
to http:[//]{.fm-hyperlink}localhost:1313/blog/index.xml, you should be
able to see the RSS output for the blog's index page.

[]{#CH13.htm#pgfId-1015371 .calibre9}The RSS format has more options
than what is provided by default with Hugo. If a custom template is
required, you can create list.rss.xml or single.rss.xml for the list and
single pages, respectively. We can disable the RSS rendering by
overriding the output formats in the website settings or in an
individual page's front matter.

::: fm-sidebar-block
[]{#CH13.htm#pgfId-1050830 .calibre9}Multilingual website vs. custom
output formats

[]{#CH13.htm#pgfId-1050831}The two features to generate multiple
versions of the same page, multilingual pages and custom output formats,
seem to be similar but are distinct and different. In multilingual
pages, the layout and the theme across pages are the same, but the
content changes, whereas in custom output formats, the content remains
the same, but the layout and the theme are changed.
:::

[]{#CH13.htm#pgfId-1015432 .calibre9}Each page variable has a property
[]{#CH13.htm#marker-1015395 .calibre9}called
[OutputFormats]{.fm-code-in-text}, which lists all output formats for
the page including the current format, and
[AlternativeOutputFormats]{.fm-code-in-text}, which excludes the current
format. We can also search for alternate output formats for a page using
[]{#CH13.htm#marker-1015421 .calibre9}the
[OutputFormats.Get]{.fm-code-in-text} function. The following listing
includes a link to the RSS version of a web page in its content.
[]{#CH13.htm#marker-1015437 .calibre9}[]{#CH13.htm#marker-1015440
.calibre9}[]{#CH13.htm#marker-1015442
.calibre9}[]{#CH13.htm#marker-1015444 .calibre9}

[]{#CH13.htm#pgfId-1015501}Listing 13.9 Adding RSS feeds
(AcmeTheme/layouts/\_default/baseof.html)

``` programlisting
{{ with .OutputFormats.Get "RSS" }}
  <li>
     <a href="{{ .RelPermalink }}" aria-label="RSS" target="_blank">
       <i class="icon-rss"></i>
     </a>
   </li>
{{end}}
{{with site.Author.facebook}}
```

### []{#CH13.htm#pgfId-1015676}13.3.2 Creating our own output format {#CH13.htm#sigil_toc_id_283 .fm-head1}

[]{#CH13.htm#pgfId-1015705 .calibre9}[]{#CH13.htm#marker-1015687
.calibre9}[]{#CH13.htm#marker-1015689 .calibre9}Using a new output
format, we will offer a simplified version of our website and blog (with
just text from Markdown and no styling) that's more akin to the reader
view in the browser. For that, we will define a custom output format
using a configuration setting []{#CH13.htm#marker-1015694
.calibre9}called [outputFormats]{.fm-code-in-text} (or by creating
outputFormats.yaml in the config/\_default folder). This defines new
format names along with the media type, and the URL path where Hugo will
host the content.

![CH13_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/CH13_F03_Jain.png){.calibre1}\

[]{#CH13.htm#pgfId-1050852}Figure 13.3 We can create different versions
of a website in Hugo with custom output formats, including the plain
version shown here. We have used minimal HTML styling to present the
content in a straightforward layout.

[]{#CH13.htm#pgfId-1015727 .calibre9}Let's create an output
[]{#CH13.htm#marker-1015716 .calibre9}format called
[Plain]{.fm-code-in-text} that will host the website's plain version
(figure 13.3). The plain version of the Acme Corporation website is like
browser reader mode with minimal styling and mostly text content. The
template files for this version are present in the chapter resources
([[https://github.com/hugoinaction/
hugoinaction/tree/chapter-13-resources/07](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/07){.url}]{.fm-hyperlink}),
and listing 13.10 provides the configuration. Once defined, an output
format is available to be included in the list of outputs in the front
matter or in the global configuration for all pages.

[]{#CH13.htm#pgfId-1015830}Listing 13.10 Adding a
[Plain]{.fm-code-in-listingcaption} output format
(config/\_default/outputFormats.yaml)

``` programlisting
Plain:   
  mediaType: text/html
  isHTML: true   
  name: plain
  path: plain
```

::: fm-sidebar-block
[]{#CH13.htm#pgfId-1050886 .calibre9}Exercise 13.2

[]{#CH13.htm#pgfId-1050887}Suppose you want to make a set of websites
for a conglomerate of companies, each with its own logo. You want to
have a set of pages for each company that are different but conform to
the same theme, each with their own home page, blog section, news
section, and so on. You need to host all of these versions within the
same website under different URLs (e.g., conglomerate.com/company1,
conglomerate.com/company2, conglomerate.com/company3, etc.). What
approach would not be able to solve this use case?

1.  []{#CH13.htm#pgfId-1050888}Creating a new output format for a
    subwebsite.

2.  []{#CH13.htm#pgfId-1050889}Creating a section for each company with
    different layouts for each page type and applying the cascade
    option.

3.  []{#CH13.htm#pgfId-1050890}Creating separate websites for each
    company with a shared theme and a different base URL.

4.  []{#CH13.htm#pgfId-1050891}Creating a new language for each company
    and supplying content in separate folders.
:::

[]{#CH13.htm#pgfId-1016011 .calibre9}We can add the templates for the
plain output format. The plain format does not need to go into the
AcmeTheme template as we will add this to the simple version of the
website. (These templates are available in the chapter resources.) We
will also update the default outputs to enable plain formats everywhere
as the following listing shows.

[]{#CH13.htm#pgfId-1016068}Listing 13.11 Adding default output formats
(config/\_default/outputs.yaml)

``` programlisting
home: [HTML, PLAIN, JSON]
page: [HTML, PLAIN]
section: [HTML, RSS, PLAIN]
```

[]{#CH13.htm#pgfId-1016130 .calibre9}We have not added the JSON output
format to the global section configuration because we do not have JSON
templates for all sections. Instead, in the front matter for
content/store/\_index.md, the following listing adds an entry for JSON
in the output formats for the store section. We also need to remove the
[outputs]{.fm-code-in-text} front matter entry from \_index.md and
contentFr/\_index.md.

[]{#CH13.htm#pgfId-1016196}Listing 13.12 Adding JSON output format
(content/store/\_index.md)

``` programlisting
---
outputs: [html, json, rss, plain]
---
```

[]{#CH13.htm#pgfId-1016240 .calibre9}We can also link to the
[Plain]{.fm-code-in-text} format in []{#CH13.htm#marker-1016251
.calibre9}the footer of the website inside the regular website pages.
The following listing shows this syntax in HTML mode.

[]{#CH13.htm#pgfId-1016312}Listing 13.13 Links in HTML mode
(AcmeTheme/layouts/\_default/baseof.html)

``` programlisting
{{ with .OutputFormats.Get "Plain" }}
  <li>
     <a href="{{ .RelPermalink }}"
       aria-label="Reader Mode" target="_blank">
       <i class="icon-reader"></i>
     </a>
   </li>
{{end}}
{{ with .OutputFormats.Get "RSS" }}
```

[]{#CH13.htm#pgfId-1046337}[Code checkpoint]{.fm-callout-head}
[[https://chapter-13-06.hugoinaction.com](https://chapter-13-06.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH13.htm#marker-1046381}[]{#CH13.htm#marker-1046382}[]{#CH13.htm#marker-1046383}[]{#CH13.htm#marker-1046384}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-06](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-06){.url}]{.fm-hyperlink}.

## []{#CH13.htm#pgfId-1016477}13.4 Service workers in progressive web apps {#CH13.htm#sigil_toc_id_284 .fm-head}

[]{#CH13.htm#pgfId-1016593 .calibre9}[]{#CH13.htm#marker-1016587
.calibre9}[]{#CH13.htm#marker-1016589 .calibre9}The default Hugo website
is fast. HTML with minimal JavaScript and CSS is hard to beat when it
comes to performance. With the ever-increasing need to make websites
faster, both browser vendors and web developers have devised clever
techniques and features that can help to increase the perceived
performance of the website. Whereas many of these are transparent to
developers (like HTTP v2.0/v3.0 or new image formats automatically
handled by many CDNs), some need additional work.

[]{#CH13.htm#pgfId-1016612 .calibre9}*Progressive web apps* (PWAs) are
websites that can act like regular applications when installed. They can
have icons in the operating system and work indistinguishably from a
native application. These websites use a service worker to handle
intermittent networks and offline behaviors. *Service workers* are
special scripts that act as a layer between the website and the internet
and control the network access. These scripts can prefetch and cache
certain assets and use them if network access is not present.

[]{#CH13.htm#pgfId-1016621 .calibre9}Although service workers and PWAs
do not target the regular content-based websites that Hugo builds, they
have improved the perceived performance of the website with a more
refined control on the caching behavior in the client. A service worker
does not need any support from Hugo, and from the perspective of Hugo,
it is just another asset file that needs to be built with the website.

[]{#CH13.htm#pgfId-1016627 .calibre9}The completed script for the
service worker is available in the chapter resources
([[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/08](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-resources/08){.url}]{.fm-hyperlink}).
A typical service worker for a website has the following parts: install
functions, activation functions, and request handlers.

### []{#CH13.htm#pgfId-1016651}13.4.1 Install functions {#CH13.htm#sigil_toc_id_285 .fm-head1}

[]{#CH13.htm#pgfId-1016670 .calibre9}[]{#CH13.htm#marker-1016662
.calibre9}[]{#CH13.htm#marker-1016664
.calibre9}[]{#CH13.htm#marker-1016666 .calibre9}The browser calls an
[install]{.fm-code-in-text} function when it creates the service worker
and installs it. This script typically decides which files need to be
prefetched and cached by the web browser. The following listing shows a
sample [install]{.fm-code-in-text} function that executes during
installation. We can use this to specify the list of resources needed
for offline access.

[]{#CH13.htm#pgfId-1016726}Listing 13.14
[install]{.fm-code-in-listingcaption} function
(AcmeTheme/assets/serviceWorker.js)

``` programlisting
(function () {   
const staticCacheName = 'static';   
const version = 'v1::';                             ❶
  function updateStaticCache() {     
     const urls = [...];                            ❷
     return caches.open(version + staticCacheName)  ❸
       .then((cache) =>  cache.addAll(urls))        ❹
       .catch(e => {
         console.log("Error", e);
       });
   } 
  self.addEventListener('install', (event) =>       ❺
    event.waitUntil(updateStaticCache()));          ❺
 })();
```

[]{#CH13.htm#pgfId-1049488}[❶]{.fm-combinumeral} Updates version if you
need to refresh the cache

[]{#CH13.htm#pgfId-1049509}[❷]{.fm-combinumeral} Lists the files that
the browser should cache to launch this website in offline mode

[]{#CH13.htm#pgfId-1049526}[❸]{.fm-combinumeral} Uses explicit naming
and versioning of the cache

[]{#CH13.htm#pgfId-1049543}[❹]{.fm-combinumeral} Adds all files to the
cache

[]{#CH13.htm#pgfId-1049560}[❺]{.fm-combinumeral} The install event fires
on self.

[]{#CH13.htm#pgfId-1017313 .calibre9}The list of files that the browser
needs to cache to launch the website in offline mode should also include
all the images loaded by the theme. Typically, the home page of the
website and some other crucial pages can be cached. We should use
explicit naming and versioning of the cache as well. Mistakes here can
leave the browser cache in a broken state. For the install event in a
service worker context, [self]{.fm-code-in-text} is
[]{#CH13.htm#marker-1017302 .calibre9}the global variable we should use
instead of [window]{.fm-code-in-text}. []{#CH13.htm#marker-1017318
.calibre9}[]{#CH13.htm#marker-1017321
.calibre9}[]{#CH13.htm#marker-1017323 .calibre9}

### []{#CH13.htm#pgfId-1017329}[]{#CH13.htm#marker-1042782}[]{#CH13.htm#marker-1042781}[]{#CH13.htm#marker-1042780}13.4.2 Activation functions {#CH13.htm#sigil_toc_id_286 .fm-head1}

[]{#CH13.htm#pgfId-1017348 .calibre9}[]{#CH13.htm#marker-1044899
.calibre9}[]{#CH13.htm#marker-1044900
.calibre9}[]{#CH13.htm#marker-1044901 .calibre9}When updating a service
worker, the newer version of the service worker gets installed. The next
time we launch the website, it gets activated. This is when we can
safely remove the older version's cache. We can call the
[activate/deactivate]{.fm-code-in-text} event handler during the
transition of the service worker across versions as the following
listing shows.

[]{#CH13.htm#pgfId-1017404}Listing 13.15 Executing
[activate]{.fm-code-in-listingcaption}
(AcmeTheme/assets/serviceWorker.js)

``` programlisting
self.addEventListener('activate', function (event) {
   event.waitUntil(
     caches.keys()
       .then(function (keys) {  
         return Promise.all(keys                         ❶
           .filter((key) => key.indexOf(version) !== 0)
           .map((key) => caches.delete(key))
         );
       })
   );
});
```

[]{#CH13.htm#pgfId-1049406}[❶]{.fm-combinumeral} Removes the cache whose
name is no longer valid
[]{#CH13.htm#marker-1049411}[]{#CH13.htm#marker-1049412}[]{#CH13.htm#marker-1049413}

### []{#CH13.htm#pgfId-1017713}13.4.3 Fetching resources {#CH13.htm#sigil_toc_id_287 .fm-head1}

[]{#CH13.htm#pgfId-1017738 .calibre9}[]{#CH13.htm#marker-1017724
.calibre9}[]{#CH13.htm#marker-1017726
.calibre9}[]{#CH13.htm#marker-1017728 .calibre9}The *request handler*
sits []{#CH13.htm#marker-1017743 .calibre9}between the network and the
website. This handler is where the logic resides to decide what to do
when a request comes in for an asset. This code has three parts: the
non-GET requests, the GET requests for HTML/JavaScript/CSS, and the GET
requests for the images. The non-GET requests like POST and DELETE
perform server actions and, therefore, cannot be conducted offline and
cannot be cached. The following listing fetches the resources for
offline access.

[]{#CH13.htm#pgfId-1017804}Listing 13.16 Fetching resources
(AcmeTheme/assets/serviceWorker.js)

``` programlisting
const OFFLINE_URL = "/offline";                  ❶
function offline(status = 200) {
   return caches.match(OFFLINE_URL)
    .then(x => x.text())
    .then(y =>
       new Response(y,
         {
           status,
           headers: {
             'Content-Type': 'text/html'
          }
        }));                                      ❶
} 
self.addEventListener('fetch', function (event) {
   const request = event.request; 
   if (request.method !== 'GET') {                ❷
     return event.respondWith(fetch(request)      ❷
      .catch(() => offline(400)));                ❷
   }                                              ❷
}
```

[]{#CH13.htm#pgfId-1049156}[❶]{.fm-combinumeral} Creates a unique layout
and a particular page to show to the users when offline

[]{#CH13.htm#pgfId-1049177}[❷]{.fm-combinumeral} Always fetches non-GET
requests from the network

[]{#CH13.htm#pgfId-1018333 .calibre9}When creating a unique layout and a
particular page to show to the users when offline, make sure that it is
present in the default list of pages for the website. When asked for an
offline page, it is presented from the cache. We need to have different
handling for different types of resources. The following are the steps
to setup the service worker:

[]{#CH13.htm#pgfId-1018339 .calibre9}1. *Fetch the HTML/JavaScript/CSS
resources*. When fetching resources, the HTML content needs to come from
the server first so we can update the content on the server, and we want
to serve the latest content. The following listing fetches the
HTML/JavaScript/CSS content from the server first and then caches it. If
not available, we need to fall back to the local version. You'll add
this code to AcmeTheme/assets/serviceWorker.js.

[]{#CH13.htm#pgfId-1018414}Listing 13.17 Fetching HTML/JavaScript/CSS
content

``` programlisting
... 
self.addEventListener('fetch', function (event) { 
  ... 
  if (request.headers.get('Accept').indexOf('text/html')
     !== -1 || request.url.match(/\.(js|css)$/ */) {
     event.respondWith(
       fetch(request)                                   ❶
         .then(function (response) {                    ❶
           const copy = response.clone();               ❷
           caches.open(version + staticCacheName)       ❷
             .then(function (cache) {                   ❷
               cache.put(request, copy);                ❷
             });                                        ❷
           return response;
         })
         .catch(function () {                           ❸
           return caches.match(request)                 ❸
             .then(function (response) {
               return response ||                       ❹
                (request.url.match(/\.(js|css)$/ */) ?  ❹
                new Response('') :                      ❹
                offline(200))                           ❺
             })
         })
     );
     return;
   }
   ...
 });
```

[]{#CH13.htm#pgfId-1048582}[❶]{.fm-combinumeral} For HTML/JavaScript/CSS
requests, tries the network first

[]{#CH13.htm#pgfId-1048610}[❷]{.fm-combinumeral} Saves every visited
page in the cache for reuse (the limitations follow)

[]{#CH13.htm#pgfId-1048627}[❸]{.fm-combinumeral} If the HTML request
fails or is unavailable, falls back to the cached page

[]{#CH13.htm#pgfId-1048644}[❹]{.fm-combinumeral} If the cached page is
not available, serves empty JavaScript/CSS files

[]{#CH13.htm#pgfId-1048661}[❺]{.fm-combinumeral} If a cached HTML page
is not available, shows the bundled offline page

[]{#CH13.htm#pgfId-1019222 .calibre9}Browsers have a maximum size for
cache pages. The generally accepted maximum that a website can store is
50 MB, after which [cache.put]{.fm-code-in-text} will start to fail. If
we are concerned about the cache size, we should not put non-essential
files in the cache. The browser automatically uninstalls the service
worker and clears the cache when the machine runs out of disk space.

[]{#CH13.htm#pgfId-1019237 .calibre9}2. *Fetch the images, JavaScript,
CSS, and other assets*. In the case of assets when fetching resources,
Hugo Pipes generates a unique URL that changes as the content changes.
Therefore, we can serve the cached image without going to the server if
it's available. The following listing shows how to do this.

[]{#CH13.htm#pgfId-1019308}Listing 13.18 Serving cached assets
(AcmeTheme/assets/serviceWorker.js)

``` programlisting
... 
self.addEventListener('fetch', function (event) { 
    event.respondWith(
       caches.match(request)
         .then(function (response) {
           return response || fetch(request)           ❶
             .catch(function () {
               if (request.url.match(
                 /\.(jpe?g|png|gif|svg)$/)) {          ❷
                 return new Response(`<svg role="img"
                 aria-labelledby="offline" 
                 xmlns="http://www.w3.org/2000/svg"
                 width="100%" height="100%">
     <defs>
         <pattern id="textstripe" 
                  patternUnits="userSpaceOnUse"
                  width="200" height="150" 
                  patternTransform="rotate(-45)">
             <text y="100" fill="rgba(0,0,0,0.33)"
                   font-size="40">Offline</text>
         </pattern>
     </defs>
      <rect width="100%" height="100%" 
         fill="rgba(145,145,145,0.5)"
         stroke="rgba(0,0,0,0.33)" 
         stroke-width="3"/>
      <rect width="100%" height="100%" 
         fill="url(#textstripe)" />
 </svg>`,
 { headers: {
   'Content-Type': 'image/svg+xml' } });               ❷
               }                                       ❷
               return new Response('');
             });
         })
     );
   ...
 });
```

[]{#CH13.htm#pgfId-1048368}[❶]{.fm-combinumeral} For non-HTML requests,
looks in the cache first, then falls back to the network

[]{#CH13.htm#pgfId-1048389}[❷]{.fm-combinumeral} For images, the offline
image is provided inline as a simple SVG.

[]{#CH13.htm#pgfId-1020152}[Note]{.fm-callout-head} The Eclectic theme
used in the book's early chapters offers an offline version of the
website via this technique.

::: fm-sidebar-block
[]{#CH13.htm#pgfId-1050924 .calibre9}Exercise 13.3

[]{#CH13.htm#pgfId-1050925}Which of the following is true about service
workers? (Select all that apply.)

1.  []{#CH13.htm#pgfId-1050926}Service workers can speed up a website by
    prefetching content heuristically.

2.  []{#CH13.htm#pgfId-1050927}Service workers need to be downloaded
    each time to run.

3.  []{#CH13.htm#pgfId-1050928}Service workers are not compatible with
    AJAX and the fetch API.

4.  []{#CH13.htm#pgfId-1050929}Service workers like web workers run in a
    separate context from the main page JavaScript.
:::

[]{#CH13.htm#pgfId-1020220 .calibre9}3. *Create a page for offline
scenarios*. As we're fetching resources, sometimes we may first need to
inform the user that an internet connection is required. The following
listing creates a minimal offline page to do just that.

[]{#CH13.htm#pgfId-1020291}Listing 13.19 Adding an offline page
(content/offline.md)

``` programlisting
---
title: Offline
CommentDisabled: true
---
 
Please connect to the internet to view this page.
```

[]{#CH13.htm#pgfId-1020344 .calibre9}4. *Compile the service worker
(Hugo Pipes)*. Although the service worker script is available, we need
to compile it as a separate file in Hugo. We also need to supply the
URLs of the various static resources. The service worker depends on the
availability of the index.js path, and index.js needs to have the
service worker path to register it. To break this cyclic dependency, we
can provide the service worker path in the DOM. The service worker
during compilation needs the path to all the resources we want it to
cache. The number of resources in the cache needs to balance space
consumption and website usability when offline.

[]{#CH13.htm#pgfId-1020360 .calibre9}Listing 13.20 adds the core
resources (logo, background, CSS, and JavaScript files) and the offline
page as a list of pages to load offline and sends them over to the
service worker that is compiled into a separate JavaScript file. These
file paths are built at compile time and assembled via js.Build (Hugo
Pipes). The service worker file allows the worker to be loaded and
updated independently outside of the browser's cache. You'll need to add
this code to AcmeTheme/ layouts/\_default/baseof.html. The link to the
background SVG is present in index.css.tpl, which we need to move to a
separate partial and reuse in the service worker registration. The
background SVG move is a task for the reader.

[]{#CH13.htm#pgfId-1020421}Listing 13.20 Compiling the service worker
into a separate JavaScript file

``` programlisting
{{ $favicon := partialCached "favicon.png.html" $ "nothing"}}
{{ $logo := partialCached "logo.svg" $ "nothing"}}
{{ $background := partialCached "background.svg.html" $ "nothing" }}
{{ $hero := partialCached "hero.svg.html" $ "nothing" }}
{{ $css := partialCached "index.css.html" $ "nothing"}}
 
... {{ $js := resources.Get "index.js" | js.Build
      (dict "defines" $defines "minify" hugo.IsProduction )}}
 
{{$params := dict "pages" (slice
  "/"
  "/offline"                              ❶
  $favicon
  $logo
  $background
  $hero
  $js.Permalink
  $css )}}
 
{{ $sw := resources.Get "serviceWorker.js" |
       js.Build (dict "minify" hugo.IsProduction "params" $params)}}
 
 
<template id="js-strings">
   {{ dict
         ...
        "serviceWorker" $sw.Permalink    ❷
        | jsonify
   }}
</template>
```

[]{#CH13.htm#pgfId-1048234}[❶]{.fm-combinumeral} Passes all resources
that need to be cached, including the page at /offline

[]{#CH13.htm#pgfId-1048255}[❷]{.fm-combinumeral} Includes the script as
a comment to ensure that Hugo compiles it and includes it in the output
folder

[]{#CH13.htm#pgfId-1021039 .calibre9}5. *Add an entry to register the
service worker*. We can register the service worker after ensuring that
the service worker is available and its code looks correct. The
following listing informs the browser of our service worker file via
JavaScript. For localized websites, you might want to have different
service workers for each language. For this example, we use one for the
entire website by setting the scope to [/]{.fm-code-in-text} (website
root).

[]{#CH13.htm#pgfId-1021119}Listing 13.21 Registering the service worker
(AcmeTheme/assets/index.js)

``` programlisting
if ('serviceWorker' in navigator &&
    window.location.pathname !== '/offline') {
   const strings = JSON.parse(document.getElementById("js-strings")
     .content.textContent);
   navigator.serviceWorker.register(   ❶
     strings.serviceWorker,
     {scope: '/'});                    ❷
}
```

[]{#CH13.htm#pgfId-1048113}[❶]{.fm-combinumeral} Calls the navigator to
register the service worker

[]{#CH13.htm#pgfId-1048134}[❷]{.fm-combinumeral} Uses a service worker
for the entire website

[]{#CH13.htm#pgfId-1021405 .calibre9}6. *Create the application
manifest*. If we want to convert to a complete PWA, we also
[]{#CH13.htm#marker-1021417 .calibre9}need a *web app manifest* that
tells the browser how to install the website. This manifest is a JSON
file with some information about the application generated from the base
template. Because all the options in this file are beyond the scope of
this book, we have created a sample file to allow us to create a PWA.
The following listing shows the contents of such a file.

[]{#CH13.htm#pgfId-1021492}Listing 13.22 A web app manifest file
(AcmeTheme/layouts/\_default/baseof.html)

``` programlisting
{{$manifest := (dict
  "name" (default site.Home.Title site.Title)
  "display" "minimal-ui"
  "icons" (slice (dict
              "src" $logo
              "type" "image/svg+xml"
              "sizes" "155x155"))   "start_url" "/"
  ) }}                                                ❶
 {{ $manifestFile := ($manifest | jsonify             ❷
   | resources.FromString "/manifest.webmanifest")    ❷
   .Permalink }}                                      ❷
<link rel="manifest" href="{{$manifestFile}}">        ❸
 ...
{{$params := dict "pages" (slice
  $manifestFile                                       ❹
  ...
```

[]{#CH13.htm#pgfId-1047731}[❶]{.fm-combinumeral} Provides the data to
create a web app manifest

[]{#CH13.htm#pgfId-1047752}[❷]{.fm-combinumeral} Generates a file from
this data and stores it on disk

[]{#CH13.htm#pgfId-1047769}[❸]{.fm-combinumeral} Adds a link to every
page for the app manifest

[]{#CH13.htm#pgfId-1047793}[❹]{.fm-combinumeral} Caches the manifest in
the service worker

[]{#CH13.htm#pgfId-1021984 .calibre9}With this, we can now use the
website when offline. You can test this out by disconnecting from the
internet and going to the website URL. The contents should show up,
although placeholders will replace some images, and some pages will
request us to go back online.

[]{#CH13.htm#pgfId-1046423}[Code checkpoint]{.fm-callout-head}
[[https://chapter-13-07.hugoinaction.com](https://chapter-13-07.hugoinaction.com){.url}]{.fm-hyperlink},
and source
[]{#CH13.htm#marker-1046465}[]{#CH13.htm#marker-1046466}[]{#CH13.htm#marker-1046467}[]{#CH13.htm#marker-1046468}[]{#CH13.htm#marker-1046469}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-07](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-07){.url}]{.fm-hyperlink}.

## []{#CH13.htm#pgfId-1021990}13.5 Prefetching on hover {#CH13.htm#sigil_toc_id_288 .fm-head}

[]{#CH13.htm#pgfId-1022101 .calibre9}[]{#CH13.htm#marker-1022102
.calibre9}When you navigate from one page to another, the click event
requires a hover, a mouse down, and a mouse up. The engaged link reports
that you've clicked the touch screen when you move your finger back up
after touching the link. The first interaction with a link and the final
click takes a minimum of 200 ms for the average user to complete. This
200 ms is a lot of time in the world of the web.

[]{#CH13.htm#pgfId-1022110 .calibre9}We can utilize this time to
prefetch the page and render an instant page immediately after the click
completes. If the user decides to cancel the operation by not issuing a
mouse down event or dragging away after touching, we can throw the
prefetched page away. The likelihood of users goofing around with links
is rare, so a single web page's bandwidth costs are small enough to
warrant the prefetch. Note that our prefetch request is just an
indication to the browser, which can ignore it in cases like a low
device battery or a metered connection.

[]{#CH13.htm#pgfId-1022132 .calibre9}The best part about enabling
instant pages on our website is that we already have a Hugo module under
the official Hugo GitHub umbrella with a total of two lines of code to
integrate. Listing 13.23 loads the instant page module in our
[imports]{.fm-code-in-text} section and places the script in our
[body]{.fm-code-in-text} tag. Then listing 13.24 loads the instant page.

[]{#CH13.htm#pgfId-1022192}Listing 13.23 Adding dependencies for an
instant page (AcmeTheme/config.yaml)

``` programlisting
module:
  imports:
  ...
    - path: github.com/gohugoio/hugo-mod-jslibs/instantpage
```

[]{#CH13.htm#pgfId-1022319}Listing 13.24 Loading the instant page
(AcmeTheme/layouts/baseof.html)

``` programlisting
 
...
{{ partialCached "jslibs/instantpage/script-src.html" "-" }}
</body>
```

[]{#CH13.htm#pgfId-1022374 .calibre9}This code adds a separate
JavaScript file to our website. If we prefer to have the instant page
code bundled with our main website, we can install the instant page
plugin via npm and add this to our JavaScript file.

[]{#CH13.htm#pgfId-1046512}[Code checkpoint]{.fm-callout-head}
[[https://chapter-13-08.hugoinaction.com](https://chapter-13-08.hugoinaction.com){.url}]{.fm-hyperlink},
and source []{#CH13.htm#marker-1046554}code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-08](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-08){.url}]{.fm-hyperlink}.

## []{#CH13.htm#pgfId-1022380}13.6 Cleaner navigation with the Turbo JavaScript library {#CH13.htm#sigil_toc_id_289 .fm-head}

[]{#CH13.htm#pgfId-1022496 .calibre9}[]{#CH13.htm#marker-1022484
.calibre9}[]{#CH13.htm#marker-1022486 .calibre9}When the user clicks on
a link, the current page becomes invalid while the new one is loaded and
rendered. We often see a flicker of white when this happens. *Turbo* is
[]{#CH13.htm#marker-1022501 .calibre9}a set of techniques and libraries
that can write web applications that are light on JavaScript.

[]{#CH13.htm#pgfId-1022511 .calibre9}*Turbo Drive* keeps
[]{#CH13.htm#marker-1022520 .calibre9}the current page active by
overriding the navigation mechanism in the browsers with a background
fetch. It then replaces the contents of the DOM with the new page. This
way, the users never see a flicker, and the web page is functional even
during navigation! This advanced library's feature allows us to prevent
parts of the web page from reloading when navigating away, thereby
maintaining the state of text boxes, scroll position, and other web page
characteristics when reloaded. It makes page transitions and loading
possible for websites where the server sends HTML rather than building
the HTML in JavaScript. We will enable Turbo Drive in this section,
albeit in the bare minimum state, and will not do partial page reloads.
The term Turbo from here on will refer to the Turbo Drive part of the
Turbo libraries.

::: fm-sidebar-block
[]{#CH13.htm#pgfId-1050946 .calibre9}Instant page vs. Turbo Drive

[]{#CH13.htm#pgfId-1050947}Instant page and Turbo Drive are
complimentary and not colliding techniques. Instant page tries to
prefetch the page and make sure it is loaded from the internet early,
and Turbo Drive ensures that the current page is active until the new
page is ready.

\

[]{#CH13.htm#pgfId-1050948}A good analogy to understand this comes from
the field of medicine. Instant page is like the technology that puts you
in the queue for a kidney transplant based on the lab results, even
before your kidneys fail. Turbo Drive is the dialysis machine that keeps
you running until the transplant is successful and the new kidney takes
over. Unlike kidneys, network bandwidth is cheap, and a little wastage
is acceptable for better performance.
:::

### []{#CH13.htm#pgfId-1022552}13.6.1 Adding Turbo Drive to the template {#CH13.htm#sigil_toc_id_290 .fm-head1}

[]{#CH13.htm#pgfId-1022597 .calibre9}[]{#CH13.htm#marker-1022563
.calibre9}[]{#CH13.htm#marker-1022565
.calibre9}[]{#CH13.htm#marker-1022567 .calibre9}In listing 13.23, we
added the instant page plugin as a Hugo module. We could have used npm
for that use case as well. For Turbo Drive, we will use npm. The
following listing adds Turbo as a [devDependency]{.fm-code-in-text} in
package.hugo.json. Then we need to run [hugo]{.fm-code-in-text}
[mod]{.fm-code-in-text} [npm]{.fm-code-in-text} [pack]{.fm-code-in-text}
followed by [npm]{.fm-code-in-text} [i]{.fm-code-in-text} to install it.

[]{#CH13.htm#pgfId-1022657}Listing 13.25 Adding Turbo as a dependency
(AcmeTheme/package.hugo.json)

``` programlisting
{
  "devDependencies": {
    ...
    "@hotwired/turbo" :"7.0.0-rc.1"
  }
  ...
}
```

[]{#CH13.htm#pgfId-1022711 .calibre9}After installing Turbo, we can load
this on the index page of our website. The following listing provides
the code to do this. This snippet also instantiates Turbo on the
website. []{#CH13.htm#marker-1022713
.calibre9}[]{#CH13.htm#marker-1022716
.calibre9}[]{#CH13.htm#marker-1022718 .calibre9}

[]{#CH13.htm#pgfId-1022775}Listing 13.26 Adding Turbo to the index page
(AcmeTheme/assets/index.js)

``` programlisting
import * as Turbo from "@hotwired/turbo"
 
...
function init() {
  ...
  Turbo.start(); 
}
```

### []{#CH13.htm#pgfId-1022918}13.6.2 Handling JavaScript-based navigation {#CH13.htm#sigil_toc_id_291 .fm-head1}

[]{#CH13.htm#pgfId-1022935 .calibre9}[]{#CH13.htm#marker-1022929
.calibre9}[]{#CH13.htm#marker-1022931 .calibre9}Although Turbo handles
HTML-based changes automatically, any JavaScript modifications done to
the DOM could get lost. Turbo does not work well with relative links as
the base URL is different when the preloading occurs. The solution to
this problem includes the following:

1.  []{#CH13.htm#pgfId-1022940 .calibre9}Tell Turbo to deactivate for
    certain links by adding the [data-turbo=\"false\"]{.fm-code-in-text}
    attribute to the links.

2.  []{#CH13.htm#pgfId-1022980 .calibre9}Leave a portion of the page
    untouched by Turbo by adding []{#CH13.htm#marker-1022969
    .calibre9}the [data-turbo-permanent]{.fm-code-in-text} attribute to
    the element.

3.  []{#CH13.htm#pgfId-1023006 .calibre9}Handle these conditions
    manually by []{#CH13.htm#marker-1022995 .calibre9}calling
    [turbo:load]{.fm-code-in-text} event.

[]{#CH13.htm#pgfId-1023028 .calibre9}The first approach lowers
performance. Because we do not have permanent portions of a page on our
website (due to localization), manual handling works best for us.
Although the template links are absolute, we added manual HTML (draw.jpg
in the About page) with a relative link in the content. The following
listing uses []{#CH13.htm#marker-1023017 .calibre9}the
[ref]{.fm-code-in-text} shortcode to prepend the link to the base URL of
the current page, thus hardcoding the image URL.

[]{#CH13.htm#pgfId-1023088}Listing 13.27 Making hardcoded image URLs
absolute (content/about/index.md)

``` programlisting
<img style="float:right; margin: 20px;" src="{{<ref "about">}}/draw.jpg"> 
```

[]{#CH13.htm#pgfId-1023183 .calibre9}Next, we will render the cart when
Turbo replaces the HTML of the web page. The following listing shows how
to do this.

[]{#CH13.htm#pgfId-1023240}Listing 13.28 Re-rendering the cart
(AcmeTheme/assets/store.js)

``` programlisting
... 
function init() { 
  ... 
  document.addEventListener("turbo:load", 
    this.updateCart.bind(this));           ❶
  ... 
} 
```

[]{#CH13.htm#pgfId-1047651}[❶]{.fm-combinumeral} Refreshes the cart on
page load

[]{#CH13.htm#pgfId-1046590}[Code checkpoint]{.fm-callout-head}
[[https://chapter-13-09.hugoinaction.com](https://chapter-13-09.hugoinaction.com){.url}]{.fm-hyperlink},
and source code:
[[https://github.com/hugoinaction/hugoinaction/tree/chapter-13-09](https://github.com/hugoinaction/hugoinaction/tree/chapter-13-09){.url}]{.fm-hyperlink}.

::: fm-sidebar-block
[]{#CH13.htm#pgfId-1050965 .calibre9}Event delegation and Turbo

[]{#CH13.htm#pgfId-1050966}Turbo loves the concept of event delegation
that we introduced in chapter 10. Because the DOM loads only once, Turbo
also runs the JavaScript code once. When we attach event listeners (to
forms, for example) and the browser adds elements dynamically, the event
handling continues to work due to delegation.

\

[]{#CH13.htm#pgfId-1050984}For example, suppose we need an event handler
for the contact form. When the JavaScript code executes on the home
page, it can add event listeners for the Contact Us form even though it
is not loaded until the user navigates to that page. Turbo can replace
the DOM contents without re-running all the JavaScript code when the
user loads this page. The event handling for the Contact Us form
continues to work automatically. With less JavaScript code running on
navigation, our website becomes faster.
:::

[]{#CH13.htm#pgfId-1023526 .calibre9}With the changes to include Turbo
and Instant Page, we should be able to see much better page transitions
on our website. Now let's look at more best practices, tools, and
services that we can use across a wide variety of domains in the
following section. []{#CH13.htm#marker-1023528
.calibre9}[]{#CH13.htm#marker-1023531
.calibre9}[]{#CH13.htm#marker-1023533
.calibre9}[]{#CH13.htm#marker-1023535 .calibre9}

## []{#CH13.htm#pgfId-1023541}[]{#CH13.htm#marker-1041987}13.7 More Jamstack tooling and services {#CH13.htm#sigil_toc_id_292 .fm-head}

[]{#CH13.htm#pgfId-1023551 .calibre9}[]{#CH13.htm#marker-1023552
.calibre9}Using the Jamstack across the whole set of problems it can
tackle, and the type of services that are present and evolving will
require multiple books to understand. In this book, we have established
a general framework of using a third-party API as we did with Netlify
forms and functions, Formspree, Heroku, Stripe, and SendGrid, but
there's more to the Jamstack.

### []{#CH13.htm#pgfId-1023560}[]{#CH13.htm#marker-1041989}[]{#CH13.htm#marker-1041988}[]{#CH13.htm#marker-1041986}[]{#CH13.htm#marker-1041985}13.7.1 CLI, SDKs, configurations, and additional automation SDKs (software development kits) {#CH13.htm#sigil_toc_id_293 .fm-head1}

[]{#CH13.htm#pgfId-1023583 .calibre9}[]{#CH13.htm#marker-1023571
.calibre9}[]{#CH13.htm#marker-1023573
.calibre9}[]{#CH13.htm#marker-1023575
.calibre9}[]{#CH13.htm#marker-1023577
.calibre9}[]{#CH13.htm#marker-1023579 .calibre9}Most Jamstack services
come with a command-line interface (CLI) to configure, launch, and
locally test the code we write for the website. Instead of going to the
website and doing this, we recommended using a command-line tool or a
script. This approach provides a lot of flexibility and power. Some
services work with configuration files where all the settings can be
dumped and then updated on the server with the CLI. Here are several
good reasons to use the CLI:

-   []{#CH13.htm#pgfId-1023588 .calibre9}*We can store the CLI
    invocations along with our code.* This storage provides proper
    version control and repeatability for all our configurations. We can
    go back in history and try out older builds with other settings for
    the cloud services we've used. Additionally, history searches let us
    fix injections or mistakes that creep in after initial testing.

-   []{#CH13.htm#pgfId-1023609 .calibre9}*We can track changes in the
    cloud services better with the CLI.* If the same command does
    something different than the last time it was issued, we have some
    assurance that the issue is on the vendor side, and we need to reach
    out to customer support.

-   []{#CH13.htm#pgfId-1023626 .calibre9}*We can automate
    configurations.* If you have hundreds of surveys to create, doing it
    manually on the Formspree interface is a lot of work that we can do
    via a script running via a CLI.

-   []{#CH13.htm#pgfId-1023643 .calibre9}*We can use the command line
    for replicating or synchronizing the configuration across multiple
    accounts.* This allows us to have different setups for development,
    staging, and production environments.

-   []{#CH13.htm#pgfId-1023660 .calibre9}*The textual configuration is
    faster to read and navigate.* CLIs use textual configuration by
    default. In many cases, it also exposes more features than what is
    possible in the website.

-   []{#CH13.htm#pgfId-1023677 .calibre9}*We can control the invocation
    time for the script.* This is a lot easier than manually clicking
    the user interface.

[]{#CH13.htm#pgfId-1023694 .calibre9}The big downside of the CLI is that
it is more technical than a GUI and will most likely take extra effort
initially to set up. That is the reason this book goes through the GUI
wherever and whenever possible. We believe that this effort pays off in
the long run.

[]{#CH13.htm#pgfId-1023700 .calibre9}A general rule of thumb with
scripting is that you need to start with the graphical interface to
understand the service better and to do the initial setup. Then, it is
best to move off the graphical interface, but keep the version history
as soon as it's time for the first revision. All services used in this
book, from Netlify to SendGrid, offer either a CLI, set up with a
configuration, or both. Most of the CLIs are open source and involve an
SDK that we can use to invoke the commands programmatically.

::: fm-sidebar-block
[]{#CH13.htm#pgfId-1051003 .calibre9}Exercise 13.4

[]{#CH13.htm#pgfId-1051004}Select the statement about CLIs, SDKs, and
configurations that is true.

1.  []{#CH13.htm#pgfId-1051005}CLIs cause vendor lock-in and should be
    avoided for better maintainability.

2.  []{#CH13.htm#pgfId-1051006}We can use SDKs within a cloud function
    to affect its own state.

3.  []{#CH13.htm#pgfId-1051007}If one of the service providers is a CLI
    or SDK, it does not make sense to use the CLI for anything because
    everyone provides a GUI.

4.  []{#CH13.htm#pgfId-1051013}GUIs are always faster to learn and use
    than
    CLIs.[]{#CH13.htm#marker-1051008}[]{#CH13.htm#marker-1051009}[]{#CH13.htm#marker-1051010}[]{#CH13.htm#marker-1051011}[]{#CH13.htm#marker-1051012}
:::

### []{#CH13.htm#pgfId-1023774}13.7.2 Authentication, storage, and other pieces of the puzzle {#CH13.htm#sigil_toc_id_294 .fm-head1}

[]{#CH13.htm#pgfId-1023793 .calibre9}[]{#CH13.htm#marker-1023785
.calibre9}[]{#CH13.htm#marker-1023787
.calibre9}[]{#CH13.htm#marker-1023789 .calibre9}Some functional
necessities for most modern websites that we did not tackle in this book
include authentication and storage. These form the building blocks of
most complex applications and, on the surface, seem harder for a static
website to do than something that uses a server. With the widespread use
of social login buttons from big corporations like Google, Facebook,
Apple, and Microsoft, and their acceptance by the general public,
authentication has become commoditized. We can write a login helper
using the APIs for these providers purely in the JavaScript layer and
then use session storage or local storage to manage the user state.
Cloud functions can validate tokens if we need to provide access to
restricted resources. There are also services like Netlify Identity and
Auth0, where we can add social logins and build a custom login system in
pure JavaScript code and let the vendors perform user management.

[]{#CH13.htm#pgfId-1023798 .calibre9}There are many types of and use
cases for storage. This is needed to store some user data for
personalization as well as aggregation or publishing. All use cases have
different potential solutions. If the data is user-generated and is
needed personally by the user, we can use third-party services like
Dropbox, Google Drive, or even GitHub to store this data. With these
services, the cost of storage and the burden of backup and maintenance
is not ours. We have already used form services to store data for
aggregation. Based on our use cases, if our needs are different, we can
use PAAS solutions from Heroku Dynos to AWS DynamoDB or S3. The deeper
we dive into the application server layers, the more work we need to do.

[]{#CH13.htm#pgfId-1023804 .calibre9}Another vital piece of the modern
web is notifications. Luckily for the Jamstack, these are built-in.
Almost all services offer both inbound and outbound webhooks to
communicate with one another, and we can add custom cloud functions to
perform any missing tasks for ourselves. The second set of notifications
are for the end user. Services like Twilio (owners of SendGrid),
Firebase, and PubNub offer the ability to send real-time messages to the
end users. []{#CH13.htm#marker-1023806
.calibre9}[]{#CH13.htm#marker-1023809
.calibre9}[]{#CH13.htm#marker-1023811
.calibre9}[]{#CH13.htm#marker-1023813 .calibre9}

## []{#CH13.htm#pgfId-1023819}13.8 The Hugo community {#CH13.htm#sigil_toc_id_295 .fm-head}

[]{#CH13.htm#pgfId-1023829 .calibre9}[]{#CH13.htm#marker-1023830
.calibre9}Hugo is primarily a community-driven project. This ownership
has allowed the tool to develop a passionate community of users,
developers, and followers. Most Hugo users are developers, and many have
personal websites where they share tips, tutorials, and sample code
under a permissive license such that we can take it and make it our own.

[]{#CH13.htm#pgfId-1023838 .calibre9}Being a community-led and not a
corporation-led effort is one of the critical benefits of Hugo. Anyone
can suggest changes and influence the direction of Hugo. If you are not
happy with where it is going, you have the right to fork the project and
build a custom copy. Suppose you are trying to solve a problem or
perform some task via Hugo that you do not understand. In that case, you
can post it in the Hugo forums and be dazzled by the creativity of the
Hugo community to solve the problem.

### []{#CH13.htm#pgfId-1023844}13.8.1 Asking for help {#CH13.htm#sigil_toc_id_296 .fm-head1}

[]{#CH13.htm#pgfId-1023861 .calibre9}[]{#CH13.htm#marker-1039261
.calibre9}[]{#CH13.htm#marker-1039262 .calibre9}Hugo has a robust set of
community forums at
[[https://discourse.gohugo.io/](https://discourse.gohugo.io/){.url}]{.fm-hyperlink}.
The community is very responsive, and you might find proper usable code
as answers to your queries. The biggest thing to note is that Hugo
expects that you do some homework before asking questions. Search the
previously answered questions, or check in Hugo's documentation
([[https://gohugo.io/documentation/](https://gohugo.io/documentation/){.url}]{.fm-hyperlink})
and on GitHub
([[https://github.com/gohugoio/hugo](https://github.com/gohugoio/hugo){.url}]{.fm-hyperlink})
before raising a question. A lot of these are already solved and
answered multiple times. A quick Google search can also reveal blog
posts by Hugo users solving problems they've encountered when building
their websites with Hugo.

[]{#CH13.htm#pgfId-1023869 .calibre9}We can also use GitHub Issues to
ask for feature requests and changes to Hugo. Generally, use GitHub
Issues if you find bugs and have well-defined feature requests. For
general questions, it is better to start a discourse and graduate to
GitHub Issues if the request is a new feature or a discovered bug. When
reporting a bug, it is a good idea to share sample code and provide
environment details and sample data to reproduce the bug.

[]{#CH13.htm#pgfId-1023875 .calibre9}Being civil and patient in the
forums is essential to getting help. The other community members are
answering their questions voluntarily without any remuneration. Although
they love Hugo and are putting in the effort to see it succeed and to
help you succeed with it, there is still an expectation of an
intelligent inquirer who has done their homework before asking for help.
[]{#CH13.htm#marker-1023877 .calibre9}[]{#CH13.htm#marker-1023880
.calibre9}

### []{#CH13.htm#pgfId-1023886}13.8.2 Showcasing your work {#CH13.htm#sigil_toc_id_297 .fm-head1}

[]{#CH13.htm#pgfId-1023903 .calibre9}[]{#CH13.htm#marker-1023897
.calibre9}[]{#CH13.htm#marker-1023899 .calibre9}It is a proud moment to
have accomplished something using Hugo, whether discovering a new trick
or creating a module. We can also build entire themes that we would like
to sell or give away. The Hugo community forums
([[https://discourse.gohugo.io/](https://discourse.gohugo.io/){.url}]{.fm-hyperlink})
are great places to share new modules and tricks. The community forums
have two sections (Tips & Tricks and Showcases) entirely dedicated to
showing off stuff from the community. The Hugo website takes pull
requests, and if your work is worthy, it could land on Hugo's website
itself.

[]{#CH13.htm#pgfId-1023909 .calibre9}Hugo also has a themes repository
for user-created themes at
[[https://github.com/gohugoio/hugoThemes](https://github.com/gohugoio/hugoThemes){.url}]{.fm-hyperlink},
where we can send a pull request to display our theme on the Hugo
website. Setting up a theme requires setting up an example website and
ensuring some level of portability of content across themes. If you have
created a theme, setting up a sample website to showcase its top feature
should not be difficult.

[]{#CH13.htm#pgfId-1023916 .calibre9}A much better place to showcase
your work is in your website itself. If you have a personal website on
the World Wide Web, that is the best place to write about your work.
Personal websites give maximum flexibility on what and how to present
your work. Your website can get backlinks that provide SEO advantages
for a job well done, and you have something to write about.
[]{#CH13.htm#marker-1023918 .calibre9}[]{#CH13.htm#marker-1023921
.calibre9}

### []{#CH13.htm#pgfId-1023927}13.8.3 Contributing {#CH13.htm#sigil_toc_id_298 .fm-head1}

[]{#CH13.htm#pgfId-1023944 .calibre9}[]{#CH13.htm#marker-1023938
.calibre9}[]{#CH13.htm#marker-1023940 .calibre9}Hugo is an open source
project with all its code, plans, and documentation available for the
community to peruse, improve, and fix. Users can request changes via
pull requests to the core code as well as documentation. The steps for
contributing code to Hugo are provided at
[[https://gohugo.io/contribute/development/](https://gohugo.io/contribute/development/){.url}]{.fm-hyperlink}
and are up-to-date with changing build environments and support
matrices.

[]{#CH13.htm#pgfId-1023950 .calibre9}Hugo uses the Go programming
language, and knowledge about how Go works is essential to add features
successfully to Hugo. That does not mean that it's the only way to
contribute. We can contribute to documentation, provide themes, and help
others, tasks that do not require additional knowledge outside of using
Hugo that you should be comfortable with after reading this book.
[]{#CH13.htm#marker-1023952 .calibre9}[]{#CH13.htm#marker-1023955
.calibre9}[]{#CH13.htm#marker-1023957 .calibre9}

## []{#CH13.htm#pgfId-1023963}13.9 The future of Hugo {#CH13.htm#sigil_toc_id_299 .fm-head}

[]{#CH13.htm#pgfId-1023973 .calibre9}[]{#CH13.htm#marker-1023974
.calibre9}Both Hugo and the Jamstack are rapidly evolving. More and more
problems traditionally solved during run time are moving to the
compilation layer. Hugo is stepping up to define the best practices for
maintaining performance and ease of use with new use cases that emerge
for the Jamstack and the web. Hugo just had three releases in 2013 and
two in 2014. In 2020, Hugo had almost 50 releases, including features
like js.Build, Babel, and PostCSS, along with significant changes to the
new Markdown rendering engine and Hugo Modules, which came in 2019. 2021
saw new features released continuously, from faster builds on Mac ARM to
[resources.GetRemote]{.fm-code-in-text}.

[]{#CH13.htm#pgfId-1023982 .calibre9}Most Hugo features are added based
on user requests and feedback. This community project does not have a
corporate direction to cater to, just feasibility, maintainability, and
performance to decide whether to add a new feature. Most features that
come to Hugo are feature requests from end users. There have been
multiple attempts to get a 1.0 vision and roadmap, but the needs keep
evolving with time, and we cannot foresee what new releases will bring.
Hugo is not going away, and its features will continue to work so we can
continue to use the version of Hugo we have (unless we need something
that the new versions bring in). The Jamstack is also evolving rapidly
and picking up support for a wide variety of use cases. With Hugo, we
can build websites that provide outstanding performance and stay live on
the internet for a long time without much maintenance.
[]{#CH13.htm#marker-1023984 .calibre9}

## []{#CH13.htm#pgfId-1023991}Summary {#CH13.htm#sigil_toc_id_300 .fm-head}

-   []{#CH13.htm#pgfId-1024001 .calibre9}Hugo offers a set of advanced
    features around creating multiple versions of a web page. These
    include multilingual websites and custom output formats.

-   []{#CH13.htm#pgfId-1024015 .calibre9}Hugo supports creating websites
    in multiple (human) languages, where we can provide
    language-specific content without necessarily redoing all the
    settings and images for the website.

-   []{#CH13.htm#pgfId-1024025 .calibre9}With custom output formats, we
    can design different layouts and templates for the same content to
    present it differently, including different mime types like RSS or
    JSON to different types of UIs like AMP or plain HTML.

-   []{#CH13.htm#pgfId-1024035 .calibre9}Hugo offers sitemap and
    robots.txt templates, which we can optionally use. With great
    defaults and simple requirements, there is rarely a need to set
    these up.

-   []{#CH13.htm#pgfId-1024045 .calibre9}Although Hugo-based websites
    are fast by default, we can make them faster by using techniques
    like Instant page or Turbo to take advantage of the capabilities of
    the modern web.

-   []{#CH13.htm#pgfId-1024055 .calibre9}With CLIs and configuration
    files, Jamstack is very friendly to the developer. After a certain
    point, keeping the configuration for the various services and the
    source code gets easier.

-   []{#CH13.htm#pgfId-1024065 .calibre9}Hugo has a vibrant community
    that is eager to help, provided that we have done our homework and
    are polite and respectful in asking for help.

[]{#APP_A.htm}

# []{#APP_A.htm#pgfId-1096664}appendix A. Getting up and running with Hugo {#APP_A.htm#heading_id_2 .tochead}

## []{#APP_A.htm#pgfId-1011754}[]{#APP_A.htm#marker-1163195}[]{#APP_A.htm#marker-1163193}A.1 System requirements {#APP_A.htm#sigil_toc_id_301 .fm-head}

[]{#APP_A.htm#pgfId-1011771 .calibre9}[]{#APP_A.htm#marker-1011765
.calibre9}[]{#APP_A.htm#marker-1011767 .calibre9}Hugo runs on a standard
version of all major desktop operating systems, including Windows,
macOS, and the various flavors of Unix. The following lists additional
system requirements:

-   []{#APP_A.htm#pgfId-1011776 .calibre9}*Go needs to be installed to
    use Hugo Modules (chapter 8+).* Package managers that install Hugo
    take care of installing Go as well. The installation instructions
    for Go are located at
    [[https://golang.org/doc/install](https://golang.org/doc/install){.url}]{.fm-hyperlink}.
    You do not need to learn Go or use it directly within Hugo.

-   []{#APP_A.htm#pgfId-1011798 .calibre9}*Although Git is not required
    to use Hugo, if Git is the version control system, Hugo provides
    access to the metadata in the templates.* Hugo can also use Git
    metadata in its page rendering. (For example, the date last modified
    for a page is safer in Git than in the OS, where each time the code
    is downloaded, the modified date may get changed.) Git is available
    in all package managers by running [git]{.fm-code-in-text}. You can
    also get Git from
    [[https://git-scm.com/](https://git-scm.com/){.url}]{.fm-hyperlink}.
    You can learn more about Git from the book by Mike McQuaid, *Git in
    Practice* (Manning, 2014), or the book by Rick Umali, *Learn Git in
    a Month of Lunches* (Manning, 2015).

[]{#APP_A.htm#pgfId-1011851 .calibre9}Hugo also integrates with the
Node.js ecosystem and npm, which we utilize in chapters 10+. Node.js and
npm are not required to use Hugo but are helpful if you write frontend
JavaScript code to support your Hugo-based website. You can install
Node.js and npm from the official website at
[[https://nodejs.org/](https://nodejs.org/){.url}]{.fm-hyperlink} or
from any package manager.

### []{#APP_A.htm#pgfId-1011858}A.1.1 Hugo flavors {#APP_A.htm#sigil_toc_id_302 .fm-head1}

[]{#APP_A.htm#pgfId-1011877 .calibre9}[]{#APP_A.htm#marker-1011869
.calibre9}[]{#APP_A.htm#marker-1011871
.calibre9}[]{#APP_A.htm#marker-1011873 .calibre9}Hugo comes in two
flavors: standard and extended. The extended flavor of Hugo adds support
for the SCSS, a language that compiles to CSS. SCSS provides support for
functions, nested classes, and compile-time variables. It gels well with
the core concept of the Jamstack, which prefers compilation-based
processing over run-time processing in the client.

[]{#APP_A.htm#pgfId-1011892}[Note]{.fm-callout-head} The SCSS language
is beyond the scope of this book. It is not needed for learning and
using Hugo.

[]{#APP_A.htm#pgfId-1011898 .calibre9}Sass ships as two compilers: the
LibSass compiler, which is bundled into Hugo extended, and the Dart Sass
compiler, which needs to be installed as an external dependency if we
want to use it with Hugo. Future versions of Hugo will move to Dart Sass
as LibSass is deprecated. Also, there might not be an extended flavor of
Hugo in the future. []{#APP_A.htm#marker-1011900
.calibre9}[]{#APP_A.htm#marker-1011903
.calibre9}[]{#APP_A.htm#marker-1011905 .calibre9}

### []{#APP_A.htm#pgfId-1011911}A.1.2 Hugo versions {#APP_A.htm#sigil_toc_id_303 .fm-head1}

[]{#APP_A.htm#pgfId-1011942 .calibre9}[]{#APP_A.htm#marker-1011922
.calibre9}[]{#APP_A.htm#marker-1011924
.calibre9}[]{#APP_A.htm#marker-1011926 .calibre9}You can
[]{#APP_A.htm#marker-1011931 .calibre9}use the [hugo]{.fm-code-in-text}
[version]{.fm-code-in-text} command to get the current version of Hugo
installed on your machine. Hugo is relatively stable, and most
Hugo-based websites do not have any other dependency apart from Hugo,
making maintenance easy. Hugo is not at version 1.0 yet, and the core
team does not guarantee backward compatibility. The release notes do
have migration instructions that are specific and can be completed by a
find-and-replace operation in your codebase. The Hugo community is open
and inviting. If you have trouble migrating to a newer version, you will
be pleasantly surprised by the effort the community will take to help
solve your problem.

[]{#APP_A.htm#pgfId-1011951 .calibre9}Note that, with the absence of
intrusive plugins and the presence of hundreds of themes and websites
with thousands of pages, the core team tries its best to maintain
compatibility. Most breaking changes come when a significant change is
involved in creating a new feature or cleaning up a substantial portion
of the codebase. Usually, these changes come with steps on migration
from the older way of doing things. There is no long-term support
version of Hugo, and the core team does not patch older versions. Only
the latest version gets bug fixes and updates.

::: fm-sidebar-block
[]{#APP_A.htm#pgfId-1165071 .calibre9}Updating Hugo websites

[]{#APP_A.htm#pgfId-1165072}You do not need to have the latest version
of Hugo or its theme. Your website's contents are perfectly safe if
generated by an older version of the theme or by Hugo. The patches are
recommended and helpful only for updates, but you can do them at your
own pace and at your own time.

\

[]{#APP_A.htm#pgfId-1165073}The generated website can run forever
without needing security updates or patches. You can keep adding content
with the older version of Hugo if you are comfortable with that and you
do not need new features, so there is no need to update. Hugo version
0.91.2 is used for this book.
[]{#APP_A.htm#marker-1165074}[]{#APP_A.htm#marker-1165075}[]{#APP_A.htm#marker-1165076}[]{#APP_A.htm#marker-1165077}[]{#APP_A.htm#marker-1165078}
:::

## []{#APP_A.htm#pgfId-1011990}A.2 Installing Hugo {#APP_A.htm#sigil_toc_id_304 .fm-head}

[]{#APP_A.htm#pgfId-1012007 .calibre9}[]{#APP_A.htm#marker-1012001
.calibre9}[]{#APP_A.htm#marker-1012003 .calibre9}Hugo is available on
all major platforms, and there are many ways to install Hugo: from
package managers to direct compilation. The following sections describe
the installation process for these options.

### []{#APP_A.htm#pgfId-1012012}A.2.1 System package managers {#APP_A.htm#sigil_toc_id_305 .fm-head1}

[]{#APP_A.htm#pgfId-1012031 .calibre9}[]{#APP_A.htm#marker-1163554
.calibre9}[]{#APP_A.htm#marker-1163555
.calibre9}[]{#APP_A.htm#marker-1163556 .calibre9}Hugo is available with
the name "hugo" in most standard package managers. You do need to pass
additional flags to install Hugo extended in some of them. The extended
flavor of Hugo has more features, and we recommend using it. The
following listing provides the commands to use for various package
managers.

[]{#APP_A.htm#pgfId-1012087}Listing A.1 Installation commands for Hugo

``` programlisting
brew install hugo                      ❶
  
sudo port install hugo +extended       ❷
  
choco install hugo-extended -confirm   ❸
  
scoop install hugo-extended            ❹
  
snap install hugo --channel=extended   ❺
  
sudo apt-get install hugo              ❻
  
sudo pacman -Syu hugo                  ❼
  
sudo dnf install hugo                  ❽
  
sudo yum install hugo                  ❾
  
sudo pkg_add hugo                      ❿
```

[]{#APP_A.htm#pgfId-1164358}[❶]{.fm-combinumeral} For MacOS, Homebrew at
[[https://brew.sh/](https://brew.sh/){.url}]{.fm-hyperlink}

[]{#APP_A.htm#pgfId-1164406}[❷]{.fm-combinumeral} For MacOS, MacPorts at
[[https://www.macports.org/](https://www.macports.org/){.url}]{.fm-hyperlink}

[]{#APP_A.htm#pgfId-1164424}[❸]{.fm-combinumeral} For Windows,
Chocolatey at
[[https://chocolatey.org/](https://chocolatey.org/){.url}]{.fm-hyperlink}

[]{#APP_A.htm#pgfId-1164442}[❹]{.fm-combinumeral} For Windows, Scoop at
[[https://scoop.sh/](https://scoop.sh/){.url}]{.fm-hyperlink}

[]{#APP_A.htm#pgfId-1164460}[❺]{.fm-combinumeral} For Linux, Snap at
[[https://snapcraft.io/](https://snapcraft.io/){.url}]{.fm-hyperlink}

[]{#APP_A.htm#pgfId-1164478}[❻]{.fm-combinumeral} For Ubuntu, Apt at
[[https://wiki.debian.org/Apt](https://wiki.debian.org/Apt){.url}]{.fm-hyperlink}

[]{#APP_A.htm#pgfId-1164496}[❼]{.fm-combinumeral} For Arch Linux, pacman
at
[[https://www.archlinux.org/pacman/](https://www.archlinux.org/pacman/){.url}]{.fm-hyperlink}

[]{#APP_A.htm#pgfId-1164514}[❽]{.fm-combinumeral} For Fedora, DNF at
[[https://fedoraproject.org/wiki/DNF](https://fedoraproject.org/wiki/DNF){.url}]{.fm-hyperlink}

[]{#APP_A.htm#pgfId-1164532}[❾]{.fm-combinumeral} For Fedora, yum at
[[https://fedoraproject.org/wiki/Yum](https://fedoraproject.org/wiki/Yum){.url}]{.fm-hyperlink}

[]{#APP_A.htm#pgfId-1164550}[❿]{.fm-combinumeral} For OpenBSD, pkg at
[[https://man.openbsd.org/pkg_add](https://man.openbsd.org/pkg_add){.url}]{.fm-hyperlink}[]{#APP_A.htm#marker-1164555}[]{#APP_A.htm#marker-1164556}[]{#APP_A.htm#marker-1164557}

### []{#APP_A.htm#pgfId-1014298}A.2.2 Direct download {#APP_A.htm#sigil_toc_id_306 .fm-head1}

[]{#APP_A.htm#pgfId-1014308 .calibre9}[]{#APP_A.htm#marker-1014309
.calibre9}[]{#APP_A.htm#marker-1014311
.calibre9}[]{#APP_A.htm#marker-1014313 .calibre9}You can also download
the precompiled Hugo binary file from Hugo's GitHub repository at
[[https://github.com/gohugoio/hugo/releases](https://github.com/gohugoio/hugo/releases){.url}]{.fm-hyperlink}.
This page also provides release notes for the various releases and
access to the older versions of Hugo. The specific version used in this
book is present at
[[https://github.com/gohugoio/hugo/releases/tag/v0.91.2](https://github.com/gohugoio/hugo/releases/tag/v0.91.2){.url}]{.fm-hyperlink}.
Make sure that you download the extended version for the release.

[]{#APP_A.htm#pgfId-1024416 .calibre9}Once downloaded, you can extract
Hugo to access the file hugo.exe (on Windows, it might be just hugo if
the OS hides path extensions) or the file hugo (on Linux/macOS) that you
can use to run the program. The Hugo binary needs to be present in the
system path to be available directly in the command line:

-   []{#APP_A.htm#pgfId-1024422 .calibre9}For Windows, see
    [[https://gohugo.io/getting-started/installing/#for-windows-10-users](https://gohugo.io/getting-started/installing/#for-windows-10-users){.url}]{.fm-hyperlink}

-   []{#APP_A.htm#pgfId-1027095 .calibre9}For macOS/Linux, move the hugo
    file to /usr/bin via [sudo mv]{.fm-code-in-text} hugo /usr/bin/

[]{#APP_A.htm#pgfId-1027105 .calibre9}Because Hugo is a single binary
file and not a folder where we have multiple files to copy, this makes
it easy to submit the Hugo binary to source control or save it for
archival purposes. However, because the package managers support getting
older versions of the hosted software, there is no real need to archive
Hugo, and you do not need to keep Hugo's binary file in your version
control system. The only use case for storing this binary is long-term
archival.

[]{#APP_A.htm#pgfId-1027121}[Note]{.fm-callout-head} Step-by-step video
guides to install Hugo are available at
[[https://gohugo.io/getting-started/installing/](https://gohugo.io/getting-started/installing/){.url}]{.fm-hyperlink}.
[]{#APP_A.htm#marker-1027124}[]{#APP_A.htm#marker-1027127}[]{#APP_A.htm#marker-1027129}[]{#APP_A.htm#marker-1027131}[]{#APP_A.htm#marker-1027133}

## []{#APP_A.htm#pgfId-1027139}A.3 Code editors {#APP_A.htm#sigil_toc_id_307 .fm-head}

[]{#APP_A.htm#pgfId-1027156 .calibre9}[]{#APP_A.htm#marker-1027150
.calibre9}[]{#APP_A.htm#marker-1027152 .calibre9}Hugo does not need a
specialized development environment. A text editor is enough. Sublime
Text and Visual Studio Code have good syntax highlighting extensions for
Hugo. A plugin is available for the Prettier code formatter to
automatically manage the formatting of Go template code and is
compatible with Hugo. []{#APP_A.htm#marker-1027157
.calibre9}[]{#APP_A.htm#marker-1027160 .calibre9}

## []{#APP_A.htm#pgfId-1027166}A.4 Troubleshooting {#APP_A.htm#sigil_toc_id_308 .fm-head}

[]{#APP_A.htm#pgfId-1027183 .calibre9}[]{#APP_A.htm#marker-1027177
.calibre9}[]{#APP_A.htm#marker-1027179 .calibre9}While there are a small
number of steps involved in setting up Hugo, it might not be clear from
the error code what the real cause is. Searching for the error message
through Hugo's forums and GitHub repository is of great help in figuring
out solutions to issues. This section describes some common problems you
might encounter when using Hugo with the source code of this book.

### []{#APP_A.htm#pgfId-1027188}A.4.1 Making sure Hugo runs {#APP_A.htm#sigil_toc_id_309 .fm-head1}

[]{#APP_A.htm#pgfId-1027205 .calibre9}[]{#APP_A.htm#marker-1027199
.calibre9}[]{#APP_A.htm#marker-1027201 .calibre9}This error is frequent
if you download Hugo from the source. Make sure your system path has
Hugo. Adding the Hugo binary folder to the system path or moving Hugo to
a folder present in the system path enables the Hugo command line. Also,
Hugo comes as both 32-bit and 64-bit, and to run Hugo, you need to use
the right combination for your operating system.
[]{#APP_A.htm#marker-1027206 .calibre9}[]{#APP_A.htm#marker-1027209
.calibre9}

### []{#APP_A.htm#pgfId-1027215}A.4.2 Installing the right version {#APP_A.htm#sigil_toc_id_310 .fm-head1}

[]{#APP_A.htm#pgfId-1027256 .calibre9}[]{#APP_A.htm#marker-1027226
.calibre9}[]{#APP_A.htm#marker-1027228
.calibre9}[]{#APP_A.htm#marker-1027230 .calibre9}You can
[]{#APP_A.htm#marker-1027235 .calibre9}use the [hugo]{.fm-code-in-text}
[version]{.fm-code-in-text} command to get the current version of Hugo
installed on your machine. This book uses Hugo's 0.91.2 version. The
code associated with this book does not work with older versions. If you
have problems building some code, it is a good idea to switch to Hugo
0.91.2 and try out the sample code with that version. Older versions can
show various errors in the console, including [Unable]{.fm-code-in-text}
[to]{.fm-code-in-text} [find theme]{.fm-code-in-text}
[Directory.]{.fm-code-in-text}[]{#APP_A.htm#marker-1027258
.calibre9}[]{#APP_A.htm#marker-1027260
.calibre9}[]{#APP_A.htm#marker-1027262 .calibre9}

### []{#APP_A.htm#pgfId-1027268}A.4.3 Getting Hugo extended {#APP_A.htm#sigil_toc_id_311 .fm-head1}

[]{#APP_A.htm#pgfId-1027293 .calibre9}[]{#APP_A.htm#marker-1027279
.calibre9}[]{#APP_A.htm#marker-1027281
.calibre9}[]{#APP_A.htm#marker-1027283 .calibre9}Running [hugo
version]{.fm-code-in-text} also prints the flavor of Hugo to the
console. If it is not extended, than you will need to install Hugo
extended. Installing the wrong flavor of Hugo can return weird errors,
including:[]{#APP_A.htm#marker-1027298
.calibre9}[]{#APP_A.htm#marker-1027301
.calibre9}[]{#APP_A.htm#marker-1027303 .calibre9}

``` programlisting
WARN 2021/03/18 11:19:02 found no layout file for "HTML" for "page": 
You should create a template file which matches Hugo Layouts Lookup Rules 
for this combination. 
```

### []{#APP_A.htm#pgfId-1027326}A.4.4 Fixing Hugo Modules {#APP_A.htm#sigil_toc_id_312 .fm-head1}

[]{#APP_A.htm#pgfId-1027345 .calibre9}[]{#APP_A.htm#marker-1027337
.calibre9}[]{#APP_A.htm#marker-1027339
.calibre9}[]{#APP_A.htm#marker-1027341 .calibre9}The local cache for
Hugo Modules can go out of sync with the internet and cause problems. A
common error with Hugo Modules is a checksum mismatch with the following
signature:

``` programlisting
Error: failed to download modules: go command failed: verifying <name>: 
checksum mismatch 
        downloaded: h1:VMeQ8LUaRmZNBFFmM3mf24H8Mf769mF2w6jqZQwxGhA= 
        go.sum:     h1:kX8dz4A9W9OxTHPprCPKRq3Jv2567iAGKNol4UNz8kc= 
```

[]{#APP_A.htm#pgfId-1027387 .calibre9}This mismatch can be caused by a
genuine attack on the module or the module author not being careful with
its content (for example, a force push on Git). Other errors associated
with Hugo Modules include cases where the modules fail to download or
the website fails to launch due to weird errors. In cases like this, we
need to clear the module cache:

``` programlisting
hugo mod clean --all 
```

[]{#APP_A.htm#pgfId-1027426 .calibre9}We should check the new version of
the module and ensure our code is still compatible if the checksum has
changed. []{#APP_A.htm#marker-1027428
.calibre9}[]{#APP_A.htm#marker-1027431
.calibre9}[]{#APP_A.htm#marker-1027433
.calibre9}[]{#APP_A.htm#marker-1027435
.calibre9}[]{#APP_A.htm#marker-1027437 .calibre9}

[]{#APP_B.htm}

# a[]{#APP_B.htm#pgfId-1015831}ppendix B. TOML and JSON for metadata {#APP_B.htm#heading_id_2 .tochead}

[]{#APP_B.htm#pgfId-1011754 .calibre9}While we use YAML throughout the
book for metadata and configuration, TOML is the default in Hugo and
continues to gain popularity. JSON is more straightforward for the
machine to read, and JSON generation is popular in content management
systems that build over Hugo.

## []{#APP_B.htm#pgfId-1011760}B.1 Tom's Obvious, Minimal Language (TOML) {#APP_B.htm#sigil_toc_id_313 .fm-head}

[]{#APP_B.htm#pgfId-1011777 .calibre9}[]{#APP_B.htm#marker-1011771
.calibre9}[]{#APP_B.htm#marker-1011773 .calibre9}TOML is the default
metadata language in Hugo. Most of the community uses this language, and
you will find most of the documentation in TOML.

[]{#APP_B.htm#pgfId-1011848 .calibre9}Unlike YAML, the objective of TOML
is to have clarity of representation (and machine readability) over
human readability. TOML has stricter data types than YAML. For example,
YAML automatically coerces [true]{.fm-code-in-text} and
[false]{.fm-code-in-text} to Boolean. We need to wrap
[true]{.fm-code-in-text} and [false]{.fm-code-in-text} in quotes to
convert these words into strings, but [yes]{.fm-code-in-text} and
[no]{.fm-code-in-text} are directly strings. The YAML parser sniffs the
content for [true]{.fm-code-in-text} and [false]{.fm-code-in-text} to do
the Boolean conversion. This type of "sniffing" magic makes writing a
parser difficult. TOML avoids these cases by requiring all strings to be
enclosed in quotes. TOML is more verbose than YAML. It is string-based
and human-readable and does not have a lot of edge cases. It has
first-class support for dates, which is the only significant data type
difference with YAML.

[]{#APP_B.htm#pgfId-1011883 .calibre9}TOML is not as popular as YAML and
may be intimidating to newcomers. Knowing TOML, however, can help in the
interactions with the Hugo community. TOML uses the equal sign
([=]{.fm-code-in-text}) instead of YAML's colon ([:]{.fm-code-in-text}).
It is sensitive to the new line but not to indentation, unlike YAML. To
place TOML content in the front matter of a page, we need to wrap it
with three plus signs ([+++]{.fm-code-in-text}) and place it at the top
of the page. The three plus signs identify TOML as the content metadata
language. TOML has all the same elements as YAML.

### []{#APP_B.htm#pgfId-1011892}B.1.1 Comments {#APP_B.htm#sigil_toc_id_314 .fm-head1}

[]{#APP_B.htm#pgfId-1011917 .calibre9}[]{#APP_B.htm#marker-1011903
.calibre9}[]{#APP_B.htm#marker-1011905
.calibre9}[]{#APP_B.htm#marker-1011907 .calibre9}TOML, just like YAML,
uses hashes ([\#]{.fm-code-in-text}) for comments. Here's an
example:[]{#APP_B.htm#marker-1011922
.calibre9}[]{#APP_B.htm#marker-1011925
.calibre9}[]{#APP_B.htm#marker-1011927 .calibre9}

``` programlisting
# Comment in TOML 
```

### []{#APP_B.htm#pgfId-1011950}B.1.2 Basic data types {#APP_B.htm#sigil_toc_id_315 .fm-head1}

[]{#APP_B.htm#pgfId-1011975 .calibre9}[]{#APP_B.htm#marker-1011961
.calibre9}[]{#APP_B.htm#marker-1011963
.calibre9}[]{#APP_B.htm#marker-1011965 .calibre9}TOML has properly
defined content types. It does support dates natively and does not have
a [null]{.fm-code-in-text} type. Here's a quick primer:

``` programlisting
key = "value"                    ❶
  
key2= 12.0                       ❷
  
key3= 10                         ❸
  
key4= 2020-01-01T00:00:00Z       ❹
     key5= "hello"               ❺
  
# key6                           ❻
  
key7 = false                     ❼
```

[]{#APP_B.htm#pgfId-1021906}[❶]{.fm-combinumeral} TOML requires strings
to have quotes around them.

[]{#APP_B.htm#pgfId-1021923}[❷]{.fm-combinumeral} Pressing the Enter key
(newline) declares new keys. This has a float value.

[]{#APP_B.htm#pgfId-1021950}[❸]{.fm-combinumeral} TOML recognizes
floats, integers, Booleans, and dates.

[]{#APP_B.htm#pgfId-1021967}[❹]{.fm-combinumeral} TOML understands dates
natively.

[]{#APP_B.htm#pgfId-1021984}[❺]{.fm-combinumeral} No new lines but
indentation allowed.

[]{#APP_B.htm#pgfId-1022006}[❻]{.fm-combinumeral} TOML does not support
null values.

[]{#APP_B.htm#pgfId-1022023}[❼]{.fm-combinumeral} The Boolean type,
false
[]{#APP_B.htm#marker-1022027}[]{#APP_B.htm#marker-1022028}[]{#APP_B.htm#marker-1022029}

### []{#APP_B.htm#pgfId-1012264}B.1.3 Multiline strings {#APP_B.htm#sigil_toc_id_316 .fm-head1}

[]{#APP_B.htm#pgfId-1012309 .calibre9}[]{#APP_B.htm#marker-1012275
.calibre9}[]{#APP_B.htm#marker-1012277
.calibre9}[]{#APP_B.htm#marker-1012279 .calibre9}TOML uses three quotes,
both single like [\'\'\']{.fm-code-in-text} and double like
[\"\"\"]{.fm-code-in-text}, to wrap multiline strings. The strings are
sensitive to newline characters. You can use escape characters like
[\\n]{.fm-code-in-text} for new lines although the escaping only works
within double quotes. The following code snippet provides some examples
for multiline strings:[]{#APP_B.htm#marker-1012314
.calibre9}[]{#APP_B.htm#marker-1012317
.calibre9}[]{#APP_B.htm#marker-1012319 .calibre9}

``` programlisting
key1= """ 
   This is a multiline string 
   where newline characters are valid. 
  
   Multi line strings end by three quote(") symbols 
   """ 
key12= ''' 
  String single quotes, single lines, and multiline display as is. 
  Not an event a backslash(\) can escape text. 
  ''' 
```

### []{#APP_B.htm#pgfId-1012362}B.1.4 Lists {#APP_B.htm#sigil_toc_id_317 .fm-head1}

[]{#APP_B.htm#pgfId-1012381 .calibre9}[]{#APP_B.htm#marker-1012373
.calibre9}[]{#APP_B.htm#marker-1012375
.calibre9}[]{#APP_B.htm#marker-1012377 .calibre9}Lists in TOML can be
declared using square braces. The following shows two ways that you can
add lists:

``` programlisting
key1= ["d", "e", "f"]    ❶
key2= ["d", 
      "e", 
      "f"] 
```

[]{#APP_B.htm#pgfId-1021849}[❶]{.fm-combinumeral} All spacing and
indentation is optional.
[]{#APP_B.htm#marker-1021853}[]{#APP_B.htm#marker-1021854}[]{#APP_B.htm#marker-1021855}

### []{#APP_B.htm#pgfId-1012510}B.1.5 Dictionaries {#APP_B.htm#sigil_toc_id_318 .fm-head1}

[]{#APP_B.htm#pgfId-1012535 .calibre9}[]{#APP_B.htm#marker-1012521
.calibre9}[]{#APP_B.htm#marker-1012523
.calibre9}[]{#APP_B.htm#marker-1012525 .calibre9}In TOML, double square
braces [\[\[\]\]]{.fm-code-in-text} declare dictionaries. All the
key-value pairs after the square braces become a part of the dictionary.
Here's an example:

``` programlisting
[[key12]]                  ❶
   key13= 'value13'        ❷
   key14= [                ❸
       "List \" Item 1", 
       "List Item 2" 
   ] 
   key15 = 10 
```

[]{#APP_B.htm#pgfId-1021653}[❶]{.fm-combinumeral} Dictionary, map, and
key-value pairs

[]{#APP_B.htm#pgfId-1021674}[❷]{.fm-combinumeral} The indentation is
optional.

[]{#APP_B.htm#pgfId-1021691}[❸]{.fm-combinumeral} Order of elements in
the dictionary does not matter.
[]{#APP_B.htm#marker-1021695}[]{#APP_B.htm#marker-1021696}[]{#APP_B.htm#marker-1021697}

### []{#APP_B.htm#pgfId-1012700}B.1.6 Front matter {#APP_B.htm#sigil_toc_id_319 .fm-head1}

[]{#APP_B.htm#pgfId-1012725 .calibre9}[]{#APP_B.htm#marker-1012711
.calibre9}[]{#APP_B.htm#marker-1012713
.calibre9}[]{#APP_B.htm#marker-1012715 .calibre9}The wrapper for TOML
content is three plus signs([+++]{.fm-code-in-text}) in the front
matter. You can see this in the following:

``` programlisting
+++                   ❶
<metadata section> 
  
+++                   ❶
<data section> 
```

[]{#APP_B.htm#pgfId-1021554}[❶]{.fm-combinumeral} Three plus signs wrap
TOML-based front matter.

[]{#APP_B.htm#pgfId-1012803}Revisiting config.yaml

[]{#APP_B.htm#pgfId-1012813 .calibre9}[]{#APP_B.htm#marker-1012814
.calibre9}Here is what the configuration (config.toml) would look like
if written in TOML:[]{#APP_B.htm#marker-1012818
.calibre9}[]{#APP_B.htm#marker-1012821
.calibre9}[]{#APP_B.htm#marker-1012823
.calibre9}[]{#APP_B.htm#marker-1012825
.calibre9}[]{#APP_B.htm#marker-1012827
.calibre9}[]{#APP_B.htm#marker-1012829 .calibre9}

``` programlisting
baseURL = "http://acme.hugoinaction.com/" 
languageCode = "en-us" 
title = "Acme Corporation" 
theme = "eclectic" 
  
[author] 
facebook = "https://facebook.com/test" 
twitter = "https://twitter.com/test" 
email = "contact@example.org" 
name = "Acme Corporation" 
location = "New York" 
phone = "(999) 999-9999" 
hours = "Mon-Fri: 9:00AM - 6:00PM, ET" 
  
[menu] 
  
  [[menu.main]] 
  identifier = "about" 
  name = "About" 
  url = "/about" 
  weight = 100 
  
  [[menu.main]] 
  identifier = "contact" 
  name = "Contact" 
  url = "/contact" 
  weight = 200 
  
[params] 
color = "#4f46e5" 
copyright = "Copyright &copy; 2022 Acme Corporation. All Rights Reserved." 
  
  [[params.footer]] 
  title = "About" 
  content = """ 
  Acme Corporation is the world's leading manufacturer of digital 
  shapes. From squares and circles to triangles and hexagons, we have it 
  all. Browse through our collection of various forms with different 
  thicknesses and line styles. We shape the world. You live in it. 
  """ 
  
  [[params.footer]] 
  title = "Recent Blog Posts" 
  recents = "blog" 
  recentCount = 7.0 
  
  [[params.footer]] 
  title = "Contact Us" 
  contact = true 
```

## []{#APP_B.htm#pgfId-1013222}[]{#APP_B.htm#marker-1019304}B.2 JavaScript Object Notation (JSON) {#APP_B.htm#sigil_toc_id_320 .fm-head}

[]{#APP_B.htm#pgfId-1013245 .calibre9}[]{#APP_B.htm#marker-1013233
.calibre9}[]{#APP_B.htm#marker-1013235 .calibre9}JSON is a standard
information exchange format prevalent on the web. Most services expose
their functionality via JSON-based APIs. The objective of JSON is
machine readability and efficient transmission over the network. Human
readability is a bonus. Although JSON is more human-readable than binary
formats, JSON has strict language rules to allow writing a parser more
easily, which may come from the way of reading JSON. JSON is insensitive
to spaces and new lines and relies on explicit markers for content. To
place JSON content in the front matter of a page, we need to wrap it
with curly braces([{}]{.fm-code-in-text}) and place it at the top of the
page. The curly braces identify JSON as the content metadata language.

### []{#APP_B.htm#pgfId-1013254}[]{#APP_B.htm#marker-1019303}[]{#APP_B.htm#marker-1019302}B.2.1 Basic data types {#APP_B.htm#sigil_toc_id_321 .fm-head1}

[]{#APP_B.htm#pgfId-1013289 .calibre9}[]{#APP_B.htm#marker-1013265
.calibre9}[]{#APP_B.htm#marker-1013267
.calibre9}[]{#APP_B.htm#marker-1013269 .calibre9}JSON supports numbers,
strings, and Booleans. Colons separate keys and values
([:]{.fm-code-in-text}), and commas ([,]{.fm-code-in-text}) separate
elements. For example,

``` programlisting
{                                 ❶
  
"key": "value",                   ❷
  
"key2": 12.0,                     ❸
  
"key3": 10,                       ❹
  
"key4": null,                     ❺
  
"key5": false,                    ❻
  
   "key6": "hello", "key7":7,     ❼
  
"key7":                           ❽
  
     "hello"                      ❾
  
} 
```

[]{#APP_B.htm#pgfId-1020927}[❶]{.fm-combinumeral} JSON groups are
wrapped in curly braces.

[]{#APP_B.htm#pgfId-1020948}[❷]{.fm-combinumeral} All keys in JSON are
strings. All strings have double quotes.

[]{#APP_B.htm#pgfId-1020965}[❸]{.fm-combinumeral} All keys are separated
by commas except the last one. New lines are not important.

[]{#APP_B.htm#pgfId-1020982}[❹]{.fm-combinumeral} JSON uses the number
type for both integers and floats.

[]{#APP_B.htm#pgfId-1020999}[❺]{.fm-combinumeral} A null value is
supported.

[]{#APP_B.htm#pgfId-1021016}[❻]{.fm-combinumeral} Boolean false

[]{#APP_B.htm#pgfId-1021033}[❼]{.fm-combinumeral} All indentation,
spacing and new lines are optional.

[]{#APP_B.htm#pgfId-1021050}[❽]{.fm-combinumeral} JSON is insensitive to
new lines and indentation even in between the key and the value.

[]{#APP_B.htm#pgfId-1021067}[❾]{.fm-combinumeral} The last element
cannot be followed by a comma.
[]{#APP_B.htm#marker-1021071}[]{#APP_B.htm#marker-1021072}[]{#APP_B.htm#marker-1021073}

### []{#APP_B.htm#pgfId-1013716}B.2.2 Multiline strings {#APP_B.htm#sigil_toc_id_322 .fm-head1}

[]{#APP_B.htm#pgfId-1013735 .calibre9}[]{#APP_B.htm#marker-1013727
.calibre9}[]{#APP_B.htm#marker-1013729
.calibre9}[]{#APP_B.htm#marker-1013731 .calibre9}JSON does not have
multiline strings. You should use newline characters instead. Here's an
example:[]{#APP_B.htm#marker-1013736
.calibre9}[]{#APP_B.htm#marker-1013739
.calibre9}[]{#APP_B.htm#marker-1013741 .calibre9}

``` programlisting
{ 
"key1": "Multiline strings need \n (newline characters). 
--> No single quotes or special modes available." 
} 
```

### []{#APP_B.htm#pgfId-1013784}B.2.3 Lists {#APP_B.htm#sigil_toc_id_323 .fm-head1}

[]{#APP_B.htm#pgfId-1013803 .calibre9}[]{#APP_B.htm#marker-1013795
.calibre9}[]{#APP_B.htm#marker-1013797
.calibre9}[]{#APP_B.htm#marker-1013799 .calibre9}Lists in JSON can also
be declared using square braces. For example,

``` programlisting
{ 
  
"key3":  [                 ❶
   1,                      ❷
   "b", 
   "c"                     ❸
   ], 
"key4": ["d", "e", "f"]    ❹
  
} 
```

[]{#APP_B.htm#pgfId-1020670}[❶]{.fm-combinumeral} Lists can be added via
\[\] (square braces).

[]{#APP_B.htm#pgfId-1020691}[❷]{.fm-combinumeral} All list elements need
not be of the same type.

[]{#APP_B.htm#pgfId-1020708}[❸]{.fm-combinumeral} All list elements are
separated by commas except the last element.

[]{#APP_B.htm#pgfId-1020725}[❹]{.fm-combinumeral} All spacing and
indentation is optional.
[]{#APP_B.htm#marker-1020730}[]{#APP_B.htm#marker-1020731}[]{#APP_B.htm#marker-1020732}

### []{#APP_B.htm#pgfId-1014022}B.2.4 Dictionaries {#APP_B.htm#sigil_toc_id_324 .fm-head1}

[]{#APP_B.htm#pgfId-1014041 .calibre9}[]{#APP_B.htm#marker-1014033
.calibre9}[]{#APP_B.htm#marker-1014035
.calibre9}[]{#APP_B.htm#marker-1014037 .calibre9}In JSON, curly braces
create dictionaries. The following code snippet shows how to create
these:

``` programlisting
{ 
  
   "key1": {                ❶
      "key11": "value13",   ❷
      "key12": [            ❸
         "List \" Item 1",  ❹
         "List Item 2" 
      ], 
      "key13": 10           ❺
   }                        ❻
  
}                           ❼
```

[]{#APP_B.htm#pgfId-1020250}[❶]{.fm-combinumeral} Dictionary, map,
key-value pairs

[]{#APP_B.htm#pgfId-1020290}[❷]{.fm-combinumeral} The indentation is
optional.

[]{#APP_B.htm#pgfId-1019728}[❸]{.fm-combinumeral} Order of elements in
the dictionary does not matter.

[]{#APP_B.htm#pgfId-1020331}[❹]{.fm-combinumeral} Quotes in strings can
be escaped.

[]{#APP_B.htm#pgfId-1020348}[❺]{.fm-combinumeral} No comma after the
last item.

[]{#APP_B.htm#pgfId-1020365}[❻]{.fm-combinumeral} Closes the dictionary

[]{#APP_B.htm#pgfId-1020255}[❼]{.fm-combinumeral} Closes the JSON
section
[]{#APP_B.htm#marker-1020383}[]{#APP_B.htm#marker-1020384}[]{#APP_B.htm#marker-1020385}

### []{#APP_B.htm#pgfId-1014328}B.2.5 Front matter {#APP_B.htm#sigil_toc_id_325 .fm-head1}

[]{#APP_B.htm#pgfId-1014347 .calibre9}[]{#APP_B.htm#marker-1014339
.calibre9}[]{#APP_B.htm#marker-1014341
.calibre9}[]{#APP_B.htm#marker-1014343 .calibre9}Brackets in JSON
delineate the front matter. Here's how:[]{#APP_B.htm#marker-1014348
.calibre9}[]{#APP_B.htm#marker-1014351
.calibre9}[]{#APP_B.htm#marker-1014353 .calibre9}

``` programlisting
{ 
 <JSON configuration> 
} 
```

### []{#APP_B.htm#pgfId-1014396}B.2.6 Revisiting the config file {#APP_B.htm#sigil_toc_id_326 .fm-head1}

[]{#APP_B.htm#pgfId-1014415 .calibre9}[]{#APP_B.htm#marker-1014407
.calibre9}[]{#APP_B.htm#marker-1014409
.calibre9}[]{#APP_B.htm#marker-1014411 .calibre9}The JSON version of the
Hugo configuration file is as follows:

``` programlisting
{ 
  "baseURL": "http://acme.hugoinaction.com/", 
  "languageCode": "en-us", 
  "title": "Acme Corporation", 
  "theme": "eclectic", 
  "author": { 
    "facebook": "https://facebook.com/test", 
    "twitter": "https://twitter.com/test", 
    "email": "contact@example.org", 
    "name": "Acme Corporation", 
    "location": "New York", 
    "phone": "(999) 999-9999", 
    "hours": "Mon-Fri: 9:00AM - 6:00PM, ET" 
  }, 
  "menu": { 
    "main": [ 
      { 
        "identifier": "about", 
        "name": "About", 
        "url": "/about", 
        "weight": 100 
      }, 
      { 
        "identifier": "contact", 
        "name": "Contact", 
        "url": "/contact", 
        "weight": 200 
      } 
    ] 
  }, 
  "params": { 
    "color": "#4f46e5", 
    "copyright": "Copyright &copy; 
           ➥ 2022 Acme Corporation. All Rights Reserved.", 
    "footer": [ 
      { 
        "title": "About", 
        "content": "Acme Corporation is the world's leading manufacturer of 
          ➥ digital shapes. From squares and circles to triangles and hexagons,
          ➥ we have it all. Browse through our collection of various forms with
          ➥ different thicknesses and line styles. We shape the world. You live
          ➥ in it." 
      }, 
      { 
        "title": "Recent Blog Posts", 
        "recents": "blog", 
        "recentCount": 7 
      }, 
      { 
        "title": "Contact Us", 
        "contact": true 
      } 
    ] 
  } 
} 
```

[]{#APP_B.htm#pgfId-1015176 .calibre9}Even pure JSON files require curly
braces to mark JSON objects. The objective of JSON is interoperability.
The verbosity comes at a cost to human readability. JSON has a lot of
quotes, strict commas, and brackets, with no regard for new lines.
[]{#APP_B.htm#marker-1015178 .calibre9}[]{#APP_B.htm#marker-1015181
.calibre9}[]{#APP_B.htm#marker-1015183
.calibre9}[]{#APP_B.htm#marker-1015185
.calibre9}[]{#APP_B.htm#marker-1015187 .calibre9}

[]{#APP_C.htm}

# []{#APP_C.htm#pgfId-1013875}appendix C. A GUI-based admin section with Netlify CMS {#APP_C.htm#heading_id_2 .tochead}

[]{#APP_C.htm#pgfId-1011754 .calibre9}Many nontechnical users coming to
the world of static site builders like Hugo miss the admin interface
from where they can create content. This interface typically comes with
a WYSIWYG editor to create content and a one-button upload to upload
images. Because it is hosted, in most cases, we do not need to worry
about setting up the whole website to use this. While GitHub provides
such an interface, it may be incomplete or too complicated for
nontechnical team members. They may not understand the concept of
branching and version management in Git and want to continue with the
simplicity of a web-based GUI to create content.

[]{#APP_C.htm#pgfId-1011760 .calibre9}There are multiple content
management system (CMS) wrappers available in the market to perform this
task. Netlify CMS is among the most popular, is open source, and is
compatible with Hugo. This appendix provides the minimal setup for our
website from code checkpoint chapter-04-03 using Netlify CMS.

## []{#APP_C.htm#pgfId-1011766}C.1 Loading Netlify CMS {#APP_C.htm#sigil_toc_id_327 .fm-head}

[]{#APP_C.htm#pgfId-1011785 .calibre9}[]{#APP_C.htm#marker-1011777
.calibre9}[]{#APP_C.htm#marker-1011779
.calibre9}[]{#APP_C.htm#marker-1011781 .calibre9}The easiest way to add
Netlify CMS is via the unpkg content delivery network (CDN). To get
Netlify CMS, create a subfolder called admin in the static folder.
Inside it, add index.html, which loads Netlify CMS. The following
listing uses a script to get Netlify CMS from unpkg.
[]{#APP_C.htm#marker-1011786 .calibre9}[]{#APP_C.htm#marker-1011789
.calibre9}[]{#APP_C.htm#marker-1011791 .calibre9}

[]{#APP_C.htm#pgfId-1011848}Listing C.1 HTML content for Netlify CMS
(static/admin/index.html)

``` programlisting
<!doctype html> 
<html> 
<head> 
  <meta charset="utf-8" /> 
  <meta name="viewport" 
        content="width=device-width, initial-scale=1.0" /> 
  <title>Content Manager</title> 
</head> 
<body> 
  <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"> 
  </script> 
</body> 
</html> 
```

## []{#APP_C.htm#pgfId-1012102}C.2 Configuring Netlify CMS {#APP_C.htm#sigil_toc_id_328 .fm-head}

[]{#APP_C.htm#pgfId-1012121 .calibre9}[]{#APP_C.htm#marker-1012113
.calibre9}[]{#APP_C.htm#marker-1012115
.calibre9}[]{#APP_C.htm#marker-1012117 .calibre9}Next, add the Netlify
CMS configuration. The following listing shows a sample configuration.
In this configuration, we specify where to create Markdown files and the
look for the front matter contents.

[]{#APP_C.htm#pgfId-1012177}Listing C.2 Netlify CMS Configuration to
load the Acme Corporation website

``` programlisting
backend: 
  name: github 
  repo: hugoinaction/hugoinaction              ❶
  branch: chapter-04-03                        ❷
publish_mode: editorial_workflow               ❸
media_folder: "static/images/uploads"          ❹ 
public_folder: "/images/uploads"               ❺
collections:                                   ❻
  - name: "blog" 
    label: "Blog" 
    folder: "content/blog"                     ❼
    create: true                               ❽
    slug: "{{slug}}"                           ❾
    fields:                                    ❿
      - {label: "Title", name: "title", 
      widget: "string"} 
      - {label: "Publish Date", name: "date", 
      widget: "datetime"} 
      - {label: "Body", name: "body", 
      widget: "markdown"} 
  - name: "news" 
    label: "News" 
    folder: "content/news"                     ⓫
    create: true                               ⓬
    slug: "{{slug}}"                           ⓭
    fields:                                    ⓮
      - {label: "Title", name: "title", 
      widget: "string"} 
      - {label: "Publish Date", name: "date", 
      widget: "datetime"} 
      - {label: "Body", name: "body", 
      widget: "markdown"} 
```

[]{#APP_C.htm#pgfId-1017454}[❶]{.fm-combinumeral} Path to your GitHub
repository

[]{#APP_C.htm#pgfId-1017494}[❷]{.fm-combinumeral} The branch to use in
Netlify CMS

[]{#APP_C.htm#pgfId-1017511}[❸]{.fm-combinumeral} The workflow to use

[]{#APP_C.htm#pgfId-1017528}[❹]{.fm-combinumeral} Path to store the
media files

[]{#APP_C.htm#pgfId-1017545}[❺]{.fm-combinumeral} The src attribute for
the uploaded media begins with /images/uploads.

[]{#APP_C.htm#pgfId-1017562}[❻]{.fm-combinumeral} A collection of
Netlify CMS corresponds to a section or branch bundle in Hugo.

[]{#APP_C.htm#pgfId-1017586}[❼]{.fm-combinumeral} Each collection needs
a target folder location.

[]{#APP_C.htm#pgfId-1017603}[❽]{.fm-combinumeral} Allows file creation,
which causes a pull request

[]{#APP_C.htm#pgfId-1017620}[❾]{.fm-combinumeral} Specifies the file
name

[]{#APP_C.htm#pgfId-1017637}[❿]{.fm-combinumeral} Adds the fields for
the front matter

[]{#APP_C.htm#pgfId-1017654}[⓫]{.fm-combinumeral} Each collection needs
a target folder location.

[]{#APP_C.htm#pgfId-1017671}[⓬]{.fm-combinumeral} Allows file creation,
which causes a pull request

[]{#APP_C.htm#pgfId-1017688}[⓭]{.fm-combinumeral} Specifies the file
name

[]{#APP_C.htm#pgfId-1017459}[⓮]{.fm-combinumeral} Adds the fields for
the front matter

[]{#APP_C.htm#pgfId-1012913 .calibre9}Note that the editorial workflow
in Netlify CMS adds support for drafts and previews for content before
going live. Also Netlify CMS stores media files in the repository under
static/images/uploads. Netlify CMS does not support Hugo Pipes or page
bundles.

[]{#APP_C.htm#pgfId-1012919 .calibre9}Before we can use the code in the
previous listing, we need to allow the Netlify CMS to connect with
GitHub. To be able to authenticate with GitHub, GitHub requires a
server. Because we do not want to manage a server with the Jamstack, we
can use Netlify's GitHub OAuth support for connecting to GitHub.
(Netlify CMS supports other OAuth brokers as well.)

[]{#APP_C.htm#pgfId-1012925 .calibre9}Netlify is the default OAuth
backend for GitHub support in Netlify CMS, so we do not need to update
any configuration. We can start by going to the GitHub Developer
Settings page at
[[https://github.com/settings/developers](https://github.com/settings/developers){.url}]{.fm-hyperlink}.
Figure C.1 shows what the page looks like.

![APPC_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/APPC_F01_Jain.png){.calibre1}\

[]{#APP_C.htm#pgfId-1018665}Figure C.1 Creating a new OAuth Application
in GitHub Developer Settings

[]{#APP_C.htm#pgfId-1012942 .calibre9}On the next page, we need to
provide the authorization callback URL as
[[https://api.netlify.com/auth/done](https://api.netlify.com/auth/done){.url}]{.fm-hyperlink}.
We can fill the rest of the fields with any details of our application
(figure C.2).

![APPC_F02_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/APPC_F02_Jain.png){.calibre1}\

[]{#APP_C.htm#pgfId-1018708}Figure C.2 Provide the details of the OAuth
application to GitHub, including the Netlify endpoint, to register the
application for authentication.

[]{#APP_C.htm#pgfId-1012973 .calibre9}Once done, we need to copy the
client ID, then click Generate a New Client Secret (figure C.3), and
paste the client secret in the box that appears, which we need to supply
to Netlify (figure C.4).

![APPC_F03_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/APPC_F03_Jain.png){.calibre1}\

[]{#APP_C.htm#pgfId-1018743}Figure C.3 Getting the client ID and
creating a client secret from the GitHub Developer Settings

![APPC_F04_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/APPC_F04_Jain.png){.calibre1}\

[]{#APP_C.htm#pgfId-1018777}Figure C.4 Getting the client secret for
Netlify

[]{#APP_C.htm#pgfId-1013027 .calibre9}Now we can add this information to
Netlify (figure C.5) by completing the following steps:

1.  []{#APP_C.htm#pgfId-1013047 .calibre9}Go to Site Settings \> Access
    Control \> OAuth.

2.  []{#APP_C.htm#pgfId-1013061 .calibre9}In the Authentication
    Providers section, select Install Provider.

3.  []{#APP_C.htm#pgfId-1013071 .calibre9}Select GitHub and fill in the
    Client ID and Client Secret fields, then click Save.

![APPC_F05_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/APPC_F05_Jain.png){.calibre1}\

[]{#APP_C.htm#pgfId-1018811}Figure C.5 Adding GitHub as an
authentication provider for Netlify. The authentication Provider allows
logins from GitHub to work in the Netlify CMS.

[]{#APP_C.htm#pgfId-1013091 .calibre9}Now we can navigate to
https:[//]{.fm-hyperlink}localhost:1313/admin to be greeted with Netlify
CMS after we log in. []{#APP_C.htm#marker-1013108
.calibre9}[]{#APP_C.htm#marker-1013111
.calibre9}[]{#APP_C.htm#marker-1013113 .calibre9}

## []{#APP_C.htm#pgfId-1013119}C.3 Using Netlify CMS {#APP_C.htm#sigil_toc_id_329 .fm-head}

[]{#APP_C.htm#pgfId-1013138 .calibre9}[]{#APP_C.htm#marker-1013130
.calibre9}[]{#APP_C.htm#marker-1013132
.calibre9}[]{#APP_C.htm#marker-1013134 .calibre9}In the Netlify CMS UI,
you can see all the News and Blog section contents and edit them. We can
go to the Media tab to manage assets or head over to the Workflow tab to
manage the editorial workflows (figure C.6).

![APPC_F06_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/APPC_F06_Jain.png){.calibre1}\

[]{#APP_C.htm#pgfId-1018852}Figure C.6 Netlify CMS provides a graphic
list of all the content within the website and has tabs for managing
assets and the editorial workflow (draft, review, and publish
graphically).

[]{#APP_C.htm#pgfId-1013153 .calibre9}Netlify CMS provides a graphical
editor for all the website content with support for live preview, major
Markdown features, and front matter entries (figure C.7).

![APPC_F07_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/APPC_F07_Jain.png){.calibre1}\

[]{#APP_C.htm#pgfId-1018886}Figure C.7 Netlify CMS provides a graphical
environment for handling Markdown.

[]{#APP_C.htm#pgfId-1013183 .calibre9}The Netlify CMS workflows map to
GitHub automatically. User management happens via permissions to the
repository on GitHub. Netlify CMS creates pull requests for new content,
marks the various stages of the workflow as tags on GitHub, and merges
the pull request during the publish action (figure C.8).

![APPC_F08_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/APPC_F08_Jain.png){.calibre1}\

[]{#APP_C.htm#pgfId-1018927}Figure C.8 Managing the editorial workflow
in Netlify CMS. Netlify CMS provides complete control over the editorial
process both within its GUI and within GitHub, creating pull requests,
updating tags and merging them from its UI, and synching the state from
GitHub if we take action there.

[]{#APP_C.htm#pgfId-1013213 .calibre9}With Netlify CMS, we can hide the
complexity of Git and Markdown from the less technical members of the
team but keep the flexibility the developers need to provide outstanding
performance and complete customization for the website.
[]{#APP_C.htm#marker-1013229 .calibre9}[]{#APP_C.htm#marker-1013232
.calibre9}[]{#APP_C.htm#marker-1013234 .calibre9}

[]{#APP_D.htm}

# []{#APP_D.htm#pgfId-1022937}appendix D. The Go template language {#APP_D.htm#heading_id_2 .tochead}

[]{#APP_D.htm#pgfId-1011754 .calibre9}The Go template language is a
language specifically designed to fill templates for the Go programming
language. Hugo builds upon the Go template language and adds more
variables and functions to provide additional functionality. This
appendix provides an overview of the Go template language features,
which form the building blocks of the website template.

[]{#APP_D.htm#pgfId-1011760 .calibre9}The Hugo documentation provides a
ready reference for all the possible variables and functions that exist
in Hugo at
[[https://gohugo.io/variables/](https://gohugo.io/variables/){.url}]{.fm-hyperlink}
and
[[https://gohugo.io/functions/](https://gohugo.io/functions/){.url}]{.fm-hyperlink},
respectively. Note that this appendix's code resources are present as a
part of chapter 5 and chapter 6 resources for this book.

## []{#APP_D.htm#pgfId-1011768}D.1 Basic usage {#APP_D.htm#sigil_toc_id_330 .fm-head}

[]{#APP_D.htm#pgfId-1011778 .calibre9}Accessing the Go template language
inside Hugo requires two curly braces, [{{\...}}]{.fm-code-in-text},
anywhere within the template file. Hugo parses the files looking for
these template markers and executes the Go Template script within these
tags. All HTML and text apart from that inside the braces is considered
as data for Hugo. Each page in Hugo is rendered separately in parallel
to others. We can share pieces of generated content across pages. All
pages have access to all other pages via variables.

### []{#APP_D.htm#pgfId-1011793}D.1.1 Comments {#APP_D.htm#sigil_toc_id_331 .fm-head1}

[]{#APP_D.htm#pgfId-1011810 .calibre9}[]{#APP_D.htm#marker-1011804
.calibre9}[]{#APP_D.htm#marker-1011806 .calibre9}Although we are free to
use HTML comments in Hugo templates, in development mode, Hugo passes on
these comments to the generated HTML. Minification can remove them.
Template authors should use comments to guide the JavaScript or CSS
developers. If we use template code inside an HTML comment, Hugo will
execute it. We can also use Hugo comments that are present only in the
file and not in the generated HTML. These are ideal for template
authors. The following listing provides some ways to use comments.

[]{#APP_D.htm#pgfId-1011871}Listing D.1 Comments in various forms

``` programlisting
<!-- A HTML comment. Renders unless stripped during minify --> 
  
  
{{/* A Hugo comment. Does not render at all */}} 
  
  
<!-- Even though its result might be commented, {{.}} is still executed --> 
```

### []{#APP_D.htm#pgfId-1011955}D.1.2 Whitespace removal {#APP_D.htm#sigil_toc_id_332 .fm-head1}

[]{#APP_D.htm#pgfId-1012020 .calibre9}[]{#APP_D.htm#marker-1011966
.calibre9}[]{#APP_D.htm#marker-1011968 .calibre9}Hugo templates turn
into rendered content on processing, but the surrounding whitespace,
which we might have used for formatting, is left behind. We can begin a
template with [{{-]{.fm-code-in-text} for trimming whitespace to the
left and [-}}]{.fm-code-in-text} for cutting spaces to the right in the
executed template code. Minification also shrinks the whitespaces,
leaving only one as understood by HTML. It is a personal choice whether
to care about whitespace during development and trimming to properly
show generated output or to use a browser plugin to beautify HTML during
development and let the minifier clean it up in production. The benefit
of trimming inline []{#APP_D.htm#marker-1011993 .calibre9}with
[]{#APP_D.htm#marker-1011999 .calibre9}the [{{-]{.fm-code-in-text} or
the [-}}]{.fm-code-in-text} tags is better control over when the spaces
get trimmed to get better looking debugging output. Because it does not
matter in production and with browser plugins, we can reformat the
result the way we want, and many users don't care to have clean spacing
in the debugging output. []{#APP_D.htm#marker-1012025
.calibre9}[]{#APP_D.htm#marker-1012028 .calibre9}

### []{#APP_D.htm#pgfId-1012034}D.1.3 Errors {#APP_D.htm#sigil_toc_id_333 .fm-head1}

[]{#APP_D.htm#pgfId-1012051 .calibre9}[]{#APP_D.htm#marker-1012045
.calibre9}[]{#APP_D.htm#marker-1012047 .calibre9}Hugo reports errors to
the console and the web interface if we have improper template code
(figure D.1). For example, if we use opening template brackets and don't
close them, Hugo complains about using unknown variables in the template
parameters. With live reload support in development mode, as soon as we
fix the error and save the file, the website goes back to normal. The
speed of Hugo compilation enables instant gratification for template
developers. Hugo renders the page as soon as the developer completes its
code. []{#APP_D.htm#marker-1012052
.calibre9}[]{#APP_D.htm#marker-1012055 .calibre9}

![APPD_F01_Jain](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/APPD_F01_Jain.png){.calibre1}\

[]{#APP_D.htm#pgfId-1028031}Figure D.1 Error reporting for Hugo
templates. When we use incorrect template code, Hugo provides us with
the exact line number where things went wrong during rendering.

## []{#APP_D.htm#pgfId-1012071}D.2 Variables {#APP_D.htm#sigil_toc_id_334 .fm-head}

[]{#APP_D.htm#pgfId-1012102 .calibre9}[]{#APP_D.htm#marker-1012096
.calibre9}[]{#APP_D.htm#marker-1012098 .calibre9}Hugo provides a number
of built-in variables. If you want, you can also define your own custom
variables. This section looks at both predefined and custom variables.

### []{#APP_D.htm#pgfId-1012107}D.2.1 Built-in variables {#APP_D.htm#sigil_toc_id_335 .fm-head1}

[]{#APP_D.htm#pgfId-1012168 .calibre9}[]{#APP_D.htm#marker-1012118
.calibre9}[]{#APP_D.htm#marker-1012120
.calibre9}[]{#APP_D.htm#marker-1012122 .calibre9}Everything that gets
rendered as a context variable is accessible via the dot
([.]{.fm-code-in-text}) operator in the template. The context variable
can be loosely compared []{#APP_D.htm#marker-1012137 .calibre9}to the
[this]{.fm-code-in-text} variable in an object-oriented language. We can
override (change) the context variable in a code block using statements
like [with]{.fm-code-in-text} and [range]{.fm-code-in-text}.

[]{#APP_D.htm#pgfId-1012220 .calibre9}The top-level context variable
[]{#APP_D.htm#marker-1012179 .calibre9}contains two useful subvariables:
the global [site]{.fm-code-in-text} and the page-level
[.Page]{.fm-code-in-text} variables. Variables like
[.File]{.fm-code-in-text} provide filesystem information, and
[.GitInfo]{.fm-code-in-text} gets the information from the Git version
control system. Apart from these, pages such as sitemaps and taxonomies
have separate variables.

[]{#APP_D.htm#pgfId-1012271 .calibre9}The [site]{.fm-code-in-text}
variable has []{#APP_D.htm#marker-1012240 .calibre9}all the properties
that are global to the website. We can use
[site.Description]{.fm-code-in-text} to access the website description
and [site.Title]{.fm-code-in-text} to access the website title. We can
also use the global site variable to access all the Hugo website data
including sections, menus, taxonomies, parameters with the
configuration, and other features like data templates and multilingual
content, which we have not gotten to yet. The [site]{.fm-code-in-text}
variable is []{#APP_D.htm#marker-1012276 .calibre9}also available as a
global variable in all templates.

[]{#APP_D.htm#pgfId-1012330 .calibre9}The [.Page]{.fm-code-in-text}
variables have []{#APP_D.htm#marker-1012297 .calibre9}access to the
page's front matter, its content, and the generated metadata about the
page such as the summary and the reading time. It has navigational
[]{#APP_D.htm#marker-1012303 .calibre9}variables
[]{#APP_D.htm#marker-1012309 .calibre9}like the
[NextInSection]{.fm-code-in-text} and [Next]{.fm-code-in-text} and
navigation support for going through the section hierarchy that leads to
the current page.

[]{#APP_D.htm#pgfId-1012365 .calibre9}The site and page variables are
available outside of the context variable as [\$.Site]{.fm-code-in-text}
and [\$.Page]{.fm-code-in-text}. These can be useful to get access to
information from a deeply nested location within the template. The site
variables are available globally as [site]{.fm-code-in-text} as well.
[]{#APP_D.htm#marker-1012370 .calibre9}[]{#APP_D.htm#marker-1012373
.calibre9}[]{#APP_D.htm#marker-1012375 .calibre9}

### []{#APP_D.htm#pgfId-1012381}D.2.2 Custom variables {#APP_D.htm#sigil_toc_id_336 .fm-head1}

[]{#APP_D.htm#pgfId-1012426 .calibre9}[]{#APP_D.htm#marker-1012392
.calibre9}[]{#APP_D.htm#marker-1012394
.calibre9}[]{#APP_D.htm#marker-1012396 .calibre9}We can declare our
custom variables to live within a part of a page or the whole page.
These can have values based on computation using conditionals and
functions from the various in-build variables. All custom variables in
Hugo start with a dollar sign ([\$]{.fm-code-in-text}). We can declare a
custom variable using the [:=]{.fm-code-in-text} operator and modify its
value using the [=]{.fm-code-in-text} operator. The following listing
shows different ways to customize variables.
[]{#APP_D.htm#marker-1012431 .calibre9}[]{#APP_D.htm#marker-1012434
.calibre9}[]{#APP_D.htm#marker-1012436
.calibre9}[]{#APP_D.htm#marker-1012438
.calibre9}[]{#APP_D.htm#marker-1012440 .calibre9}

[]{#APP_D.htm#pgfId-1012497}Listing D.2 Defining a custom variable

``` programlisting
{{$mycustom := site.Title}} 
... 
  
{{$mycustom = .Page.Title}}      ❶
```

[]{#APP_D.htm#pgfId-1027612}[❶]{.fm-combinumeral} Overrides \$mycustom

## []{#APP_D.htm#pgfId-1012591}D.3 Data types {#APP_D.htm#sigil_toc_id_337 .fm-head}

[]{#APP_D.htm#pgfId-1012614 .calibre9}[]{#APP_D.htm#marker-1012602
.calibre9}[]{#APP_D.htm#marker-1012604 .calibre9}Hugo variables can have
dictionaries, time objects, and slices, apart from the strings,
Booleans, floating-point, and integral numbers. Dictionaries are
key-value pairs, and slices are lists of objects (like arrays). Time
objects are types that represent a date and a time value. Slices have
read/write support; dictionaries are read-only. The following listing
shows how we can render a regular variable on a page by placing it in
double curly braces ([{{\...}}]{.fm-code-in-text}).

[]{#APP_D.htm#pgfId-1012674}Listing D.3 Data types

``` programlisting
Integer: {{2}} 
Float: {{3.14}} 
Boolean: {{false}} 
String: {{"hello"}} 
  
Slice: {{slice "foo" "bar" "buzz"}} 
Dict: {{dict "key1" "val1" "w" 10 "h" 20}} 
Time: {{time "2020-01-01T00:00:00+08:00"}} 
```

[]{#APP_D.htm#pgfId-1012875 .calibre9}Hugo also has
[]{#APP_D.htm#marker-1012848 .calibre9}a [scratch]{.fm-code-in-text}
variable to create a scratch pad that can store content (listing D.4).
We use scratch pads to store and manipulate all data types and to build
editable dictionaries and slices. Note that a scratch pad is not needed
on a daily basis, but these can be extremely useful when doing
complicated calculations. For example, templates used for creating tag
clouds or usage graphs may need a []{#APP_D.htm#marker-1012864
.calibre9}scratch pad. (We do not use the [scratch]{.fm-code-in-text}
variable anywhere in the book.)

[]{#APP_D.htm#pgfId-1012935}Listing D.4 Adding scratch pads

``` programlisting
{{ $scratch := newScratch }} 
{{ $scratch.Set "message" "Hello" }} 
Scratch: {{ $scratch }} 
Getter: {{ $scratch.Get "message" }} 
  
{{ $scratch.Add "message" " World" }}           ❶
Updated: {{$scratch.Get "message"}} 
  
{{ $scratch.SetInMap                            ❷
       "message" "english" "Hello World" }}     ❷
{{ $scratch.SetInMap "message" "french" "Bonjour le monde" }} 
```

[]{#APP_D.htm#pgfId-1027448}[❶]{.fm-combinumeral} Scratch.Add appends a
string, adds a number, and inserts a message in a slice.

[]{#APP_D.htm#pgfId-1027469}[❷]{.fm-combinumeral} We can also create a
dictionary in a scratch pad.

[]{#APP_D.htm#pgfId-1013165 .calibre9}Each page and shortcode rendering
context in Hugo comes with a central scratch pad that we can access via
[.Scratch]{.fm-code-in-text}. Hugo also has resources (including images,
CSS, JavaScript, PDF files) that we can use as data types.
[]{#APP_D.htm#marker-1013176 .calibre9}[]{#APP_D.htm#marker-1013179
.calibre9}

## []{#APP_D.htm#pgfId-1013185}[]{#APP_D.htm#marker-1026206}[]{#APP_D.htm#marker-1026205}D.4 Functions for operators {#APP_D.htm#sigil_toc_id_338 .fm-head}

[]{#APP_D.htm#pgfId-1013228 .calibre9}[]{#APP_D.htm#marker-1013196
.calibre9}[]{#APP_D.htm#marker-1013198 .calibre9}Hugo uses functions for
all operations. These have spaces instead of brackets or commas as
delimiters. Most programming languages declare a function as [add(5,
3)]{.fm-code-in-text}, for example, but Hugo writes this as [{{add 5
3}}]{.fm-code-in-text}. We can also use curly braces for nested
functions. Go Template code is present in the double curly braces
([{{..}}]{.fm-code-in-text}). Listing D.5 uses operators as functions.

[]{#APP_D.htm#pgfId-1013237 .calibre9}The data sources for functions
vary. These can be user-generated (the content, front matter,
configuration, etc.), tool or system information (Git information,
filesystem, date), or Hugo-generated (the summary, word count, or
similar page list).

[]{#APP_D.htm#pgfId-1013294}Listing D.5 Operators as functions

``` programlisting
Boolean Functions 
5 > 3 : {{lt 5 3}} 
5 < 3 : {{gt 5 3}} 
5 ≥ 3 : {{ge 5 3}} 
5 ≤ 3 : {{le 5 3}} 
5 = 3 : {{eq 5 3}} 
5 ≠ 3 : {{ne 5 3}} 
  
Logical Functions 
true and false : {{and true false}} 
true or false : {{or true false}} 
not true : {{not true}} 
  
Arithmetic Functions 
2 + 3 : {{add 2 3}} 
2 - 3 : {{sub 2 3}} 
2 x 3 : {{mul 2 3}} 
2 ÷ 3 : {{div 2 3}}           ❶
2 ÷ 3 : {{div 2.0 3}}         ❷
2 % 3 : {{mod 2 3}} 
2 % 3? : {{modBool 2 3}} 
```

[]{#APP_D.htm#pgfId-1027346}[❶]{.fm-combinumeral} Int types

[]{#APP_D.htm#pgfId-1027351}[❷]{.fm-combinumeral} Float types

[]{#APP_D.htm#pgfId-1013926 .calibre9}These operators come in handy with
things like post counts, taxonomy counts, and list lengths. Developers
use Booleans extensively with [if/else]{.fm-code-in-text} and
[with]{.fm-code-in-text} statements.

::: fm-sidebar-block
[]{#APP_D.htm#pgfId-1028070 .calibre9}[]{#APP_D.htm#marker-1026203}Int
vs. float

[]{#APP_D.htm#pgfId-1028071}Integer versus floating-point types may feel
new to many developers from a language like JavaScript, where there is a
single number type. Many languages closer to the hardware (and therefore
faster) need to make a tradeoff when storing numbers. Suppose they
represent numbers as plain integers in RAM and truncate the part after
the decimal in a float. In that case, those integers occupy
significantly less storage than the counterparts, where this additional
information needs to be stored. This is, in many cases, zero. Therefore,
they expose two data types for their users: integers for integral
numbers and floating-point numbers for decimals.

\

[]{#APP_D.htm#pgfId-1028072}There is truncation with integers, and if we
need decimal support, we can manually convert a number to a floating
point. For this, Hugo offers []{#APP_D.htm#marker-1028073}the
[]{#APP_D.htm#marker-1026202}*type cast* function
[float]{.fm-code-in-text1} (for example, [{{float
1}}]{.fm-code-in-text1} converts []{#APP_D.htm#marker-1028074}the
integer 1 to a float 1.0).

\

[]{#APP_D.htm#pgfId-1028075}We call floats floating-point numbers
because they do not represent the numbers as two individual integers in
RAM. While that naive approach works for smaller numbers like 1.0, this
would be prohibitively expensive for numbers like 0.6666666666666666,
which we got in listing D.5. Floating-point numbers follow the IEEE 754
specification, which allows them to represent a vast range of numbers.
They have a tradeoff for accuracy versus precision and weird edge cases,
some of which we sometimes encounter in our daily use. Most major
programming languages, from C to JavaScript, use floating-point numbers,
and so does Hugo.
[]{#APP_D.htm#marker-1028076}[]{#APP_D.htm#marker-1028077}
:::

## []{#APP_D.htm#pgfId-1014010}D.5 Nesting and piping {#APP_D.htm#sigil_toc_id_339 .fm-head}

[]{#APP_D.htm#pgfId-1014029 .calibre9}[]{#APP_D.htm#marker-1014021
.calibre9}[]{#APP_D.htm#marker-1014023
.calibre9}[]{#APP_D.htm#marker-1014025 .calibre9}Hugo supports both
nesting and piping functions, not just for the operators. With nesting
and piping, we can get the advantage of obtaining multiple function
calls in one line of code and the removal of needless variable
creations. The following listing shows some examples.

[]{#APP_D.htm#pgfId-1014085}Listing D.6 Nesting and piping

``` programlisting
Nested Functions 
5/(2 + (3 x 2.0)) : {{div 5 (add 2 (mul 3 2.0))}} 
  
Piped Functions 
5/(2 + (3 x 2.0)) : {{mul 3 2.0 | add 2 | div 5}} 
  
Nested + Piped Hybrid 
5/(2 + (3 x 2.0)) : {{div 5 (mul 3 2.0 | add 2)}} 
```

[]{#APP_D.htm#pgfId-1014463 .calibre9}In nested functions, we take an
inner function call, surround it with parentheses
([(\...)]{.fm-code-in-text}), and then use that where we would have used
its output. Hugo processes the inner function first and passes its
result to the outer one.

[]{#APP_D.htm#pgfId-1014478 .calibre9}In the case of piped function
calls, we have a pipe operator ([\|]{.fm-code-in-text}) that takes the
function's output before the operator and passes the output as the last
argument to the function after the pipe operator. Using the pipe
operator is more restricted than a nested function call because we
cannot pass the output before the pipe to the first argument. Also,
piped function calls cannot have multiple nested expressions. For
example, (2 + (3 x 2.0)) / 5 and 5 / ((2 x 3.0) + (3 x 2.0)) cannot be
represented as a single piped expression without nesting.

[]{#APP_D.htm#pgfId-1014493 .calibre9}Nested and piped expressions can
live simultaneously in a statement as in the hybrid example shown in
listing D.6. The developer can chose whether to use nested or piped
formats. Piped expressions are more readable than nested expressions
when transforming files and strings, especially with functions that take
single arguments. Because template generation involves many string
manipulations, pipes are readily available and extensively used in Hugo.
[]{#APP_D.htm#marker-1014495 .calibre9}[]{#APP_D.htm#marker-1014498
.calibre9}[]{#APP_D.htm#marker-1014500 .calibre9}

## []{#APP_D.htm#pgfId-1014506}D.6 Conditional expressions {#APP_D.htm#sigil_toc_id_340 .fm-head}

[]{#APP_D.htm#pgfId-1014539 .calibre9}[]{#APP_D.htm#marker-1014517
.calibre9}[]{#APP_D.htm#marker-1014519 .calibre9}Hugo supports
conditional expressions for branching code. The following listing uses a
conditional expression with the [if/else]{.fm-code-in-text} statement.
The [else]{.fm-code-in-text} statement is optional.

[]{#APP_D.htm#pgfId-1014599}Listing D.7 Condition via
[if/else]{.fm-code-in-listingcaption}

``` programlisting
{{if $condition}} 
  {{$condition}}  
is true. 
{{else}} 
  {{$condition}}  
is false. 
{{end}} 
```

[]{#APP_D.htm#pgfId-1014717 .calibre9}We can also use
[with]{.fm-code-in-text} like [if]{.fm-code-in-text} for conditional
branching, especially if we need existence checks. The following listing
shows an example of a condition using a [with]{.fm-code-in-text}
statement to override context.

[]{#APP_D.htm#pgfId-1014777}Listing D.8 Condition via
[with]{.fm-code-in-listingcaption}

``` programlisting
{{with $condition}} 
  {{.}}  
is the value of the condition 
{{else}} 
   
Condition is not defined. 
{{end}} 
```

[]{#APP_D.htm#pgfId-1014871 .calibre9}Hugo also provides a
[{{isset]{.fm-code-in-text} [\<variable\>]{.fm-code-in-text}
[\<key\>}}]{.fm-code-in-text} function to []{#APP_D.htm#marker-1014860
.calibre9}check the existence of a variable. We can use this in the
[if]{.fm-code-in-text} statement.

[]{#APP_D.htm#pgfId-1014972 .calibre9}Both [if]{.fm-code-in-text} and
[with]{.fm-code-in-text} have different use cases;
[with]{.fm-code-in-text} is also a conditional like
[if]{.fm-code-in-text} but only works for existence checks. The
[with]{.fm-code-in-text} statement switches the context variable
[.]{.fm-code-in-text} to the selected variable. Many Hugo variables are
deeply nested, and [with]{.fm-code-in-text} allows us to focus on
generating HTML for a particular variable and providing the fallback
HTML in []{#APP_D.htm#marker-1014951 .calibre9}the
[{{else}}]{.fm-code-in-text} block. All the front matter variables and
most configuration variables are optional in Hugo, and if the content
author does not provide them, Hugo will not set the corresponding
property. Although printing an empty property would not fail the build
process, we might generate blank HTML tags in those cases, which would
not look good. The [with]{.fm-code-in-text} statement comes in handy in
dealing with these cases.

[]{#APP_D.htm#pgfId-1014994 .calibre9}Hugo also supports
[]{#APP_D.htm#marker-1014983 .calibre9}the [cond]{.fm-code-in-text}
function. This gives us a straightforward way to provide a value based
on a condition; for example,[]{#APP_D.htm#marker-1014999
.calibre9}[]{#APP_D.htm#marker-1015002 .calibre9}

``` programlisting
{{cond (eq $count 1) "page" "pages"}} 
```

## []{#APP_D.htm#pgfId-1015063}[]{#APP_D.htm#marker-1026301}[]{#APP_D.htm#marker-1026300}D.7 Loops {#APP_D.htm#sigil_toc_id_341 .fm-head}

[]{#APP_D.htm#pgfId-1015086 .calibre9}[]{#APP_D.htm#marker-1015074
.calibre9}[]{#APP_D.htm#marker-1015076 .calibre9}Loops are available in
Hugo for navigating through slices. Hugo provides a
[range]{.fm-code-in-text} function to []{#APP_D.htm#marker-1015091
.calibre9}loop through some variables as the following listing shows.

[]{#APP_D.htm#pgfId-1015152}Listing D.9 Ranges for loops in the Go HTML
templates

``` programlisting
All website pages: 
{{range site.Pages}} 
* {{.Title}} 
{{end}} 
```

[]{#APP_D.htm#pgfId-1015250 .calibre9}Just like
[with]{.fm-code-in-text}, the [range]{.fm-code-in-text} function also
switches the context. The [.]{.fm-code-in-text} variable changes to the
variable within the slice, and we can then access its contents. We can
carry forward any variables from the previous context by assigning them
to custom variables. For example, if we need the website title inside of
the range, we need to store it in a variable like
[\$title]{.fm-code-in-text} to []{#APP_D.htm#marker-1015255
.calibre9}access it as the following listing shows.

[]{#APP_D.htm#pgfId-1015316}Listing D.10 Keeping variables out of
context for ranges

``` programlisting
{{$title := site.Title}} 
{{range site.Pages}} 
* {{.Title}} @ {{$title}} 
{{end}} 
```

[]{#APP_D.htm#pgfId-1015420 .calibre9}If we do not want to override the
context ([.]{.fm-code-in-text}), we can provide a variable to range. The
following listing shows this approach.

[]{#APP_D.htm#pgfId-1015486}Listing D.11 Ranges without overriding
context

``` programlisting
{{range $page := site.Pages}} 
* {{$page.Title}} @ {{site.Title}} 
{{end}} 
```

[]{#APP_D.htm#pgfId-1015590 .calibre9}The [range]{.fm-code-in-text}
function can []{#APP_D.htm#marker-1015601 .calibre9}also provide an
index for an array and the key of a dictionary. The following listing
shows this use.

[]{#APP_D.htm#pgfId-1015662}Listing D.12 Getting the loop index from the
range

``` programlisting
{{ range $index, $page := site.Pages }} 
{{$index}}. {{$page.Title}} @ {{site.Title}} 
{{ end }} 
```

[]{#APP_D.htm#pgfId-1015798 .calibre9}Unlike traditional loops,
[range]{.fm-code-in-text} uses the [else]{.fm-code-in-text} keyword to
[]{#APP_D.htm#marker-1015803 .calibre9}provide content if no elements
are present. The following listing shows how.

[]{#APP_D.htm#pgfId-1015903}Listing D.13 Using
[else]{.fm-code-in-listingcaption} with
[range]{.fm-code-in-listingcaption}

``` programlisting
{{ range $index, $page := site.Pages }} 
{{$index}}. {{$page.Title}} @ {{site.Title}} 
{{ else }} 
No pages present 
{{ end }} 
```

::: fm-sidebar-block
[]{#APP_D.htm#pgfId-1028094 .calibre9}Viewing and debugging template
variables

[]{#APP_D.htm#pgfId-1028095}If you are unsure about the value of a
variable, you can print it to the DOM to view it using the
[{{\$variable}}]{.fm-code-in-text1} method. If the variable is of a
complex type, you can use [{{ printf \"%#v\" \$variable
}}]{.fm-code-in-text1} to output a variable to the DOM. The
[print]{.fm-code-in-text1} function[]{#APP_D.htm#marker-1026295}
supports []{#APP_D.htm#marker-1028096}a wide range of formats for
printing variables to the DOM. It can interlace strings, change
formatting, and cast variables from one type to another. Specifying the
[%#v]{.fm-code-in-text1} format outputs the value of
[\$variable]{.fm-code-in-text1} in Go syntax form, which includes the
entire value tree for dictionaries and slices.

\

[]{#APP_D.htm#pgfId-1028097}We can also use [{{ jsonify .
}}]{.fm-code-in-text1} to convert a variable to JSON format, which we
can then export to a [script]{.fm-code-in-text1}
tag[]{#APP_D.htm#marker-1026297} in []{#APP_D.htm#marker-1028098}the
output HTML. If we use the following script, we will see the variable
contents in the browser console:

``` programlisting
<script> 
  console.log('Hugo Debug: ', JSON.parse({{ jsonify . }})) 
</script>
```
:::

## []{#APP_D.htm#pgfId-1016209}D.8 Standard library {#APP_D.htm#sigil_toc_id_342 .fm-head}

[]{#APP_D.htm#pgfId-1016226 .calibre9}[]{#APP_D.htm#marker-1016220
.calibre9}[]{#APP_D.htm#marker-1016222 .calibre9}Hugo has a huge and
growing standard library of functions that we can use to access and
manipulate data. The following sections describe the top categories of
methods that Hugo provides.

### []{#APP_D.htm#pgfId-1016231}D.8.1 String conversions {#APP_D.htm#sigil_toc_id_343 .fm-head1}

[]{#APP_D.htm#pgfId-1016378 .calibre9}[]{#APP_D.htm#marker-1016242
.calibre9}[]{#APP_D.htm#marker-1016244
.calibre9}[]{#APP_D.htm#marker-1016246 .calibre9}Web output consists of
various formats from languages like HTML, CSS, and JavaScript to
components like URL and HTML attributes. Hugo provides automatic
conversion to these formats appropriately. For example, when writing to
an HTML template, Hugo automatically escapes the HTML. We
[]{#APP_D.htm#marker-1016251 .calibre9}have []{#APP_D.htm#marker-1016257
.calibre9}the option []{#APP_D.htm#marker-1016263 .calibre9}to opt
[]{#APP_D.htm#marker-1016269 .calibre9}out via the
[safeHTML]{.fm-code-in-text} function. Hugo also has methods
[]{#APP_D.htm#marker-1016285 .calibre9}to []{#APP_D.htm#marker-1016291
.calibre9}interconvert between []{#APP_D.htm#marker-1016297
.calibre9}other languages like JSON and Markdown and the GO template
variables. These include the [safe\*]{.fm-code-in-text} methods like
[safeHTML]{.fm-code-in-text}, [safeCSS]{.fm-code-in-text}, and so forth,
as well as the [\*ify]{.fm-code-in-text} methods like
[markdownify]{.fm-code-in-text}, [jsonify]{.fm-code-in-text},
[emojify]{.fm-code-in-text}, [plainify]{.fm-code-in-text}, and others.
[]{#APP_D.htm#marker-1016383 .calibre9}[]{#APP_D.htm#marker-1016386
.calibre9}[]{#APP_D.htm#marker-1016388 .calibre9}

### []{#APP_D.htm#pgfId-1016394}D.8.2 String creation and manipulation {#APP_D.htm#sigil_toc_id_344 .fm-head1}

[]{#APP_D.htm#pgfId-1016413 .calibre9}[]{#APP_D.htm#marker-1016405
.calibre9}[]{#APP_D.htm#marker-1016407
.calibre9}[]{#APP_D.htm#marker-1016409 .calibre9}Data used in Hugo
templates comes from the front matter and the configuration in the form
of slices, dictionaries, and variables. These need to be used in various
places from the human-readable text in the web pages to URLs and anchor
tags (used to access data) and API formats like XML (for example, in
sitemaps) and JSON (JSON-LD can be used for rich metadata snippets
understood by Google). Human readable formats require us to capitalize
the first letter, lowercase URLs, and CamelCase hashtags for Twitter.

[]{#APP_D.htm#pgfId-1016479 .calibre9}Hugo provides string manipulation
functions to convert data to all these formats and to custom ones as
well, not only from strings but also from slices, dictionaries, and
other data types. These string []{#APP_D.htm#marker-1016420
.calibre9}manipulation []{#APP_D.htm#marker-1016426 .calibre9}functions
[]{#APP_D.htm#marker-1016432 .calibre9}include
[]{#APP_D.htm#marker-1016438 .calibre9}a variety of methods like
[chomp]{.fm-code-in-text}, [humanize]{.fm-code-in-text},
[print\*]{.fm-code-in-text} and [replace\*]{.fm-code-in-text}.
[]{#APP_D.htm#marker-1016484 .calibre9}[]{#APP_D.htm#marker-1016487
.calibre9}[]{#APP_D.htm#marker-1016489 .calibre9}

### []{#APP_D.htm#pgfId-1016495}D.8.3 List and map manipulation and filtering {#APP_D.htm#sigil_toc_id_345 .fm-head1}

[]{#APP_D.htm#pgfId-1016610 .calibre9}[]{#APP_D.htm#marker-1016506
.calibre9}[]{#APP_D.htm#marker-1016508
.calibre9}[]{#APP_D.htm#marker-1016510
.calibre9}[]{#APP_D.htm#marker-1016512
.calibre9}[]{#APP_D.htm#marker-1016514 .calibre9}Lists are another
common type of data that we will encounter when building web pages via
Hugo templates. Accessing parts of these, then filtering and selecting
are other typical operations where Hugo's standard library provides much
functionality. This []{#APP_D.htm#marker-1016519 .calibre9}includes
[]{#APP_D.htm#marker-1016525 .calibre9}a wide
[]{#APP_D.htm#marker-1016531 .calibre9}variety
[]{#APP_D.htm#marker-1016537 .calibre9}of methods from
[first]{.fm-code-in-text} and [last]{.fm-code-in-text} to
[slice]{.fm-code-in-text} and [join]{.fm-code-in-text}. We can also use
set []{#APP_D.htm#marker-1016583 .calibre9}functions
[]{#APP_D.htm#marker-1016589 .calibre9}such as
[complement]{.fm-code-in-text} and [intersect]{.fm-code-in-text}.
[]{#APP_D.htm#marker-1016615 .calibre9}[]{#APP_D.htm#marker-1016618
.calibre9}[]{#APP_D.htm#marker-1016620
.calibre9}[]{#APP_D.htm#marker-1016622
.calibre9}[]{#APP_D.htm#marker-1016624 .calibre9}

### []{#APP_D.htm#pgfId-1016630}D.8.4 The web and Hugo-specific tasks {#APP_D.htm#sigil_toc_id_346 .fm-head1}

[]{#APP_D.htm#pgfId-1016711 .calibre9}[]{#APP_D.htm#marker-1016641
.calibre9}[]{#APP_D.htm#marker-1016643
.calibre9}[]{#APP_D.htm#marker-1016645
.calibre9}[]{#APP_D.htm#marker-1016647 .calibre9}Hugo also has utilities
to perform Hugo-specific and web-specific tasks like finding URLs,
accessing parameters from the front matter, and getting pages. These
[]{#APP_D.htm#marker-1016652 .calibre9}methods
[]{#APP_D.htm#marker-1016658 .calibre9}help []{#APP_D.htm#marker-1016664
.calibre9}us []{#APP_D.htm#marker-1016670 .calibre9}shorten the amount
of template code required for day-to-day Hugo needs. These include
[ref]{.fm-code-in-text}, [param]{.fm-code-in-text},
[.GetPage]{.fm-code-in-text}, [.HasMenuCurrent]{.fm-code-in-text}, and
others. []{#APP_D.htm#marker-1016716
.calibre9}[]{#APP_D.htm#marker-1016719
.calibre9}[]{#APP_D.htm#marker-1016721
.calibre9}[]{#APP_D.htm#marker-1016723 .calibre9}

### []{#APP_D.htm#pgfId-1016729}D.8.5 Resource access and manipulation {#APP_D.htm#sigil_toc_id_347 .fm-head1}

[]{#APP_D.htm#pgfId-1016764 .calibre9}[]{#APP_D.htm#marker-1016740
.calibre9}[]{#APP_D.htm#marker-1016742
.calibre9}[]{#APP_D.htm#marker-1016744 .calibre9}Another common task for
the web workflow is accessing and manipulating resource files like
image, SCSS or CSS, and JavaScript files. Hugo provides a range of
functions for path manipulation, resource manipulation, image
processing, content minification, and hashing (for both MD5 and SHA).
These include [+path.\*]{.fm-code-in-text} for path utilities,
[resource.\\\*]{.fm-code-in-text} for resource manipulation, and
[\`transform.\*\`]{.fm-code-in-text} for file transformation.
[]{#APP_D.htm#marker-1016769 .calibre9}[]{#APP_D.htm#marker-1016772
.calibre9}[]{#APP_D.htm#marker-1016774 .calibre9}

### []{#APP_D.htm#pgfId-1016780}D.8.6 Language features {#APP_D.htm#sigil_toc_id_348 .fm-head1}

[]{#APP_D.htm#pgfId-1016825 .calibre9}[]{#APP_D.htm#marker-1016791
.calibre9}[]{#APP_D.htm#marker-1016793
.calibre9}[]{#APP_D.htm#marker-1016795 .calibre9}From type casting and
reflection to partials, Hugo provides many language features as
functions. We can convert from integers to floats via
[float]{.fm-code-in-text}, write partial templates with
[partial]{.fm-code-in-text}, and check if a variable is a map using
[reflect.IsMap]{.fm-code-in-text}. []{#APP_D.htm#marker-1016830
.calibre9}[]{#APP_D.htm#marker-1016833
.calibre9}[]{#APP_D.htm#marker-1016835 .calibre9}

### []{#APP_D.htm#pgfId-1016841}D.8.7 File handling and network access {#APP_D.htm#sigil_toc_id_349 .fm-head1}

[]{#APP_D.htm#pgfId-1016890 .calibre9}[]{#APP_D.htm#marker-1016852
.calibre9}[]{#APP_D.htm#marker-1016854
.calibre9}[]{#APP_D.htm#marker-1016856
.calibre9}[]{#APP_D.htm#marker-1016858 .calibre9}Functions
[]{#APP_D.htm#marker-1016863 .calibre9}like [readFile]{.fm-code-in-text}
provide direct access to the filesystem. We can also use methods
[]{#APP_D.htm#marker-1016879 .calibre9}like [getJSON]{.fm-code-in-text}
to provide support for getting JSON-based data both from the filesystem
and a HTTP-based web service. []{#APP_D.htm#marker-1016895
.calibre9}[]{#APP_D.htm#marker-1016898
.calibre9}[]{#APP_D.htm#marker-1016900
.calibre9}[]{#APP_D.htm#marker-1016902 .calibre9}

### []{#APP_D.htm#pgfId-1016908}D.8.8 Resource manipulation and Hugo Pipes {#APP_D.htm#sigil_toc_id_350 .fm-head1}

[]{#APP_D.htm#pgfId-1016937 .calibre9}[]{#APP_D.htm#marker-1016919
.calibre9}[]{#APP_D.htm#marker-1016921
.calibre9}[]{#APP_D.htm#marker-1016923
.calibre9}[]{#APP_D.htm#marker-1016925
.calibre9}[]{#APP_D.htm#marker-1016927 .calibre9}Functions like
[resources.GetMatch]{.fm-code-in-text} allow
[]{#APP_D.htm#marker-1016942 .calibre9}access to assets files, both for
linking and manipulation.

[]{#APP_D.htm#pgfId-1016952 .calibre9}We do not need to know all the
functions to be successful with Hugo. But it is a good idea to keep the
function reference
([[https://gohugo.io/functions](https://gohugo.io/functions){.url}]{.fm-hyperlink})
handy when writing templates. The chances are, if we want to do some
manipulation, it might be natively available in Hugo rather than us
reinventing the wheel. []{#APP_D.htm#marker-1016955
.calibre9}[]{#APP_D.htm#marker-1016958
.calibre9}[]{#APP_D.htm#marker-1016960
.calibre9}[]{#APP_D.htm#marker-1016962
.calibre9}[]{#APP_D.htm#marker-1016964
.calibre9}[]{#APP_D.htm#marker-1016966
.calibre9}[]{#APP_D.htm#marker-1016968 .calibre9}

[]{#APP_E.htm}

# []{#APP_E.htm#pgfId-1014800}appendix E. Answers to exercises {#APP_E.htm#heading_id_2 .tochead}

[]{#APP_E.htm#pgfId-1011754}Chapter 1

-   []{#APP_E.htm#pgfId-1011764 .calibre9}Exercise 1.1: c (compiled
    templates)

-   []{#APP_E.htm#pgfId-1011778 .calibre9}Exercise 1.2: a (markup)

-   []{#APP_E.htm#pgfId-1011788 .calibre9}Exercise 1.3: b (a shopping
    website)

-   []{#APP_E.htm#pgfId-1011798 .calibre9}Exercise 1.4: Go (or Golang)

-   []{#APP_E.htm#pgfId-1011808 .calibre9}Exercise 1.5: False. You can
    write locally in the markup language and directly check that in to
    source control, or you can use admin tools like Netlify CMS.

-   []{#APP_E.htm#pgfId-1011818 .calibre9}Exercise 1.6: Markup

[]{#APP_E.htm#pgfId-1011828}Chapter 2

-   []{#APP_E.htm#pgfId-1011838 .calibre9}Exercise 2.1: d (all of the
    above)

-   []{#APP_E.htm#pgfId-1011852 .calibre9}Exercise 2.2: c (content)

-   []{#APP_E.htm#pgfId-1011862 .calibre9}Exercise 2.3: 1 (YAML) and d
    (config); 2 (Markdown) and c (content); 3 (PDF) and b (static); 4
    (HTML) and e (themes); 5 (CSS) and a (assets)

-   []{#APP_E.htm#pgfId-1011872 .calibre9}Exercise 2.4: 1313

-   []{#APP_E.htm#pgfId-1011902 .calibre9}Exercise 2.5: [hugo
    serve]{.fm-code-in-text} or [hugo server]{.fm-code-in-text}

-   []{#APP_E.htm#pgfId-1011908 .calibre9}Exercise 2.6: a (baseURL)

-   []{#APP_E.htm#pgfId-1011918 .calibre9}Exercise 2.7: b (index)

-   []{#APP_E.htm#pgfId-1011928 .calibre9}Exercise 2.8: c (compare
    performance across multiple builds of our website and multiple
    builds of Hugo to find faulty behavior)

[]{#APP_E.htm#pgfId-1011938}Chapter 3

-   []{#APP_E.htm#pgfId-1011982 .calibre9}Exercise 3.1: c, d, and f (a
    hyphen/dash ([-]{.fm-code-in-text}), an equal sign
    ([=]{.fm-code-in-text}), and a hash ([\#]{.fm-code-in-text}))

-   []{#APP_E.htm#pgfId-1011991 .calibre9}Exercise 3.2: b (smaller font
    size)

-   []{#APP_E.htm#pgfId-1012001 .calibre9}Exercise 3.3: a (date)

-   []{#APP_E.htm#pgfId-1012011 .calibre9}Exercise 3.4: slug

-   []{#APP_E.htm#pgfId-1012021 .calibre9}Exercise 3.5: True. Although
    suboptimal, we can provide everything as data to make a data-driven
    website.

[]{#APP_E.htm#pgfId-1012031}Chapter 4

-   []{#APP_E.htm#pgfId-1012041 .calibre9}Exercise 4.1: production

-   []{#APP_E.htm#pgfId-1012055 .calibre9}Exercise 4.2: b (front matter)

-   []{#APP_E.htm#pgfId-1012065 .calibre9}Exercise 4.3: a (the logo of a
    section)

-   []{#APP_E.htm#pgfId-1012075 .calibre9}Exercise 4.4: b (taxonomy
    term)

-   []{#APP_E.htm#pgfId-1012085 .calibre9}Exercise 4.5: layouts, content

[]{#APP_E.htm#pgfId-1012095}Chapter 5

-   []{#APP_E.htm#pgfId-1012105 .calibre9}Exercise 5.1: a (the
    shortcode)

-   []{#APP_E.htm#pgfId-1012119 .calibre9}Exercise 5.2: default

-   []{#APP_E.htm#pgfId-1012149 .calibre9}Exercise 5.3: e (both b and
    c). We can use [with]{.fm-code-in-text} to check the existence of a
    value and to provide a default behavior or value if absent. We can
    also use [with]{.fm-code-in-text} to update the context to write
    less code if it relies only on the subproperties of a variable.

-   []{#APP_E.htm#pgfId-1012158 .calibre9}Exercise 5.4: See
    [[https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/05](https://github.com/hugoinaction/hugoinaction/tree/chapter-05-resources/05){.url}]{.fm-hyperlink}

-   []{#APP_E.htm#pgfId-1012168 .calibre9}Exercise 5.5: a, d, and e
    (music playlists, list of top ten most liked blog posts, and
    affiliate link to the product in review)

-   []{#APP_E.htm#pgfId-1012178 .calibre9}Exercise 5.6: developer,
    author/editor

[]{#APP_E.htm#pgfId-1012188}Chapter 6

-   []{#APP_E.htm#pgfId-1012198 .calibre9}Exercise 6.1: c (baseof.html)

-   []{#APP_E.htm#pgfId-1012212 .calibre9}Exercise 6.2: single.html

-   []{#APP_E.htm#pgfId-1012222 .calibre9}Exercise 6.3: False. Blocks
    execute for each page. Only cached partials are shared.

-   []{#APP_E.htm#pgfId-1012232 .calibre9}Exercise 6.4: See
    [[https://github.com/hugoinaction/hugoinaction/tree/chapter-06-19
    See
    layouts/modern/index.html](https://github.com/hugoinaction/hugoinaction/tree/chapter-06-19%20See%20layouts/modern/index.html){.url}]{.fm-hyperlink}

-   []{#APP_E.htm#pgfId-1012243 .calibre9}Exercise 6.5: b, c, and d.
    Hugo Pipes can use website configuration and front matter, cache
    files across builds, and generate multiple image sizes as needed
    using code.

[]{#APP_E.htm#pgfId-1012253}Chapter 7

-   []{#APP_E.htm#pgfId-1012263 .calibre9}Exercise 7.1: layout

-   []{#APP_E.htm#pgfId-1012277 .calibre9}Exercise 7.2: c (kind)

-   []{#APP_E.htm#pgfId-1012287 .calibre9}Exercise 7.3: e (paginator)

-   []{#APP_E.htm#pgfId-1012297 .calibre9}Exercise 7.4: a and e
    (list.html and single.html)

-   []{#APP_E.htm#pgfId-1012307 .calibre9}Exercise 7.5: a, d, and e.
    Content views are not cached and generated each time the view is
    used. They can be rendered from within another layout, and can be
    overridden based on the content type.

[]{#APP_E.htm#pgfId-1012317}Chapter 8

-   []{#APP_E.htm#pgfId-1012327 .calibre9}Exercise 8.1: False. We can
    use Hugo Modules to share dependencies and import third-party
    content.

-   []{#APP_E.htm#pgfId-1012341 .calibre9}Exercise 8.2: a and c (name of
    the module, and list of website dependencies, both direct and
    indirect)

-   []{#APP_E.htm#pgfId-1012351 .calibre9}Exercise 8.3: c and d. A
    content plugin can be used to set up access control on the content
    by splitting each area into a separate repository. It can also move
    the common content into a separate repository for one place of
    access.

-   []{#APP_E.htm#pgfId-1012361 .calibre9}Exercise 8.4: False. Hugo
    caches modules as temporary files for faster rebuild and offline
    support.

[]{#APP_E.htm#pgfId-1012371}Chapter 9

-   []{#APP_E.htm#pgfId-1012381 .calibre9}Exercise 9.1: a, d, and e
    (provide better user performance, prevent API owners from tracking
    users, enable content manipulation and reuse of data across multiple
    pages)

-   []{#APP_E.htm#pgfId-1012395 .calibre9}Exercise 9.2: disable (across
    projects), enable (across machines)

-   []{#APP_E.htm#pgfId-1012405 .calibre9}Exercise 9.3: JavaScript

-   []{#APP_E.htm#pgfId-1012415 .calibre9}Exercise 9.4: data/content,
    presentation/layout

-   []{#APP_E.htm#pgfId-1012425 .calibre9}Exercise 9.5: e (internal
    pagination template)

[]{#APP_E.htm#pgfId-1012435}Chapter 10

-   []{#APP_E.htm#pgfId-1012445 .calibre9}Exercise 10.1: b, d, and e
    (Hugo has great support for playing nicely with client-side
    JavaScript, with a well-defined interface for transferring
    compile-time data. Hugo provides clear, well-defined separation of
    concerns for build-time and run-time processing. Hugo Pipes delivers
    a rich, powerful, and extremely fast JavaScript builder.)

-   []{#APP_E.htm#pgfId-1012459 .calibre9}Exercise 10.2:
    Pseudo-APIs/APIs

-   []{#APP_E.htm#pgfId-1012469 .calibre9}Exercise 10.3: Templates/Go
    templates/layouts/themes

-   []{#APP_E.htm#pgfId-1012479 .calibre9}Exercise 10.4: is not, can.
    Hugo cannot build SPAs but plays nicely with them.

[]{#APP_E.htm#pgfId-1012489}Chapter 11

-   []{#APP_E.htm#pgfId-1012499 .calibre9}Exercise 11.1: c (using a
    function as a service (FaaS) solution and only writing our core
    business logic)

-   []{#APP_E.htm#pgfId-1012513 .calibre9}Exercise 11.2: True. In the
    universe where we do not need to output HTML but PDFs, LaTeX is used
    similarly as Markdown in the Jamstack.

-   []{#APP_E.htm#pgfId-1012523 .calibre9}Exercise 11.3: APIs

-   []{#APP_E.htm#pgfId-1012533 .calibre9}Exercise 11.4: server

-   []{#APP_E.htm#pgfId-1012543 .calibre9}Exercise 11.5: JavaScript

[]{#APP_E.htm#pgfId-1012553}Chapter 12

-   []{#APP_E.htm#pgfId-1012563 .calibre9}Exercise 12.1: a, b, c, d, e,
    and f. All features can be used across domains and provide value.

-   []{#APP_E.htm#pgfId-1012577 .calibre9}Exercise 12.2: c, d. The
    client-side storage model does not sync across multiple machines,
    and it is less reliable for both persistence and accuracy than a
    server-side storage model.

-   []{#APP_E.htm#pgfId-1012587 .calibre9}Exercise 12.3: user

-   []{#APP_E.htm#pgfId-1012597 .calibre9}Exercise 12.4: prices

-   []{#APP_E.htm#pgfId-1012607 .calibre9}Exercise 12.5: d. If
    fulfillment happens in case of false positive, there is undoable
    financial loss. The stakes are much higher in case of purchases and
    we cannot work with guesses.

[]{#APP_E.htm#pgfId-1012617}Chapter 13

-   []{#APP_E.htm#pgfId-1012627 .calibre9}Exercise 13.1: b, c, e, and f
    (images, JavaScript, templates, and config)

-   []{#APP_E.htm#pgfId-1012641 .calibre9}Exercise 13.2: a. Creating a
    new output format for a subwebsite. Different output formats share
    content.

-   []{#APP_E.htm#pgfId-1012651 .calibre9}Exercise 13.3: a and d.
    Service workers can speed up a website by prefetching content
    heuristically, and like web workers, they run in a separate context
    from the main page JavaScript.

-   []{#APP_E.htm#pgfId-1012661 .calibre9}Exercise 13.4: b. We can use
    SDKs within a cloud function to affect its own state. We used the
    Netlify API in the rebuild webhook but could have used the SDK as
    well. Rebuilds can affect Netlify functions.

[]{#HugoinActionIX.htm}

# []{#HugoinActionIX.htm#pgfId-503251}index {#HugoinActionIX.htm#heading_id_2 .tochead}

[]{#HugoinActionIX.htm#pgfId-602036}Symbols[]{#HugoinActionIX.htm#Symbols}

[]{#HugoinActionIX.htm#pgfId-602038}[-}} tag
424](../Text/APP_D.htm#marker-1011999){.index1}

[]{#HugoinActionIX.htm#pgfId-602040}[{{- tag
424](../Text/APP_D.htm#marker-1011993){.index1}

[]{#HugoinActionIX.htm#pgfId-602042}[{{.TableOfContents}} method
185](../Text/CH06.htm#marker-1043553){.index1}

[]{#HugoinActionIX.htm#pgfId-602044}[{{else}} block
430](../Text/APP_D.htm#marker-1014951){.index1}

[]{#HugoinActionIX.htm#pgfId-602046}[{{isset }} function
430](../Text/APP_D.htm#marker-1014860){.index1}

[]{#HugoinActionIX.htm#pgfId-602048}[{hugo mod get -u ./\...} subcommand
230](../Text/CH08.htm#marker-1016340){.index1}

[]{#HugoinActionIX.htm#pgfId-602050}[\@import statements
303](../Text/CH10.htm#marker-1024827){.index1}

[]{#HugoinActionIX.htm#pgfId-602052}[\$ (dollar sign) variable
124](../Text/CH05.htm#marker-1012193){.index1}

[]{#HugoinActionIX.htm#pgfId-602054}[\$ context variable
130](../Text/CH05.htm#marker-1037991){.index1}

[]{#HugoinActionIX.htm#pgfId-602056}[\$ object
128](../Text/CH05.htm#marker-1015788){.index1}

[]{#HugoinActionIX.htm#pgfId-602058}[\$ variable
162](../Text/CH06.htm#marker-1016554){.index1}

[]{#HugoinActionIX.htm#pgfId-602060}[\$.Description description
124](../Text/CH05.htm#marker-1012211){.index1}

[]{#HugoinActionIX.htm#pgfId-602062}[\$.Description page-level variable
125](../Text/CH05.htm#marker-1012453){.index1}

[]{#HugoinActionIX.htm#pgfId-602064}[\$.Param function
128](../Text/CH05.htm#marker-1015772){.index1} --
[129](../Text/CH05.htm#marker-1015946){.index1},
[189](../Text/CH07.htm#marker-1012372){.index1}

[]{#HugoinActionIX.htm#pgfId-602068}[\$pages variable
202](../Text/CH07.htm#marker-1030459){.index1}

[]{#HugoinActionIX.htm#pgfId-602070}[\$title variable
127,](../Text/CH05.htm#marker-1014391){.index1}
[129](../Text/CH05.htm#marker-1037968){.index1},
[430](../Text/APP_D.htm#marker-1015255){.index1}

[]{#HugoinActionIX.htm#pgfId-602074}[\$tweet variable
240](../Text/CH09.htm#marker-1012909){.index1}

[]{#HugoinActionIX.htm#pgfId-602076}[\$tweet_url variable
240](../Text/CH09.htm#marker-1012925){.index1}

[]{#HugoinActionIX.htm#pgfId-602078}Numerics[]{#HugoinActionIX.htm#Numerics}

[]{#HugoinActionIX.htm#pgfId-602080}[404 layout
157](../Text/CH06.htm#marker-1013954){.index1}

[]{#HugoinActionIX.htm#pgfId-602082}A[]{#HugoinActionIX.htm#A}

[]{#HugoinActionIX.htm#pgfId-602084}[above the fold
160](../Text/CH06.htm#marker-1015368){.index1}

[]{#HugoinActionIX.htm#pgfId-602086}[absLangURL function
137](../Text/CH05.htm#marker-1020360){.index1}

[]{#HugoinActionIX.htm#pgfId-602088}[Accelerated Mobile Pages (AMP)
384](../Text/CH13.htm#marker-1015299){.index1}

[]{#HugoinActionIX.htm#pgfId-602090}[Accept header
278](../Text/CH10.htm#marker-1012190){.index1}

[]{#HugoinActionIX.htm#pgfId-602092}[Access Control Allow Origin header
292](../Text/CH10.htm#marker-1030740){.index1}

[]{#HugoinActionIX.htm#pgfId-602094}[activation functions
388](../Text/CH13.htm#marker-1044901){.index1} --
[389](../Text/CH13.htm#marker-1042782){.index1}

[]{#HugoinActionIX.htm#pgfId-602097}[aliases property
81](../Text/CH03.htm#marker-1028207){.index1}

[]{#HugoinActionIX.htm#pgfId-602099}[AMP (Accelerated Mobile Pages)
384](../Text/CH13.htm#marker-1015296){.index1}

[]{#HugoinActionIX.htm#pgfId-602101}[analysis paralysis
20](../Text/CH01.htm#marker-1013432){.index1}

[]{#HugoinActionIX.htm#pgfId-602103}APIs (application programming
interfaces)

[]{#HugoinActionIX.htm#pgfId-602104}[build-time vs. run-time API access
236](../Text/CH09.htm#marker-1011875){.index1} --
[237](../Text/CH09.htm#marker-1011915){.index1}

[]{#HugoinActionIX.htm#pgfId-602107}[building custom
307](../Text/CH11.htm#marker-1011851){.index1} --
[309](../Text/CH11.htm#marker-1029701){.index1}

[]{#HugoinActionIX.htm#pgfId-602110}[choosing layer of application stack
307](../Text/CH11.htm#marker-1011870){.index1} --
[308](../Text/CH11.htm#marker-1011909){.index1}

[]{#HugoinActionIX.htm#pgfId-602113}[monoliths vs. microservices
308](../Text/CH11.htm#marker-1011931){.index1} --
[309](../Text/CH11.htm#marker-1029700){.index1}

[]{#HugoinActionIX.htm#pgfId-602116}[commenting using Jamstack
256](../Text/CH09.htm#marker-1019490){.index1} --
[270](../Text/CH09.htm#marker-1038882){.index1}

[]{#HugoinActionIX.htm#pgfId-602119}[displaying comment form
256](../Text/CH09.htm#marker-1019521){.index1} --
[259](../Text/CH09.htm#marker-1038756){.index1}

[]{#HugoinActionIX.htm#pgfId-602122}[displaying comments
259](../Text/CH09.htm#marker-1021210){.index1} --
[270](../Text/CH09.htm#marker-1038881){.index1}

[]{#HugoinActionIX.htm#pgfId-602125}[creating contact page with Jamstack
244](../Text/CH09.htm#marker-1014618){.index1} --
[253](../Text/CH09.htm#marker-1017690){.index1}

[]{#HugoinActionIX.htm#pgfId-602128}[choosing form provider
247](../Text/CH09.htm#marker-1015979){.index1}

[]{#HugoinActionIX.htm#pgfId-602130}[setting up contact form
244](../Text/CH09.htm#marker-1036226){.index1} --
[247](../Text/CH09.htm#marker-1038349){.index1}

[]{#HugoinActionIX.htm#pgfId-602133}[using Formspree for contact forms
249](../Text/CH09.htm#marker-1016539){.index1} --
[253](../Text/CH09.htm#marker-1017688){.index1}

[]{#HugoinActionIX.htm#pgfId-602136}[using Netlify forms for Contact Us
page 248](../Text/CH09.htm#marker-1016091){.index1} --
[249](../Text/CH09.htm#marker-1016516){.index1}

[]{#HugoinActionIX.htm#pgfId-602139}[dynamic surveys, building
253](../Text/CH09.htm#marker-1017709){.index1} --
[255](../Text/CH09.htm#marker-1038666){.index1}

[]{#HugoinActionIX.htm#pgfId-602142}[embedding tweets at compile time
237](../Text/CH09.htm#marker-1011936){.index1} --
[243](../Text/CH09.htm#marker-1014453){.index1}

[]{#HugoinActionIX.htm#pgfId-602145}[Hugo\'s functions for compile-time
API access 240](../Text/CH09.htm#marker-1031046){.index1} --
[241](../Text/CH09.htm#marker-1013162){.index1}

[]{#HugoinActionIX.htm#pgfId-602148}[managing content lifetimes
242](../Text/CH09.htm#marker-1014088){.index1} --
[243](../Text/CH09.htm#marker-1014451){.index1}

[]{#HugoinActionIX.htm#pgfId-602151}[rendering tweets as testimonial
241](../Text/CH09.htm#marker-1013187){.index1} --
[242](../Text/CH09.htm#marker-1014041){.index1}

[]{#HugoinActionIX.htm#pgfId-602154}[Twitter API
239](../Text/CH09.htm#marker-1012093){.index1} --
[240](../Text/CH09.htm#marker-1031065){.index1}

[]{#HugoinActionIX.htm#pgfId-602157}[for product information
352](../Text/CH12.htm#marker-1017981){.index1} --
[353](../Text/CH12.htm#marker-1038001){.index1}

[]{#HugoinActionIX.htm#pgfId-602160}[Hugo and REST APIs
243](../Text/CH09.htm#marker-1014513){.index1} --
[244](../Text/CH09.htm#marker-1014597){.index1}

[]{#HugoinActionIX.htm#pgfId-602163}[Hugo Modules
230](../Text/CH08.htm#marker-1016202){.index1} --
[231](../Text/CH08.htm#marker-1016677){.index1}

[]{#HugoinActionIX.htm#pgfId-602166}[Jamstack
11](../Text/CH01.htm#marker-1012501){.index1} --
[12](../Text/CH01.htm#marker-1012527){.index1}

[]{#HugoinActionIX.htm#pgfId-602169}[LaTeX
309](../Text/CH11.htm#marker-1012106){.index1} --
[326](../Text/CH11.htm#marker-1036928){.index1}

[]{#HugoinActionIX.htm#pgfId-602172}[adding HTTP server to call this
function 314](../Text/CH11.htm#marker-1014136){.index1} --
[315](../Text/CH11.htm#marker-1015930){.index1}

[]{#HugoinActionIX.htm#pgfId-602175}[adding to website
325](../Text/CH11.htm#marker-1018421){.index1} --
[326](../Text/CH11.htm#marker-1036927){.index1}

[]{#HugoinActionIX.htm#pgfId-602178}[creating shortcode to render
324](../Text/CH11.htm#marker-1017732){.index1} --
[325](../Text/CH11.htm#marker-1018400){.index1}

[]{#HugoinActionIX.htm#pgfId-602181}[deploying to cloud via Heroku
319](../Text/CH11.htm#marker-1017030){.index1} --
[323](../Text/CH11.htm#marker-1033981){.index1}

[]{#HugoinActionIX.htm#pgfId-602184}[deploying to cloud via Netlify
Functions 316](../Text/CH11.htm#marker-1016633){.index1} --
[319](../Text/CH11.htm#marker-1036841){.index1}

[]{#HugoinActionIX.htm#pgfId-602187}[overview
310](../Text/CH11.htm#marker-1012162){.index1}

[]{#HugoinActionIX.htm#pgfId-602189}[rendering
310](../Text/CH11.htm#marker-1012254){.index1} --
[311](../Text/CH11.htm#marker-1012354){.index1}

[]{#HugoinActionIX.htm#pgfId-602192}[security and unauthorized access
316](../Text/CH11.htm#marker-1016059){.index1}

[]{#HugoinActionIX.htm#pgfId-602194}[server-side LaTeX rendering
311](../Text/CH11.htm#marker-1012377){.index1}

[]{#HugoinActionIX.htm#pgfId-602196}[writing code to render
311](../Text/CH11.htm#marker-1032635){.index1} --
[313](../Text/CH11.htm#marker-1031247){.index1}

[]{#HugoinActionIX.htm#pgfId-602199}[pseudo APIs compiling to JSON
270](../Text/CH09.htm#marker-1025389){.index1} --
[273](../Text/CH09.htm#marker-1026676){.index1}

[]{#HugoinActionIX.htm#pgfId-602202}[creating JSON API for website
271](../Text/CH09.htm#marker-1025549){.index1} --
[273](../Text/CH09.htm#marker-1026674){.index1}

[]{#HugoinActionIX.htm#pgfId-602205}[custom output formats in Hugo
271](../Text/CH09.htm#marker-1025457){.index1}

[]{#HugoinActionIX.htm#pgfId-602207}[webhooks
326](../Text/CH11.htm#marker-1019064){.index1} --
[342](../Text/CH11.htm#marker-1026378){.index1}

[]{#HugoinActionIX.htm#pgfId-602210}[adding to Netlify Forms
328](../Text/CH11.htm#marker-1019288){.index1} --
[330](../Text/CH11.htm#marker-1032058){.index1}

[]{#HugoinActionIX.htm#pgfId-602213}[adding webhook to Formspree to
rebuild website 338](../Text/CH11.htm#marker-1024657){.index1} --
[339](../Text/CH11.htm#marker-1037098){.index1}

[]{#HugoinActionIX.htm#pgfId-602216}[creating for Netlify rebuilds
327](../Text/CH11.htm#marker-1019165){.index1}

[]{#HugoinActionIX.htm#pgfId-602218}[creating function to trigger GitHub
webhooks 334](../Text/CH11.htm#marker-1022938){.index1} --
[337](../Text/CH11.htm#marker-1024351){.index1}

[]{#HugoinActionIX.htm#pgfId-602221}[creating GitHub Pages rebuild
334](../Text/CH11.htm#marker-1022681){.index1}

[]{#HugoinActionIX.htm#pgfId-602223}[preventing abuse
330](../Text/CH11.htm#marker-1019393){.index1} --
[334](../Text/CH11.htm#marker-1037019){.index1}

[]{#HugoinActionIX.htm#pgfId-602226}[updating JavaScript code for
feedback on comment submission
340](../Text/CH11.htm#marker-1024886){.index1} --
[342](../Text/CH11.htm#marker-1026376){.index1}

[]{#HugoinActionIX.htm#pgfId-602229}[archetypes
148](../Text/CH05.htm#marker-1025667){.index1} --
[150](../Text/CH05.htm#marker-1026330){.index1}

[]{#HugoinActionIX.htm#pgfId-602232}[assets
170](../Text/CH06.htm#marker-1021073){.index1} --
[183](../Text/CH06.htm#marker-1037837){.index1}

[]{#HugoinActionIX.htm#pgfId-602235}[images
176](../Text/CH06.htm#marker-1024662){.index1}

[]{#HugoinActionIX.htm#pgfId-602237}[other
182](../Text/CH06.htm#marker-1037770){.index1} --
[183](../Text/CH06.htm#marker-1037836){.index1}

[]{#HugoinActionIX.htm#pgfId-602240}[providing theme assets
210](../Text/CH07.htm#marker-1031451){.index1}

[]{#HugoinActionIX.htm#pgfId-602242}[textual assets
171](../Text/CH06.htm#marker-1021105){.index1}

[]{#HugoinActionIX.htm#pgfId-602244}[authentication
399](../Text/CH13.htm#marker-1023789){.index1}

[]{#HugoinActionIX.htm#pgfId-602246}[author element
76](../Text/CH03.htm#marker-1016478){.index1}

[]{#HugoinActionIX.htm#pgfId-602248}[Author inner property
142](../Text/CH05.htm#marker-1022310){.index1}

[]{#HugoinActionIX.htm#pgfId-602250}[Authorization header
267](../Text/CH09.htm#marker-1023565){.index1}

[]{#HugoinActionIX.htm#pgfId-602252}[automation
398](../Text/CH13.htm#marker-1023579){.index1} --
[399](../Text/CH13.htm#marker-1041989){.index1}

[]{#HugoinActionIX.htm#pgfId-602255}[autoplay parameter
114](../Text/CH04.htm#marker-1018223){.index1}

[]{#HugoinActionIX.htm#pgfId-602257}[AWS
50](../Text/CH02.htm#marker-1018481){.index1} --
[51](../Text/CH02.htm#marker-1018546){.index1}

[]{#HugoinActionIX.htm#pgfId-602260}[AWS Amplify
50](../Text/CH02.htm#marker-1018440){.index1}

[]{#HugoinActionIX.htm#pgfId-602262}[Azure
50](../Text/CH02.htm#marker-1018479){.index1} --
[51](../Text/CH02.htm#marker-1018544){.index1}

[]{#HugoinActionIX.htm#pgfId-602265}B[]{#HugoinActionIX.htm#B}

[]{#HugoinActionIX.htm#pgfId-602267}[babel pipe
172](../Text/CH06.htm#marker-1021781){.index1}

[]{#HugoinActionIX.htm#pgfId-602269}[base templates
154](../Text/CH06.htm#marker-1012256){.index1},
[157](../Text/CH06.htm#marker-1013843){.index1} --
[160](../Text/CH06.htm#marker-1015342){.index1}

[]{#HugoinActionIX.htm#pgfId-602273}[baseURL element
76](../Text/CH03.htm#marker-1016411){.index1}

[]{#HugoinActionIX.htm#pgfId-602275}[baseURL flag
46](../Text/CH02.htm#marker-1017584){.index1}

[]{#HugoinActionIX.htm#pgfId-602277}[billing providers
356](../Text/CH12.htm#marker-1021292){.index1} --
[357](../Text/CH12.htm#marker-1021371){.index1}

[]{#HugoinActionIX.htm#pgfId-602280}[block elements, Markdown
60](../Text/CH03.htm#marker-1012033){.index1} --
[63](../Text/CH03.htm#marker-1032849){.index1},
[72](../Text/CH03.htm#marker-1013960){.index1}

[]{#HugoinActionIX.htm#pgfId-602284}[blog content type
209](../Text/CH07.htm#marker-1029158){.index1}

[]{#HugoinActionIX.htm#pgfId-602286}[blog key
140](../Text/CH05.htm#marker-1021545){.index1}

[]{#HugoinActionIX.htm#pgfId-602288}[blog layout
198](../Text/CH07.htm#marker-1016133){.index1}

[]{#HugoinActionIX.htm#pgfId-602290}[blog section
99](../Text/CH04.htm#marker-1014104){.index1},
[101](../Text/CH04.htm#marker-1015083){.index1}

[]{#HugoinActionIX.htm#pgfId-602293}[blogs
22](../Text/CH01.htm#marker-1013665){.index1}

[]{#HugoinActionIX.htm#pgfId-602295}[adding recent posts
139](../Text/CH05.htm#marker-1034680){.index1} --
[141](../Text/CH05.htm#marker-1038286){.index1}

[]{#HugoinActionIX.htm#pgfId-602298}[content layout
192](../Text/CH07.htm#marker-1013279){.index1} --
[195](../Text/CH07.htm#marker-1014558){.index1}

[]{#HugoinActionIX.htm#pgfId-602301}[body block
157](../Text/CH06.htm#marker-1013785){.index1}

[]{#HugoinActionIX.htm#pgfId-602303}[body property, Event object
312](../Text/CH11.htm#marker-1012909){.index1}

[]{#HugoinActionIX.htm#pgfId-602305}[body tag
159](../Text/CH06.htm#marker-1014135){.index1},
[302](../Text/CH10.htm#marker-1024253){.index1}

[]{#HugoinActionIX.htm#pgfId-602308}[bodyClass class attribute
159](../Text/CH06.htm#marker-1014718){.index1}

[]{#HugoinActionIX.htm#pgfId-602310}[branch bundles
104](../Text/CH04.htm#marker-1031303){.index1} --
[107](../Text/CH04.htm#marker-1031929){.index1}

[]{#HugoinActionIX.htm#pgfId-602313}[build-time API access
236](../Text/CH09.htm#marker-1011873){.index1} --
[237](../Text/CH09.htm#marker-1011913){.index1}

[]{#HugoinActionIX.htm#pgfId-602316}[builders
16](../Text/CH01.htm#marker-1013086){.index1}

[]{#HugoinActionIX.htm#pgfId-602318}[built-in RSS formats
384](../Text/CH13.htm#marker-1015351){.index1}

[]{#HugoinActionIX.htm#pgfId-602320}[built-in shortcodes
116](../Text/CH04.htm#marker-1019150){.index1} --
[117](../Text/CH04.htm#marker-1019422){.index1}

[]{#HugoinActionIX.htm#pgfId-602323}[built-in variables
425](../Text/APP_D.htm#marker-1012122){.index1} --
[426](../Text/APP_D.htm#marker-1012375){.index1}

[]{#HugoinActionIX.htm#pgfId-602326}[bundled templates
184](../Text/CH06.htm#marker-1029198){.index1} --
[186](../Text/CH06.htm#marker-1029885){.index1}

[]{#HugoinActionIX.htm#pgfId-602329}[Button parameter
164](../Text/CH06.htm#marker-1017311){.index1}

[]{#HugoinActionIX.htm#pgfId-602331}[buy now, enabling
364](../Text/CH12.htm#marker-1027304){.index1} --
[374](../Text/CH12.htm#marker-1045054){.index1}

[]{#HugoinActionIX.htm#pgfId-602334}C[]{#HugoinActionIX.htm#C}

[]{#HugoinActionIX.htm#pgfId-602336}[CAP theorem
7](../Text/CH01.htm#marker-1011961){.index1}

[]{#HugoinActionIX.htm#pgfId-602338}[captchas
249](../Text/CH09.htm#marker-1032221){.index1}

[]{#HugoinActionIX.htm#pgfId-602340}[cart button
349](../Text/CH12.htm#marker-1015645){.index1} --
[350](../Text/CH12.htm#marker-1037247){.index1}

[]{#HugoinActionIX.htm#pgfId-602343}[cart object
354](../Text/CH12.htm#marker-1019240){.index1}

[]{#HugoinActionIX.htm#pgfId-602345}[cascade option
195](../Text/CH07.htm#marker-1014619){.index1}

[]{#HugoinActionIX.htm#pgfId-602347}[cascade property
191](../Text/CH07.htm#marker-1012706){.index1} --
[192](../Text/CH07.htm#marker-1012747){.index1},
[195](../Text/CH07.htm#marker-1014416){.index1}

[]{#HugoinActionIX.htm#pgfId-602351}[cascading targets
195](../Text/CH07.htm#marker-1014598){.index1}

[]{#HugoinActionIX.htm#pgfId-602353}[applying cascade on page kind
196](../Text/CH07.htm#marker-1014903){.index1}

[]{#HugoinActionIX.htm#pgfId-602355}[page kinds in Hugo
195](../Text/CH07.htm#marker-1014650){.index1} --
[196](../Text/CH07.htm#marker-1026960){.index1}

[]{#HugoinActionIX.htm#pgfId-602358}[categories taxonomy type
205](../Text/CH07.htm#marker-1030855){.index1}

[]{#HugoinActionIX.htm#pgfId-602360}[character codes
72](../Text/CH03.htm#marker-1014096){.index1}

[]{#HugoinActionIX.htm#pgfId-602362}[checkout support
356](../Text/CH12.htm#marker-1021266){.index1} --
[374](../Text/CH12.htm#marker-1045053){.index1}

[]{#HugoinActionIX.htm#pgfId-602365}[creating checkout session
357](../Text/CH12.htm#marker-1021416){.index1} --
[363](../Text/CH12.htm#marker-1042861){.index1}

[]{#HugoinActionIX.htm#pgfId-602368}[enabling buy now
364](../Text/CH12.htm#marker-1027302){.index1} --
[374](../Text/CH12.htm#marker-1045052){.index1}

[]{#HugoinActionIX.htm#pgfId-602371}[handling success and failure
363](../Text/CH12.htm#marker-1026493){.index1} --
[364](../Text/CH12.htm#marker-1027281){.index1}

[]{#HugoinActionIX.htm#pgfId-602374}[setting up billing provider
356](../Text/CH12.htm#marker-1021290){.index1} --
[357](../Text/CH12.htm#marker-1021369){.index1}

[]{#HugoinActionIX.htm#pgfId-602377}[chomp method
432](../Text/APP_D.htm#marker-1016420){.index1}

[]{#HugoinActionIX.htm#pgfId-602379}[cleanliness
88](../Text/CH03.htm#marker-1020482){.index1}

[]{#HugoinActionIX.htm#pgfId-602381}[CLI (command-line interface)
398](../Text/CH13.htm#marker-1023577){.index1} --
[399](../Text/CH13.htm#marker-1041988){.index1}

[]{#HugoinActionIX.htm#pgfId-602384}[client-side searching
290](../Text/CH10.htm#marker-1017393){.index1} --
[300](../Text/CH10.htm#marker-1035117){.index1}

[]{#HugoinActionIX.htm#pgfId-602387}[concept of
290](../Text/CH10.htm#marker-1017415){.index1}

[]{#HugoinActionIX.htm#pgfId-602389}[creating search index
297](../Text/CH10.htm#marker-1021112){.index1} --
[298](../Text/CH10.htm#marker-1034954){.index1}

[]{#HugoinActionIX.htm#pgfId-602392}[getting search input and showing
results 298](../Text/CH10.htm#marker-1021936){.index1} --
[299](../Text/CH10.htm#marker-1035035){.index1}

[]{#HugoinActionIX.htm#pgfId-602395}[importing search library
293](../Text/CH10.htm#marker-1019396){.index1} --
[295](../Text/CH10.htm#marker-1020268){.index1}

[]{#HugoinActionIX.htm#pgfId-602398}[loading website data
291](../Text/CH10.htm#marker-1017856){.index1} --
[293](../Text/CH10.htm#marker-1030826){.index1}

[]{#HugoinActionIX.htm#pgfId-602401}[showing search box in header
291](../Text/CH10.htm#marker-1017525){.index1}

[]{#HugoinActionIX.htm#pgfId-602403}[updating build systems to support
npm 295](../Text/CH10.htm#marker-1020291){.index1} --
[297](../Text/CH10.htm#marker-1021091){.index1}

[]{#HugoinActionIX.htm#pgfId-602406}[updating GitHub Actions
296](../Text/CH10.htm#marker-1020882){.index1} --
[297](../Text/CH10.htm#marker-1021089){.index1}

[]{#HugoinActionIX.htm#pgfId-602409}[updating Netlify
296](../Text/CH10.htm#marker-1020551){.index1}

[]{#HugoinActionIX.htm#pgfId-602411}[using Hugo modules with JavaScript
299](../Text/CH10.htm#marker-1023322){.index1} --
[300](../Text/CH10.htm#marker-1035116){.index1}

[]{#HugoinActionIX.htm#pgfId-602414}cloud deployment

[]{#HugoinActionIX.htm#pgfId-602415}[via Heroku
319](../Text/CH11.htm#marker-1017028){.index1} --
[323](../Text/CH11.htm#marker-1033980){.index1}

[]{#HugoinActionIX.htm#pgfId-602418}[via Netlify Functions
316](../Text/CH11.htm#marker-1016631){.index1} --
[319](../Text/CH11.htm#marker-1036840){.index1}

[]{#HugoinActionIX.htm#pgfId-602421}[Cloudflare
50](../Text/CH02.htm#marker-1018438){.index1}

[]{#HugoinActionIX.htm#pgfId-602423}[CMS (content management system)
9](../Text/CH01.htm#marker-1012220){.index1}

[]{#HugoinActionIX.htm#pgfId-602425}[configuring
416](../Text/APP_C.htm#marker-1012117){.index1} --
[420](../Text/APP_C.htm#marker-1013113){.index1}

[]{#HugoinActionIX.htm#pgfId-602428}[loading
415](../Text/APP_C.htm#marker-1011781){.index1}

[]{#HugoinActionIX.htm#pgfId-602430}[using
421](../Text/APP_C.htm#marker-1013134){.index1}

[]{#HugoinActionIX.htm#pgfId-602432}[code blocks
154](../Text/CH06.htm#marker-1034406){.index1}

[]{#HugoinActionIX.htm#pgfId-602434}[defining
154](../Text/CH06.htm#marker-1034401){.index1} --
[157](../Text/CH06.htm#marker-1013822){.index1}

[]{#HugoinActionIX.htm#pgfId-602437}[Markdown
67](../Text/CH03.htm#marker-1013257){.index1} --
[69](../Text/CH03.htm#marker-1013514){.index1}

[]{#HugoinActionIX.htm#pgfId-602440}[code editors
406](../Text/APP_A.htm#marker-1027152){.index1}

[]{#HugoinActionIX.htm#pgfId-602442}[code fences
68](../Text/CH03.htm#marker-1013368){.index1} --
[69](../Text/CH03.htm#marker-1013586){.index1}

[]{#HugoinActionIX.htm#pgfId-602445}[command line
26](../Text/CH02.htm#marker-1011889){.index1} --
[28](../Text/CH02.htm#marker-1022969){.index1}

[]{#HugoinActionIX.htm#pgfId-602448}[command-line parameters (flags)
27](../Text/CH02.htm#marker-1012001){.index1}

[]{#HugoinActionIX.htm#pgfId-602450}[commands
27](../Text/CH02.htm#marker-1011915){.index1}

[]{#HugoinActionIX.htm#pgfId-602452}[comment-pre template
340](../Text/CH11.htm#marker-1024897){.index1}

[]{#HugoinActionIX.htm#pgfId-602454}[comments
256](../Text/CH09.htm#marker-1019488){.index1} --
[270](../Text/CH09.htm#marker-1038880){.index1}

[]{#HugoinActionIX.htm#pgfId-602457}[displaying
259](../Text/CH09.htm#marker-1021208){.index1} --
[270](../Text/CH09.htm#marker-1038879){.index1}

[]{#HugoinActionIX.htm#pgfId-602460}[fetching comments
265](../Text/CH09.htm#marker-1022158){.index1} --
[269](../Text/CH09.htm#marker-1024520){.index1}

[]{#HugoinActionIX.htm#pgfId-602463}[getting access to forms API
259](../Text/CH09.htm#marker-1021230){.index1} --
[261](../Text/CH09.htm#marker-1021524){.index1}

[]{#HugoinActionIX.htm#pgfId-602466}[rendering comments
269](../Text/CH09.htm#marker-1024558){.index1} --
[270](../Text/CH09.htm#marker-1038878){.index1}

[]{#HugoinActionIX.htm#pgfId-602469}[securing tokens
262](../Text/CH09.htm#marker-1021570){.index1} --
[264](../Text/CH09.htm#marker-1022139){.index1}

[]{#HugoinActionIX.htm#pgfId-602472}[form, displaying comment
256](../Text/CH09.htm#marker-1019519){.index1} --
[259](../Text/CH09.htm#marker-1038755){.index1}

[]{#HugoinActionIX.htm#pgfId-602475}[Go template language
423](../Text/APP_D.htm#marker-1011806){.index1}

[]{#HugoinActionIX.htm#pgfId-602477}[TOML
409](../Text/APP_B.htm#marker-1011907){.index1}

[]{#HugoinActionIX.htm#pgfId-602479}[updating JavaScript code for
feedback on 340](../Text/CH11.htm#marker-1024884){.index1} --
[342](../Text/CH11.htm#marker-1026374){.index1}

[]{#HugoinActionIX.htm#pgfId-602482}[YAML
74](../Text/CH03.htm#marker-1014957){.index1}

[]{#HugoinActionIX.htm#pgfId-602484}[community project
20](../Text/CH01.htm#marker-1013525){.index1}

[]{#HugoinActionIX.htm#pgfId-602486}[compilation
7](../Text/CH01.htm#marker-1012103){.index1}

[]{#HugoinActionIX.htm#pgfId-602488}[compile time, embedding tweets at
237](../Text/CH09.htm#marker-1011934){.index1} --
[243](../Text/CH09.htm#marker-1014449){.index1}

[]{#HugoinActionIX.htm#pgfId-602491}[Hugo\'s functions for compile-time
API access 240](../Text/CH09.htm#marker-1031045){.index1} --
[241](../Text/CH09.htm#marker-1013160){.index1}

[]{#HugoinActionIX.htm#pgfId-602494}[managing content lifetimes
242](../Text/CH09.htm#marker-1014086){.index1} --
[243](../Text/CH09.htm#marker-1014447){.index1}

[]{#HugoinActionIX.htm#pgfId-602497}[rendering tweet as testimonial
241](../Text/CH09.htm#marker-1013185){.index1} --
[242](../Text/CH09.htm#marker-1014039){.index1}

[]{#HugoinActionIX.htm#pgfId-602500}[Twitter API
239](../Text/CH09.htm#marker-1012091){.index1} --
[240](../Text/CH09.htm#marker-1031064){.index1}

[]{#HugoinActionIX.htm#pgfId-602503}[complement function
432](../Text/APP_D.htm#marker-1016583){.index1}

[]{#HugoinActionIX.htm#pgfId-602505}[composition
161](../Text/CH06.htm#marker-1015403){.index1}

[]{#HugoinActionIX.htm#pgfId-602507}[cond function
430](../Text/APP_D.htm#marker-1014983){.index1}

[]{#HugoinActionIX.htm#pgfId-602509}[conditional expressions
429](../Text/APP_D.htm#marker-1014519){.index1} --
[430](../Text/APP_D.htm#marker-1015002){.index1}

[]{#HugoinActionIX.htm#pgfId-602512}[config file
413](../Text/APP_B.htm#marker-1014411){.index1} --
[414](../Text/APP_B.htm#marker-1015187){.index1}

[]{#HugoinActionIX.htm#pgfId-602515}[config.yaml
76](../Text/CH03.htm#marker-1016406){.index1} --
[77](../Text/CH03.htm#marker-1030921){.index1},
[410](../Text/APP_B.htm#marker-1012814){.index1}

[]{#HugoinActionIX.htm#pgfId-602519}configurations

[]{#HugoinActionIX.htm#pgfId-602520}[content
37](../Text/CH02.htm#marker-1014786){.index1} --
[39](../Text/CH02.htm#marker-1016033){.index1},
[91](../Text/CH04.htm#marker-1011925){.index1} --
[94](../Text/CH04.htm#marker-1031377){.index1}

[]{#HugoinActionIX.htm#pgfId-602525}[Jamstack
398](../Text/CH13.htm#marker-1023575){.index1} --
[399](../Text/CH13.htm#marker-1041987){.index1}

[]{#HugoinActionIX.htm#pgfId-602528}[console partial
227](../Text/CH08.htm#marker-1015054){.index1}

[]{#HugoinActionIX.htm#pgfId-602530}[contact forms
244](../Text/CH09.htm#marker-1036225){.index1} --
[247](../Text/CH09.htm#marker-1038348){.index1}

[]{#HugoinActionIX.htm#pgfId-602533}[contact pages
244](../Text/CH09.htm#marker-1014616){.index1} --
[253](../Text/CH09.htm#marker-1017686){.index1}

[]{#HugoinActionIX.htm#pgfId-602536}[choosing form provider
247](../Text/CH09.htm#marker-1015977){.index1}

[]{#HugoinActionIX.htm#pgfId-602538}[setting up contact form
244](../Text/CH09.htm#marker-1036224){.index1} --
[247](../Text/CH09.htm#marker-1038347){.index1}

[]{#HugoinActionIX.htm#pgfId-602541}[using Formspree for contact forms
249](../Text/CH09.htm#marker-1016537){.index1} --
[253](../Text/CH09.htm#marker-1017684){.index1}

[]{#HugoinActionIX.htm#pgfId-602544}[using Netlify forms for Contact Us
page 248](../Text/CH09.htm#marker-1016089){.index1} --
[249](../Text/CH09.htm#marker-1016514){.index1}

[]{#HugoinActionIX.htm#pgfId-602547}[content
37](../Text/CH02.htm#marker-1014727){.index1}

[]{#HugoinActionIX.htm#pgfId-602549}[aligning themes with
209](../Text/CH07.htm#marker-1021628){.index1} --
[210](../Text/CH07.htm#marker-1021913){.index1}

[]{#HugoinActionIX.htm#pgfId-602552}[configuration
37](../Text/CH02.htm#marker-1014784){.index1} --
[39](../Text/CH02.htm#marker-1016031){.index1}

[]{#HugoinActionIX.htm#pgfId-602555}[customizing with Hugo
configurations 91](../Text/CH04.htm#marker-1011923){.index1} --
[94](../Text/CH04.htm#marker-1031376){.index1}

[]{#HugoinActionIX.htm#pgfId-602558}[Go template language
145](../Text/CH05.htm#marker-1023866){.index1} --
[150](../Text/CH05.htm#marker-1026328){.index1}

[]{#HugoinActionIX.htm#pgfId-602561}[archetypes
148](../Text/CH05.htm#marker-1025665){.index1} --
[150](../Text/CH05.htm#marker-1026326){.index1}

[]{#HugoinActionIX.htm#pgfId-602564}[inner content in shortcodes
147](../Text/CH05.htm#marker-1032748){.index1} --
[148](../Text/CH05.htm#marker-1025479){.index1}

[]{#HugoinActionIX.htm#pgfId-602567}[shortcodes
145](../Text/CH05.htm#marker-1023892){.index1} --
[146](../Text/CH05.htm#marker-1024767){.index1}

[]{#HugoinActionIX.htm#pgfId-602570}index pages

[]{#HugoinActionIX.htm#pgfId-602571}[adding
41](../Text/CH02.htm#marker-1016130){.index1}

[]{#HugoinActionIX.htm#pgfId-602573}[updating
198](../Text/CH07.htm#marker-1016128){.index1}

[]{#HugoinActionIX.htm#pgfId-602575}[layout
188](../Text/CH07.htm#marker-1011932){.index1} --
[198](../Text/CH07.htm#marker-1027259){.index1}

[]{#HugoinActionIX.htm#pgfId-602578}[blog content
192](../Text/CH07.htm#marker-1013277){.index1} --
[195](../Text/CH07.htm#marker-1014556){.index1}

[]{#HugoinActionIX.htm#pgfId-602581}[cascading targets
195](../Text/CH07.htm#marker-1014596){.index1}

[]{#HugoinActionIX.htm#pgfId-602583}[parameterizing front matter to
differentiate News page interface
189](../Text/CH07.htm#marker-1011970){.index1} --
[191](../Text/CH07.htm#marker-1012680){.index1}

[]{#HugoinActionIX.htm#pgfId-602586}[related pages via Hugo
197](../Text/CH07.htm#marker-1015172){.index1} --
[198](../Text/CH07.htm#marker-1027258){.index1}

[]{#HugoinActionIX.htm#pgfId-602589}[using cascade property to apply
properties to front matter
191](../Text/CH07.htm#marker-1012701){.index1} --
[192](../Text/CH07.htm#marker-1013258){.index1}

[]{#HugoinActionIX.htm#pgfId-602592}[managing lifetimes
242](../Text/CH09.htm#marker-1014084){.index1} --
[243](../Text/CH09.htm#marker-1014445){.index1}

[]{#HugoinActionIX.htm#pgfId-602595}[organizing
94](../Text/CH04.htm#marker-1012861){.index1} --
[101](../Text/CH04.htm#marker-1031628){.index1}

[]{#HugoinActionIX.htm#pgfId-602598}[menus
98](../Text/CH04.htm#marker-1013783){.index1} --
[101](../Text/CH04.htm#marker-1031627){.index1}

[]{#HugoinActionIX.htm#pgfId-602601}[sections
95](../Text/CH04.htm#marker-1012882){.index1} --
[98](../Text/CH04.htm#marker-1026475){.index1}

[]{#HugoinActionIX.htm#pgfId-602604}[overrides and defaults for
376](../Text/CH13.htm#marker-1012000){.index1} --
[379](../Text/CH13.htm#marker-1045986){.index1}

[]{#HugoinActionIX.htm#pgfId-602607}[page bundles
102](../Text/CH04.htm#marker-1015550){.index1} --
[107](../Text/CH04.htm#marker-1032028){.index1}

[]{#HugoinActionIX.htm#pgfId-602610}[branch bundles
104](../Text/CH04.htm#marker-1031302){.index1} --
[107](../Text/CH04.htm#marker-1031928){.index1}

[]{#HugoinActionIX.htm#pgfId-602613}[headless bundles
107](../Text/CH04.htm#marker-1027521){.index1}

[]{#HugoinActionIX.htm#pgfId-602615}[leaf bundles
103](../Text/CH04.htm#marker-1015599){.index1} --
[104](../Text/CH04.htm#marker-1031713){.index1}

[]{#HugoinActionIX.htm#pgfId-602618}[pages
40](../Text/CH02.htm#marker-1016076){.index1} --
[41](../Text/CH02.htm#marker-1029572){.index1}

[]{#HugoinActionIX.htm#pgfId-602621}[preparing to send to users
372](../Text/CH12.htm#marker-1030181){.index1}

[]{#HugoinActionIX.htm#pgfId-602623}[product content view
345](../Text/CH12.htm#marker-1011888){.index1} --
[347](../Text/CH12.htm#marker-1044634){.index1}

[]{#HugoinActionIX.htm#pgfId-602626}[reusing with partials
160](../Text/CH06.htm#marker-1015363){.index1} --
[170](../Text/CH06.htm#marker-1036088){.index1}

[]{#HugoinActionIX.htm#pgfId-602629}[bringing back submenu
164](../Text/CH06.htm#marker-1017590){.index1} --
[165](../Text/CH06.htm#marker-1018028){.index1}

[]{#HugoinActionIX.htm#pgfId-602632}[moving to partial
161](../Text/CH06.htm#marker-1015800){.index1}

[]{#HugoinActionIX.htm#pgfId-602634}[partial context
162](../Text/CH06.htm#marker-1016539){.index1}

[]{#HugoinActionIX.htm#pgfId-602636}[partial returns
168](../Text/CH06.htm#marker-1019057){.index1} --
[170](../Text/CH06.htm#marker-1036087){.index1}

[]{#HugoinActionIX.htm#pgfId-602639}[performance and
165](../Text/CH06.htm#marker-1018051){.index1} --
[167](../Text/CH06.htm#marker-1034094){.index1}

[]{#HugoinActionIX.htm#pgfId-602642}[separating data and design
122](../Text/CH05.htm#marker-1011929){.index1} --
[134](../Text/CH05.htm#marker-1031696){.index1}

[]{#HugoinActionIX.htm#pgfId-602645}[accessing Go template language
124](../Text/CH05.htm#marker-1012101){.index1} --
[125](../Text/CH05.htm#marker-1037476){.index1}

[]{#HugoinActionIX.htm#pgfId-602648}[adding content processing
130](../Text/CH05.htm#marker-1016865){.index1} --
[132](../Text/CH05.htm#marker-1038060){.index1}

[]{#HugoinActionIX.htm#pgfId-602651}[adding Markdown content
132](../Text/CH05.htm#marker-1018029){.index1} --
[134](../Text/CH05.htm#marker-1031695){.index1}

[]{#HugoinActionIX.htm#pgfId-602654}[creating variables for
simplification 127](../Text/CH05.htm#marker-1014386){.index1}

[]{#HugoinActionIX.htm#pgfId-602656}[existence checks
126](../Text/CH05.htm#marker-1013363){.index1}

[]{#HugoinActionIX.htm#pgfId-602658}[using context switch via with
conditional for simplifying further checks
129](../Text/CH05.htm#marker-1016121){.index1} --
[130](../Text/CH05.htm#marker-1038010){.index1}

[]{#HugoinActionIX.htm#pgfId-602661}[using site variables for defaults
126](../Text/CH05.htm#marker-1013973){.index1} --
[127](../Text/CH05.htm#marker-1014361){.index1}

[]{#HugoinActionIX.htm#pgfId-602664}[using standard library functions to
reduce code size 128](../Text/CH05.htm#marker-1015146){.index1} --
[129](../Text/CH05.htm#marker-1037793){.index1}

[]{#HugoinActionIX.htm#pgfId-602667}[sharing
117](../Text/CH04.htm#marker-1019443){.index1} --
[120](../Text/CH04.htm#marker-1030878){.index1}

[]{#HugoinActionIX.htm#pgfId-602670}[HTML shortcodes
117](../Text/CH04.htm#marker-1019469){.index1}

[]{#HugoinActionIX.htm#pgfId-602672}[inline shortcodes
119](../Text/CH04.htm#marker-1020205){.index1} --
[120](../Text/CH04.htm#marker-1030877){.index1}

[]{#HugoinActionIX.htm#pgfId-602675}[markup-based shortcodes
118](../Text/CH04.htm#marker-1019993){.index1} --
[119](../Text/CH04.htm#marker-1032871){.index1}

[]{#HugoinActionIX.htm#pgfId-602678}[shortcodes
114](../Text/CH04.htm#marker-1017900){.index1} --
[117](../Text/CH04.htm#marker-1019420){.index1}

[]{#HugoinActionIX.htm#pgfId-602681}[built-in
116](../Text/CH04.htm#marker-1019148){.index1} --
[117](../Text/CH04.htm#marker-1019418){.index1}

[]{#HugoinActionIX.htm#pgfId-602684}[nested
116](../Text/CH04.htm#marker-1018813){.index1}

[]{#HugoinActionIX.htm#pgfId-602686}[with content
115](../Text/CH04.htm#marker-1018415){.index1} --
[116](../Text/CH04.htm#marker-1030003){.index1}

[]{#HugoinActionIX.htm#pgfId-602689}[structured data
141](../Text/CH05.htm#marker-1021927){.index1} --
[145](../Text/CH05.htm#marker-1023821){.index1}

[]{#HugoinActionIX.htm#pgfId-602692}[parsing files for
143](../Text/CH05.htm#marker-1022882){.index1} --
[145](../Text/CH05.htm#marker-1023819){.index1}

[]{#HugoinActionIX.htm#pgfId-602695}[using front matter for
141](../Text/CH05.htm#marker-1021955){.index1} --
[143](../Text/CH05.htm#marker-1022857){.index1}

[]{#HugoinActionIX.htm#pgfId-602698}[taxonomies
108](../Text/CH04.htm#marker-1027554){.index1} --
[113](../Text/CH04.htm#marker-1029871){.index1}

[]{#HugoinActionIX.htm#pgfId-602701}[using external data to add
134](../Text/CH05.htm#marker-1018679){.index1} --
[141](../Text/CH05.htm#marker-1038285){.index1}

[]{#HugoinActionIX.htm#pgfId-602704}[menu
134](../Text/CH05.htm#marker-1018705){.index1} --
[138](../Text/CH05.htm#marker-1034506){.index1}

[]{#HugoinActionIX.htm#pgfId-602707}[recent blog posts
139](../Text/CH05.htm#marker-1034679){.index1} --
[141](../Text/CH05.htm#marker-1038284){.index1}

[]{#HugoinActionIX.htm#pgfId-602710}[versioning with markup
85](../Text/CH03.htm#marker-1020244){.index1}

[]{#HugoinActionIX.htm#pgfId-602712}[writing in Markdown
59](../Text/CH03.htm#marker-1011885){.index1} --
[70](../Text/CH03.htm#marker-1026826){.index1}

[]{#HugoinActionIX.htm#pgfId-602715}[emojis, IDs, and other Hugo
extensions 69](../Text/CH03.htm#marker-1013561){.index1} --
[70](../Text/CH03.htm#marker-1026825){.index1}

[]{#HugoinActionIX.htm#pgfId-602718}[formatting, inline links, code, and
images 63](../Text/CH03.htm#marker-1012558){.index1} --
[66](../Text/CH03.htm#marker-1032941){.index1}

[]{#HugoinActionIX.htm#pgfId-602721}[headings, lists, and block elements
60](../Text/CH03.htm#marker-1012031){.index1} --
[63](../Text/CH03.htm#marker-1032848){.index1}

[]{#HugoinActionIX.htm#pgfId-602724}[HTML
66](../Text/CH03.htm#marker-1013003){.index1} --
[67](../Text/CH03.htm#marker-1013208){.index1}

[]{#HugoinActionIX.htm#pgfId-602727}[paragraphs
60](../Text/CH03.htm#marker-1011949){.index1}

[]{#HugoinActionIX.htm#pgfId-602729}[tables, task lists, and code blocks
67](../Text/CH03.htm#marker-1013255){.index1} --
[69](../Text/CH03.htm#marker-1013512){.index1}

[]{#HugoinActionIX.htm#pgfId-602732}[content owner
89](../Text/CH04.htm#marker-1011821){.index1}

[]{#HugoinActionIX.htm#pgfId-602734}[content plugins
228](../Text/CH08.htm#marker-1015414){.index1} --
[230](../Text/CH08.htm#marker-1019907){.index1}

[]{#HugoinActionIX.htm#pgfId-602737}[Content property
142](../Text/CH05.htm#marker-1022298){.index1}

[]{#HugoinActionIX.htm#pgfId-602739}[content root
95](../Text/CH04.htm#marker-1012945){.index1}

[]{#HugoinActionIX.htm#pgfId-602741}[content types
153](../Text/CH06.htm#marker-1011887){.index1} --
[154](../Text/CH06.htm#marker-1034361){.index1}

[]{#HugoinActionIX.htm#pgfId-602744}[.Content variable
132](../Text/CH05.htm#marker-1018034){.index1}

[]{#HugoinActionIX.htm#pgfId-602746}[content views
211](../Text/CH07.htm#marker-1031587){.index1} --
[213](../Text/CH07.htm#marker-1022857){.index1}

[]{#HugoinActionIX.htm#pgfId-602749}[context parameter
312](../Text/CH11.htm#marker-1012724){.index1}

[]{#HugoinActionIX.htm#pgfId-602751}[continuous delivery
43](../Text/CH02.htm#marker-1017360){.index1} --
[51](../Text/CH02.htm#marker-1018542){.index1}

[]{#HugoinActionIX.htm#pgfId-602754}[AWS, Azure, and Google Cloud file
storage 50](../Text/CH02.htm#marker-1018477){.index1} --
[51](../Text/CH02.htm#marker-1018540){.index1}

[]{#HugoinActionIX.htm#pgfId-602757}[GitHub pages
47](../Text/CH02.htm#marker-1017657){.index1} --
[50](../Text/CH02.htm#marker-1024868){.index1}

[]{#HugoinActionIX.htm#pgfId-602760}[Netlify hosting
44](../Text/CH02.htm#marker-1017445){.index1} --
[46](../Text/CH02.htm#marker-1017612){.index1}

[]{#HugoinActionIX.htm#pgfId-602763}[Vercel, Cloudflare, AWS Amplify
50](../Text/CH02.htm#marker-1018436){.index1}

[]{#HugoinActionIX.htm#pgfId-602765}[continuous deployment
44](../Text/CH02.htm#marker-1017394){.index1}

[]{#HugoinActionIX.htm#pgfId-602767}[contributing to Hugo
401](../Text/CH13.htm#marker-1023940){.index1}

[]{#HugoinActionIX.htm#pgfId-602769}[CORS (Cross-origin resource
sharing) 292](../Text/CH10.htm#marker-1030742){.index1}

[]{#HugoinActionIX.htm#pgfId-602771}[costs
13](../Text/CH01.htm#marker-1012759){.index1}

[]{#HugoinActionIX.htm#pgfId-602773}[Count property
380](../Text/CH13.htm#marker-1013318){.index1}

[]{#HugoinActionIX.htm#pgfId-602775}[cron-job syntax
334](../Text/CH11.htm#marker-1032298){.index1}

[]{#HugoinActionIX.htm#pgfId-602777}[CSS
303](../Text/CH10.htm#marker-1024812){.index1}

[]{#HugoinActionIX.htm#pgfId-602779}[custom variables
426](../Text/APP_D.htm#marker-1012396){.index1}

[]{#HugoinActionIX.htm#pgfId-602781}D[]{#HugoinActionIX.htm#D}

[]{#HugoinActionIX.htm#pgfId-602783}[dark class
138](../Text/CH05.htm#marker-1020505){.index1}

[]{#HugoinActionIX.htm#pgfId-602785}data

[]{#HugoinActionIX.htm#pgfId-602786}[adding when clicking add to cart
351](../Text/CH12.htm#marker-1017030){.index1} --
[352](../Text/CH12.htm#marker-1039984){.index1}

[]{#HugoinActionIX.htm#pgfId-602789}[external, adding content using
134](../Text/CH05.htm#marker-1018677){.index1} --
[141](../Text/CH05.htm#marker-1038283){.index1}

[]{#HugoinActionIX.htm#pgfId-602792}[landing pages, data-driven
84](../Text/CH03.htm#marker-1020009){.index1} --
[85](../Text/CH03.htm#marker-1020188){.index1}

[]{#HugoinActionIX.htm#pgfId-602795}[loading website
291](../Text/CH10.htm#marker-1017854){.index1} --
[293](../Text/CH10.htm#marker-1030825){.index1}

[]{#HugoinActionIX.htm#pgfId-602798}[separating design and
122](../Text/CH05.htm#marker-1011927){.index1} --
[134](../Text/CH05.htm#marker-1031694){.index1}

[]{#HugoinActionIX.htm#pgfId-602801}[accessing Go template language
124](../Text/CH05.htm#marker-1012099){.index1} --
[125](../Text/CH05.htm#marker-1037475){.index1}

[]{#HugoinActionIX.htm#pgfId-602804}[adding content processing
130](../Text/CH05.htm#marker-1016863){.index1} --
[132](../Text/CH05.htm#marker-1038059){.index1}

[]{#HugoinActionIX.htm#pgfId-602807}[adding Markdown content
132](../Text/CH05.htm#marker-1018027){.index1} --
[134](../Text/CH05.htm#marker-1031693){.index1}

[]{#HugoinActionIX.htm#pgfId-602810}[creating variables for
simplification 127](../Text/CH05.htm#marker-1014384){.index1}

[]{#HugoinActionIX.htm#pgfId-602812}[existence checks
126](../Text/CH05.htm#marker-1013361){.index1}

[]{#HugoinActionIX.htm#pgfId-602814}[using context switch via with
conditional for simplifying further checks
129](../Text/CH05.htm#marker-1016119){.index1} --
[130](../Text/CH05.htm#marker-1038009){.index1}

[]{#HugoinActionIX.htm#pgfId-602817}[using site variables for defaults
126](../Text/CH05.htm#marker-1013971){.index1} --
[127](../Text/CH05.htm#marker-1014359){.index1}

[]{#HugoinActionIX.htm#pgfId-602820}[using standard library functions to
reduce code size 128](../Text/CH05.htm#marker-1015144){.index1} --
[129](../Text/CH05.htm#marker-1037792){.index1}

[]{#HugoinActionIX.htm#pgfId-602823}[structured
141](../Text/CH05.htm#marker-1021925){.index1} --
[145](../Text/CH05.htm#marker-1023817){.index1}

[]{#HugoinActionIX.htm#pgfId-602826}[parsing files for
143](../Text/CH05.htm#marker-1022880){.index1} --
[145](../Text/CH05.htm#marker-1023815){.index1}

[]{#HugoinActionIX.htm#pgfId-602829}[using front matter for
141](../Text/CH05.htm#marker-1021953){.index1} --
[143](../Text/CH05.htm#marker-1022855){.index1}

[]{#HugoinActionIX.htm#pgfId-602832}data types

[]{#HugoinActionIX.htm#pgfId-602833}[Go template language
426](../Text/APP_D.htm#marker-1012604){.index1} --
[427](../Text/APP_D.htm#marker-1013179){.index1}

[]{#HugoinActionIX.htm#pgfId-602836}[JSON
411](../Text/APP_B.htm#marker-1013269){.index1} --
[412](../Text/APP_B.htm#marker-1019304){.index1}

[]{#HugoinActionIX.htm#pgfId-602839}[TOML
409](../Text/APP_B.htm#marker-1011965){.index1}

[]{#HugoinActionIX.htm#pgfId-602841}[YAML
74](../Text/CH03.htm#marker-1027225){.index1} --
[75](../Text/CH03.htm#marker-1030023){.index1}

[]{#HugoinActionIX.htm#pgfId-602844}[data-dynamic-form attribute
285](../Text/CH10.htm#marker-1014691){.index1}

[]{#HugoinActionIX.htm#pgfId-602846}[data-error field
286](../Text/CH10.htm#marker-1033281){.index1}

[]{#HugoinActionIX.htm#pgfId-602848}[data-netlify-recaptcha parameter
249](../Text/CH09.htm#marker-1032223){.index1}

[]{#HugoinActionIX.htm#pgfId-602850}[data-pre property
340](../Text/CH11.htm#marker-1024913){.index1}

[]{#HugoinActionIX.htm#pgfId-602852}[data-turbo-permanent attribute
396](../Text/CH13.htm#marker-1022969){.index1}

[]{#HugoinActionIX.htm#pgfId-602854}[.Data.Terms variable
205](../Text/CH07.htm#marker-1031408){.index1}

[]{#HugoinActionIX.htm#pgfId-602856}[date property
80](../Text/CH03.htm#marker-1028181){.index1}

[]{#HugoinActionIX.htm#pgfId-602858}[default function
128](../Text/CH05.htm#marker-1015182){.index1}

[]{#HugoinActionIX.htm#pgfId-602860}[defaults
376](../Text/CH13.htm#marker-1011998){.index1} --
[379](../Text/CH13.htm#marker-1045985){.index1}

[]{#HugoinActionIX.htm#pgfId-602863}[define block
158](../Text/CH06.htm#marker-1014092){.index1},
[190](../Text/CH07.htm#marker-1012616){.index1}

[]{#HugoinActionIX.htm#pgfId-602866}[define keyword
156](../Text/CH06.htm#marker-1013511){.index1} --
[157](../Text/CH06.htm#marker-1013801){.index1},
[170](../Text/CH06.htm#marker-1035984){.index1}

[]{#HugoinActionIX.htm#pgfId-602870}[defined key
288](../Text/CH10.htm#marker-1016473){.index1}

[]{#HugoinActionIX.htm#pgfId-602872}[definition lists
69](../Text/CH03.htm#marker-1013760){.index1},
[72](../Text/CH03.htm#marker-1014215){.index1}

[]{#HugoinActionIX.htm#pgfId-602875}[dependencies
218](../Text/CH08.htm#marker-1012248){.index1}

[]{#HugoinActionIX.htm#pgfId-602877}[adding nested
223](../Text/CH08.htm#marker-1013955){.index1} --
[226](../Text/CH08.htm#marker-1014428){.index1}

[]{#HugoinActionIX.htm#pgfId-602880}[modifying locally
222](../Text/CH08.htm#marker-1013439){.index1} --
[223](../Text/CH08.htm#marker-1023409){.index1}

[]{#HugoinActionIX.htm#pgfId-602883}[shared across theme and website
227](../Text/CH08.htm#marker-1015223){.index1} --
[228](../Text/CH08.htm#marker-1015393){.index1}

[]{#HugoinActionIX.htm#pgfId-602886}[viewing source code
222](../Text/CH08.htm#marker-1013289){.index1}

[]{#HugoinActionIX.htm#pgfId-602888}[Description property
156](../Text/CH06.htm#marker-1013298){.index1}

[]{#HugoinActionIX.htm#pgfId-602890}[description property
80](../Text/CH03.htm#marker-1028177){.index1}

[]{#HugoinActionIX.htm#pgfId-602892}[description tag
184](../Text/CH06.htm#marker-1042598){.index1}

[]{#HugoinActionIX.htm#pgfId-602894}[description variable
98](../Text/CH04.htm#marker-1026471){.index1}

[]{#HugoinActionIX.htm#pgfId-602896}[design
122](../Text/CH05.htm#marker-1011925){.index1} --
[134](../Text/CH05.htm#marker-1031692){.index1}

[]{#HugoinActionIX.htm#pgfId-602899}[accessing Go template language
124](../Text/CH05.htm#marker-1012097){.index1} --
[125](../Text/CH05.htm#marker-1037474){.index1}

[]{#HugoinActionIX.htm#pgfId-602902}[adding content processing
130](../Text/CH05.htm#marker-1016861){.index1} --
[132](../Text/CH05.htm#marker-1038058){.index1}

[]{#HugoinActionIX.htm#pgfId-602905}[adding Markdown content
132](../Text/CH05.htm#marker-1018025){.index1} --
[134](../Text/CH05.htm#marker-1031691){.index1}

[]{#HugoinActionIX.htm#pgfId-602908}[creating variables for
simplification 127](../Text/CH05.htm#marker-1014382){.index1}

[]{#HugoinActionIX.htm#pgfId-602910}[existence checks
126](../Text/CH05.htm#marker-1013359){.index1}

[]{#HugoinActionIX.htm#pgfId-602912}[using context switch via with
conditional for simplifying further checks
129](../Text/CH05.htm#marker-1016117){.index1} --
[130](../Text/CH05.htm#marker-1038008){.index1}

[]{#HugoinActionIX.htm#pgfId-602915}[using site variables for defaults
126](../Text/CH05.htm#marker-1013969){.index1} --
[127](../Text/CH05.htm#marker-1014357){.index1}

[]{#HugoinActionIX.htm#pgfId-602918}[using standard library functions to
reduce code size 128](../Text/CH05.htm#marker-1015142){.index1} --
[129](../Text/CH05.htm#marker-1037791){.index1}

[]{#HugoinActionIX.htm#pgfId-602921}[.Destination variable
134](../Text/CH05.htm#marker-1031686){.index1}

[]{#HugoinActionIX.htm#pgfId-602923}[dev server
34](../Text/CH02.htm#marker-1014000){.index1} --
[37](../Text/CH02.htm#marker-1014708){.index1}

[]{#HugoinActionIX.htm#pgfId-602926}[developer productivity
14](../Text/CH01.htm#marker-1012786){.index1}

[]{#HugoinActionIX.htm#pgfId-602928}[development
92](../Text/CH04.htm#marker-1024462){.index1}

[]{#HugoinActionIX.htm#pgfId-602930}[development dependency
294](../Text/CH10.htm#marker-1020156){.index1}

[]{#HugoinActionIX.htm#pgfId-602932}[dict data structure
168](../Text/CH06.htm#marker-1019481){.index1}

[]{#HugoinActionIX.htm#pgfId-602934}[dict dictionary object
167](../Text/CH06.htm#marker-1034088){.index1}

[]{#HugoinActionIX.htm#pgfId-602936}dictionaries

[]{#HugoinActionIX.htm#pgfId-602937}[JSON
412](../Text/APP_B.htm#marker-1014037){.index1}

[]{#HugoinActionIX.htm#pgfId-602939}[TOML
410](../Text/APP_B.htm#marker-1012525){.index1}

[]{#HugoinActionIX.htm#pgfId-602941}[YAML
76](../Text/CH03.htm#marker-1015976){.index1}

[]{#HugoinActionIX.htm#pgfId-602943}[direct download
405](../Text/APP_A.htm#marker-1014313){.index1} --
[406](../Text/APP_A.htm#marker-1027133){.index1}

[]{#HugoinActionIX.htm#pgfId-602946}[---disableFastRender command-line
flag 36](../Text/CH02.htm#marker-1014539){.index1}

[]{#HugoinActionIX.htm#pgfId-602948}[---disableLiveReload command-line
flag 36](../Text/CH02.htm#marker-1014545){.index1}

[]{#HugoinActionIX.htm#pgfId-602950}[display parameter
312](../Text/CH11.htm#marker-1012988){.index1},
[315](../Text/CH11.htm#marker-1015895){.index1},
[324](../Text/CH11.htm#marker-1017805){.index1}

[]{#HugoinActionIX.htm#pgfId-602954}[div tag
249](../Text/CH09.htm#marker-1032225){.index1}

[]{#HugoinActionIX.htm#pgfId-602956}[documentation websites
23](../Text/CH01.htm#marker-1013741){.index1}

[]{#HugoinActionIX.htm#pgfId-602958}[dollar sign (\$) variable
124](../Text/CH05.htm#marker-1012196){.index1}

[]{#HugoinActionIX.htm#pgfId-602960}[draft property
81](../Text/CH03.htm#marker-1028294){.index1}

[]{#HugoinActionIX.htm#pgfId-602962}[dynamic data
15](../Text/CH01.htm#marker-1012910){.index1}

[]{#HugoinActionIX.htm#pgfId-602964}[dynamic surveys
253](../Text/CH09.htm#marker-1017707){.index1} --
[255](../Text/CH09.htm#marker-1038665){.index1}

[]{#HugoinActionIX.htm#pgfId-602967}E[]{#HugoinActionIX.htm#E}

[]{#HugoinActionIX.htm#pgfId-602969}[e-commerce pages
345](../Text/CH12.htm#marker-1011860){.index1} --
[349](../Text/CH12.htm#marker-1044741){.index1}

[]{#HugoinActionIX.htm#pgfId-602972}[product content view
345](../Text/CH12.htm#marker-1011886){.index1} --
[347](../Text/CH12.htm#marker-1044633){.index1}

[]{#HugoinActionIX.htm#pgfId-602975}[single product page
347](../Text/CH12.htm#marker-1013650){.index1} --
[349](../Text/CH12.htm#marker-1044740){.index1}

[]{#HugoinActionIX.htm#pgfId-602978}[Eclectic
220](../Text/CH08.htm#marker-1012656){.index1}

[]{#HugoinActionIX.htm#pgfId-602980}[editor class
302](../Text/CH10.htm#marker-1024237){.index1}

[]{#HugoinActionIX.htm#pgfId-602982}[else keyword
431](../Text/APP_D.htm#marker-1015803){.index1}

[]{#HugoinActionIX.htm#pgfId-602984}emails

[]{#HugoinActionIX.htm#pgfId-602985}[attaching files to
373](../Text/CH12.htm#marker-1031424){.index1} --
[374](../Text/CH12.htm#marker-1032217){.index1}

[]{#HugoinActionIX.htm#pgfId-602988}[preparing content to send to users
372](../Text/CH12.htm#marker-1030179){.index1}

[]{#HugoinActionIX.htm#pgfId-602990}[sending
371](../Text/CH12.htm#marker-1029648){.index1}

[]{#HugoinActionIX.htm#pgfId-602992}[setting up provider
369](../Text/CH12.htm#marker-1029489){.index1} --
[370](../Text/CH12.htm#marker-1045290){.index1}

[]{#HugoinActionIX.htm#pgfId-602995}[emojis
69](../Text/CH03.htm#marker-1013559){.index1} --
[70](../Text/CH03.htm#marker-1026824){.index1},
[72](../Text/CH03.htm#marker-1014213){.index1}

[]{#HugoinActionIX.htm#pgfId-602999}[enableGitInfo configuration setting
94](../Text/CH04.htm#marker-1031374){.index1}

[]{#HugoinActionIX.htm#pgfId-603001}[---environment command-line flag
36](../Text/CH02.htm#marker-1014571){.index1}

[]{#HugoinActionIX.htm#pgfId-603003}[---environment flag
92](../Text/CH04.htm#marker-1012065){.index1}

[]{#HugoinActionIX.htm#pgfId-603005}[errors, Go template language
424](../Text/APP_D.htm#marker-1012047){.index1}

[]{#HugoinActionIX.htm#pgfId-603007}[event delegation
279](../Text/CH10.htm#marker-1028766){.index1}

[]{#HugoinActionIX.htm#pgfId-603009}[event object
312](../Text/CH11.htm#marker-1012760){.index1}

[]{#HugoinActionIX.htm#pgfId-603011}[event parameter
312](../Text/CH11.htm#marker-1012718){.index1}

[]{#HugoinActionIX.htm#pgfId-603013}[Event.preventDefault()
278](../Text/CH10.htm#marker-1012116){.index1}

[]{#HugoinActionIX.htm#pgfId-603015}[event.target
278](../Text/CH10.htm#marker-1012047){.index1}

[]{#HugoinActionIX.htm#pgfId-603017}[existence checks
126](../Text/CH05.htm#marker-1013357){.index1}

[]{#HugoinActionIX.htm#pgfId-603019}[explore option
131](../Text/CH05.htm#marker-1037954){.index1}

[]{#HugoinActionIX.htm#pgfId-603021}[export command
264](../Text/CH09.htm#marker-1022064){.index1}

[]{#HugoinActionIX.htm#pgfId-603023}[external data, adding content using
134](../Text/CH05.htm#marker-1018675){.index1} --
[141](../Text/CH05.htm#marker-1038282){.index1}

[]{#HugoinActionIX.htm#pgfId-603026}[menu
134](../Text/CH05.htm#marker-1018703){.index1} --
[138](../Text/CH05.htm#marker-1034505){.index1}

[]{#HugoinActionIX.htm#pgfId-603029}[recent blog posts
139](../Text/CH05.htm#marker-1034678){.index1} --
[141](../Text/CH05.htm#marker-1038281){.index1}

[]{#HugoinActionIX.htm#pgfId-603032}[external helpers
73](../Text/CH03.htm#marker-1014416){.index1}

[]{#HugoinActionIX.htm#pgfId-603034}[externals
290](../Text/CH10.htm#marker-1035265){.index1}

[]{#HugoinActionIX.htm#pgfId-603036}F[]{#HugoinActionIX.htm#F}

[]{#HugoinActionIX.htm#pgfId-603038}[FaaS (function as a service)
308](../Text/CH11.htm#marker-1011888){.index1} --
[309](../Text/CH11.htm#marker-1029693){.index1}

[]{#HugoinActionIX.htm#pgfId-603041}[failure parameters
363](../Text/CH12.htm#marker-1026491){.index1} --
[364](../Text/CH12.htm#marker-1027279){.index1}

[]{#HugoinActionIX.htm#pgfId-603044}[fetch function
278](../Text/CH10.htm#marker-1012093){.index1},
[331](../Text/CH11.htm#marker-1019488){.index1}

[]{#HugoinActionIX.htm#pgfId-603047}fetching

[]{#HugoinActionIX.htm#pgfId-603048}[comments
265](../Text/CH09.htm#marker-1022156){.index1} --
[269](../Text/CH09.htm#marker-1024517){.index1}

[]{#HugoinActionIX.htm#pgfId-603051}[resources
389](../Text/CH13.htm#marker-1017728){.index1} --
[394](../Text/CH13.htm#marker-1046469){.index1}

[]{#HugoinActionIX.htm#pgfId-603054}[figure shortcode
117](../Text/CH04.htm#marker-1019265){.index1}

[]{#HugoinActionIX.htm#pgfId-603056}files

[]{#HugoinActionIX.htm#pgfId-603057}[attaching to emails
373](../Text/CH12.htm#marker-1031422){.index1} --
[374](../Text/CH12.htm#marker-1032215){.index1}

[]{#HugoinActionIX.htm#pgfId-603060}[handling
433](../Text/APP_D.htm#marker-1016858){.index1}

[]{#HugoinActionIX.htm#pgfId-603062}[.Fill option
178](../Text/CH06.htm#marker-1025202){.index1}

[]{#HugoinActionIX.htm#pgfId-603064}[filtering
432](../Text/APP_D.htm#marker-1016514){.index1}

[]{#HugoinActionIX.htm#pgfId-603066}[first method
432](../Text/APP_D.htm#marker-1016519){.index1}

[]{#HugoinActionIX.htm#pgfId-603068}[First object
201](../Text/CH07.htm#marker-1017411){.index1}

[]{#HugoinActionIX.htm#pgfId-603070}[.Fit option
177](../Text/CH06.htm#marker-1025140){.index1}

[]{#HugoinActionIX.htm#pgfId-603072}[flags (command-line parameters)
27](../Text/CH02.htm#marker-1011998){.index1}

[]{#HugoinActionIX.htm#pgfId-603074}[flavors
404](../Text/APP_A.htm#marker-1011873){.index1},
[406](../Text/APP_A.htm#marker-1027283){.index1}

[]{#HugoinActionIX.htm#pgfId-603077}[float type cast function
428](../Text/APP_D.htm#marker-1026203){.index1}

[]{#HugoinActionIX.htm#pgfId-603079}[footer list
76](../Text/CH03.htm#marker-1016516){.index1}

[]{#HugoinActionIX.htm#pgfId-603081}[footer tag
138](../Text/CH05.htm#marker-1020521){.index1}

[]{#HugoinActionIX.htm#pgfId-603083}[form providers
247](../Text/CH09.htm#marker-1015975){.index1}

[]{#HugoinActionIX.htm#pgfId-603085}[form tag
249](../Text/CH09.htm#marker-1032224){.index1}

[]{#HugoinActionIX.htm#pgfId-603087}[FormData
278](../Text/CH10.htm#marker-1012070){.index1}

[]{#HugoinActionIX.htm#pgfId-603089}Formspree

[]{#HugoinActionIX.htm#pgfId-603090}[adding webhook to rebuild website
338](../Text/CH11.htm#marker-1024655){.index1} --
[339](../Text/CH11.htm#marker-1037097){.index1}

[]{#HugoinActionIX.htm#pgfId-603093}[for contact forms
249](../Text/CH09.htm#marker-1016535){.index1} --
[253](../Text/CH09.htm#marker-1017682){.index1}

[]{#HugoinActionIX.htm#pgfId-603096}[fr configuration
378](../Text/CH13.htm#marker-1012813){.index1}

[]{#HugoinActionIX.htm#pgfId-603098}[From inner property
142](../Text/CH05.htm#marker-1022304){.index1}

[]{#HugoinActionIX.htm#pgfId-603100}[front matter
59](../Text/CH03.htm#marker-1011828){.index1}

[]{#HugoinActionIX.htm#pgfId-603102}[for structured data
141](../Text/CH05.htm#marker-1021951){.index1} --
[143](../Text/CH05.htm#marker-1022853){.index1}

[]{#HugoinActionIX.htm#pgfId-603105}[JSON
413](../Text/APP_B.htm#marker-1014343){.index1}

[]{#HugoinActionIX.htm#pgfId-603107}[markup
79](../Text/CH03.htm#marker-1018086){.index1} --
[85](../Text/CH03.htm#marker-1020186){.index1}

[]{#HugoinActionIX.htm#pgfId-603110}[data-driven landing page using
84](../Text/CH03.htm#marker-1020007){.index1} --
[85](../Text/CH03.htm#marker-1020184){.index1}

[]{#HugoinActionIX.htm#pgfId-603113}[metadata elements in
80](../Text/CH03.htm#marker-1018396){.index1} --
[84](../Text/CH03.htm#marker-1028574){.index1}

[]{#HugoinActionIX.htm#pgfId-603116}[parameterizing to differentiate
News page interface 189](../Text/CH07.htm#marker-1011968){.index1} --
[191](../Text/CH07.htm#marker-1012678){.index1}

[]{#HugoinActionIX.htm#pgfId-603119}[TOML
410](../Text/APP_B.htm#marker-1012715){.index1}

[]{#HugoinActionIX.htm#pgfId-603121}[using cascade property to apply
properties to 191](../Text/CH07.htm#marker-1012699){.index1} --
[192](../Text/CH07.htm#marker-1013256){.index1}

[]{#HugoinActionIX.htm#pgfId-603124}[fulfillment
365](../Text/CH12.htm#marker-1027433){.index1} --
[374](../Text/CH12.htm#marker-1032213){.index1}

[]{#HugoinActionIX.htm#pgfId-603127}[attaching files to email
373](../Text/CH12.htm#marker-1031420){.index1} --
[374](../Text/CH12.htm#marker-1032211){.index1}

[]{#HugoinActionIX.htm#pgfId-603130}[getting purchase details
368](../Text/CH12.htm#marker-1028563){.index1} --
[369](../Text/CH12.htm#marker-1041956){.index1}

[]{#HugoinActionIX.htm#pgfId-603133}[preparing content to send to users
372](../Text/CH12.htm#marker-1030177){.index1}

[]{#HugoinActionIX.htm#pgfId-603135}[receiving and verifying webhooks
365](../Text/CH12.htm#marker-1027465){.index1} --
[368](../Text/CH12.htm#marker-1041792){.index1}

[]{#HugoinActionIX.htm#pgfId-603138}[sending emails
371](../Text/CH12.htm#marker-1029646){.index1}

[]{#HugoinActionIX.htm#pgfId-603140}[setting up email provider
369](../Text/CH12.htm#marker-1029487){.index1} --
[370](../Text/CH12.htm#marker-1045289){.index1}

[]{#HugoinActionIX.htm#pgfId-603143}[function as a service (FaaS)
308](../Text/CH11.htm#marker-1011891){.index1} --
[309](../Text/CH11.htm#marker-1029694){.index1}

[]{#HugoinActionIX.htm#pgfId-603146}[functions for operators
427](../Text/APP_D.htm#marker-1013198){.index1} --
[428](../Text/APP_D.htm#marker-1026206){.index1}

[]{#HugoinActionIX.htm#pgfId-603149}[fuzzy matching
293](../Text/CH10.htm#marker-1019401){.index1}

[]{#HugoinActionIX.htm#pgfId-603151}[fuzzy search library
294](../Text/CH10.htm#marker-1019636){.index1}

[]{#HugoinActionIX.htm#pgfId-603153}G[]{#HugoinActionIX.htm#G}

[]{#HugoinActionIX.htm#pgfId-603155}[getCSV function
240](../Text/CH09.htm#marker-1031049){.index1}

[]{#HugoinActionIX.htm#pgfId-603157}[getenv function
251](../Text/CH09.htm#marker-1016779){.index1},
[267](../Text/CH09.htm#marker-1022862){.index1}

[]{#HugoinActionIX.htm#pgfId-603160}[getJSON function
238,](../Text/CH09.htm#marker-1012018){.index1}
[240](../Text/CH09.htm#marker-1031048){.index1},
[242](../Text/CH09.htm#marker-1014133){.index1}

[]{#HugoinActionIX.htm#pgfId-603164}[getJSON method
433](../Text/APP_D.htm#marker-1016879){.index1}

[]{#HugoinActionIX.htm#pgfId-603166}[.GetPage method
432](../Text/APP_D.htm#marker-1016664){.index1}

[]{#HugoinActionIX.htm#pgfId-603168}[GFM (GitHub Flavored Markdown)
59](../Text/CH03.htm#marker-1011897){.index1}

[]{#HugoinActionIX.htm#pgfId-603170}[gist shortcode
116](../Text/CH04.htm#marker-1019176){.index1}

[]{#HugoinActionIX.htm#pgfId-603172}[Gists
114](../Text/CH04.htm#marker-1017898){.index1} --
[117](../Text/CH04.htm#marker-1019416){.index1}

[]{#HugoinActionIX.htm#pgfId-603175}[git command
28](../Text/CH02.htm#marker-1025925){.index1}

[]{#HugoinActionIX.htm#pgfId-603177}[GitHub
334](../Text/CH11.htm#marker-1022936){.index1} --
[337](../Text/CH11.htm#marker-1024349){.index1}

[]{#HugoinActionIX.htm#pgfId-603180}[GitHub Actions
296](../Text/CH10.htm#marker-1020880){.index1} --
[297](../Text/CH10.htm#marker-1021087){.index1}

[]{#HugoinActionIX.htm#pgfId-603183}GitHub Pages

[]{#HugoinActionIX.htm#pgfId-603184}[continuous delivery
47](../Text/CH02.htm#marker-1017655){.index1} --
[50](../Text/CH02.htm#marker-1024867){.index1}

[]{#HugoinActionIX.htm#pgfId-603187}[creating rebuild
334](../Text/CH11.htm#marker-1022679){.index1}

[]{#HugoinActionIX.htm#pgfId-603189}[global site subvariable
425](../Text/APP_D.htm#marker-1012179){.index1}

[]{#HugoinActionIX.htm#pgfId-603191}[globs (wildcards)
171](../Text/CH06.htm#marker-1021425){.index1}

[]{#HugoinActionIX.htm#pgfId-603193}[Go template language
145](../Text/CH05.htm#marker-1023864){.index1} --
[150](../Text/CH05.htm#marker-1026324){.index1}

[]{#HugoinActionIX.htm#pgfId-603196}[accessing
124](../Text/CH05.htm#marker-1012095){.index1} --
[125](../Text/CH05.htm#marker-1037473){.index1}

[]{#HugoinActionIX.htm#pgfId-603199}[archetypes
148](../Text/CH05.htm#marker-1025663){.index1} --
[150](../Text/CH05.htm#marker-1026322){.index1}

[]{#HugoinActionIX.htm#pgfId-603202}[comments
423](../Text/APP_D.htm#marker-1011804){.index1}

[]{#HugoinActionIX.htm#pgfId-603204}[conditional expressions
429](../Text/APP_D.htm#marker-1014517){.index1} --
[430](../Text/APP_D.htm#marker-1014999){.index1}

[]{#HugoinActionIX.htm#pgfId-603207}[data types
426](../Text/APP_D.htm#marker-1012602){.index1} --
[427](../Text/APP_D.htm#marker-1013176){.index1}

[]{#HugoinActionIX.htm#pgfId-603210}[errors
424](../Text/APP_D.htm#marker-1012045){.index1}

[]{#HugoinActionIX.htm#pgfId-603212}[functions for operators
427](../Text/APP_D.htm#marker-1013196){.index1} --
[428](../Text/APP_D.htm#marker-1026205){.index1}

[]{#HugoinActionIX.htm#pgfId-603215}[inner content in shortcodes
147](../Text/CH05.htm#marker-1032747){.index1} --
[148](../Text/CH05.htm#marker-1025477){.index1}

[]{#HugoinActionIX.htm#pgfId-603218}[loops
430](../Text/APP_D.htm#marker-1015076){.index1} --
[431](../Text/APP_D.htm#marker-1026301){.index1}

[]{#HugoinActionIX.htm#pgfId-603221}[nesting and piping
428](../Text/APP_D.htm#marker-1014025){.index1} --
[429](../Text/APP_D.htm#marker-1014500){.index1}

[]{#HugoinActionIX.htm#pgfId-603224}[standard library
431](../Text/APP_D.htm#marker-1016222){.index1} --
[433](../Text/APP_D.htm#marker-1016968){.index1}

[]{#HugoinActionIX.htm#pgfId-603227}[file handling and network access
433](../Text/APP_D.htm#marker-1016856){.index1}

[]{#HugoinActionIX.htm#pgfId-603229}[language features
433](../Text/APP_D.htm#marker-1016795){.index1}

[]{#HugoinActionIX.htm#pgfId-603231}[list and map manipulation and
filtering 432](../Text/APP_D.htm#marker-1016512){.index1}

[]{#HugoinActionIX.htm#pgfId-603233}[resource access and manipulation
432](../Text/APP_D.htm#marker-1016744){.index1}

[]{#HugoinActionIX.htm#pgfId-603235}[resource manipulation and Hugo
Pipes 433](../Text/APP_D.htm#marker-1016927){.index1}

[]{#HugoinActionIX.htm#pgfId-603237}[string conversions
432](../Text/APP_D.htm#marker-1016246){.index1}

[]{#HugoinActionIX.htm#pgfId-603239}[string creation and manipulation
432](../Text/APP_D.htm#marker-1016409){.index1}

[]{#HugoinActionIX.htm#pgfId-603241}[web and Hugo-specific tasks
432](../Text/APP_D.htm#marker-1016647){.index1}

[]{#HugoinActionIX.htm#pgfId-603243}[template code in shortcodes
145](../Text/CH05.htm#marker-1023890){.index1} --
[146](../Text/CH05.htm#marker-1024765){.index1}

[]{#HugoinActionIX.htm#pgfId-603246}[variables
425](../Text/APP_D.htm#marker-1012098){.index1} --
[426](../Text/APP_D.htm#marker-1012438){.index1}

[]{#HugoinActionIX.htm#pgfId-603249}[built-in
425](../Text/APP_D.htm#marker-1012120){.index1} --
[426](../Text/APP_D.htm#marker-1012373){.index1}

[]{#HugoinActionIX.htm#pgfId-603252}[custom
426](../Text/APP_D.htm#marker-1012394){.index1}

[]{#HugoinActionIX.htm#pgfId-603254}[whitespace removal
424](../Text/APP_D.htm#marker-1011968){.index1}

[]{#HugoinActionIX.htm#pgfId-603256}[go version command
217](../Text/CH08.htm#marker-1011913){.index1}

[]{#HugoinActionIX.htm#pgfId-603258}[Google Cloud file storage
50](../Text/CH02.htm#marker-1018475){.index1} --
[51](../Text/CH02.htm#marker-1018538){.index1}

[]{#HugoinActionIX.htm#pgfId-603261}GUI-based admin section

[]{#HugoinActionIX.htm#pgfId-603262}[configuring Netlify CMS
416](../Text/APP_C.htm#marker-1012115){.index1} --
[420](../Text/APP_C.htm#marker-1013111){.index1}

[]{#HugoinActionIX.htm#pgfId-603265}[loading Netlify CMS
415](../Text/APP_C.htm#marker-1011779){.index1}

[]{#HugoinActionIX.htm#pgfId-603267}[using Netlify CMS
421](../Text/APP_C.htm#marker-1013132){.index1}

[]{#HugoinActionIX.htm#pgfId-603269}H[]{#HugoinActionIX.htm#H}

[]{#HugoinActionIX.htm#pgfId-603271}[.HasChildren property
164](../Text/CH06.htm#marker-1017595){.index1}

[]{#HugoinActionIX.htm#pgfId-603273}[.HasMenuCurrent method
432](../Text/APP_D.htm#marker-1016670){.index1}

[]{#HugoinActionIX.htm#pgfId-603275}headers

[]{#HugoinActionIX.htm#pgfId-603276}[cart button in
349](../Text/CH12.htm#marker-1015643){.index1} --
[350](../Text/CH12.htm#marker-1037246){.index1}

[]{#HugoinActionIX.htm#pgfId-603279}[showing search box in
291](../Text/CH10.htm#marker-1017523){.index1}

[]{#HugoinActionIX.htm#pgfId-603281}[headers property, Event object
312](../Text/CH11.htm#marker-1012843){.index1}

[]{#HugoinActionIX.htm#pgfId-603283}[headings
60](../Text/CH03.htm#marker-1012029){.index1} --
[63](../Text/CH03.htm#marker-1032847){.index1}

[]{#HugoinActionIX.htm#pgfId-603286}[headless bundles
107](../Text/CH04.htm#marker-1027520){.index1}

[]{#HugoinActionIX.htm#pgfId-603288}[headless property
107](../Text/CH04.htm#marker-1027522){.index1}

[]{#HugoinActionIX.htm#pgfId-603290}[---help flag
27](../Text/CH02.htm#marker-1012038){.index1}

[]{#HugoinActionIX.htm#pgfId-603292}[help, Hugo
400](../Text/CH13.htm#marker-1039262){.index1}

[]{#HugoinActionIX.htm#pgfId-603294}[Heroku
319](../Text/CH11.htm#marker-1017026){.index1} --
[323](../Text/CH11.htm#marker-1033979){.index1}

[]{#HugoinActionIX.htm#pgfId-603297}[highlight shortcode
115](../Text/CH04.htm#marker-1018261){.index1} --
[117](../Text/CH04.htm#marker-1019380){.index1}

[]{#HugoinActionIX.htm#pgfId-603300}[home page
41](../Text/CH02.htm#marker-1016171){.index1},
[195](../Text/CH07.htm#marker-1014691){.index1}

[]{#HugoinActionIX.htm#pgfId-603303}[honeypots
249](../Text/CH09.htm#marker-1032226){.index1}

[]{#HugoinActionIX.htm#pgfId-603305}[horizontal scaling
5](../Text/CH01.htm#marker-1011918){.index1}

[]{#HugoinActionIX.htm#pgfId-603307}[HTML (HyperText Markup Language)
12](../Text/CH01.htm#marker-1012583){.index1}

[]{#HugoinActionIX.htm#pgfId-603309}[as primary JavaScript
282](../Text/CH10.htm#marker-1014183){.index1} --
[283](../Text/CH10.htm#marker-1014383){.index1}

[]{#HugoinActionIX.htm#pgfId-603312}[advantages
283](../Text/CH10.htm#marker-1014222){.index1}

[]{#HugoinActionIX.htm#pgfId-603314}[disadvantages
283](../Text/CH10.htm#marker-1014331){.index1}

[]{#HugoinActionIX.htm#pgfId-603316}[converting JavaScript to utility
controlled by 285](../Text/CH10.htm#marker-1014639){.index1} --
[290](../Text/CH10.htm#marker-1035272){.index1}

[]{#HugoinActionIX.htm#pgfId-603319}[enabling dynamic forms through
JavaScript 285](../Text/CH10.htm#marker-1014661){.index1} --
[287](../Text/CH10.htm#marker-1034721){.index1}

[]{#HugoinActionIX.htm#pgfId-603322}[passing variables when building
JavaScript 288](../Text/CH10.htm#marker-1016468){.index1} --
[290](../Text/CH10.htm#marker-1035271){.index1}

[]{#HugoinActionIX.htm#pgfId-603325}[splitting JavaScript into multiple
files 287](../Text/CH10.htm#marker-1015943){.index1} --
[288](../Text/CH10.htm#marker-1016449){.index1}

[]{#HugoinActionIX.htm#pgfId-603328}[JavaScript as separate layer to
283](../Text/CH10.htm#marker-1014402){.index1} --
[285](../Text/CH10.htm#marker-1014620){.index1}

[]{#HugoinActionIX.htm#pgfId-603331}[advantages
284](../Text/CH10.htm#marker-1014493){.index1} --
[285](../Text/CH10.htm#marker-1014541){.index1}

[]{#HugoinActionIX.htm#pgfId-603334}[disadvantages
285](../Text/CH10.htm#marker-1014568){.index1}

[]{#HugoinActionIX.htm#pgfId-603336}[Markdown
66](../Text/CH03.htm#marker-1013001){.index1} --
[67](../Text/CH03.htm#marker-1013206){.index1}

[]{#HugoinActionIX.htm#pgfId-603339}[shortcodes
117](../Text/CH04.htm#marker-1019467){.index1}

[]{#HugoinActionIX.htm#pgfId-603341}[HTTP
314](../Text/CH11.htm#marker-1014134){.index1} --
[315](../Text/CH11.htm#marker-1015928){.index1}

[]{#HugoinActionIX.htm#pgfId-603344}[httpMethod property, Event object
312](../Text/CH11.htm#marker-1012820){.index1}

[]{#HugoinActionIX.htm#pgfId-603346}[hug mod clean subcommand
230](../Text/CH08.htm#marker-1016261){.index1}

[]{#HugoinActionIX.htm#pgfId-603348}Hugo

[]{#HugoinActionIX.htm#pgfId-603349}[building with Jamstack
22](../Text/CH01.htm#marker-1013639){.index1} --
[23](../Text/CH01.htm#marker-1013786){.index1}

[]{#HugoinActionIX.htm#pgfId-603352}[documentation websites
23](../Text/CH01.htm#marker-1013739){.index1}

[]{#HugoinActionIX.htm#pgfId-603354}[hybrid Jamstack-based websites
23](../Text/CH01.htm#marker-1013772){.index1}

[]{#HugoinActionIX.htm#pgfId-603356}[nontechnology business websites
22](../Text/CH01.htm#marker-1013704){.index1}

[]{#HugoinActionIX.htm#pgfId-603358}[personal websites and blogs
22](../Text/CH01.htm#marker-1013663){.index1}

[]{#HugoinActionIX.htm#pgfId-603360}[code editors
406](../Text/APP_A.htm#marker-1027150){.index1}

[]{#HugoinActionIX.htm#pgfId-603362}[community
400](../Text/CH13.htm#marker-1023830){.index1} --
[401](../Text/CH13.htm#marker-1023955){.index1}

[]{#HugoinActionIX.htm#pgfId-603365}[asking for help
400](../Text/CH13.htm#marker-1039261){.index1}

[]{#HugoinActionIX.htm#pgfId-603367}[contributing
401](../Text/CH13.htm#marker-1023938){.index1}

[]{#HugoinActionIX.htm#pgfId-603369}[showcasing work
400](../Text/CH13.htm#marker-1023899){.index1} --
[401](../Text/CH13.htm#marker-1023921){.index1}

[]{#HugoinActionIX.htm#pgfId-603372}[functions for compile-time API
access 240](../Text/CH09.htm#marker-1031044){.index1} --
[241](../Text/CH09.htm#marker-1013158){.index1}

[]{#HugoinActionIX.htm#pgfId-603375}[future of
401](../Text/CH13.htm#marker-1023974){.index1}

[]{#HugoinActionIX.htm#pgfId-603377}Go template language

[]{#HugoinActionIX.htm#pgfId-603378}[Pipes
433](../Text/APP_D.htm#marker-1016925){.index1}

[]{#HugoinActionIX.htm#pgfId-603380}[tasks
432](../Text/APP_D.htm#marker-1016645){.index1}

[]{#HugoinActionIX.htm#pgfId-603382}[installing
405](../Text/APP_A.htm#marker-1012003){.index1} --
[406](../Text/APP_A.htm#marker-1027131){.index1}

[]{#HugoinActionIX.htm#pgfId-603385}[direct download
405](../Text/APP_A.htm#marker-1014311){.index1} --
[406](../Text/APP_A.htm#marker-1027129){.index1}

[]{#HugoinActionIX.htm#pgfId-603388}[system package managers
405](../Text/APP_A.htm#marker-1163556){.index1}

[]{#HugoinActionIX.htm#pgfId-603390}[JavaScript, using in projects
277](../Text/CH10.htm#marker-1011878){.index1} --
[278](../Text/CH10.htm#marker-1031511){.index1}

[]{#HugoinActionIX.htm#pgfId-603393}[reasons for
16](../Text/CH01.htm#marker-1013137){.index1} --
[20](../Text/CH01.htm#marker-1013535){.index1}

[]{#HugoinActionIX.htm#pgfId-603396}[analysis paralysis
20](../Text/CH01.htm#marker-1013430){.index1}

[]{#HugoinActionIX.htm#pgfId-603398}[community project
20](../Text/CH01.htm#marker-1013523){.index1}

[]{#HugoinActionIX.htm#pgfId-603400}[low maintenance
19](../Text/CH01.htm#marker-1013405){.index1} --
[20](../Text/CH01.htm#marker-1013413){.index1}

[]{#HugoinActionIX.htm#pgfId-603403}[performance
18](../Text/CH01.htm#marker-1013295){.index1} --
[19](../Text/CH01.htm#marker-1013309){.index1}

[]{#HugoinActionIX.htm#pgfId-603406}[power
20](../Text/CH01.htm#marker-1013459){.index1}

[]{#HugoinActionIX.htm#pgfId-603408}[scalability
20](../Text/CH01.htm#marker-1013498){.index1}

[]{#HugoinActionIX.htm#pgfId-603410}[self-contained
19](../Text/CH01.htm#marker-1013328){.index1}

[]{#HugoinActionIX.htm#pgfId-603412}[single file
19](../Text/CH01.htm#marker-1013381){.index1}

[]{#HugoinActionIX.htm#pgfId-603414}[speed
17](../Text/CH01.htm#marker-1013186){.index1} --
[18](../Text/CH01.htm#marker-1024073){.index1},
[21](../Text/CH01.htm#marker-1013582){.index1} --
[22](../Text/CH01.htm#marker-1013610){.index1}

[]{#HugoinActionIX.htm#pgfId-603419}[stability
18](../Text/CH01.htm#marker-1013262){.index1}

[]{#HugoinActionIX.htm#pgfId-603421}[REST APIs and
243](../Text/CH09.htm#marker-1014511){.index1} --
[244](../Text/CH09.htm#marker-1014595){.index1}

[]{#HugoinActionIX.htm#pgfId-603424}[success with
23](../Text/CH01.htm#marker-1013848){.index1} --
[24](../Text/CH01.htm#marker-1013870){.index1}

[]{#HugoinActionIX.htm#pgfId-603427}[system requirements
403](../Text/APP_A.htm#marker-1011767){.index1} --
[404](../Text/APP_A.htm#marker-1163195){.index1}

[]{#HugoinActionIX.htm#pgfId-603430}[Hugo flavors
404](../Text/APP_A.htm#marker-1011871){.index1}

[]{#HugoinActionIX.htm#pgfId-603432}[Hugo versions
404](../Text/APP_A.htm#marker-1011926){.index1}

[]{#HugoinActionIX.htm#pgfId-603434}[troubleshooting
406](../Text/APP_A.htm#marker-1027179){.index1} --
[407](../Text/APP_A.htm#marker-1027437){.index1}

[]{#HugoinActionIX.htm#pgfId-603437}[fixing Modules
407](../Text/APP_A.htm#marker-1027341){.index1}

[]{#HugoinActionIX.htm#pgfId-603439}[getting Hugo extended
406](../Text/APP_A.htm#marker-1027281){.index1}

[]{#HugoinActionIX.htm#pgfId-603441}[installing right version
406](../Text/APP_A.htm#marker-1027230){.index1}

[]{#HugoinActionIX.htm#pgfId-603443}[running
406](../Text/APP_A.htm#marker-1027201){.index1}

[]{#HugoinActionIX.htm#pgfId-603445}[use cases
23](../Text/CH01.htm#marker-1013815){.index1}

[]{#HugoinActionIX.htm#pgfId-603447}[hugo command
27](../Text/CH02.htm#marker-1025893){.index1} --
[28](../Text/CH02.htm#marker-1012442){.index1},
[91](../Text/CH04.htm#marker-1012039){.index1}

[]{#HugoinActionIX.htm#pgfId-603451}[hugo deploy built-in command
50](../Text/CH02.htm#marker-1018486){.index1}

[]{#HugoinActionIX.htm#pgfId-603453}[hugo mod get -u subcommand
230](../Text/CH08.htm#marker-1016317){.index1}

[]{#HugoinActionIX.htm#pgfId-603455}[hugo mod get \<module\>@\<version\>
subcommand 230](../Text/CH08.htm#marker-1016363){.index1}

[]{#HugoinActionIX.htm#pgfId-603457}[hugo mod get command
221](../Text/CH08.htm#marker-1013028){.index1}

[]{#HugoinActionIX.htm#pgfId-603459}[hugo mod graph command
230](../Text/CH08.htm#marker-1016284){.index1} --
[231](../Text/CH08.htm#marker-1020041){.index1}

[]{#HugoinActionIX.htm#pgfId-603462}[hugo mod npm pack command
295](../Text/CH10.htm#marker-1020442){.index1}

[]{#HugoinActionIX.htm#pgfId-603464}[hugo mod subcommands
221](../Text/CH08.htm#marker-1013002){.index1}

[]{#HugoinActionIX.htm#pgfId-603466}[hugo mod tidy subcommand
230](../Text/CH08.htm#marker-1016238){.index1}

[]{#HugoinActionIX.htm#pgfId-603468}[Hugo Modules
216](../Text/CH08.htm#marker-1021708){.index1}

[]{#HugoinActionIX.htm#pgfId-603470}[APIs, commonly used
230](../Text/CH08.htm#marker-1016200){.index1} --
[231](../Text/CH08.htm#marker-1016674){.index1}

[]{#HugoinActionIX.htm#pgfId-603473}[as template plugins
226](../Text/CH08.htm#marker-1014449){.index1} --
[227](../Text/CH08.htm#marker-1015107){.index1}

[]{#HugoinActionIX.htm#pgfId-603476}[content plugins
228](../Text/CH08.htm#marker-1015412){.index1} --
[230](../Text/CH08.htm#marker-1019906){.index1}

[]{#HugoinActionIX.htm#pgfId-603479}dependencies

[]{#HugoinActionIX.htm#pgfId-603480}[adding nested
223](../Text/CH08.htm#marker-1013953){.index1} --
[226](../Text/CH08.htm#marker-1014426){.index1}

[]{#HugoinActionIX.htm#pgfId-603483}[modifying locally
222](../Text/CH08.htm#marker-1013437){.index1} --
[223](../Text/CH08.htm#marker-1023408){.index1}

[]{#HugoinActionIX.htm#pgfId-603486}[shared across theme and website
227](../Text/CH08.htm#marker-1015221){.index1} --
[228](../Text/CH08.htm#marker-1015391){.index1}

[]{#HugoinActionIX.htm#pgfId-603489}[viewing source code
222](../Text/CH08.htm#marker-1013287){.index1}

[]{#HugoinActionIX.htm#pgfId-603491}[setting up
217](../Text/CH08.htm#marker-1011902){.index1} --
[218](../Text/CH08.htm#marker-1021758){.index1}

[]{#HugoinActionIX.htm#pgfId-603494}themes

[]{#HugoinActionIX.htm#pgfId-603495}[enabling other than Eclectic
220](../Text/CH08.htm#marker-1012654){.index1}

[]{#HugoinActionIX.htm#pgfId-603497}[getting specific version of
220](../Text/CH08.htm#marker-1012813){.index1} --
[221](../Text/CH08.htm#marker-1023314){.index1}

[]{#HugoinActionIX.htm#pgfId-603500}[importing
219](../Text/CH08.htm#marker-1012309){.index1}

[]{#HugoinActionIX.htm#pgfId-603502}[overview
218](../Text/CH08.htm#marker-1012205){.index1} --
[219](../Text/CH08.htm#marker-1012288){.index1}

[]{#HugoinActionIX.htm#pgfId-603505}[troubleshooting
407](../Text/APP_A.htm#marker-1027339){.index1}

[]{#HugoinActionIX.htm#pgfId-603507}[with JavaScript
299](../Text/CH10.htm#marker-1023320){.index1} --
[300](../Text/CH10.htm#marker-1035115){.index1}

[]{#HugoinActionIX.htm#pgfId-603510}[hugo new command
29](../Text/CH02.htm#marker-1012961){.index1}

[]{#HugoinActionIX.htm#pgfId-603512}[hugo new site command
148](../Text/CH05.htm#marker-1025730){.index1}

[]{#HugoinActionIX.htm#pgfId-603514}Hugo Pipes

[]{#HugoinActionIX.htm#pgfId-603515}[handling assets
170](../Text/CH06.htm#marker-1021071){.index1} --
[183](../Text/CH06.htm#marker-1037835){.index1}

[]{#HugoinActionIX.htm#pgfId-603518}[images
176](../Text/CH06.htm#marker-1024660){.index1}

[]{#HugoinActionIX.htm#pgfId-603520}[other
182](../Text/CH06.htm#marker-1037769){.index1} --
[183](../Text/CH06.htm#marker-1037834){.index1}

[]{#HugoinActionIX.htm#pgfId-603523}[textual assets
171](../Text/CH06.htm#marker-1021103){.index1}

[]{#HugoinActionIX.htm#pgfId-603525}[resource manipulation and
433](../Text/APP_D.htm#marker-1016923){.index1}

[]{#HugoinActionIX.htm#pgfId-603527}[hugo server command
34](../Text/CH02.htm#marker-1014005){.index1},
[36](../Text/CH02.htm#marker-1014593){.index1}

[]{#HugoinActionIX.htm#pgfId-603530}[hugo variable
124](../Text/CH05.htm#marker-1012335){.index1}

[]{#HugoinActionIX.htm#pgfId-603532}[hugo version command
171](../Text/CH06.htm#marker-1021464){.index1},
[404](../Text/APP_A.htm#marker-1011931){.index1},
[406](../Text/APP_A.htm#marker-1027235){.index1}

[]{#HugoinActionIX.htm#pgfId-603536}[humanize function
130](../Text/CH05.htm#marker-1016870){.index1},
[135](../Text/CH05.htm#marker-1019313){.index1}

[]{#HugoinActionIX.htm#pgfId-603539}[humanize method
432](../Text/APP_D.htm#marker-1016426){.index1}

[]{#HugoinActionIX.htm#pgfId-603541}[hybrid Jamstack-based websites
23](../Text/CH01.htm#marker-1013770){.index1}

[]{#HugoinActionIX.htm#pgfId-603543}I[]{#HugoinActionIX.htm#I}

[]{#HugoinActionIX.htm#pgfId-603545}[id attribute
69](../Text/CH03.htm#marker-1026740){.index1}

[]{#HugoinActionIX.htm#pgfId-603547}[IDs, Markdown
69](../Text/CH03.htm#marker-1013557){.index1} --
[70](../Text/CH03.htm#marker-1026823){.index1}

[]{#HugoinActionIX.htm#pgfId-603550}[if check
128,](../Text/CH05.htm#marker-1015434){.index1}
[164](../Text/CH06.htm#marker-1017323){.index1},
[189](../Text/CH07.htm#marker-1012020){.index1}

[]{#HugoinActionIX.htm#pgfId-603554}[images
63](../Text/CH03.htm#marker-1012556){.index1} --
[66](../Text/CH03.htm#marker-1032956){.index1},
[176](../Text/CH06.htm#marker-1024658){.index1}

[]{#HugoinActionIX.htm#pgfId-603558}[img tag
104](../Text/CH04.htm#marker-1015706){.index1},
[178](../Text/CH04.htm#marker-1037425){.index1}

[]{#HugoinActionIX.htm#pgfId-603561}[importing themes
219](../Text/CH08.htm#marker-1012307){.index1}

[]{#HugoinActionIX.htm#pgfId-603563}[in operator
141](../Text/CH05.htm#marker-1021566){.index1}

[]{#HugoinActionIX.htm#pgfId-603565}[includeNewer parameter
197](../Text/CH07.htm#marker-1015610){.index1}

[]{#HugoinActionIX.htm#pgfId-603567}[index layout
157](../Text/CH06.htm#marker-1013931){.index1}

[]{#HugoinActionIX.htm#pgfId-603569}index pages

[]{#HugoinActionIX.htm#pgfId-603570}[adding
41](../Text/CH02.htm#marker-1016128){.index1}

[]{#HugoinActionIX.htm#pgfId-603572}[updating
198](../Text/CH07.htm#marker-1016126){.index1}

[]{#HugoinActionIX.htm#pgfId-603574}[creating multiple pages to render
long list 199](../Text/CH07.htm#marker-1016832){.index1} --
[202](../Text/CH07.htm#marker-1030361){.index1}

[]{#HugoinActionIX.htm#pgfId-603577}[rendering list of subsections
202](../Text/CH07.htm#marker-1018307){.index1}

[]{#HugoinActionIX.htm#pgfId-603579}[using custom paginator
202](../Text/CH07.htm#marker-1017902){.index1}

[]{#HugoinActionIX.htm#pgfId-603581}[using list template for index pages
198](../Text/CH07.htm#marker-1016174){.index1}

[]{#HugoinActionIX.htm#pgfId-603583}[index template
41](../Text/CH02.htm#marker-1016183){.index1}

[]{#HugoinActionIX.htm#pgfId-603585}[inheritance
161](../Text/CH06.htm#marker-1015397){.index1}

[]{#HugoinActionIX.htm#pgfId-603587}[init function
353](../Text/CH12.htm#marker-1018742){.index1}

[]{#HugoinActionIX.htm#pgfId-603589}[init method
292](../Text/CH10.htm#marker-1018929){.index1},
[364](../Text/CH12.htm#marker-1026513){.index1}

[]{#HugoinActionIX.htm#pgfId-603592}[inline elements
72](../Text/CH03.htm#marker-1014037){.index1}

[]{#HugoinActionIX.htm#pgfId-603594}[inline HTML
72](../Text/CH03.htm#marker-1014094){.index1}

[]{#HugoinActionIX.htm#pgfId-603596}[inline links
63](../Text/CH03.htm#marker-1012554){.index1} --
[66](../Text/CH03.htm#marker-1032971){.index1}

[]{#HugoinActionIX.htm#pgfId-603599}[inline shortcodes
119](../Text/CH04.htm#marker-1020203){.index1} --
[120](../Text/CH04.htm#marker-1030876){.index1}

[]{#HugoinActionIX.htm#pgfId-603602}[inner content in shortcodes
147](../Text/CH05.htm#marker-1032746){.index1} --
[148](../Text/CH05.htm#marker-1025475){.index1}

[]{#HugoinActionIX.htm#pgfId-603605}[input event
298](../Text/CH10.htm#marker-1021966){.index1}

[]{#HugoinActionIX.htm#pgfId-603607}[insertAdjacentHTML
278](../Text/CH10.htm#marker-1012162){.index1}

[]{#HugoinActionIX.htm#pgfId-603609}[instagram shortcode
117](../Text/CH04.htm#marker-1019311){.index1}

[]{#HugoinActionIX.htm#pgfId-603611}[install functions
388](../Text/CH13.htm#marker-1016666){.index1}

[]{#HugoinActionIX.htm#pgfId-603613}[installing
405](../Text/APP_A.htm#marker-1012001){.index1} --
[406](../Text/APP_A.htm#marker-1027127){.index1}

[]{#HugoinActionIX.htm#pgfId-603616}[direct download
405](../Text/APP_A.htm#marker-1014309){.index1} --
[406](../Text/APP_A.htm#marker-1027124){.index1}

[]{#HugoinActionIX.htm#pgfId-603619}[right version
406](../Text/APP_A.htm#marker-1027228){.index1}

[]{#HugoinActionIX.htm#pgfId-603621}[system package managers
405](../Text/APP_A.htm#marker-1163555){.index1}

[]{#HugoinActionIX.htm#pgfId-603623}[intersect function
432](../Text/APP_D.htm#marker-1016589){.index1}

[]{#HugoinActionIX.htm#pgfId-603625}[isBase64Encoded property, Event
object 312](../Text/CH11.htm#marker-1012932){.index1}

[]{#HugoinActionIX.htm#pgfId-603627}[isset function
128](../Text/CH05.htm#marker-1015560){.index1}

[]{#HugoinActionIX.htm#pgfId-603629}J[]{#HugoinActionIX.htm#J}

[]{#HugoinActionIX.htm#pgfId-603631}[Jamstack
398](../Text/CH13.htm#marker-1023552){.index1} --
[399](../Text/CH13.htm#marker-1023811){.index1}

[]{#HugoinActionIX.htm#pgfId-603634}[authentication and storage
399](../Text/CH13.htm#marker-1023787){.index1}

[]{#HugoinActionIX.htm#pgfId-603636}[checkout support
356](../Text/CH12.htm#marker-1021264){.index1} --
[374](../Text/CH12.htm#marker-1045051){.index1}

[]{#HugoinActionIX.htm#pgfId-603639}[creating checkout session
357](../Text/CH12.htm#marker-1021414){.index1} --
[363](../Text/CH12.htm#marker-1042860){.index1}

[]{#HugoinActionIX.htm#pgfId-603642}[enabling buy now
364](../Text/CH12.htm#marker-1027300){.index1} --
[374](../Text/CH12.htm#marker-1045050){.index1}

[]{#HugoinActionIX.htm#pgfId-603645}[handling success and failure
363](../Text/CH12.htm#marker-1026489){.index1} --
[364](../Text/CH12.htm#marker-1027277){.index1}

[]{#HugoinActionIX.htm#pgfId-603648}[setting up billing provider
356](../Text/CH12.htm#marker-1021288){.index1} --
[357](../Text/CH12.htm#marker-1021367){.index1}

[]{#HugoinActionIX.htm#pgfId-603651}[CLI, SDKs, configurations, and
additional automation 398](../Text/CH13.htm#marker-1023573){.index1} --
[399](../Text/CH13.htm#marker-1041986){.index1}

[]{#HugoinActionIX.htm#pgfId-603654}[commenting using
256](../Text/CH09.htm#marker-1019486){.index1} --
[270](../Text/CH09.htm#marker-1038877){.index1}

[]{#HugoinActionIX.htm#pgfId-603657}[displaying comment form
256](../Text/CH09.htm#marker-1019517){.index1} --
[259](../Text/CH09.htm#marker-1038754){.index1}

[]{#HugoinActionIX.htm#pgfId-603660}[displaying comments
259](../Text/CH09.htm#marker-1021206){.index1} --
[270](../Text/CH09.htm#marker-1038876){.index1}

[]{#HugoinActionIX.htm#pgfId-603663}[components of
11](../Text/CH01.htm#marker-1012431){.index1} --
[13](../Text/CH01.htm#marker-1023042){.index1}

[]{#HugoinActionIX.htm#pgfId-603666}[application programming interfaces
(APIs) 11](../Text/CH01.htm#marker-1012499){.index1} --
[12](../Text/CH01.htm#marker-1012524){.index1}

[]{#HugoinActionIX.htm#pgfId-603669}[JavaScript
11](../Text/CH01.htm#marker-1012462){.index1}

[]{#HugoinActionIX.htm#pgfId-603671}[markup
12](../Text/CH01.htm#marker-1012546){.index1} --
[13](../Text/CH01.htm#marker-1023041){.index1}

[]{#HugoinActionIX.htm#pgfId-603674}[creating contact page with
244](../Text/CH09.htm#marker-1014614){.index1} --
[253](../Text/CH09.htm#marker-1017680){.index1}

[]{#HugoinActionIX.htm#pgfId-603677}[choosing form provider
247](../Text/CH09.htm#marker-1015973){.index1}

[]{#HugoinActionIX.htm#pgfId-603679}[setting up contact form
244](../Text/CH09.htm#marker-1036223){.index1} --
[247](../Text/CH09.htm#marker-1038346){.index1}

[]{#HugoinActionIX.htm#pgfId-603682}[using Formspree for contact forms
249](../Text/CH09.htm#marker-1016533){.index1} --
[253](../Text/CH09.htm#marker-1017677){.index1}

[]{#HugoinActionIX.htm#pgfId-603685}[using Netlify forms for Contact Us
page 248](../Text/CH09.htm#marker-1016087){.index1} --
[249](../Text/CH09.htm#marker-1016512){.index1}

[]{#HugoinActionIX.htm#pgfId-603688}[e-commerce pages
345](../Text/CH12.htm#marker-1011858){.index1} --
[349](../Text/CH12.htm#marker-1044739){.index1}

[]{#HugoinActionIX.htm#pgfId-603691}[product content view
345](../Text/CH12.htm#marker-1011884){.index1} --
[347](../Text/CH12.htm#marker-1044632){.index1}

[]{#HugoinActionIX.htm#pgfId-603694}[single product page
347](../Text/CH12.htm#marker-1013648){.index1} --
[349](../Text/CH12.htm#marker-1044738){.index1}

[]{#HugoinActionIX.htm#pgfId-603697}[fulfillment
365](../Text/CH12.htm#marker-1027431){.index1} --
[374](../Text/CH12.htm#marker-1032209){.index1}

[]{#HugoinActionIX.htm#pgfId-603700}[attaching files to email
373](../Text/CH12.htm#marker-1031418){.index1} --
[374](../Text/CH12.htm#marker-1032207){.index1}

[]{#HugoinActionIX.htm#pgfId-603703}[getting purchase details
368](../Text/CH12.htm#marker-1028561){.index1} --
[369](../Text/CH12.htm#marker-1041955){.index1}

[]{#HugoinActionIX.htm#pgfId-603706}[preparing content to send to users
372](../Text/CH12.htm#marker-1030175){.index1}

[]{#HugoinActionIX.htm#pgfId-603708}[receiving and verifying webhooks
365](../Text/CH12.htm#marker-1027463){.index1} --
[368](../Text/CH12.htm#marker-1041791){.index1}

[]{#HugoinActionIX.htm#pgfId-603711}[sending emails
371](../Text/CH12.htm#marker-1029644){.index1}

[]{#HugoinActionIX.htm#pgfId-603713}[setting up email provider
369](../Text/CH12.htm#marker-1029485){.index1} --
[370](../Text/CH12.htm#marker-1045288){.index1}

[]{#HugoinActionIX.htm#pgfId-603716}[hosts
50](../Text/CH02.htm#marker-1018434){.index1}

[]{#HugoinActionIX.htm#pgfId-603718}Hugo

[]{#HugoinActionIX.htm#pgfId-603719}[building with
22](../Text/CH01.htm#marker-1013637){.index1} --
[23](../Text/CH01.htm#marker-1013780){.index1}

[]{#HugoinActionIX.htm#pgfId-603722}[reasons for
16](../Text/CH01.htm#marker-1013135){.index1} --
[20](../Text/CH01.htm#marker-1013530){.index1}

[]{#HugoinActionIX.htm#pgfId-603725}[success with
23](../Text/CH01.htm#marker-1013846){.index1} --
[24](../Text/CH01.htm#marker-1013867){.index1}

[]{#HugoinActionIX.htm#pgfId-603728}[use cases
23](../Text/CH01.htm#marker-1013813){.index1}

[]{#HugoinActionIX.htm#pgfId-603730}[overview
9](../Text/CH01.htm#marker-1012201){.index1} --
[10](../Text/CH01.htm#marker-1024031){.index1}

[]{#HugoinActionIX.htm#pgfId-603733}[reasons for
13](../Text/CH01.htm#marker-1012689){.index1} --
[14](../Text/CH01.htm#marker-1023106){.index1}

[]{#HugoinActionIX.htm#pgfId-603736}[costs
13](../Text/CH01.htm#marker-1012757){.index1}

[]{#HugoinActionIX.htm#pgfId-603738}[developer productivity
14](../Text/CH01.htm#marker-1012784){.index1}

[]{#HugoinActionIX.htm#pgfId-603740}[longevity
14](../Text/CH01.htm#marker-1012813){.index1}

[]{#HugoinActionIX.htm#pgfId-603742}[minimal operations
13](../Text/CH01.htm#marker-1012708){.index1}

[]{#HugoinActionIX.htm#pgfId-603744}[performance
13](../Text/CH01.htm#marker-1012732){.index1}

[]{#HugoinActionIX.htm#pgfId-603746}[tooling
14](../Text/CH01.htm#marker-1012840){.index1}

[]{#HugoinActionIX.htm#pgfId-603748}[selecting builder
16](../Text/CH01.htm#marker-1013084){.index1}

[]{#HugoinActionIX.htm#pgfId-603750}[shopping carts
349](../Text/CH12.htm#marker-1015607){.index1} --
[355](../Text/CH12.htm#marker-1044875){.index1}

[]{#HugoinActionIX.htm#pgfId-603753}[cart button in header
349](../Text/CH12.htm#marker-1015641){.index1} --
[350](../Text/CH12.htm#marker-1037245){.index1}

[]{#HugoinActionIX.htm#pgfId-603756}[creating in JavaScript
350](../Text/CH12.htm#marker-1016138){.index1} --
[355](../Text/CH12.htm#marker-1044874){.index1}

[]{#HugoinActionIX.htm#pgfId-603759}[speed, importance of
21](../Text/CH01.htm#marker-1013580){.index1} --
[22](../Text/CH01.htm#marker-1013608){.index1}

[]{#HugoinActionIX.htm#pgfId-603762}[web stacks
4](../Text/CH01.htm#marker-1011851){.index1} --
[8](../Text/CH01.htm#marker-1012160){.index1}

[]{#HugoinActionIX.htm#pgfId-603765}[when to not use
15](../Text/CH01.htm#marker-1012889){.index1} --
[16](../Text/CH01.htm#marker-1023163){.index1}

[]{#HugoinActionIX.htm#pgfId-603768}[dynamic data with no historical
significance 15](../Text/CH01.htm#marker-1012908){.index1}

[]{#HugoinActionIX.htm#pgfId-603770}[no data to compile
15](../Text/CH01.htm#marker-1012997){.index1} --
[16](../Text/CH01.htm#marker-1023162){.index1}

[]{#HugoinActionIX.htm#pgfId-603773}[user-generated content with
transient data 15](../Text/CH01.htm#marker-1012939){.index1}

[]{#HugoinActionIX.htm#pgfId-603775}[user-specific web pages
15](../Text/CH01.htm#marker-1012970){.index1}

[]{#HugoinActionIX.htm#pgfId-603777}JavaScript

[]{#HugoinActionIX.htm#pgfId-603778}[controlling page flow with
278](../Text/CH10.htm#marker-1011999){.index1} --
[281](../Text/CH10.htm#marker-1030379){.index1}

[]{#HugoinActionIX.htm#pgfId-603781}[building and loading JavaScript
using Hugo Pipes 280](../Text/CH10.htm#marker-1013490){.index1} --
[281](../Text/CH10.htm#marker-1030378){.index1}

[]{#HugoinActionIX.htm#pgfId-603784}[handling forms in JavaScript
278](../Text/CH10.htm#marker-1012021){.index1} --
[280](../Text/CH10.htm#marker-1031847){.index1}

[]{#HugoinActionIX.htm#pgfId-603787}[converting to utility controlled by
HTML code 285](../Text/CH10.htm#marker-1014637){.index1} --
[290](../Text/CH10.htm#marker-1035270){.index1}

[]{#HugoinActionIX.htm#pgfId-603790}[enabling dynamic forms through
JavaScript 285](../Text/CH10.htm#marker-1014659){.index1} --
[287](../Text/CH10.htm#marker-1034720){.index1}

[]{#HugoinActionIX.htm#pgfId-603793}[passing variables when building
JavaScript 288](../Text/CH10.htm#marker-1016466){.index1} --
[290](../Text/CH10.htm#marker-1035269){.index1}

[]{#HugoinActionIX.htm#pgfId-603796}[splitting JavaScript into multiple
files 287](../Text/CH10.htm#marker-1015941){.index1} --
[288](../Text/CH10.htm#marker-1016446){.index1}

[]{#HugoinActionIX.htm#pgfId-603799}[enabling client-side search
290](../Text/CH10.htm#marker-1017391){.index1} --
[300](../Text/CH10.htm#marker-1035114){.index1}

[]{#HugoinActionIX.htm#pgfId-603802}[creating search index
297](../Text/CH10.htm#marker-1021110){.index1} --
[298](../Text/CH10.htm#marker-1034953){.index1}

[]{#HugoinActionIX.htm#pgfId-603805}[getting search input and showing
results 298](../Text/CH10.htm#marker-1021934){.index1} --
[299](../Text/CH10.htm#marker-1035034){.index1}

[]{#HugoinActionIX.htm#pgfId-603808}[importing search library
293](../Text/CH10.htm#marker-1019394){.index1} --
[295](../Text/CH10.htm#marker-1020266){.index1}

[]{#HugoinActionIX.htm#pgfId-603811}[loading website data
291](../Text/CH10.htm#marker-1017852){.index1} --
[293](../Text/CH10.htm#marker-1030824){.index1}

[]{#HugoinActionIX.htm#pgfId-603814}[overview
290](../Text/CH10.htm#marker-1017413){.index1}

[]{#HugoinActionIX.htm#pgfId-603816}[showing search box in header
291](../Text/CH10.htm#marker-1017521){.index1}

[]{#HugoinActionIX.htm#pgfId-603818}[updating build systems to support
npm 295](../Text/CH10.htm#marker-1020289){.index1} --
[297](../Text/CH10.htm#marker-1021085){.index1}

[]{#HugoinActionIX.htm#pgfId-603821}[using Hugo modules with JavaScript
299](../Text/CH10.htm#marker-1023318){.index1} --
[300](../Text/CH10.htm#marker-1035113){.index1}

[]{#HugoinActionIX.htm#pgfId-603824}[HTML as primary
282](../Text/CH10.htm#marker-1014181){.index1} --
[283](../Text/CH10.htm#marker-1014379){.index1}

[]{#HugoinActionIX.htm#pgfId-603827}[advantages
283](../Text/CH10.htm#marker-1014220){.index1}

[]{#HugoinActionIX.htm#pgfId-603829}[disadvantages
283](../Text/CH10.htm#marker-1014329){.index1}

[]{#HugoinActionIX.htm#pgfId-603831}[Jamstack
11](../Text/CH01.htm#marker-1012460){.index1}

[]{#HugoinActionIX.htm#pgfId-603833}[JavaScript as separate layer to
HTML 283](../Text/CH10.htm#marker-1014400){.index1} --
[285](../Text/CH10.htm#marker-1014616){.index1}

[]{#HugoinActionIX.htm#pgfId-603836}[advantages
284](../Text/CH10.htm#marker-1014491){.index1} --
[285](../Text/CH10.htm#marker-1014538){.index1}

[]{#HugoinActionIX.htm#pgfId-603839}[disadvantages
285](../Text/CH10.htm#marker-1014566){.index1}

[]{#HugoinActionIX.htm#pgfId-603841}[reasons for using in Hugo project
277](../Text/CH10.htm#marker-1011876){.index1} --
[278](../Text/CH10.htm#marker-1031510){.index1}

[]{#HugoinActionIX.htm#pgfId-603844}[shopping carts, creating
350](../Text/CH12.htm#marker-1016136){.index1} --
[355](../Text/CH12.htm#marker-1044873){.index1}

[]{#HugoinActionIX.htm#pgfId-603847}[adding data when clicking add to
cart 351](../Text/CH12.htm#marker-1017028){.index1} --
[352](../Text/CH12.htm#marker-1039983){.index1}

[]{#HugoinActionIX.htm#pgfId-603850}[creating API for product
information 352](../Text/CH12.htm#marker-1017979){.index1} --
[353](../Text/CH12.htm#marker-1038000){.index1}

[]{#HugoinActionIX.htm#pgfId-603853}[managing across tabs
350](../Text/CH12.htm#marker-1016162){.index1} --
[351](../Text/CH12.htm#marker-1016848){.index1}

[]{#HugoinActionIX.htm#pgfId-603856}[rendering shopping cart
353](../Text/CH12.htm#marker-1018737){.index1} --
[355](../Text/CH12.htm#marker-1044872){.index1}

[]{#HugoinActionIX.htm#pgfId-603859}[SPA in Hugo website
300](../Text/CH10.htm#marker-1023912){.index1} --
[304](../Text/CH10.htm#marker-1025471){.index1}

[]{#HugoinActionIX.htm#pgfId-603862}[creating template for
302](../Text/CH10.htm#marker-1024226){.index1}

[]{#HugoinActionIX.htm#pgfId-603864}[creating web page
303](../Text/CH10.htm#marker-1025168){.index1} --
[304](../Text/CH10.htm#marker-1025469){.index1}

[]{#HugoinActionIX.htm#pgfId-603867}[importing CSS
303](../Text/CH10.htm#marker-1024810){.index1}

[]{#HugoinActionIX.htm#pgfId-603869}[importing node module in root
project 301](../Text/CH10.htm#marker-1023957){.index1} --
[302](../Text/CH10.htm#marker-1024205){.index1}

[]{#HugoinActionIX.htm#pgfId-603872}[Turbo JavaScript library
395](../Text/CH13.htm#marker-1022486){.index1} --
[397](../Text/CH13.htm#marker-1023535){.index1}

[]{#HugoinActionIX.htm#pgfId-603875}[adding Turbo Drive to template
396](../Text/CH13.htm#marker-1022567){.index1}

[]{#HugoinActionIX.htm#pgfId-603877}[handling JavaScript-based
navigation 396](../Text/CH13.htm#marker-1022931){.index1} --
[397](../Text/CH13.htm#marker-1023533){.index1}

[]{#HugoinActionIX.htm#pgfId-603880}[updating code for feedback on
comment submission 340](../Text/CH11.htm#marker-1024882){.index1} --
[342](../Text/CH11.htm#marker-1026372){.index1}

[]{#HugoinActionIX.htm#pgfId-603883}[join method
432](../Text/APP_D.htm#marker-1016537){.index1}

[]{#HugoinActionIX.htm#pgfId-603885}[JSON (JavaScript Object Notation)
78](../Text/CH03.htm#marker-1017564){.index1},
[411](../Text/APP_B.htm#marker-1013235){.index1} --
[414](../Text/APP_B.htm#marker-1015185){.index1}

[]{#HugoinActionIX.htm#pgfId-603889}[data types
411](../Text/APP_B.htm#marker-1013267){.index1} --
[412](../Text/APP_B.htm#marker-1019303){.index1}

[]{#HugoinActionIX.htm#pgfId-603892}[dictionaries
412](../Text/APP_B.htm#marker-1014035){.index1}

[]{#HugoinActionIX.htm#pgfId-603894}[front matter
413](../Text/APP_B.htm#marker-1014341){.index1}

[]{#HugoinActionIX.htm#pgfId-603896}[lists
412](../Text/APP_B.htm#marker-1013799){.index1}

[]{#HugoinActionIX.htm#pgfId-603898}[multiline strings
412](../Text/APP_B.htm#marker-1013731){.index1}

[]{#HugoinActionIX.htm#pgfId-603900}[pseudo APIs compiling to
270](../Text/CH09.htm#marker-1025387){.index1} --
[273](../Text/CH09.htm#marker-1026672){.index1}

[]{#HugoinActionIX.htm#pgfId-603903}[creating JSON API for website
271](../Text/CH09.htm#marker-1025547){.index1} --
[273](../Text/CH09.htm#marker-1026669){.index1}

[]{#HugoinActionIX.htm#pgfId-603906}[custom output formats in Hugo
271](../Text/CH09.htm#marker-1025455){.index1}

[]{#HugoinActionIX.htm#pgfId-603908}[revisiting config file
413](../Text/APP_B.htm#marker-1014409){.index1} --
[414](../Text/APP_B.htm#marker-1015183){.index1}

[]{#HugoinActionIX.htm#pgfId-603911}[jsonify function
272](../Text/CH09.htm#marker-1025661){.index1}

[]{#HugoinActionIX.htm#pgfId-603913}[jsonify method
272](../Text/CH09.htm#marker-1025696){.index1},
[432](../Text/APP_D.htm#marker-1016291){.index1}

[]{#HugoinActionIX.htm#pgfId-603916}K[]{#HugoinActionIX.htm#K}

[]{#HugoinActionIX.htm#pgfId-603918}[keywords property
80](../Text/CH03.htm#marker-1028187){.index1}

[]{#HugoinActionIX.htm#pgfId-603920}[kind flag
149](../Text/CH05.htm#marker-1036346){.index1}

[]{#HugoinActionIX.htm#pgfId-603922}[kinds
195](../Text/CH07.htm#marker-1014654){.index1}

[]{#HugoinActionIX.htm#pgfId-603924}L[]{#HugoinActionIX.htm#L}

[]{#HugoinActionIX.htm#pgfId-603926}[landing pages
41](../Text/CH02.htm#marker-1016177){.index1},
[84](../Text/CH03.htm#marker-1020005){.index1} --
[85](../Text/CH03.htm#marker-1020182){.index1}

[]{#HugoinActionIX.htm#pgfId-603930}[language features
433](../Text/APP_D.htm#marker-1016793){.index1}

[]{#HugoinActionIX.htm#pgfId-603932}[languages section
376](../Text/CH13.htm#marker-1011854){.index1}

[]{#HugoinActionIX.htm#pgfId-603934}[last method
432](../Text/APP_D.htm#marker-1016525){.index1}

[]{#HugoinActionIX.htm#pgfId-603936}[LaTeX
309](../Text/CH11.htm#marker-1012104){.index1} --
[326](../Text/CH11.htm#marker-1036926){.index1}

[]{#HugoinActionIX.htm#pgfId-603939}[adding HTTP server to call this
function 314](../Text/CH11.htm#marker-1014132){.index1} --
[315](../Text/CH11.htm#marker-1015926){.index1}

[]{#HugoinActionIX.htm#pgfId-603942}[adding some security to prevent
unauthorized access 316](../Text/CH11.htm#marker-1016057){.index1}

[]{#HugoinActionIX.htm#pgfId-603944}[adding to website
325](../Text/CH11.htm#marker-1018419){.index1} --
[326](../Text/CH11.htm#marker-1036925){.index1}

[]{#HugoinActionIX.htm#pgfId-603947}deploying to cloud

[]{#HugoinActionIX.htm#pgfId-603948}[via Heroku
319](../Text/CH11.htm#marker-1017024){.index1} --
[323](../Text/CH11.htm#marker-1033978){.index1}

[]{#HugoinActionIX.htm#pgfId-603951}[via Netlify Functions
316](../Text/CH11.htm#marker-1016629){.index1} --
[319](../Text/CH11.htm#marker-1036839){.index1}

[]{#HugoinActionIX.htm#pgfId-603954}[overview
310](../Text/CH11.htm#marker-1012160){.index1}

[]{#HugoinActionIX.htm#pgfId-603956}[rendering
310](../Text/CH11.htm#marker-1012252){.index1} --
[311](../Text/CH11.htm#marker-1012352){.index1}

[]{#HugoinActionIX.htm#pgfId-603959}[creating shortcode for
324](../Text/CH11.htm#marker-1017730){.index1} --
[325](../Text/CH11.htm#marker-1018398){.index1}

[]{#HugoinActionIX.htm#pgfId-603962}[server-side LaTeX
311](../Text/CH11.htm#marker-1012375){.index1}

[]{#HugoinActionIX.htm#pgfId-603964}[writing code for
311](../Text/CH11.htm#marker-1032634){.index1} --
[313](../Text/CH11.htm#marker-1031246){.index1}

[]{#HugoinActionIX.htm#pgfId-603967}[Latex2Svg endpoint
324](../Text/CH11.htm#marker-1018249){.index1}

[]{#HugoinActionIX.htm#pgfId-603969}[layout property
81](../Text/CH03.htm#marker-1028212){.index1}

[]{#HugoinActionIX.htm#pgfId-603971}[layouts
157](../Text/CH06.htm#marker-1013848){.index1},
[196](../Text/CH06.htm#marker-1026956){.index1}

[]{#HugoinActionIX.htm#pgfId-603974}[leaf bundles
103](../Text/CH04.htm#marker-1015597){.index1} --
[104](../Text/CH04.htm#marker-1031712){.index1}

[]{#HugoinActionIX.htm#pgfId-603977}[.Level variable
134](../Text/CH05.htm#marker-1031682){.index1}

[]{#HugoinActionIX.htm#pgfId-603979}[linking websites to translated
pages 380](../Text/CH13.htm#marker-1013589){.index1} --
[381](../Text/CH13.htm#marker-1046095){.index1}

[]{#HugoinActionIX.htm#pgfId-603982}[list layout
157](../Text/CH06.htm#marker-1013885){.index1}

[]{#HugoinActionIX.htm#pgfId-603984}[list setting
255](../Text/CH09.htm#marker-1032416){.index1}

[]{#HugoinActionIX.htm#pgfId-603986}[list template
198](../Text/CH07.htm#marker-1016172){.index1}

[]{#HugoinActionIX.htm#pgfId-603988}lists

[]{#HugoinActionIX.htm#pgfId-603989}[creating multiple pages to render
199](../Text/CH07.htm#marker-1016830){.index1} --
[202](../Text/CH07.htm#marker-1030360){.index1}

[]{#HugoinActionIX.htm#pgfId-603992}[Go template language
432](../Text/APP_D.htm#marker-1016510){.index1}

[]{#HugoinActionIX.htm#pgfId-603994}[JSON
412](../Text/APP_B.htm#marker-1013797){.index1}

[]{#HugoinActionIX.htm#pgfId-603996}[Markdown
60](../Text/CH03.htm#marker-1012027){.index1} --
[63](../Text/CH03.htm#marker-1032846){.index1}

[]{#HugoinActionIX.htm#pgfId-603999}[rendering list of subsections
202](../Text/CH07.htm#marker-1018305){.index1}

[]{#HugoinActionIX.htm#pgfId-604001}[TOML
409](../Text/APP_B.htm#marker-1012377){.index1}

[]{#HugoinActionIX.htm#pgfId-604003}[YAML
75](../Text/CH03.htm#marker-1015722){.index1} --
[76](../Text/CH03.htm#marker-1030333){.index1}

[]{#HugoinActionIX.htm#pgfId-604006}[live reload mode
36](../Text/CH02.htm#marker-1014513){.index1}

[]{#HugoinActionIX.htm#pgfId-604008}[longevity
14](../Text/CH01.htm#marker-1012811){.index1}

[]{#HugoinActionIX.htm#pgfId-604010}[loops
430](../Text/APP_D.htm#marker-1015074){.index1} --
[431](../Text/APP_D.htm#marker-1026300){.index1}

[]{#HugoinActionIX.htm#pgfId-604013}M[]{#HugoinActionIX.htm#M}

[]{#HugoinActionIX.htm#pgfId-604015}[M (markup layer)
9](../Text/CH01.htm#marker-1012226){.index1}

[]{#HugoinActionIX.htm#pgfId-604017}[main key
167](../Text/CH06.htm#marker-1018866){.index1}

[]{#HugoinActionIX.htm#pgfId-604019}[maintainability
53](../Text/CH02.htm#marker-1018727){.index1} --
[54](../Text/CH02.htm#marker-1018856){.index1}

[]{#HugoinActionIX.htm#pgfId-604022}[maintenance
19](../Text/CH01.htm#marker-1013403){.index1} --
[20](../Text/CH01.htm#marker-1013410){.index1}

[]{#HugoinActionIX.htm#pgfId-604025}[man command
27](../Text/CH02.htm#marker-1012126){.index1}

[]{#HugoinActionIX.htm#pgfId-604027}[map manipulation
432](../Text/APP_D.htm#marker-1016508){.index1}

[]{#HugoinActionIX.htm#pgfId-604029}[maps
76](../Text/CH03.htm#marker-1015981){.index1}

[]{#HugoinActionIX.htm#pgfId-604031}Markdown

[]{#HugoinActionIX.htm#pgfId-604032}[adding content
132](../Text/CH05.htm#marker-1018021){.index1} --
[134](../Text/CH05.htm#marker-1031690){.index1}

[]{#HugoinActionIX.htm#pgfId-604035}[block elements
72](../Text/CH03.htm#marker-1013958){.index1}

[]{#HugoinActionIX.htm#pgfId-604037}[controlling rendering
183](../Text/CH06.htm#marker-1037911){.index1} --
[184](../Text/CH06.htm#marker-1029177){.index1}

[]{#HugoinActionIX.htm#pgfId-604040}[emojis and definition lists
72](../Text/CH03.htm#marker-1014209){.index1}

[]{#HugoinActionIX.htm#pgfId-604042}[inline elements
72](../Text/CH03.htm#marker-1014035){.index1}

[]{#HugoinActionIX.htm#pgfId-604044}[inline HTML and character codes
72](../Text/CH03.htm#marker-1014092){.index1}

[]{#HugoinActionIX.htm#pgfId-604046}[tables
72](../Text/CH03.htm#marker-1014174){.index1}

[]{#HugoinActionIX.htm#pgfId-604048}[writing content in
59](../Text/CH03.htm#marker-1011883){.index1} --
[70](../Text/CH03.htm#marker-1026822){.index1}

[]{#HugoinActionIX.htm#pgfId-604051}[emojis, IDs, and other Hugo
extensions 69](../Text/CH03.htm#marker-1013555){.index1} --
[70](../Text/CH03.htm#marker-1026821){.index1}

[]{#HugoinActionIX.htm#pgfId-604054}[formatting, inline links, code, and
images 63](../Text/CH03.htm#marker-1012552){.index1} --
[66](../Text/CH03.htm#marker-1032926){.index1}

[]{#HugoinActionIX.htm#pgfId-604057}[headings, lists, and block elements
60](../Text/CH03.htm#marker-1012025){.index1} --
[63](../Text/CH03.htm#marker-1032845){.index1}

[]{#HugoinActionIX.htm#pgfId-604060}[HTML
66](../Text/CH03.htm#marker-1012999){.index1} --
[67](../Text/CH03.htm#marker-1013203){.index1}

[]{#HugoinActionIX.htm#pgfId-604063}[paragraphs
60](../Text/CH03.htm#marker-1011947){.index1}

[]{#HugoinActionIX.htm#pgfId-604065}[tables, task lists, and code blocks
67](../Text/CH03.htm#marker-1013253){.index1} --
[69](../Text/CH03.htm#marker-1013510){.index1}

[]{#HugoinActionIX.htm#pgfId-604068}[markdownify function
130](../Text/CH05.htm#marker-1017045){.index1}

[]{#HugoinActionIX.htm#pgfId-604070}[markdownify method
432](../Text/APP_D.htm#marker-1016285){.index1}

[]{#HugoinActionIX.htm#pgfId-604072}[markup
72](../Text/CH03.htm#marker-1014211){.index1},
[132](../Text/CH05.htm#marker-1018023){.index1},
[183](../Text/CH06.htm#marker-1037912){.index1}

[]{#HugoinActionIX.htm#pgfId-604076}[benefits of using
85](../Text/CH03.htm#marker-1020215){.index1} --
[88](../Text/CH03.htm#marker-1020496){.index1}

[]{#HugoinActionIX.htm#pgfId-604079}[cleanliness
88](../Text/CH03.htm#marker-1020480){.index1}

[]{#HugoinActionIX.htm#pgfId-604081}[content versioning
85](../Text/CH03.htm#marker-1020242){.index1}

[]{#HugoinActionIX.htm#pgfId-604083}[theme independence
86](../Text/CH03.htm#marker-1020327){.index1} --
[87](../Text/CH03.htm#marker-1033278){.index1}

[]{#HugoinActionIX.htm#pgfId-604086}[front matter
79](../Text/CH03.htm#marker-1018084){.index1} --
[85](../Text/CH03.htm#marker-1020180){.index1}

[]{#HugoinActionIX.htm#pgfId-604089}[data-driven landing page using
84](../Text/CH03.htm#marker-1020003){.index1} --
[85](../Text/CH03.htm#marker-1020177){.index1}

[]{#HugoinActionIX.htm#pgfId-604092}[metadata elements in
80](../Text/CH03.htm#marker-1018394){.index1} --
[84](../Text/CH03.htm#marker-1028573){.index1}

[]{#HugoinActionIX.htm#pgfId-604095}[Jamstack
12](../Text/CH01.htm#marker-1012544){.index1} --
[13](../Text/CH01.htm#marker-1023040){.index1}

[]{#HugoinActionIX.htm#pgfId-604098}[languages
73](../Text/CH03.htm#marker-1014412){.index1} --
[74](../Text/CH03.htm#marker-1014873){.index1}

[]{#HugoinActionIX.htm#pgfId-604101}[shortcodes based on
118](../Text/CH04.htm#marker-1019991){.index1} --
[119](../Text/CH04.htm#marker-1032870){.index1}

[]{#HugoinActionIX.htm#pgfId-604104}[YAML
74](../Text/CH03.htm#marker-1014895){.index1} --
[77](../Text/CH03.htm#marker-1030920){.index1}

[]{#HugoinActionIX.htm#pgfId-604107}[comments
74](../Text/CH03.htm#marker-1014955){.index1}

[]{#HugoinActionIX.htm#pgfId-604109}[data types
74](../Text/CH03.htm#marker-1027224){.index1} --
[75](../Text/CH03.htm#marker-1030022){.index1}

[]{#HugoinActionIX.htm#pgfId-604112}[dictionaries
76](../Text/CH03.htm#marker-1015974){.index1}

[]{#HugoinActionIX.htm#pgfId-604114}[lists
75](../Text/CH03.htm#marker-1015720){.index1} --
[76](../Text/CH03.htm#marker-1030332){.index1}

[]{#HugoinActionIX.htm#pgfId-604117}[multiline strings
75](../Text/CH03.htm#marker-1015508){.index1}

[]{#HugoinActionIX.htm#pgfId-604119}[other languages
78](../Text/CH03.htm#marker-1017518){.index1}

[]{#HugoinActionIX.htm#pgfId-604121}[revisiting config.yaml
76](../Text/CH03.htm#marker-1016404){.index1} --
[77](../Text/CH03.htm#marker-1030919){.index1}

[]{#HugoinActionIX.htm#pgfId-604124}[MathJax
310](../Text/CH11.htm#marker-1012297){.index1} --
[311](../Text/CH11.htm#marker-1012343){.index1}

[]{#HugoinActionIX.htm#pgfId-604127}[MAX_SEARCH_RESULTS variable
299](../Text/CH10.htm#marker-1023157){.index1}

[]{#HugoinActionIX.htm#pgfId-604129}[maxAge setting
243](../Text/CH09.htm#marker-1014191){.index1}

[]{#HugoinActionIX.htm#pgfId-604131}[menu dictionary
76](../Text/CH03.htm#marker-1016548){.index1}

[]{#HugoinActionIX.htm#pgfId-604133}[menu element
76](../Text/CH03.htm#marker-1016484){.index1}

[]{#HugoinActionIX.htm#pgfId-604135}[Menu objects
165](../Text/CH06.htm#marker-1018013){.index1}

[]{#HugoinActionIX.htm#pgfId-604137}[menu section
38](../Text/CH02.htm#marker-1015714){.index1}

[]{#HugoinActionIX.htm#pgfId-604139}[menus
98](../Text/CH04.htm#marker-1013781){.index1} --
[101](../Text/CH04.htm#marker-1031626){.index1}

[]{#HugoinActionIX.htm#pgfId-604142}[adding
134](../Text/CH05.htm#marker-1018701){.index1} --
[138](../Text/CH05.htm#marker-1034504){.index1}

[]{#HugoinActionIX.htm#pgfId-604145}[partial
164](../Text/CH06.htm#marker-1017588){.index1} --
[165](../Text/CH06.htm#marker-1018026){.index1}

[]{#HugoinActionIX.htm#pgfId-604148}metadata

[]{#HugoinActionIX.htm#pgfId-604149}[in markup front matter
80](../Text/CH03.htm#marker-1018392){.index1} --
[84](../Text/CH03.htm#marker-1028572){.index1}

[]{#HugoinActionIX.htm#pgfId-604152}[JSON
411](../Text/APP_B.htm#marker-1013233){.index1} --
[414](../Text/APP_B.htm#marker-1015181){.index1}

[]{#HugoinActionIX.htm#pgfId-604155}[data types
411](../Text/APP_B.htm#marker-1013265){.index1} --
[412](../Text/APP_B.htm#marker-1019302){.index1}

[]{#HugoinActionIX.htm#pgfId-604158}[dictionaries
412](../Text/APP_B.htm#marker-1014033){.index1}

[]{#HugoinActionIX.htm#pgfId-604160}[front matter
413](../Text/APP_B.htm#marker-1014339){.index1}

[]{#HugoinActionIX.htm#pgfId-604162}[lists
412](../Text/APP_B.htm#marker-1013795){.index1}

[]{#HugoinActionIX.htm#pgfId-604164}[multiline strings
412](../Text/APP_B.htm#marker-1013729){.index1}

[]{#HugoinActionIX.htm#pgfId-604166}[revisiting config file
413](../Text/APP_B.htm#marker-1014407){.index1} --
[414](../Text/APP_B.htm#marker-1015178){.index1}

[]{#HugoinActionIX.htm#pgfId-604169}[TOML
408](../Text/APP_B.htm#marker-1011773){.index1} --
[410](../Text/APP_B.htm#marker-1012825){.index1}

[]{#HugoinActionIX.htm#pgfId-604172}[comments
409](../Text/APP_B.htm#marker-1011905){.index1}

[]{#HugoinActionIX.htm#pgfId-604174}[data types
409](../Text/APP_B.htm#marker-1011963){.index1}

[]{#HugoinActionIX.htm#pgfId-604176}[dictionaries
410](../Text/APP_B.htm#marker-1012523){.index1}

[]{#HugoinActionIX.htm#pgfId-604178}[front matter
410](../Text/APP_B.htm#marker-1012713){.index1}

[]{#HugoinActionIX.htm#pgfId-604180}[lists
409](../Text/APP_B.htm#marker-1012375){.index1}

[]{#HugoinActionIX.htm#pgfId-604182}[multiline strings
409](../Text/APP_B.htm#marker-1012279){.index1}

[]{#HugoinActionIX.htm#pgfId-604184}[YAML
74](../Text/CH03.htm#marker-1014893){.index1} --
[77](../Text/CH03.htm#marker-1030918){.index1}

[]{#HugoinActionIX.htm#pgfId-604187}[comments
74](../Text/CH03.htm#marker-1014953){.index1}

[]{#HugoinActionIX.htm#pgfId-604189}[data types
74](../Text/CH03.htm#marker-1027223){.index1} --
[75](../Text/CH03.htm#marker-1030021){.index1}

[]{#HugoinActionIX.htm#pgfId-604192}[dictionaries
76](../Text/CH03.htm#marker-1015972){.index1}

[]{#HugoinActionIX.htm#pgfId-604194}[lists
75](../Text/CH03.htm#marker-1015718){.index1} --
[76](../Text/CH03.htm#marker-1030331){.index1}

[]{#HugoinActionIX.htm#pgfId-604197}[multiline strings
75](../Text/CH03.htm#marker-1015506){.index1}

[]{#HugoinActionIX.htm#pgfId-604199}[other languages
78](../Text/CH03.htm#marker-1017516){.index1}

[]{#HugoinActionIX.htm#pgfId-604201}[revisiting config.yaml
76](../Text/CH03.htm#marker-1016402){.index1} --
[77](../Text/CH03.htm#marker-1030917){.index1}

[]{#HugoinActionIX.htm#pgfId-604204}[metrics, website
51](../Text/CH02.htm#marker-1018589){.index1} --
[56](../Text/CH02.htm#marker-1019393){.index1}

[]{#HugoinActionIX.htm#pgfId-604207}[choosing theme
54](../Text/CH02.htm#marker-1018877){.index1} --
[56](../Text/CH02.htm#marker-1019391){.index1}

[]{#HugoinActionIX.htm#pgfId-604210}[maintainability
53](../Text/CH02.htm#marker-1018725){.index1} --
[54](../Text/CH02.htm#marker-1018854){.index1}

[]{#HugoinActionIX.htm#pgfId-604213}[performance
51](../Text/CH02.htm#marker-1018613){.index1} --
[52](../Text/CH02.htm#marker-1018706){.index1}

[]{#HugoinActionIX.htm#pgfId-604216}[microservices
308](../Text/CH11.htm#marker-1011929){.index1} --
[309](../Text/CH11.htm#marker-1029699){.index1}

[]{#HugoinActionIX.htm#pgfId-604219}[minification
91](../Text/CH04.htm#marker-1011936){.index1}

[]{#HugoinActionIX.htm#pgfId-604221}[minify flag
281](../Text/CH10.htm#marker-1013771){.index1}

[]{#HugoinActionIX.htm#pgfId-604223}[modern content type
187](../Text/CH07.htm#marker-1025941){.index1} --
[188](../Text/CH07.htm#marker-1011899){.index1},
[192](../Text/CH07.htm#marker-1013154){.index1} --
[193](../Text/CH07.htm#marker-1029518){.index1},
[199](../Text/CH07.htm#marker-1016545){.index1},
[208](../Text/CH07.htm#marker-1021116){.index1}

[]{#HugoinActionIX.htm#pgfId-604230}[modern type
154](../Text/CH06.htm#marker-1012307){.index1},
[191](../Text/CH07.htm#marker-1012657){.index1} --
[192](../Text/CH07.htm#marker-1012838){.index1},
[208](../Text/CH07.htm#marker-1021592){.index1} --
[209](../Text/CH07.htm#marker-1021639){.index1}

[]{#HugoinActionIX.htm#pgfId-604236}[monolithic services
308](../Text/CH11.htm#marker-1011927){.index1} --
[309](../Text/CH11.htm#marker-1029698){.index1}

[]{#HugoinActionIX.htm#pgfId-604239}multiline strings

[]{#HugoinActionIX.htm#pgfId-604240}[JSON
412](../Text/APP_B.htm#marker-1013727){.index1}

[]{#HugoinActionIX.htm#pgfId-604242}[TOML
409](../Text/APP_B.htm#marker-1012277){.index1}

[]{#HugoinActionIX.htm#pgfId-604244}[YAML
75](../Text/CH03.htm#marker-1015504){.index1}

[]{#HugoinActionIX.htm#pgfId-604246}[multilingual websites
376](../Text/CH13.htm#marker-1011839){.index1} --
[381](../Text/CH13.htm#marker-1046094){.index1}

[]{#HugoinActionIX.htm#pgfId-604249}[accessing strings within theme
379](../Text/CH13.htm#marker-1013056){.index1} --
[380](../Text/CH13.htm#marker-1044759){.index1}

[]{#HugoinActionIX.htm#pgfId-604252}[linking to translated pages
380](../Text/CH13.htm#marker-1013587){.index1} --
[381](../Text/CH13.htm#marker-1046093){.index1}

[]{#HugoinActionIX.htm#pgfId-604255}[overrides and defaults for content
in 376](../Text/CH13.htm#marker-1011996){.index1} --
[379](../Text/CH13.htm#marker-1045984){.index1}

[]{#HugoinActionIX.htm#pgfId-604258}[mustache tags
124](../Text/CH05.htm#marker-1012116){.index1}

[]{#HugoinActionIX.htm#pgfId-604260}[myshortcode shortcode
114](../Text/CH04.htm#marker-1017936){.index1}

[]{#HugoinActionIX.htm#pgfId-604262}N[]{#HugoinActionIX.htm#N}

[]{#HugoinActionIX.htm#pgfId-604264}[name attribute
248](../Text/CH09.htm#marker-1016255){.index1}

[]{#HugoinActionIX.htm#pgfId-604266}[nested dependencies
223](../Text/CH08.htm#marker-1013951){.index1} --
[226](../Text/CH08.htm#marker-1014423){.index1}

[]{#HugoinActionIX.htm#pgfId-604269}[nested shortcodes
116](../Text/CH04.htm#marker-1018811){.index1}

[]{#HugoinActionIX.htm#pgfId-604271}[nesting
428](../Text/APP_D.htm#marker-1014023){.index1} --
[429](../Text/APP_D.htm#marker-1014498){.index1}

[]{#HugoinActionIX.htm#pgfId-604274}Netlify

[]{#HugoinActionIX.htm#pgfId-604275}[adding webhook to
328](../Text/CH11.htm#marker-1019286){.index1} --
[330](../Text/CH11.htm#marker-1032057){.index1}

[]{#HugoinActionIX.htm#pgfId-604278}[continuous delivery
44](../Text/CH02.htm#marker-1017443){.index1} --
[46](../Text/CH02.htm#marker-1017610){.index1}

[]{#HugoinActionIX.htm#pgfId-604281}[creating webhooks for rebuilds
327](../Text/CH11.htm#marker-1019163){.index1}

[]{#HugoinActionIX.htm#pgfId-604283}[for Contact Us page
248](../Text/CH09.htm#marker-1016085){.index1} --
[249](../Text/CH09.htm#marker-1016509){.index1}

[]{#HugoinActionIX.htm#pgfId-604286}[updating
296](../Text/CH10.htm#marker-1020549){.index1}

[]{#HugoinActionIX.htm#pgfId-604288}[netlify attribute
248](../Text/CH09.htm#marker-1016111){.index1}

[]{#HugoinActionIX.htm#pgfId-604290}Netlify CMS

[]{#HugoinActionIX.htm#pgfId-604291}[configuring
416](../Text/APP_C.htm#marker-1012113){.index1} --
[420](../Text/APP_C.htm#marker-1013108){.index1}

[]{#HugoinActionIX.htm#pgfId-604294}[loading
415](../Text/APP_C.htm#marker-1011777){.index1}

[]{#HugoinActionIX.htm#pgfId-604296}[using
421](../Text/APP_C.htm#marker-1013130){.index1}

[]{#HugoinActionIX.htm#pgfId-604298}[Netlify Functions
316](../Text/CH11.htm#marker-1016627){.index1} --
[319](../Text/CH11.htm#marker-1036838){.index1}

[]{#HugoinActionIX.htm#pgfId-604301}[NETLIFY variable
362](../Text/CH12.htm#marker-1042832){.index1}

[]{#HugoinActionIX.htm#pgfId-604303}[netlify-honeypot attribute
249](../Text/CH09.htm#marker-1032228){.index1}

[]{#HugoinActionIX.htm#pgfId-604305}[network access
433](../Text/APP_D.htm#marker-1016854){.index1}

[]{#HugoinActionIX.htm#pgfId-604307}[new command
27](../Text/CH02.htm#marker-1012094){.index1},
[149](../Text/CH05.htm#marker-1036347){.index1}

[]{#HugoinActionIX.htm#pgfId-604310}[new site command
27](../Text/CH02.htm#marker-1012026){.index1}

[]{#HugoinActionIX.htm#pgfId-604312}[News page interface
189](../Text/CH07.htm#marker-1011966){.index1} --
[191](../Text/CH07.htm#marker-1012676){.index1}

[]{#HugoinActionIX.htm#pgfId-604315}[news section
101](../Text/CH04.htm#marker-1015109){.index1},
[104](../Text/CH04.htm#marker-1031305){.index1} --
[105](../Text/CH04.htm#marker-1027046){.index1}

[]{#HugoinActionIX.htm#pgfId-604319}[Next navigational variable
426](../Text/APP_D.htm#marker-1012309){.index1}

[]{#HugoinActionIX.htm#pgfId-604321}[Next object
201](../Text/CH07.htm#marker-1017405){.index1}

[]{#HugoinActionIX.htm#pgfId-604323}[NextInSection navigational variable
426](../Text/APP_D.htm#marker-1012303){.index1}

[]{#HugoinActionIX.htm#pgfId-604325}[node module
301](../Text/CH10.htm#marker-1023955){.index1} --
[302](../Text/CH10.htm#marker-1024203){.index1}

[]{#HugoinActionIX.htm#pgfId-604328}[nontechnology business websites
22](../Text/CH01.htm#marker-1013702){.index1}

[]{#HugoinActionIX.htm#pgfId-604330}[not Boolean function
127](../Text/CH05.htm#marker-1014782){.index1}

[]{#HugoinActionIX.htm#pgfId-604332}[not function
128](../Text/CH05.htm#marker-1015151){.index1}

[]{#HugoinActionIX.htm#pgfId-604334}[npm
295](../Text/CH10.htm#marker-1020287){.index1} --
[297](../Text/CH10.htm#marker-1021083){.index1}

[]{#HugoinActionIX.htm#pgfId-604337}[updating GitHub Actions
296](../Text/CH10.htm#marker-1020878){.index1} --
[297](../Text/CH10.htm#marker-1021081){.index1}

[]{#HugoinActionIX.htm#pgfId-604340}[updating Netlify
296](../Text/CH10.htm#marker-1020547){.index1}

[]{#HugoinActionIX.htm#pgfId-604342}[npm ci command
295](../Text/CH10.htm#marker-1020509){.index1}

[]{#HugoinActionIX.htm#pgfId-604344}[npm command
372](../Text/CH12.htm#marker-1030207){.index1}

[]{#HugoinActionIX.htm#pgfId-604346}[npm install command
294](../Text/CH10.htm#marker-1020104){.index1} --
[295](../Text/CH10.htm#marker-1020473){.index1}

[]{#HugoinActionIX.htm#pgfId-604349}[npm search command
294](../Text/CH10.htm#marker-1019534){.index1}

[]{#HugoinActionIX.htm#pgfId-604351}[null types
74](../Text/CH03.htm#marker-1027227){.index1}

[]{#HugoinActionIX.htm#pgfId-604353}O[]{#HugoinActionIX.htm#O}

[]{#HugoinActionIX.htm#pgfId-604355}[objects
76](../Text/CH03.htm#marker-1016007){.index1}

[]{#HugoinActionIX.htm#pgfId-604357}[og:description tag
184](../Text/CH06.htm#marker-1042596){.index1}

[]{#HugoinActionIX.htm#pgfId-604359}[og:title tag
184](../Text/CH06.htm#marker-1042595){.index1}

[]{#HugoinActionIX.htm#pgfId-604361}[onDelete handler
355](../Text/CH12.htm#marker-1020768){.index1}

[]{#HugoinActionIX.htm#pgfId-604363}[output formats
384](../Text/CH13.htm#marker-1015281){.index1} --
[387](../Text/CH13.htm#marker-1046384){.index1}

[]{#HugoinActionIX.htm#pgfId-604366}[built-in RSS formats
384](../Text/CH13.htm#marker-1015349){.index1}

[]{#HugoinActionIX.htm#pgfId-604368}[creating
385](../Text/CH13.htm#marker-1015689){.index1} --
[387](../Text/CH13.htm#marker-1046383){.index1}

[]{#HugoinActionIX.htm#pgfId-604371}[outputFormats configuration setting
385](../Text/CH13.htm#marker-1015694){.index1}

[]{#HugoinActionIX.htm#pgfId-604373}[OutputFormats property
384](../Text/CH13.htm#marker-1015395){.index1}

[]{#HugoinActionIX.htm#pgfId-604375}[OutputFormats.Get function
384](../Text/CH13.htm#marker-1015421){.index1}

[]{#HugoinActionIX.htm#pgfId-604377}[outputs formats
271](../Text/CH09.htm#marker-1025462){.index1}

[]{#HugoinActionIX.htm#pgfId-604379}[outputs property
81](../Text/CH03.htm#marker-1028221){.index1}

[]{#HugoinActionIX.htm#pgfId-604381}[Overlay filter
181](../Text/CH06.htm#marker-1027341){.index1}

[]{#HugoinActionIX.htm#pgfId-604383}[overrides
376](../Text/CH13.htm#marker-1011994){.index1} --
[379](../Text/CH13.htm#marker-1045983){.index1}

[]{#HugoinActionIX.htm#pgfId-604386}P[]{#HugoinActionIX.htm#P}

[]{#HugoinActionIX.htm#pgfId-604388}[PaaS (platform as a service)
308](../Text/CH11.htm#marker-1011880){.index1}

[]{#HugoinActionIX.htm#pgfId-604390}[page bundles
102](../Text/CH04.htm#marker-1015548){.index1} --
[107](../Text/CH04.htm#marker-1032043){.index1}

[]{#HugoinActionIX.htm#pgfId-604393}[branch bundles
104](../Text/CH04.htm#marker-1031301){.index1} --
[107](../Text/CH04.htm#marker-1031927){.index1}

[]{#HugoinActionIX.htm#pgfId-604396}[headless bundles
107](../Text/CH04.htm#marker-1027519){.index1}

[]{#HugoinActionIX.htm#pgfId-604398}[leaf bundles
103](../Text/CH04.htm#marker-1015595){.index1} --
[104](../Text/CH04.htm#marker-1031711){.index1}

[]{#HugoinActionIX.htm#pgfId-604401}[page configuration
79](../Text/CH03.htm#marker-1018142){.index1}

[]{#HugoinActionIX.htm#pgfId-604403}[page kind
196](../Text/CH07.htm#marker-1026957){.index1}

[]{#HugoinActionIX.htm#pgfId-604405}[page metadata section
79](../Text/CH03.htm#marker-1018136){.index1}

[]{#HugoinActionIX.htm#pgfId-604407}[.Page variables
426](../Text/APP_D.htm#marker-1012297){.index1}

[]{#HugoinActionIX.htm#pgfId-604409}[Page.Render function
211](../Text/CH07.htm#marker-1028731){.index1}

[]{#HugoinActionIX.htm#pgfId-604411}[PageNumber object
201](../Text/CH07.htm#marker-1017417){.index1}

[]{#HugoinActionIX.htm#pgfId-604413}[pages
381](../Text/CH13.htm#marker-1014044){.index1} --
[383](../Text/CH13.htm#marker-1046181){.index1}

[]{#HugoinActionIX.htm#pgfId-604416}[controlling Markdown rendering
183](../Text/CH06.htm#marker-1037910){.index1} --
[184](../Text/CH06.htm#marker-1029175){.index1}

[]{#HugoinActionIX.htm#pgfId-604419}[controlling page flow with
JavaScript 278](../Text/CH10.htm#marker-1011997){.index1} --
[281](../Text/CH10.htm#marker-1030377){.index1}

[]{#HugoinActionIX.htm#pgfId-604422}[building and loading JavaScript
using Hugo Pipes 280](../Text/CH10.htm#marker-1013488){.index1} --
[281](../Text/CH10.htm#marker-1030376){.index1}

[]{#HugoinActionIX.htm#pgfId-604425}[handling forms in JavaScript
278](../Text/CH10.htm#marker-1012019){.index1} --
[280](../Text/CH10.htm#marker-1031846){.index1}

[]{#HugoinActionIX.htm#pgfId-604428}[Go template language
145](../Text/CH05.htm#marker-1023862){.index1} --
[150](../Text/CH05.htm#marker-1026320){.index1}

[]{#HugoinActionIX.htm#pgfId-604431}[archetypes
148](../Text/CH05.htm#marker-1025661){.index1} --
[150](../Text/CH05.htm#marker-1026317){.index1}

[]{#HugoinActionIX.htm#pgfId-604434}[inner content in shortcodes
147](../Text/CH05.htm#marker-1032745){.index1} --
[148](../Text/CH05.htm#marker-1025472){.index1}

[]{#HugoinActionIX.htm#pgfId-604437}[shortcodes
145](../Text/CH05.htm#marker-1023888){.index1} --
[146](../Text/CH05.htm#marker-1024763){.index1}

[]{#HugoinActionIX.htm#pgfId-604440}[Hugo Pipes handling assets
170](../Text/CH06.htm#marker-1021069){.index1} --
[183](../Text/CH06.htm#marker-1037833){.index1}

[]{#HugoinActionIX.htm#pgfId-604443}[images
176](../Text/CH06.htm#marker-1024656){.index1}

[]{#HugoinActionIX.htm#pgfId-604445}[other
182](../Text/CH06.htm#marker-1037768){.index1} --
[183](../Text/CH06.htm#marker-1037832){.index1}

[]{#HugoinActionIX.htm#pgfId-604448}[textual assets
171](../Text/CH06.htm#marker-1021101){.index1}

[]{#HugoinActionIX.htm#pgfId-604450}[reusing content with partials
160](../Text/CH06.htm#marker-1015361){.index1} --
[170](../Text/CH06.htm#marker-1036086){.index1}

[]{#HugoinActionIX.htm#pgfId-604453}[bringing back submenu using
additional parameters to menu partial
164](../Text/CH06.htm#marker-1017586){.index1} --
[165](../Text/CH06.htm#marker-1018024){.index1}

[]{#HugoinActionIX.htm#pgfId-604456}[moving to partial
161](../Text/CH06.htm#marker-1015798){.index1}

[]{#HugoinActionIX.htm#pgfId-604458}[partial context
162](../Text/CH06.htm#marker-1016537){.index1}

[]{#HugoinActionIX.htm#pgfId-604460}[partial returns
168](../Text/CH06.htm#marker-1019055){.index1} --
[170](../Text/CH06.htm#marker-1036085){.index1}

[]{#HugoinActionIX.htm#pgfId-604463}[performance and
165](../Text/CH06.htm#marker-1018049){.index1} --
[167](../Text/CH06.htm#marker-1034093){.index1}

[]{#HugoinActionIX.htm#pgfId-604466}[robots.txt
382](../Text/CH13.htm#marker-1014762){.index1} --
[383](../Text/CH13.htm#marker-1046180){.index1}

[]{#HugoinActionIX.htm#pgfId-604469}[separating data and design
122](../Text/CH05.htm#marker-1011923){.index1} --
[134](../Text/CH05.htm#marker-1031689){.index1}

[]{#HugoinActionIX.htm#pgfId-604472}[accessing Go template language
124](../Text/CH05.htm#marker-1012093){.index1} --
[125](../Text/CH05.htm#marker-1037472){.index1}

[]{#HugoinActionIX.htm#pgfId-604475}[adding content processing
130](../Text/CH05.htm#marker-1016859){.index1} --
[132](../Text/CH05.htm#marker-1038057){.index1}

[]{#HugoinActionIX.htm#pgfId-604478}[adding Markdown content
132](../Text/CH05.htm#marker-1018019){.index1} --
[134](../Text/CH05.htm#marker-1031688){.index1}

[]{#HugoinActionIX.htm#pgfId-604481}[creating variables for
simplification 127](../Text/CH05.htm#marker-1014380){.index1}

[]{#HugoinActionIX.htm#pgfId-604483}[existence checks
126](../Text/CH05.htm#marker-1013355){.index1}

[]{#HugoinActionIX.htm#pgfId-604485}[using context switch via with
conditional for simplifying further checks
129](../Text/CH05.htm#marker-1016115){.index1} --
[130](../Text/CH05.htm#marker-1038007){.index1}

[]{#HugoinActionIX.htm#pgfId-604488}[using site variables for defaults
126](../Text/CH05.htm#marker-1013967){.index1} --
[127](../Text/CH05.htm#marker-1014355){.index1}

[]{#HugoinActionIX.htm#pgfId-604491}[using standard library functions to
reduce code size 128](../Text/CH05.htm#marker-1015140){.index1} --
[129](../Text/CH05.htm#marker-1037790){.index1}

[]{#HugoinActionIX.htm#pgfId-604494}[sitemaps
381](../Text/CH13.htm#marker-1042124){.index1} --
[382](../Text/CH13.htm#marker-1041764){.index1}

[]{#HugoinActionIX.htm#pgfId-604497}[SPA, creating
303](../Text/CH10.htm#marker-1025166){.index1} --
[304](../Text/CH10.htm#marker-1025467){.index1}

[]{#HugoinActionIX.htm#pgfId-604500}[structured data
141](../Text/CH05.htm#marker-1021923){.index1} --
[145](../Text/CH05.htm#marker-1023813){.index1}

[]{#HugoinActionIX.htm#pgfId-604503}[parsing files for
143](../Text/CH05.htm#marker-1022878){.index1} --
[145](../Text/CH05.htm#marker-1023811){.index1}

[]{#HugoinActionIX.htm#pgfId-604506}[using front matter for
141](../Text/CH05.htm#marker-1021949){.index1} --
[143](../Text/CH05.htm#marker-1022851){.index1}

[]{#HugoinActionIX.htm#pgfId-604509}[templates
152](../Text/CH06.htm#marker-1011857){.index1} --
[160](../Text/CH06.htm#marker-1015340){.index1}

[]{#HugoinActionIX.htm#pgfId-604512}[defining blocks of code
154](../Text/CH06.htm#marker-1034400){.index1} --
[157](../Text/CH06.htm#marker-1013820){.index1}

[]{#HugoinActionIX.htm#pgfId-604515}[encapsulating with different
content types 153](../Text/CH06.htm#marker-1011885){.index1} --
[154](../Text/CH06.htm#marker-1034360){.index1}

[]{#HugoinActionIX.htm#pgfId-604518}[providing base template for reuse
154](../Text/CH06.htm#marker-1012254){.index1}

[]{#HugoinActionIX.htm#pgfId-604520}[reusing base template in different
layout 157](../Text/CH06.htm#marker-1013841){.index1} --
[160](../Text/CH06.htm#marker-1015338){.index1}

[]{#HugoinActionIX.htm#pgfId-604523}[using bundled templates for common
work 184](../Text/CH06.htm#marker-1029196){.index1} --
[186](../Text/CH06.htm#marker-1029883){.index1}

[]{#HugoinActionIX.htm#pgfId-604526}[using external data to add content
134](../Text/CH05.htm#marker-1018673){.index1} --
[141](../Text/CH05.htm#marker-1038280){.index1}

[]{#HugoinActionIX.htm#pgfId-604529}[menu
134](../Text/CH05.htm#marker-1018699){.index1} --
[138](../Text/CH05.htm#marker-1034503){.index1}

[]{#HugoinActionIX.htm#pgfId-604532}[recent blog posts
139](../Text/CH05.htm#marker-1034677){.index1} --
[141](../Text/CH05.htm#marker-1038279){.index1}

[]{#HugoinActionIX.htm#pgfId-604535}[.Pages field
201](../Text/CH07.htm#marker-1027447){.index1}

[]{#HugoinActionIX.htm#pgfId-604537}[Pages Hugo variable
380](../Text/CH13.htm#marker-1013374){.index1}

[]{#HugoinActionIX.htm#pgfId-604539}[.Pages variable
352](../Text/CH12.htm#marker-1017992){.index1}

[]{#HugoinActionIX.htm#pgfId-604541}[.Pages.GroupBy methods
201](../Text/CH07.htm#marker-1027438){.index1}

[]{#HugoinActionIX.htm#pgfId-604543}[.Paginate function
202](../Text/CH07.htm#marker-1017927){.index1}

[]{#HugoinActionIX.htm#pgfId-604545}[Paginate property
202](../Text/CH07.htm#marker-1018241){.index1}

[]{#HugoinActionIX.htm#pgfId-604547}[.Paginator object
200](../Text/CH07.htm#marker-1016936){.index1} --
[201](../Text/CH07.htm#marker-1017393){.index1}

[]{#HugoinActionIX.htm#pgfId-604550}[Paginator object
199](../Text/CH07.htm#marker-1016847){.index1} --
[201](../Text/CH07.htm#marker-1027448){.index1},
[203](../Text/CH07.htm#marker-1018358){.index1}

[]{#HugoinActionIX.htm#pgfId-604554}[paginators
202](../Text/CH07.htm#marker-1017900){.index1}

[]{#HugoinActionIX.htm#pgfId-604556}[paragraphs
60](../Text/CH03.htm#marker-1011945){.index1}

[]{#HugoinActionIX.htm#pgfId-604558}[param method
432](../Text/APP_D.htm#marker-1016658){.index1}

[]{#HugoinActionIX.htm#pgfId-604560}[param shortcode
117](../Text/CH04.htm#marker-1019403){.index1}

[]{#HugoinActionIX.htm#pgfId-604562}[params dictionary
76](../Text/CH03.htm#marker-1016542){.index1}

[]{#HugoinActionIX.htm#pgfId-604564}[params element
76](../Text/CH03.htm#marker-1016510){.index1}

[]{#HugoinActionIX.htm#pgfId-604566}[.Params object
141](../Text/CH05.htm#marker-1021970){.index1}

[]{#HugoinActionIX.htm#pgfId-604568}[Params object
125](../Text/CH05.htm#marker-1012960){.index1}

[]{#HugoinActionIX.htm#pgfId-604570}[params parameter
289](../Text/CH10.htm#marker-1035253){.index1}

[]{#HugoinActionIX.htm#pgfId-604572}[params section
37](../Text/CH02.htm#marker-1014791){.index1},
[91](../Text/CH04.htm#marker-1011973){.index1},
[93](../Text/CH04.htm#marker-1012376){.index1}

[]{#HugoinActionIX.htm#pgfId-604576}[parsing files
143](../Text/CH05.htm#marker-1022876){.index1} --
[145](../Text/CH05.htm#marker-1023809){.index1}

[]{#HugoinActionIX.htm#pgfId-604579}[partialCached partial
168](../Text/CH06.htm#marker-1019072){.index1}

[]{#HugoinActionIX.htm#pgfId-604581}[partials
160](../Text/CH06.htm#marker-1015359){.index1} --
[170](../Text/CH06.htm#marker-1036084){.index1}

[]{#HugoinActionIX.htm#pgfId-604584}[bringing back submenu
164](../Text/CH06.htm#marker-1017584){.index1} --
[165](../Text/CH06.htm#marker-1018022){.index1}

[]{#HugoinActionIX.htm#pgfId-604587}[moving to
161](../Text/CH06.htm#marker-1015796){.index1}

[]{#HugoinActionIX.htm#pgfId-604589}[partial context
162](../Text/CH06.htm#marker-1016535){.index1}

[]{#HugoinActionIX.htm#pgfId-604591}[partial returns
168](../Text/CH06.htm#marker-1019053){.index1} --
[170](../Text/CH06.htm#marker-1036083){.index1}

[]{#HugoinActionIX.htm#pgfId-604594}[performance and
165](../Text/CH06.htm#marker-1018047){.index1} --
[167](../Text/CH06.htm#marker-1034092){.index1}

[]{#HugoinActionIX.htm#pgfId-604597}[partition tolerance
7](../Text/CH01.htm#marker-1012022){.index1}

[]{#HugoinActionIX.htm#pgfId-604599}[password query parameter
316](../Text/CH11.htm#marker-1016102){.index1}

[]{#HugoinActionIX.htm#pgfId-604601}[path property, Event object
312](../Text/CH11.htm#marker-1012787){.index1}

[]{#HugoinActionIX.htm#pgfId-604603}performance

[]{#HugoinActionIX.htm#pgfId-604604}[Hugo
18](../Text/CH01.htm#marker-1013293){.index1} --
[19](../Text/CH01.htm#marker-1013306){.index1}

[]{#HugoinActionIX.htm#pgfId-604607}[metrics, website
51](../Text/CH02.htm#marker-1018611){.index1} --
[52](../Text/CH02.htm#marker-1018704){.index1}

[]{#HugoinActionIX.htm#pgfId-604610}[partials
165](../Text/CH06.htm#marker-1018045){.index1} --
[167](../Text/CH06.htm#marker-1034091){.index1}

[]{#HugoinActionIX.htm#pgfId-604613}[reasons for Jamstack
13](../Text/CH01.htm#marker-1012730){.index1}

[]{#HugoinActionIX.htm#pgfId-604615}[Permalink Hugo function
380](../Text/CH13.htm#marker-1013594){.index1}

[]{#HugoinActionIX.htm#pgfId-604617}[.Permalink name
258](../Text/CH09.htm#marker-1020478){.index1}

[]{#HugoinActionIX.htm#pgfId-604619}[personal websites
22](../Text/CH01.htm#marker-1013661){.index1}

[]{#HugoinActionIX.htm#pgfId-604621}[picture tag
178](../Text/CH06.htm#marker-1037423){.index1}

[]{#HugoinActionIX.htm#pgfId-604623}[piping
428](../Text/APP_D.htm#marker-1014021){.index1} --
[429](../Text/APP_D.htm#marker-1014495){.index1}

[]{#HugoinActionIX.htm#pgfId-604626}[Plain format
387](../Text/CH13.htm#marker-1016251){.index1}

[]{#HugoinActionIX.htm#pgfId-604628}[plain output format
385](../Text/CH13.htm#marker-1015716){.index1}

[]{#HugoinActionIX.htm#pgfId-604630}[plainify method
432](../Text/APP_D.htm#marker-1016297){.index1}

[]{#HugoinActionIX.htm#pgfId-604632}[platform as a service (PaaS)
308](../Text/CH11.htm#marker-1011883){.index1}

[]{#HugoinActionIX.htm#pgfId-604634}[plugin rot
19](../Text/CH01.htm#marker-1013333){.index1}

[]{#HugoinActionIX.htm#pgfId-604636}plugins

[]{#HugoinActionIX.htm#pgfId-604637}[content
228](../Text/CH08.htm#marker-1015410){.index1} --
[230](../Text/CH08.htm#marker-1019905){.index1}

[]{#HugoinActionIX.htm#pgfId-604640}[modules as template plugins
226](../Text/CH08.htm#marker-1014447){.index1} --
[227](../Text/CH08.htm#marker-1015105){.index1}

[]{#HugoinActionIX.htm#pgfId-604643}[POST API
336](../Text/CH11.htm#marker-1023097){.index1}

[]{#HugoinActionIX.htm#pgfId-604645}[post property
136](../Text/CH05.htm#marker-1019385){.index1}

[]{#HugoinActionIX.htm#pgfId-604647}[power, Hugo
20](../Text/CH01.htm#marker-1013457){.index1}

[]{#HugoinActionIX.htm#pgfId-604649}[pre property
136](../Text/CH05.htm#marker-1019379){.index1}

[]{#HugoinActionIX.htm#pgfId-604651}[precomputation
7](../Text/CH01.htm#marker-1012097){.index1}

[]{#HugoinActionIX.htm#pgfId-604653}[prefetching on hover
394](../Text/CH13.htm#marker-1022102){.index1} --
[395](../Text/CH13.htm#marker-1046554){.index1}

[]{#HugoinActionIX.htm#pgfId-604656}[prerendering
7](../Text/CH01.htm#marker-1012109){.index1}

[]{#HugoinActionIX.htm#pgfId-604658}[price shortcode
168](../Text/CH06.htm#marker-1020319){.index1} -- 169

[]{#HugoinActionIX.htm#pgfId-604661}[print function
431](../Text/APP_D.htm#marker-1026295){.index1}

[]{#HugoinActionIX.htm#pgfId-604663}[print\* method
432](../Text/APP_D.htm#marker-1016432){.index1}

[]{#HugoinActionIX.htm#pgfId-604665}[processing, content
130](../Text/CH05.htm#marker-1016857){.index1} --
[132](../Text/CH05.htm#marker-1038056){.index1}

[]{#HugoinActionIX.htm#pgfId-604668}product

[]{#HugoinActionIX.htm#pgfId-604669}[content view
345](../Text/CH12.htm#marker-1011882){.index1} --
[347](../Text/CH12.htm#marker-1044631){.index1}

[]{#HugoinActionIX.htm#pgfId-604672}[single product page
347](../Text/CH12.htm#marker-1013646){.index1} --
[349](../Text/CH12.htm#marker-1044737){.index1}

[]{#HugoinActionIX.htm#pgfId-604675}[productInfo shortcode
378](../Text/CH13.htm#marker-1042082){.index1}

[]{#HugoinActionIX.htm#pgfId-604677}[production
92](../Text/CH04.htm#marker-1024468){.index1}

[]{#HugoinActionIX.htm#pgfId-604679}[progressive enhancement
277](../Text/CH10.htm#marker-1028632){.index1}

[]{#HugoinActionIX.htm#pgfId-604681}[provider, email
369](../Text/CH12.htm#marker-1029483){.index1} --
[370](../Text/CH12.htm#marker-1045287){.index1}

[]{#HugoinActionIX.htm#pgfId-604684}[pseudo APIs
10](../Text/CH01.htm#marker-1012276){.index1},
[271](../Text/CH09.htm#marker-1025406){.index1}

[]{#HugoinActionIX.htm#pgfId-604687}[public category page
212](../Text/CH07.htm#marker-1030983){.index1}

[]{#HugoinActionIX.htm#pgfId-604689}[purchase details
368](../Text/CH12.htm#marker-1028559){.index1} --
[369](../Text/CH12.htm#marker-1041954){.index1}

[]{#HugoinActionIX.htm#pgfId-604692}[PWAs (progressive web apps)
387](../Text/CH13.htm#marker-1016589){.index1} --
[394](../Text/CH13.htm#marker-1046468){.index1}

[]{#HugoinActionIX.htm#pgfId-604695}[activation functions
388](../Text/CH13.htm#marker-1044900){.index1} --
[389](../Text/CH13.htm#marker-1042781){.index1}

[]{#HugoinActionIX.htm#pgfId-604698}[fetching resources
389](../Text/CH13.htm#marker-1017726){.index1} --
[394](../Text/CH13.htm#marker-1046467){.index1}

[]{#HugoinActionIX.htm#pgfId-604701}[install functions
388](../Text/CH13.htm#marker-1016664){.index1}

[]{#HugoinActionIX.htm#pgfId-604703}Q[]{#HugoinActionIX.htm#Q}

[]{#HugoinActionIX.htm#pgfId-604705}[queryStringParameters property,
Event object 312](../Text/CH11.htm#marker-1012876){.index1}

[]{#HugoinActionIX.htm#pgfId-604707}R[]{#HugoinActionIX.htm#R}

[]{#HugoinActionIX.htm#pgfId-604709}[range expression
145](../Text/CH05.htm#marker-1023748){.index1}

[]{#HugoinActionIX.htm#pgfId-604711}[range function
135](../Text/CH05.htm#marker-1019206){.index1},
[430](../Text/APP_D.htm#marker-1015091){.index1} --
[431](../Text/APP_D.htm#marker-1015601){.index1}

[]{#HugoinActionIX.htm#pgfId-604715}[readFile function
433](../Text/APP_D.htm#marker-1016863){.index1}

[]{#HugoinActionIX.htm#pgfId-604717}[.ReadingTime property
194](../Text/CH07.htm#marker-1013531){.index1}

[]{#HugoinActionIX.htm#pgfId-604719}[rebuild workflow
337](../Text/CH11.htm#marker-1024330){.index1}

[]{#HugoinActionIX.htm#pgfId-604721}[ref function
131](../Text/CH05.htm#marker-1017651){.index1} --
[132](../Text/CH05.htm#marker-1017763){.index1}

[]{#HugoinActionIX.htm#pgfId-604724}[ref method
432](../Text/APP_D.htm#marker-1016652){.index1}

[]{#HugoinActionIX.htm#pgfId-604726}[ref shortcode
116](../Text/CH04.htm#marker-1019199){.index1},
[396](../Text/CH13.htm#marker-1023017){.index1}

[]{#HugoinActionIX.htm#pgfId-604729}[RegularPages property
140](../Text/CH05.htm#marker-1021334){.index1}

[]{#HugoinActionIX.htm#pgfId-604731}[.RegularPages variable
198](../Text/CH07.htm#marker-1016195){.index1}

[]{#HugoinActionIX.htm#pgfId-604733}[related pages
197](../Text/CH07.htm#marker-1015170){.index1} --
[198](../Text/CH07.htm#marker-1027257){.index1}

[]{#HugoinActionIX.htm#pgfId-604736}[related section
197](../Text/CH07.htm#marker-1015187){.index1}

[]{#HugoinActionIX.htm#pgfId-604738}[relref shortcode
117](../Text/CH04.htm#marker-1019242){.index1}

[]{#HugoinActionIX.htm#pgfId-604740}[REMOVE_FORM_ON_SUBMISSION variable
288](../Text/CH10.htm#marker-1016721){.index1}

[]{#HugoinActionIX.htm#pgfId-604742}[render function
354](../Text/CH12.htm#marker-1019234){.index1}

[]{#HugoinActionIX.htm#pgfId-604744}[render hook templates
134](../Text/CH05.htm#marker-1031681){.index1},
[183](../Text/CH06.htm#marker-1037914){.index1}

[]{#HugoinActionIX.htm#pgfId-604747}[render method
355](../Text/CH12.htm#marker-1020467){.index1}

[]{#HugoinActionIX.htm#pgfId-604749}rendering

[]{#HugoinActionIX.htm#pgfId-604750}[comments
269](../Text/CH09.htm#marker-1024556){.index1} --
[270](../Text/CH09.htm#marker-1038875){.index1}

[]{#HugoinActionIX.htm#pgfId-604753}[LaTeX
310](../Text/CH11.htm#marker-1012250){.index1} --
[311](../Text/CH11.htm#marker-1012349){.index1}

[]{#HugoinActionIX.htm#pgfId-604756}[adding HTTP server to call this
function 314](../Text/CH11.htm#marker-1014130){.index1} --
[315](../Text/CH11.htm#marker-1015924){.index1}

[]{#HugoinActionIX.htm#pgfId-604759}[adding to website
325](../Text/CH11.htm#marker-1018417){.index1} --
[326](../Text/CH11.htm#marker-1036924){.index1}

[]{#HugoinActionIX.htm#pgfId-604762}[creating shortcode
324](../Text/CH11.htm#marker-1017728){.index1} --
[325](../Text/CH11.htm#marker-1018396){.index1}

[]{#HugoinActionIX.htm#pgfId-604765}[deploying to cloud
316](../Text/CH11.htm#marker-1016625){.index1} --
[323](../Text/CH11.htm#marker-1033977){.index1}

[]{#HugoinActionIX.htm#pgfId-604768}[security to prevent unauthorized
access 316](../Text/CH11.htm#marker-1016055){.index1}

[]{#HugoinActionIX.htm#pgfId-604770}[server-side rendering
311](../Text/CH11.htm#marker-1012373){.index1}

[]{#HugoinActionIX.htm#pgfId-604772}[writing code to
311](../Text/CH11.htm#marker-1032633){.index1} --
[313](../Text/CH11.htm#marker-1031245){.index1}

[]{#HugoinActionIX.htm#pgfId-604775}[Markdown
183](../Text/CH06.htm#marker-1037909){.index1} --
[184](../Text/CH06.htm#marker-1029172){.index1}

[]{#HugoinActionIX.htm#pgfId-604778}[shopping cart
353](../Text/CH12.htm#marker-1018735){.index1} --
[355](../Text/CH12.htm#marker-1044871){.index1}

[]{#HugoinActionIX.htm#pgfId-604781}[tweet as testimonial
241](../Text/CH09.htm#marker-1013183){.index1} --
[242](../Text/CH09.htm#marker-1014037){.index1}

[]{#HugoinActionIX.htm#pgfId-604784}[repeat shortcode
147](../Text/CH05.htm#marker-1025430){.index1} --
[148](../Text/CH05.htm#marker-1025466){.index1}

[]{#HugoinActionIX.htm#pgfId-604787}[replace directive
222](../Text/CH08.htm#marker-1013509){.index1} --
[224](../Text/CH08.htm#marker-1013972){.index1}

[]{#HugoinActionIX.htm#pgfId-604790}[replace\* method
432](../Text/APP_D.htm#marker-1016438){.index1}

[]{#HugoinActionIX.htm#pgfId-604792}[repository dispatch events
334](../Text/CH11.htm#marker-1022692){.index1}

[]{#HugoinActionIX.htm#pgfId-604794}[request handler
389](../Text/CH13.htm#marker-1017743){.index1}

[]{#HugoinActionIX.htm#pgfId-604796}[resize function
183](../Text/CH06.htm#marker-1037915){.index1}

[]{#HugoinActionIX.htm#pgfId-604798}[.Resize option
177](../Text/CH06.htm#marker-1025078){.index1} --
[178](../Text/CH06.htm#marker-1025359){.index1}

[]{#HugoinActionIX.htm#pgfId-604801}[resourceDir configuration setting
242](../Text/CH09.htm#marker-1014165){.index1}

[]{#HugoinActionIX.htm#pgfId-604803}[resourceDir variable
242](../Text/CH09.htm#marker-1014159){.index1}

[]{#HugoinActionIX.htm#pgfId-604805}resources

[]{#HugoinActionIX.htm#pgfId-604806}[access and manipulation
432](../Text/APP_D.htm#marker-1016742){.index1}

[]{#HugoinActionIX.htm#pgfId-604808}[manipulation and Hugo Pipes
433](../Text/APP_D.htm#marker-1016921){.index1}

[]{#HugoinActionIX.htm#pgfId-604810}[resources.GetMatch function
433](../Text/APP_D.htm#marker-1016942){.index1}

[]{#HugoinActionIX.htm#pgfId-604812}[REST APIs
243](../Text/CH09.htm#marker-1014509){.index1} --
[244](../Text/CH09.htm#marker-1014592){.index1}

[]{#HugoinActionIX.htm#pgfId-604815}[returns, partial
168](../Text/CH06.htm#marker-1019051){.index1} --
[170](../Text/CH06.htm#marker-1036082){.index1}

[]{#HugoinActionIX.htm#pgfId-604818}[robots.txt
382](../Text/CH13.htm#marker-1014760){.index1} --
[383](../Text/CH13.htm#marker-1046179){.index1}

[]{#HugoinActionIX.htm#pgfId-604821}[root page
95](../Text/CH04.htm#marker-1012961){.index1}

[]{#HugoinActionIX.htm#pgfId-604823}[root project
301](../Text/CH10.htm#marker-1023953){.index1} --
[302](../Text/CH10.htm#marker-1024201){.index1}

[]{#HugoinActionIX.htm#pgfId-604826}[routing
284](../Text/CH10.htm#marker-1030469){.index1}

[]{#HugoinActionIX.htm#pgfId-604828}[RSS formats
384](../Text/CH13.htm#marker-1015347){.index1}

[]{#HugoinActionIX.htm#pgfId-604830}[run-time API access
236](../Text/CH09.htm#marker-1011871){.index1} --
[237](../Text/CH09.htm#marker-1011910){.index1}

[]{#HugoinActionIX.htm#pgfId-604833}S[]{#HugoinActionIX.htm#S}

[]{#HugoinActionIX.htm#pgfId-604835}[safe\* methods
432](../Text/APP_D.htm#marker-1016257){.index1}

[]{#HugoinActionIX.htm#pgfId-604837}[safeCSS safe method
432](../Text/APP_D.htm#marker-1016263){.index1}

[]{#HugoinActionIX.htm#pgfId-604839}[safeHTML function
432](../Text/APP_D.htm#marker-1016251){.index1}

[]{#HugoinActionIX.htm#pgfId-604841}[---save-dev flag
294](../Text/CH10.htm#marker-1020130){.index1}

[]{#HugoinActionIX.htm#pgfId-604843}[scalability
20](../Text/CH01.htm#marker-1013496){.index1}

[]{#HugoinActionIX.htm#pgfId-604845}[scratch structure
168](../Text/CH06.htm#marker-1019497){.index1}

[]{#HugoinActionIX.htm#pgfId-604847}[scratch variable
427](../Text/APP_D.htm#marker-1012848){.index1}

[]{#HugoinActionIX.htm#pgfId-604849}[script tag
281](../Text/CH10.htm#marker-1013743){.index1},
[431](../Text/APP_D.htm#marker-1026297){.index1}

[]{#HugoinActionIX.htm#pgfId-604852}[scripts section
372](../Text/CH12.htm#marker-1030213){.index1}

[]{#HugoinActionIX.htm#pgfId-604854}[search index
297](../Text/CH10.htm#marker-1021108){.index1} --
[298](../Text/CH10.htm#marker-1034952){.index1}

[]{#HugoinActionIX.htm#pgfId-604857}[search library
293](../Text/CH10.htm#marker-1019392){.index1} --
[295](../Text/CH10.htm#marker-1020263){.index1}

[]{#HugoinActionIX.htm#pgfId-604860}[sections
95](../Text/CH04.htm#marker-1012880){.index1} --
[98](../Text/CH04.htm#marker-1026474){.index1},
[196](../Text/CH07.htm#marker-1014731){.index1}

[]{#HugoinActionIX.htm#pgfId-604864}[.Sections variable
202](../Text/CH07.htm#marker-1018312){.index1}

[]{#HugoinActionIX.htm#pgfId-604866}[securing tokens
262](../Text/CH09.htm#marker-1021568){.index1} --
[264](../Text/CH09.htm#marker-1022137){.index1}

[]{#HugoinActionIX.htm#pgfId-604869}[security
316](../Text/CH11.htm#marker-1016053){.index1}

[]{#HugoinActionIX.htm#pgfId-604871}[self global variable
388](../Text/CH13.htm#marker-1017302){.index1}

[]{#HugoinActionIX.htm#pgfId-604873}[self-containment of Hugo
19](../Text/CH01.htm#marker-1013326){.index1}

[]{#HugoinActionIX.htm#pgfId-604875}[sending emails
371](../Text/CH12.htm#marker-1029642){.index1}

[]{#HugoinActionIX.htm#pgfId-604877}[server mode
36](../Text/CH02.htm#marker-1014507){.index1}

[]{#HugoinActionIX.htm#pgfId-604879}[server-side LaTeX rendering
311](../Text/CH11.htm#marker-1012371){.index1}

[]{#HugoinActionIX.htm#pgfId-604881}[service workers
387](../Text/CH13.htm#marker-1016587){.index1} --
[394](../Text/CH13.htm#marker-1046466){.index1}

[]{#HugoinActionIX.htm#pgfId-604884}[activation functions
388](../Text/CH13.htm#marker-1044899){.index1} --
[389](../Text/CH13.htm#marker-1042780){.index1}

[]{#HugoinActionIX.htm#pgfId-604887}[fetching resources
389](../Text/CH13.htm#marker-1017724){.index1} --
[394](../Text/CH13.htm#marker-1046465){.index1}

[]{#HugoinActionIX.htm#pgfId-604890}[install functions
388](../Text/CH13.htm#marker-1016662){.index1}

[]{#HugoinActionIX.htm#pgfId-604892}[set command
264](../Text/CH09.htm#marker-1022023){.index1}

[]{#HugoinActionIX.htm#pgfId-604894}[set of web pages
103](../Text/CH04.htm#marker-1026814){.index1}

[]{#HugoinActionIX.htm#pgfId-604896}[sharing
218](../Text/CH08.htm#marker-1012271){.index1}

[]{#HugoinActionIX.htm#pgfId-604898}[sharing content
117](../Text/CH04.htm#marker-1019441){.index1} --
[120](../Text/CH04.htm#marker-1030875){.index1}

[]{#HugoinActionIX.htm#pgfId-604901}[HTML shortcodes
117](../Text/CH04.htm#marker-1019465){.index1}

[]{#HugoinActionIX.htm#pgfId-604903}[inline shortcodes
119](../Text/CH04.htm#marker-1020201){.index1} --
[120](../Text/CH04.htm#marker-1030874){.index1}

[]{#HugoinActionIX.htm#pgfId-604906}[markup-based shortcodes
118](../Text/CH04.htm#marker-1019989){.index1} --
[119](../Text/CH04.htm#marker-1032869){.index1}

[]{#HugoinActionIX.htm#pgfId-604909}[shopping carts
349](../Text/CH12.htm#marker-1015605){.index1} --
[355](../Text/CH12.htm#marker-1044870){.index1}

[]{#HugoinActionIX.htm#pgfId-604912}[cart button in header
349](../Text/CH12.htm#marker-1015639){.index1} --
[350](../Text/CH12.htm#marker-1037244){.index1}

[]{#HugoinActionIX.htm#pgfId-604915}[creating in JavaScript
350](../Text/CH12.htm#marker-1016134){.index1} --
[355](../Text/CH12.htm#marker-1044869){.index1}

[]{#HugoinActionIX.htm#pgfId-604918}[adding data when clicking Add to
cart 351](../Text/CH12.htm#marker-1017026){.index1} --
[352](../Text/CH12.htm#marker-1039982){.index1}

[]{#HugoinActionIX.htm#pgfId-604921}[creating API for product
information 352](../Text/CH12.htm#marker-1017977){.index1} --
[353](../Text/CH12.htm#marker-1037999){.index1}

[]{#HugoinActionIX.htm#pgfId-604924}[managing across tabs
350](../Text/CH12.htm#marker-1016160){.index1} --
[351](../Text/CH12.htm#marker-1016846){.index1}

[]{#HugoinActionIX.htm#pgfId-604927}[rendering shopping cart
353](../Text/CH12.htm#marker-1018733){.index1} --
[355](../Text/CH12.htm#marker-1044868){.index1}

[]{#HugoinActionIX.htm#pgfId-604930}[shortcodes
90](../Text/CH04.htm#marker-1011878){.index1},
[114](../Text/CH04.htm#marker-1017896){.index1} --
[117](../Text/CH04.htm#marker-1019414){.index1}

[]{#HugoinActionIX.htm#pgfId-604934}[built-in
116](../Text/CH04.htm#marker-1019146){.index1} --
[117](../Text/CH04.htm#marker-1019412){.index1}

[]{#HugoinActionIX.htm#pgfId-604937}[for rendering LaTeX
324](../Text/CH11.htm#marker-1017726){.index1} --
[325](../Text/CH11.htm#marker-1018393){.index1}

[]{#HugoinActionIX.htm#pgfId-604940}[nested
116](../Text/CH04.htm#marker-1018809){.index1}

[]{#HugoinActionIX.htm#pgfId-604942}[sharing content with
117](../Text/CH04.htm#marker-1019439){.index1} --
[120](../Text/CH04.htm#marker-1030873){.index1}

[]{#HugoinActionIX.htm#pgfId-604945}[HTML shortcodes
117](../Text/CH04.htm#marker-1019463){.index1}

[]{#HugoinActionIX.htm#pgfId-604947}[inline shortcodes
119](../Text/CH04.htm#marker-1020199){.index1} --
[120](../Text/CH04.htm#marker-1030872){.index1}

[]{#HugoinActionIX.htm#pgfId-604950}[markup-based shortcodes
118](../Text/CH04.htm#marker-1019987){.index1} --
[119](../Text/CH04.htm#marker-1032868){.index1}

[]{#HugoinActionIX.htm#pgfId-604953}[with content
115](../Text/CH04.htm#marker-1018413){.index1} --
[116](../Text/CH04.htm#marker-1030002){.index1}

[]{#HugoinActionIX.htm#pgfId-604956}[showcasing work
400](../Text/CH13.htm#marker-1023897){.index1} --
[401](../Text/CH13.htm#marker-1023918){.index1}

[]{#HugoinActionIX.htm#pgfId-604959}[single layout
157](../Text/CH06.htm#marker-1013908){.index1}

[]{#HugoinActionIX.htm#pgfId-604961}[site global variable
266](../Text/CH09.htm#marker-1022846){.index1} --
[267](../Text/CH09.htm#marker-1023509){.index1}

[]{#HugoinActionIX.htm#pgfId-604964}[site subcommand
27](../Text/CH02.htm#marker-1012110){.index1}

[]{#HugoinActionIX.htm#pgfId-604966}[site variable
124](../Text/CH05.htm#marker-1012273){.index1},
[426](../Text/APP_D.htm#marker-1012240){.index1}

[]{#HugoinActionIX.htm#pgfId-604969}[site.Data variable
143](../Text/CH05.htm#marker-1033596){.index1}

[]{#HugoinActionIX.htm#pgfId-604971}[site.Menus object
135](../Text/CH05.htm#marker-1019277){.index1}

[]{#HugoinActionIX.htm#pgfId-604973}[site.Menus.main variable
134](../Text/CH05.htm#marker-1018716){.index1}

[]{#HugoinActionIX.htm#pgfId-604975}[site.Params object
129](../Text/CH05.htm#marker-1016126){.index1}

[]{#HugoinActionIX.htm#pgfId-604977}[site.RegularPages.Related function
197](../Text/CH07.htm#marker-1015631){.index1}

[]{#HugoinActionIX.htm#pgfId-604979}[site.Title variable
126](../Text/CH05.htm#marker-1013978){.index1}

[]{#HugoinActionIX.htm#pgfId-604981}[sitemaps
381](../Text/CH13.htm#marker-1042123){.index1} --
[382](../Text/CH13.htm#marker-1041763){.index1}

[]{#HugoinActionIX.htm#pgfId-604984}[slice data structure
168](../Text/CH06.htm#marker-1019475){.index1}

[]{#HugoinActionIX.htm#pgfId-604986}[slice method
432](../Text/APP_D.htm#marker-1016531){.index1}

[]{#HugoinActionIX.htm#pgfId-604988}[slug key
256](../Text/CH09.htm#marker-1034204){.index1}

[]{#HugoinActionIX.htm#pgfId-604990}[slug property
80](../Text/CH03.htm#marker-1028197){.index1}

[]{#HugoinActionIX.htm#pgfId-604992}[smart option
178](../Text/CH06.htm#marker-1025258){.index1}

[]{#HugoinActionIX.htm#pgfId-604994}[software development kits (SDKs)
398](../Text/CH13.htm#marker-1023571){.index1} --
[399](../Text/CH13.htm#marker-1041985){.index1}

[]{#HugoinActionIX.htm#pgfId-604997}[sort function
140](../Text/CH05.htm#marker-1021350){.index1}

[]{#HugoinActionIX.htm#pgfId-604999}[source code
222](../Text/CH08.htm#marker-1013285){.index1}

[]{#HugoinActionIX.htm#pgfId-605001}[source control
28](../Text/CH02.htm#marker-1012437){.index1} --
[29](../Text/CH02.htm#marker-1023365){.index1}

[]{#HugoinActionIX.htm#pgfId-605004}[source folder
29](../Text/CH02.htm#marker-1012946){.index1} --
[32](../Text/CH02.htm#marker-1023747){.index1}

[]{#HugoinActionIX.htm#pgfId-605007}[sourceMap
289](../Text/CH10.htm#marker-1035255){.index1}

[]{#HugoinActionIX.htm#pgfId-605009}[SPA (single-page application)
271](../Text/CH09.htm#marker-1025428){.index1},
[300](../Text/CH10.htm#marker-1023910){.index1} --
[304](../Text/CH10.htm#marker-1025465){.index1},
[344](../Text/CH12.htm#marker-1011806){.index1}

[]{#HugoinActionIX.htm#pgfId-605014}[creating template for
302](../Text/CH10.htm#marker-1024224){.index1}

[]{#HugoinActionIX.htm#pgfId-605016}[creating web page
303](../Text/CH10.htm#marker-1025164){.index1} --
[304](../Text/CH10.htm#marker-1025462){.index1}

[]{#HugoinActionIX.htm#pgfId-605019}[importing CSS
303](../Text/CH10.htm#marker-1024808){.index1}

[]{#HugoinActionIX.htm#pgfId-605021}[importing node module in root
project 301](../Text/CH10.htm#marker-1023951){.index1} --
[302](../Text/CH10.htm#marker-1024198){.index1}

[]{#HugoinActionIX.htm#pgfId-605024}[speed
17](../Text/CH01.htm#marker-1013184){.index1} --
[18](../Text/CH01.htm#marker-1024072){.index1},
[21](../Text/CH01.htm#marker-1013578){.index1} --
[22](../Text/CH01.htm#marker-1013605){.index1}

[]{#HugoinActionIX.htm#pgfId-605029}[square tag
204](../Text/CH07.htm#marker-1019543){.index1}

[]{#HugoinActionIX.htm#pgfId-605031}[srcset attribute
178](../Text/CH06.htm#marker-1037424){.index1}

[]{#HugoinActionIX.htm#pgfId-605033}[stability
18](../Text/CH01.htm#marker-1013260){.index1}

[]{#HugoinActionIX.htm#pgfId-605035}standard library

[]{#HugoinActionIX.htm#pgfId-605036}[Go template language
431](../Text/APP_D.htm#marker-1016220){.index1} --
[433](../Text/APP_D.htm#marker-1016958){.index1}

[]{#HugoinActionIX.htm#pgfId-605039}[file handling and network access
433](../Text/APP_D.htm#marker-1016852){.index1}

[]{#HugoinActionIX.htm#pgfId-605041}[language features
433](../Text/APP_D.htm#marker-1016791){.index1}

[]{#HugoinActionIX.htm#pgfId-605043}[list and map manipulation and
filtering 432](../Text/APP_D.htm#marker-1016506){.index1}

[]{#HugoinActionIX.htm#pgfId-605045}[resource access and manipulation
432](../Text/APP_D.htm#marker-1016740){.index1}

[]{#HugoinActionIX.htm#pgfId-605047}[resource manipulation and Hugo
Pipes 433](../Text/APP_D.htm#marker-1016919){.index1}

[]{#HugoinActionIX.htm#pgfId-605049}[string conversions
432](../Text/APP_D.htm#marker-1016244){.index1}

[]{#HugoinActionIX.htm#pgfId-605051}[string creation and manipulation
432](../Text/APP_D.htm#marker-1016407){.index1}

[]{#HugoinActionIX.htm#pgfId-605053}[web and Hugo-specific tasks
432](../Text/APP_D.htm#marker-1016643){.index1}

[]{#HugoinActionIX.htm#pgfId-605055}[reducing code size using
128](../Text/CH05.htm#marker-1015138){.index1} --
[129](../Text/CH05.htm#marker-1037789){.index1}

[]{#HugoinActionIX.htm#pgfId-605058}[state
284](../Text/CH10.htm#marker-1030467){.index1}

[]{#HugoinActionIX.htm#pgfId-605060}[storage
399](../Text/CH13.htm#marker-1023785){.index1}

[]{#HugoinActionIX.htm#pgfId-605062}[storage event
350](../Text/CH12.htm#marker-1016167){.index1}

[]{#HugoinActionIX.htm#pgfId-605064}strings

[]{#HugoinActionIX.htm#pgfId-605065}[accessing within themes
379](../Text/CH13.htm#marker-1013054){.index1} --
[380](../Text/CH13.htm#marker-1044758){.index1}

[]{#HugoinActionIX.htm#pgfId-605068}Go template language

[]{#HugoinActionIX.htm#pgfId-605069}[conversions
432](../Text/APP_D.htm#marker-1016242){.index1}

[]{#HugoinActionIX.htm#pgfId-605071}[creation and manipulation
432](../Text/APP_D.htm#marker-1016405){.index1}

[]{#HugoinActionIX.htm#pgfId-605073}[Stripe JavaScript library
361](../Text/CH12.htm#marker-1024443){.index1}

[]{#HugoinActionIX.htm#pgfId-605075}[structured data
141](../Text/CH05.htm#marker-1021921){.index1} --
[145](../Text/CH05.htm#marker-1023807){.index1}

[]{#HugoinActionIX.htm#pgfId-605078}[parsing files for
143](../Text/CH05.htm#marker-1022874){.index1} --
[145](../Text/CH05.htm#marker-1023804){.index1}

[]{#HugoinActionIX.htm#pgfId-605081}[using front matter for
141](../Text/CH05.htm#marker-1021947){.index1} --
[143](../Text/CH05.htm#marker-1022848){.index1}

[]{#HugoinActionIX.htm#pgfId-605084}[submenu
164](../Text/CH06.htm#marker-1017582){.index1} --
[165](../Text/CH06.htm#marker-1018019){.index1}

[]{#HugoinActionIX.htm#pgfId-605087}[submit
278](../Text/CH10.htm#marker-1012139){.index1}

[]{#HugoinActionIX.htm#pgfId-605089}[subsection lists
198](../Text/CH07.htm#marker-1016124){.index1}

[]{#HugoinActionIX.htm#pgfId-605091}[creating multiple pages to render
long list 199](../Text/CH07.htm#marker-1016828){.index1} --
[202](../Text/CH07.htm#marker-1030359){.index1}

[]{#HugoinActionIX.htm#pgfId-605094}[rendering
202](../Text/CH07.htm#marker-1018303){.index1}

[]{#HugoinActionIX.htm#pgfId-605096}[using custom paginator
202](../Text/CH07.htm#marker-1017898){.index1}

[]{#HugoinActionIX.htm#pgfId-605098}[using list template for index pages
198](../Text/CH07.htm#marker-1016170){.index1}

[]{#HugoinActionIX.htm#pgfId-605100}[subsections
95](../Text/CH04.htm#marker-1012923){.index1}

[]{#HugoinActionIX.htm#pgfId-605102}[subtitle metadata item
125](../Text/CH05.htm#marker-1012932){.index1}

[]{#HugoinActionIX.htm#pgfId-605104}[subtitle variable
125](../Text/CH05.htm#marker-1012948){.index1}

[]{#HugoinActionIX.htm#pgfId-605106}[success parameters
363](../Text/CH12.htm#marker-1026487){.index1} --
[364](../Text/CH12.htm#marker-1027275){.index1}

[]{#HugoinActionIX.htm#pgfId-605109}[summary variable
98](../Text/CH04.htm#marker-1026468){.index1}

[]{#HugoinActionIX.htm#pgfId-605111}[survey content type
253](../Text/CH09.htm#marker-1017965){.index1}

[]{#HugoinActionIX.htm#pgfId-605113}[survey section
381](../Text/CH13.htm#marker-1014105){.index1}

[]{#HugoinActionIX.htm#pgfId-605115}[surveys
253](../Text/CH09.htm#marker-1017729){.index1}

[]{#HugoinActionIX.htm#pgfId-605117}[SVG image format
310](../Text/CH11.htm#marker-1012270){.index1}

[]{#HugoinActionIX.htm#pgfId-605119}[system package managers
405](../Text/APP_A.htm#marker-1163554){.index1}

[]{#HugoinActionIX.htm#pgfId-605121}[system requirements
403](../Text/APP_A.htm#marker-1011765){.index1} --
[404](../Text/APP_A.htm#marker-1163193){.index1}

[]{#HugoinActionIX.htm#pgfId-605124}[Hugo flavors
404](../Text/APP_A.htm#marker-1011869){.index1}

[]{#HugoinActionIX.htm#pgfId-605126}[Hugo versions
404](../Text/APP_A.htm#marker-1011924){.index1}

[]{#HugoinActionIX.htm#pgfId-605128}T[]{#HugoinActionIX.htm#T}

[]{#HugoinActionIX.htm#pgfId-605130}[tables
67](../Text/CH03.htm#marker-1013251){.index1} --
[69](../Text/CH03.htm#marker-1013508){.index1},
[72](../Text/CH03.htm#marker-1014172){.index1}

[]{#HugoinActionIX.htm#pgfId-605134}[tabs
350](../Text/CH12.htm#marker-1016158){.index1} --
[351](../Text/CH12.htm#marker-1016843){.index1}

[]{#HugoinActionIX.htm#pgfId-605137}[tags property
81](../Text/CH03.htm#marker-1028226){.index1}

[]{#HugoinActionIX.htm#pgfId-605139}[\_target key
195](../Text/CH07.htm#marker-1014603){.index1}

[]{#HugoinActionIX.htm#pgfId-605141}[target property
279](../Text/CH10.htm#marker-1028767){.index1},
[289](../Text/CH10.htm#marker-1035257){.index1}

[]{#HugoinActionIX.htm#pgfId-605144}[task lists
67](../Text/CH03.htm#marker-1013249){.index1} --
[69](../Text/CH03.htm#marker-1013505){.index1}

[]{#HugoinActionIX.htm#pgfId-605147}[taxonomies
38](../Text/CH02.htm#marker-1015688){.index1},
[108](../Text/CH04.htm#marker-1027553){.index1} --
[113](../Text/CH04.htm#marker-1029870){.index1},
[204](../Text/CH07.htm#marker-1019512){.index1} --
[207](../Text/CH07.htm#marker-1028177){.index1}

[]{#HugoinActionIX.htm#pgfId-605153}[---templateMetrics build flag
165](../Text/CH06.htm#marker-1018071){.index1}

[]{#HugoinActionIX.htm#pgfId-605155}[templates
152](../Text/CH06.htm#marker-1011855){.index1} --
[160](../Text/CH06.htm#marker-1015336){.index1}

[]{#HugoinActionIX.htm#pgfId-605158}[adding Turbo Drive to
396](../Text/CH13.htm#marker-1022565){.index1}

[]{#HugoinActionIX.htm#pgfId-605160}[bundled templates
184](../Text/CH06.htm#marker-1029194){.index1} --
[186](../Text/CH06.htm#marker-1029880){.index1}

[]{#HugoinActionIX.htm#pgfId-605163}[code in shortcodes
145](../Text/CH05.htm#marker-1023886){.index1} --
[146](../Text/CH05.htm#marker-1024760){.index1}

[]{#HugoinActionIX.htm#pgfId-605166}[defining blocks of code
154](../Text/CH06.htm#marker-1034399){.index1} --
[157](../Text/CH06.htm#marker-1013817){.index1}

[]{#HugoinActionIX.htm#pgfId-605169}[encapsulating with different
content types 153](../Text/CH06.htm#marker-1011883){.index1} --
[154](../Text/CH06.htm#marker-1034359){.index1}

[]{#HugoinActionIX.htm#pgfId-605172}[for SPA
302](../Text/CH10.htm#marker-1024222){.index1}

[]{#HugoinActionIX.htm#pgfId-605174}[list template
198](../Text/CH07.htm#marker-1016168){.index1}

[]{#HugoinActionIX.htm#pgfId-605176}[plugins
226](../Text/CH08.htm#marker-1014445){.index1} --
[227](../Text/CH08.htm#marker-1015102){.index1}

[]{#HugoinActionIX.htm#pgfId-605179}[providing base template for reuse
154](../Text/CH06.htm#marker-1012252){.index1}

[]{#HugoinActionIX.htm#pgfId-605181}[reusing base template in different
layout 157](../Text/CH06.htm#marker-1013839){.index1} --
[160](../Text/CH06.htm#marker-1015333){.index1}

[]{#HugoinActionIX.htm#pgfId-605184}[term page
196](../Text/CH07.htm#marker-1014771){.index1}

[]{#HugoinActionIX.htm#pgfId-605186}[terms page
204](../Text/CH07.htm#marker-1019517){.index1} --
[205](../Text/CH07.htm#marker-1019696){.index1}

[]{#HugoinActionIX.htm#pgfId-605189}[test command
296](../Text/CH10.htm#marker-1030896){.index1}

[]{#HugoinActionIX.htm#pgfId-605191}[testimonials field
141](../Text/CH05.htm#marker-1021976){.index1}

[]{#HugoinActionIX.htm#pgfId-605193}[testimonials, tweets as
241](../Text/CH09.htm#marker-1013181){.index1} --
[242](../Text/CH09.htm#marker-1014035){.index1}

[]{#HugoinActionIX.htm#pgfId-605196}[testing
92](../Text/CH04.htm#marker-1024464){.index1}

[]{#HugoinActionIX.htm#pgfId-605198}[tex query parameter
315](../Text/CH11.htm#marker-1015879){.index1} --
[316](../Text/CH11.htm#marker-1016086){.index1}

[]{#HugoinActionIX.htm#pgfId-605201}[.Text variable
134](../Text/CH05.htm#marker-1031683){.index1}

[]{#HugoinActionIX.htm#pgfId-605203}[textual assets
171](../Text/CH06.htm#marker-1021099){.index1}

[]{#HugoinActionIX.htm#pgfId-605205}[theme developer
89](../Text/CH04.htm#marker-1011837){.index1}

[]{#HugoinActionIX.htm#pgfId-605207}[theme key
34](../Text/CH02.htm#marker-1013708){.index1}

[]{#HugoinActionIX.htm#pgfId-605209}[theme: eclectic setting
208](../Text/CH07.htm#marker-1021295){.index1}

[]{#HugoinActionIX.htm#pgfId-605211}[themes
32](../Text/CH02.htm#marker-1013555){.index1} --
[37](../Text/CH02.htm#marker-1014706){.index1},
[153](../Text/CH06.htm#marker-1011923){.index1},
[196](../Text/CH07.htm#marker-1026952){.index1}

[]{#HugoinActionIX.htm#pgfId-605216}[accessing strings within
379](../Text/CH13.htm#marker-1013052){.index1} --
[380](../Text/CH13.htm#marker-1044757){.index1}

[]{#HugoinActionIX.htm#pgfId-605219}[adding to website
33](../Text/CH02.htm#marker-1026118){.index1} --
[34](../Text/CH02.htm#marker-1030304){.index1}

[]{#HugoinActionIX.htm#pgfId-605222}[choosing
54](../Text/CH02.htm#marker-1018875){.index1} --
[56](../Text/CH02.htm#marker-1019389){.index1}

[]{#HugoinActionIX.htm#pgfId-605225}[content views
211](../Text/CH07.htm#marker-1031586){.index1} --
[213](../Text/CH07.htm#marker-1022854){.index1}

[]{#HugoinActionIX.htm#pgfId-605228}[creating
207](../Text/CH07.htm#marker-1021093){.index1} --
[210](../Text/CH07.htm#marker-1030938){.index1}

[]{#HugoinActionIX.htm#pgfId-605231}[aligning content with theme
209](../Text/CH07.htm#marker-1021626){.index1} --
[210](../Text/CH07.htm#marker-1021910){.index1}

[]{#HugoinActionIX.htm#pgfId-605234}[new
208](../Text/CH07.htm#marker-1021112){.index1}

[]{#HugoinActionIX.htm#pgfId-605236}[providing theme assets
210](../Text/CH07.htm#marker-1031450){.index1}

[]{#HugoinActionIX.htm#pgfId-605238}Hugo Modules

[]{#HugoinActionIX.htm#pgfId-605239}[enabling other than Eclectic
220](../Text/CH08.htm#marker-1012652){.index1}

[]{#HugoinActionIX.htm#pgfId-605241}[getting specific version of
220](../Text/CH08.htm#marker-1012811){.index1} --
[221](../Text/CH08.htm#marker-1023313){.index1}

[]{#HugoinActionIX.htm#pgfId-605244}[importing
219](../Text/CH08.htm#marker-1012305){.index1}

[]{#HugoinActionIX.htm#pgfId-605246}[overview
218](../Text/CH08.htm#marker-1012203){.index1} --
[219](../Text/CH08.htm#marker-1012285){.index1}

[]{#HugoinActionIX.htm#pgfId-605249}[layout content
188](../Text/CH07.htm#marker-1011930){.index1} --
[198](../Text/CH07.htm#marker-1027256){.index1}

[]{#HugoinActionIX.htm#pgfId-605252}[blog content
192](../Text/CH07.htm#marker-1013275){.index1} --
[195](../Text/CH07.htm#marker-1014553){.index1}

[]{#HugoinActionIX.htm#pgfId-605255}[cascading targets
195](../Text/CH07.htm#marker-1014594){.index1}

[]{#HugoinActionIX.htm#pgfId-605257}[parameterizing front matter to
differentiate News page interface
189](../Text/CH07.htm#marker-1011964){.index1} --
[191](../Text/CH07.htm#marker-1012673){.index1}

[]{#HugoinActionIX.htm#pgfId-605260}[related pages via Hugo
197](../Text/CH07.htm#marker-1015168){.index1} --
[198](../Text/CH07.htm#marker-1027255){.index1}

[]{#HugoinActionIX.htm#pgfId-605263}[using cascade property to apply
properties to front matter of multiple pages
191](../Text/CH07.htm#marker-1012697){.index1} --
[192](../Text/CH07.htm#marker-1013253){.index1}

[]{#HugoinActionIX.htm#pgfId-605266}[markup, benefits of
86](../Text/CH03.htm#marker-1020325){.index1} --
[87](../Text/CH03.htm#marker-1033277){.index1}

[]{#HugoinActionIX.htm#pgfId-605269}[running dev server
34](../Text/CH02.htm#marker-1013998){.index1} --
[37](../Text/CH02.htm#marker-1014704){.index1}

[]{#HugoinActionIX.htm#pgfId-605272}[shared dependencies across
227](../Text/CH08.htm#marker-1015219){.index1} --
[228](../Text/CH08.htm#marker-1015388){.index1}

[]{#HugoinActionIX.htm#pgfId-605275}[taxonomy pages
204](../Text/CH07.htm#marker-1019510){.index1} --
[207](../Text/CH07.htm#marker-1028176){.index1}

[]{#HugoinActionIX.htm#pgfId-605278}[taxonomy pages
207](../Text/CH07.htm#marker-1020705){.index1}

[]{#HugoinActionIX.htm#pgfId-605280}[terms page
205](../Text/CH07.htm#marker-1019694){.index1}

[]{#HugoinActionIX.htm#pgfId-605282}[updating index pages by providing
content and subsection lists
198](../Text/CH07.htm#marker-1016122){.index1}

[]{#HugoinActionIX.htm#pgfId-605284}[creating multiple pages to render
long list 199](../Text/CH07.htm#marker-1016826){.index1} --
[202](../Text/CH07.htm#marker-1030358){.index1}

[]{#HugoinActionIX.htm#pgfId-605287}[rendering list of subsections
202](../Text/CH07.htm#marker-1018301){.index1}

[]{#HugoinActionIX.htm#pgfId-605289}[using custom paginator
202](../Text/CH07.htm#marker-1017896){.index1}

[]{#HugoinActionIX.htm#pgfId-605291}[using list template for index pages
198](../Text/CH07.htm#marker-1016166){.index1}

[]{#HugoinActionIX.htm#pgfId-605293}[this function
314](../Text/CH11.htm#marker-1014128){.index1} --
[315](../Text/CH11.htm#marker-1015921){.index1}

[]{#HugoinActionIX.htm#pgfId-605296}[this variable
129](../Text/CH05.htm#marker-1016168){.index1},
[425](../Text/APP_D.htm#marker-1012137){.index1}

[]{#HugoinActionIX.htm#pgfId-605299}[Title attribute
185](../Text/CH06.htm#marker-1043535){.index1}

[]{#HugoinActionIX.htm#pgfId-605301}[title element
76](../Text/CH03.htm#marker-1016417){.index1}

[]{#HugoinActionIX.htm#pgfId-605303}[Title property
156](../Text/CH06.htm#marker-1013292){.index1},
[380](../Text/CH13.htm#marker-1013266){.index1}

[]{#HugoinActionIX.htm#pgfId-605306}[title property
80](../Text/CH03.htm#marker-1028171){.index1}

[]{#HugoinActionIX.htm#pgfId-605308}[.Title variable
134](../Text/CH05.htm#marker-1031684){.index1}

[]{#HugoinActionIX.htm#pgfId-605310}[title variable
127](../Text/CH05.htm#marker-1014859){.index1}

[]{#HugoinActionIX.htm#pgfId-605312}[tokens, securing
262](../Text/CH09.htm#marker-1021566){.index1} --
[264](../Text/CH09.htm#marker-1022134){.index1}

[]{#HugoinActionIX.htm#pgfId-605315}[TOML (Tom\'s Obvious, Minimal
Language) 78](../Text/CH03.htm#marker-1017541){.index1},
[408](../Text/APP_B.htm#marker-1011771){.index1} --
[410](../Text/APP_B.htm#marker-1012821){.index1}

[]{#HugoinActionIX.htm#pgfId-605319}[comments
409](../Text/APP_B.htm#marker-1011903){.index1}

[]{#HugoinActionIX.htm#pgfId-605321}[data types
409](../Text/APP_B.htm#marker-1011961){.index1}

[]{#HugoinActionIX.htm#pgfId-605323}[dictionaries
410](../Text/APP_B.htm#marker-1012521){.index1}

[]{#HugoinActionIX.htm#pgfId-605325}[front matter
410](../Text/APP_B.htm#marker-1012711){.index1}

[]{#HugoinActionIX.htm#pgfId-605327}[lists
409](../Text/APP_B.htm#marker-1012373){.index1}

[]{#HugoinActionIX.htm#pgfId-605329}[multiline strings
409](../Text/APP_B.htm#marker-1012275){.index1}

[]{#HugoinActionIX.htm#pgfId-605331}[tooling
14](../Text/CH01.htm#marker-1012838){.index1}

[]{#HugoinActionIX.htm#pgfId-605333}[TotalPages object
201](../Text/CH07.htm#marker-1017399){.index1}

[]{#HugoinActionIX.htm#pgfId-605335}[transient data
15](../Text/CH01.htm#marker-1012937){.index1}

[]{#HugoinActionIX.htm#pgfId-605337}[translated pages
380](../Text/CH13.htm#marker-1013585){.index1} --
[381](../Text/CH13.htm#marker-1046092){.index1}

[]{#HugoinActionIX.htm#pgfId-605340}[Translations variable
380](../Text/CH13.htm#marker-1013656){.index1}

[]{#HugoinActionIX.htm#pgfId-605342}[trim function
146](../Text/CH05.htm#marker-1024669){.index1}

[]{#HugoinActionIX.htm#pgfId-605344}[troubleshooting
406](../Text/APP_A.htm#marker-1027177){.index1} --
[407](../Text/APP_A.htm#marker-1027431){.index1}

[]{#HugoinActionIX.htm#pgfId-605347}[fixing Modules
407](../Text/APP_A.htm#marker-1027337){.index1}

[]{#HugoinActionIX.htm#pgfId-605349}[getting Hugo extended
406](../Text/APP_A.htm#marker-1027279){.index1}

[]{#HugoinActionIX.htm#pgfId-605351}[installing right version
406](../Text/APP_A.htm#marker-1027226){.index1}

[]{#HugoinActionIX.htm#pgfId-605353}[running
406](../Text/APP_A.htm#marker-1027199){.index1}

[]{#HugoinActionIX.htm#pgfId-605355}[Turbo
395](../Text/CH13.htm#marker-1022501){.index1}

[]{#HugoinActionIX.htm#pgfId-605357}[Turbo Drive
395](../Text/CH13.htm#marker-1022520){.index1}

[]{#HugoinActionIX.htm#pgfId-605359}[Turbo JavaScript library
395](../Text/CH13.htm#marker-1022484){.index1} --
[397](../Text/CH13.htm#marker-1023531){.index1}

[]{#HugoinActionIX.htm#pgfId-605362}[adding Turbo Drive to template
396](../Text/CH13.htm#marker-1022563){.index1}

[]{#HugoinActionIX.htm#pgfId-605364}[handling JavaScript-based
navigation 396](../Text/CH13.htm#marker-1022929){.index1} --
[397](../Text/CH13.htm#marker-1023528){.index1}

[]{#HugoinActionIX.htm#pgfId-605367}[turbo:load event
396](../Text/CH13.htm#marker-1022995){.index1}

[]{#HugoinActionIX.htm#pgfId-605369}[tweet key
241](../Text/CH09.htm#marker-1013192){.index1}

[]{#HugoinActionIX.htm#pgfId-605371}[tweet shortcode
117](../Text/CH04.htm#marker-1019288){.index1},
[237](../Text/CH09.htm#marker-1011941){.index1}

[]{#HugoinActionIX.htm#pgfId-605374}[tweets
237](../Text/CH09.htm#marker-1011932){.index1} --
[243](../Text/CH09.htm#marker-1014443){.index1}

[]{#HugoinActionIX.htm#pgfId-605377}[Hugo\'s functions for compile-time
API access 240](../Text/CH09.htm#marker-1031043){.index1} --
[241](../Text/CH09.htm#marker-1013155){.index1}

[]{#HugoinActionIX.htm#pgfId-605380}[managing content lifetimes
242](../Text/CH09.htm#marker-1014082){.index1} --
[243](../Text/CH09.htm#marker-1014440){.index1}

[]{#HugoinActionIX.htm#pgfId-605383}[rendering tweet as testimonial
241](../Text/CH09.htm#marker-1013179){.index1} --
[242](../Text/CH09.htm#marker-1014032){.index1}

[]{#HugoinActionIX.htm#pgfId-605386}[Twitter API
239](../Text/CH09.htm#marker-1012089){.index1} --
[240](../Text/CH09.htm#marker-1031063){.index1}

[]{#HugoinActionIX.htm#pgfId-605389}[twitter:title tag
184](../Text/CH06.htm#marker-1042597){.index1}

[]{#HugoinActionIX.htm#pgfId-605391}[type cast function
428](../Text/APP_D.htm#marker-1026202){.index1}

[]{#HugoinActionIX.htm#pgfId-605393}[type field
153](../Text/CH06.htm#marker-1033958){.index1} --
[154](../Text/CH06.htm#marker-1034358){.index1},
[192](../Text/CH07.htm#marker-1013044){.index1}

[]{#HugoinActionIX.htm#pgfId-605397}[type key
253](../Text/CH09.htm#marker-1017959){.index1}

[]{#HugoinActionIX.htm#pgfId-605399}[.Type property
189](../Text/CH07.htm#marker-1012388){.index1}

[]{#HugoinActionIX.htm#pgfId-605401}[type property
80](../Text/CH03.htm#marker-1028191){.index1}

[]{#HugoinActionIX.htm#pgfId-605403}U[]{#HugoinActionIX.htm#U}

[]{#HugoinActionIX.htm#pgfId-605405}[-u command-line flag
221](../Text/CH08.htm#marker-1013044){.index1}

[]{#HugoinActionIX.htm#pgfId-605407}[unauthorized access
316](../Text/CH11.htm#marker-1016051){.index1}

[]{#HugoinActionIX.htm#pgfId-605409}[unsafe key
67](../Text/CH03.htm#marker-1013055){.index1}

[]{#HugoinActionIX.htm#pgfId-605411}updating

[]{#HugoinActionIX.htm#pgfId-605412}[build systems to support npm
295](../Text/CH10.htm#marker-1020285){.index1} --
[297](../Text/CH10.htm#marker-1021079){.index1}

[]{#HugoinActionIX.htm#pgfId-605415}[updating GitHub Actions
296](../Text/CH10.htm#marker-1020876){.index1} --
[297](../Text/CH10.htm#marker-1021076){.index1}

[]{#HugoinActionIX.htm#pgfId-605418}[updating Netlify
296](../Text/CH10.htm#marker-1020545){.index1}

[]{#HugoinActionIX.htm#pgfId-605420}[index pages
198](../Text/CH07.htm#marker-1016120){.index1}

[]{#HugoinActionIX.htm#pgfId-605422}[creating multiple pages to render
long list 199](../Text/CH07.htm#marker-1016824){.index1} --
[202](../Text/CH07.htm#marker-1030357){.index1}

[]{#HugoinActionIX.htm#pgfId-605425}[rendering list of subsections
202](../Text/CH07.htm#marker-1018299){.index1}

[]{#HugoinActionIX.htm#pgfId-605427}[using custom paginator
202](../Text/CH07.htm#marker-1017894){.index1}

[]{#HugoinActionIX.htm#pgfId-605429}[using list template for index pages
198](../Text/CH07.htm#marker-1016164){.index1}

[]{#HugoinActionIX.htm#pgfId-605431}[user-generated content
15](../Text/CH01.htm#marker-1012935){.index1}

[]{#HugoinActionIX.htm#pgfId-605433}[user-specific web pages
15](../Text/CH01.htm#marker-1012968){.index1}

[]{#HugoinActionIX.htm#pgfId-605435}V[]{#HugoinActionIX.htm#V}

[]{#HugoinActionIX.htm#pgfId-605437}variables

[]{#HugoinActionIX.htm#pgfId-605438}[creating for simplification
127](../Text/CH05.htm#marker-1014378){.index1}

[]{#HugoinActionIX.htm#pgfId-605440}[Go template language
425](../Text/APP_D.htm#marker-1012096){.index1} --
[426](../Text/APP_D.htm#marker-1012434){.index1}

[]{#HugoinActionIX.htm#pgfId-605443}[built-in
425](../Text/APP_D.htm#marker-1012118){.index1} --
[426](../Text/APP_D.htm#marker-1012370){.index1}

[]{#HugoinActionIX.htm#pgfId-605446}[custom
426](../Text/APP_D.htm#marker-1012392){.index1}

[]{#HugoinActionIX.htm#pgfId-605448}[using context switch via with
conditional 129](../Text/CH05.htm#marker-1016113){.index1} --
[130](../Text/CH05.htm#marker-1038006){.index1}

[]{#HugoinActionIX.htm#pgfId-605451}[using site variables for defaults
126](../Text/CH05.htm#marker-1013965){.index1} --
[127](../Text/CH05.htm#marker-1014352){.index1}

[]{#HugoinActionIX.htm#pgfId-605454}[Vercel
50](../Text/CH02.htm#marker-1018432){.index1}

[]{#HugoinActionIX.htm#pgfId-605456}[versions
404](../Text/APP_A.htm#marker-1011922){.index1}

[]{#HugoinActionIX.htm#pgfId-605458}[content versioning with markup
85](../Text/CH03.htm#marker-1020240){.index1}

[]{#HugoinActionIX.htm#pgfId-605460}[of themes
220](../Text/CH08.htm#marker-1012809){.index1} --
[221](../Text/CH08.htm#marker-1023312){.index1}

[]{#HugoinActionIX.htm#pgfId-605463}[using different output formats
384](../Text/CH13.htm#marker-1015279){.index1} --
[387](../Text/CH13.htm#marker-1046382){.index1}

[]{#HugoinActionIX.htm#pgfId-605466}[built-in RSS formats
384](../Text/CH13.htm#marker-1015345){.index1}

[]{#HugoinActionIX.htm#pgfId-605468}[creating output format
385](../Text/CH13.htm#marker-1015687){.index1} --
[387](../Text/CH13.htm#marker-1046381){.index1}

[]{#HugoinActionIX.htm#pgfId-605471}[vertical scaling
4](../Text/CH01.htm#marker-1011902){.index1}

[]{#HugoinActionIX.htm#pgfId-605473}[vimeo shortcode
117](../Text/CH04.htm#marker-1019334){.index1}

[]{#HugoinActionIX.htm#pgfId-605475}W[]{#HugoinActionIX.htm#W}

[]{#HugoinActionIX.htm#pgfId-605477}[watermarks
181](../Text/CH06.htm#marker-1027357){.index1}

[]{#HugoinActionIX.htm#pgfId-605479}[web app manifest
393](../Text/CH13.htm#marker-1021417){.index1}

[]{#HugoinActionIX.htm#pgfId-605481}[web pages
15](../Text/CH01.htm#marker-1012966){.index1}

[]{#HugoinActionIX.htm#pgfId-605483}[web stacks
4](../Text/CH01.htm#marker-1011849){.index1} --
[8](../Text/CH01.htm#marker-1012157){.index1}

[]{#HugoinActionIX.htm#pgfId-605486}[web tasks
432](../Text/APP_D.htm#marker-1016641){.index1}

[]{#HugoinActionIX.htm#pgfId-605488}[webhooks
326](../Text/CH11.htm#marker-1019062){.index1} --
[342](../Text/CH11.htm#marker-1026370){.index1}

[]{#HugoinActionIX.htm#pgfId-605491}[adding to Netlify Forms
328](../Text/CH11.htm#marker-1019284){.index1} --
[330](../Text/CH11.htm#marker-1032056){.index1}

[]{#HugoinActionIX.htm#pgfId-605494}[adding webhook to Formspree to
rebuild website 338](../Text/CH11.htm#marker-1024653){.index1} --
[339](../Text/CH11.htm#marker-1037096){.index1}

[]{#HugoinActionIX.htm#pgfId-605497}[creating for Netlify rebuilds
327](../Text/CH11.htm#marker-1019161){.index1}

[]{#HugoinActionIX.htm#pgfId-605499}[creating function to trigger GitHub
webhooks 334](../Text/CH11.htm#marker-1022934){.index1} --
[337](../Text/CH11.htm#marker-1024346){.index1}

[]{#HugoinActionIX.htm#pgfId-605502}[creating GitHub Pages rebuild
334](../Text/CH11.htm#marker-1022677){.index1}

[]{#HugoinActionIX.htm#pgfId-605504}[preventing abuse
330](../Text/CH11.htm#marker-1019391){.index1} --
[334](../Text/CH11.htm#marker-1037018){.index1}

[]{#HugoinActionIX.htm#pgfId-605507}[receiving and verifying
365](../Text/CH12.htm#marker-1027461){.index1} --
[368](../Text/CH12.htm#marker-1041790){.index1}

[]{#HugoinActionIX.htm#pgfId-605510}[updating JavaScript code for
feedback on comment submission
340](../Text/CH11.htm#marker-1024880){.index1} --
[342](../Text/CH11.htm#marker-1026367){.index1}

[]{#HugoinActionIX.htm#pgfId-605513}websites

[]{#HugoinActionIX.htm#pgfId-605514}[adding content
37](../Text/CH02.htm#marker-1014725){.index1}

[]{#HugoinActionIX.htm#pgfId-605516}[configuration
37](../Text/CH02.htm#marker-1014782){.index1} --
[39](../Text/CH02.htm#marker-1016028){.index1}

[]{#HugoinActionIX.htm#pgfId-605519}[content pages
40](../Text/CH02.htm#marker-1016074){.index1} --
[41](../Text/CH02.htm#marker-1029571){.index1}

[]{#HugoinActionIX.htm#pgfId-605522}[index page
41](../Text/CH02.htm#marker-1016126){.index1}

[]{#HugoinActionIX.htm#pgfId-605524}[checkout support
356](../Text/CH12.htm#marker-1021262){.index1} --
[374](../Text/CH12.htm#marker-1021262){.index1}

[]{#HugoinActionIX.htm#pgfId-605527}[creating checkout session
357](../Text/CH12.htm#marker-1021412){.index1} --
[363](../Text/CH12.htm#marker-1042859){.index1}

[]{#HugoinActionIX.htm#pgfId-605530}[enabling buy now
364](../Text/CH12.htm#marker-1027298){.index1} --
[374](../Text/CH12.htm#marker-1045048){.index1}

[]{#HugoinActionIX.htm#pgfId-605533}[handling success and failure
363](../Text/CH12.htm#marker-1026485){.index1} --
[364](../Text/CH12.htm#marker-1027272){.index1}

[]{#HugoinActionIX.htm#pgfId-605536}[setting up billing provider
356](../Text/CH12.htm#marker-1021286){.index1} --
[357](../Text/CH12.htm#marker-1021364){.index1}

[]{#HugoinActionIX.htm#pgfId-605539}[continuous delivery
43](../Text/CH02.htm#marker-1017358){.index1} --
[51](../Text/CH02.htm#marker-1018536){.index1}

[]{#HugoinActionIX.htm#pgfId-605542}[AWS, Azure, and Google Cloud file
storage 50](../Text/CH02.htm#marker-1018473){.index1} --
[51](../Text/CH02.htm#marker-1018533){.index1}

[]{#HugoinActionIX.htm#pgfId-605545}[GitHub pages
47](../Text/CH02.htm#marker-1017653){.index1} --
[50](../Text/CH02.htm#marker-1024866){.index1}

[]{#HugoinActionIX.htm#pgfId-605548}[Netlify hosting
44](../Text/CH02.htm#marker-1017441){.index1} --
[46](../Text/CH02.htm#marker-1017607){.index1}

[]{#HugoinActionIX.htm#pgfId-605551}[Vercel, Cloudflare, AWS Amplify,
and other dedicated Jamstack hosts
50](../Text/CH02.htm#marker-1018430){.index1}

[]{#HugoinActionIX.htm#pgfId-605553}[creating first Hugo
26](../Text/CH02.htm#marker-1011868){.index1} --
[32](../Text/CH02.htm#marker-1023746){.index1}

[]{#HugoinActionIX.htm#pgfId-605556}[adding to source control
28](../Text/CH02.htm#marker-1012435){.index1} --
[29](../Text/CH02.htm#marker-1023364){.index1}

[]{#HugoinActionIX.htm#pgfId-605559}[command line
26](../Text/CH02.htm#marker-1011887){.index1} --
[28](../Text/CH02.htm#marker-1022968){.index1}

[]{#HugoinActionIX.htm#pgfId-605562}[structure of source folder
29](../Text/CH02.htm#marker-1012944){.index1} --
[32](../Text/CH02.htm#marker-1023745){.index1}

[]{#HugoinActionIX.htm#pgfId-605565}[documentation
23](../Text/CH01.htm#marker-1013737){.index1}

[]{#HugoinActionIX.htm#pgfId-605567}[e-commerce pages
345](../Text/CH12.htm#marker-1011856){.index1} --
[349](../Text/CH12.htm#marker-1044736){.index1}

[]{#HugoinActionIX.htm#pgfId-605570}[product content view
345](../Text/CH12.htm#marker-1011880){.index1} --
[347](../Text/CH12.htm#marker-1044630){.index1}

[]{#HugoinActionIX.htm#pgfId-605573}[single product page
347](../Text/CH12.htm#marker-1013644){.index1} --
[349](../Text/CH12.htm#marker-1044735){.index1}

[]{#HugoinActionIX.htm#pgfId-605576}[fulfillment
365](../Text/CH12.htm#marker-1027429){.index1} --
[374](../Text/CH12.htm#marker-1032205){.index1}

[]{#HugoinActionIX.htm#pgfId-605579}[attaching files to email
373](../Text/CH12.htm#marker-1031416){.index1} --
[374](../Text/CH12.htm#marker-1032202){.index1}

[]{#HugoinActionIX.htm#pgfId-605582}[getting purchase details
368](../Text/CH12.htm#marker-1028557){.index1} --
[369](../Text/CH12.htm#marker-1041953){.index1}

[]{#HugoinActionIX.htm#pgfId-605585}[preparing content to send to users
372](../Text/CH12.htm#marker-1030173){.index1}

[]{#HugoinActionIX.htm#pgfId-605587}[receiving and verifying webhooks
365](../Text/CH12.htm#marker-1027459){.index1} --
[368](../Text/CH12.htm#marker-1041789){.index1}

[]{#HugoinActionIX.htm#pgfId-605590}[sending emails
371](../Text/CH12.htm#marker-1029640){.index1}

[]{#HugoinActionIX.htm#pgfId-605592}[setting up email provider
369](../Text/CH12.htm#marker-1029481){.index1} --
[370](../Text/CH12.htm#marker-1045286){.index1}

[]{#HugoinActionIX.htm#pgfId-605595}[hybrid Jamstack-based
23](../Text/CH01.htm#marker-1013768){.index1}

[]{#HugoinActionIX.htm#pgfId-605597}[metrics and goals for
51](../Text/CH02.htm#marker-1018587){.index1} --
[56](../Text/CH02.htm#marker-1019387){.index1}

[]{#HugoinActionIX.htm#pgfId-605600}[choosing theme
54](../Text/CH02.htm#marker-1018873){.index1} --
[56](../Text/CH02.htm#marker-1019384){.index1}

[]{#HugoinActionIX.htm#pgfId-605603}[maintainability
53](../Text/CH02.htm#marker-1018723){.index1} --
[54](../Text/CH02.htm#marker-1018851){.index1}

[]{#HugoinActionIX.htm#pgfId-605606}[performance
51](../Text/CH02.htm#marker-1018609){.index1} --
[52](../Text/CH02.htm#marker-1018701){.index1}

[]{#HugoinActionIX.htm#pgfId-605609}[multilingual
376](../Text/CH13.htm#marker-1011837){.index1} --
[381](../Text/CH13.htm#marker-1046091){.index1}

[]{#HugoinActionIX.htm#pgfId-605612}[accessing strings within theme
379](../Text/CH13.htm#marker-1013050){.index1} --
[380](../Text/CH13.htm#marker-1044756){.index1}

[]{#HugoinActionIX.htm#pgfId-605615}[linking to translated pages
380](../Text/CH13.htm#marker-1013583){.index1} --
[381](../Text/CH13.htm#marker-1046090){.index1}

[]{#HugoinActionIX.htm#pgfId-605618}[overrides and defaults for content
in 376](../Text/CH13.htm#marker-1011992){.index1} --
[379](../Text/CH13.htm#marker-1045982){.index1}

[]{#HugoinActionIX.htm#pgfId-605621}[nontechnology business
22](../Text/CH01.htm#marker-1013700){.index1}

[]{#HugoinActionIX.htm#pgfId-605623}[personal
22](../Text/CH01.htm#marker-1013659){.index1}

[]{#HugoinActionIX.htm#pgfId-605625}[shopping carts
349](../Text/CH12.htm#marker-1015603){.index1} --
[355](../Text/CH12.htm#marker-1044867){.index1}

[]{#HugoinActionIX.htm#pgfId-605628}[cart button in header
349](../Text/CH12.htm#marker-1015637){.index1} --
[350](../Text/CH12.htm#marker-1037243){.index1}

[]{#HugoinActionIX.htm#pgfId-605631}[creating in JavaScript
350](../Text/CH12.htm#marker-1016132){.index1} --
[355](../Text/CH12.htm#marker-1044866){.index1}

[]{#HugoinActionIX.htm#pgfId-605634}[themes
32](../Text/CH02.htm#marker-1013553){.index1} --
[37](../Text/CH02.htm#marker-1014702){.index1}

[]{#HugoinActionIX.htm#pgfId-605637}[adding to website
33](../Text/CH02.htm#marker-1026117){.index1} --
[34](../Text/CH02.htm#marker-1030303){.index1}

[]{#HugoinActionIX.htm#pgfId-605640}[running dev server
34](../Text/CH02.htm#marker-1013996){.index1} --
[37](../Text/CH02.htm#marker-1014699){.index1}

[]{#HugoinActionIX.htm#pgfId-605643}[weight property
378](../Text/CH13.htm#marker-1012766){.index1}

[]{#HugoinActionIX.htm#pgfId-605645}[where function
140](../Text/CH05.htm#marker-1021376){.index1}

[]{#HugoinActionIX.htm#pgfId-605647}[whitespace removal
424](../Text/APP_D.htm#marker-1011966){.index1}

[]{#HugoinActionIX.htm#pgfId-605649}[wildcards (globs)
171](../Text/CH06.htm#marker-1021428){.index1}

[]{#HugoinActionIX.htm#pgfId-605651}[window object
350](../Text/CH12.htm#marker-1016183){.index1}

[]{#HugoinActionIX.htm#pgfId-605653}[with conditional
129](../Text/CH05.htm#marker-1016200){.index1}

[]{#HugoinActionIX.htm#pgfId-605655}[.WordCount property
194](../Text/CH07.htm#marker-1013537){.index1}

[]{#HugoinActionIX.htm#pgfId-605657}[workflow dispatch events
334](../Text/CH11.htm#marker-1022686){.index1}

[]{#HugoinActionIX.htm#pgfId-605659}[workflow_dispatch property
334](../Text/CH11.htm#marker-1022824){.index1}

[]{#HugoinActionIX.htm#pgfId-605661}[WYSIWYG editors
88](../Text/CH03.htm#marker-1020487){.index1}

[]{#HugoinActionIX.htm#pgfId-605663}Y[]{#HugoinActionIX.htm#X}[]{#HugoinActionIX.htm#Y}

[]{#HugoinActionIX.htm#pgfId-605666}[YAML (YAML Ain\'t Markup Language)
74](../Text/CH03.htm#marker-1014891){.index1} --
[77](../Text/CH03.htm#marker-1030916){.index1}

[]{#HugoinActionIX.htm#pgfId-605669}[comments
74](../Text/CH03.htm#marker-1014951){.index1}

[]{#HugoinActionIX.htm#pgfId-605671}[data types
74](../Text/CH03.htm#marker-1027222){.index1} --
[75](../Text/CH03.htm#marker-1030020){.index1}

[]{#HugoinActionIX.htm#pgfId-605674}[dictionaries
76](../Text/CH03.htm#marker-1015970){.index1}

[]{#HugoinActionIX.htm#pgfId-605676}[lists
75](../Text/CH03.htm#marker-1015716){.index1} --
[76](../Text/CH03.htm#marker-1030330){.index1}

[]{#HugoinActionIX.htm#pgfId-605679}[multiline strings
75](../Text/CH03.htm#marker-1015502){.index1}

[]{#HugoinActionIX.htm#pgfId-605681}[other languages
78](../Text/CH03.htm#marker-1017514){.index1}

[]{#HugoinActionIX.htm#pgfId-605683}[revisiting config.yaml
76](../Text/CH03.htm#marker-1016400){.index1} --
[77](../Text/CH03.htm#marker-1030915){.index1}

[]{#HugoinActionIX.htm#pgfId-605686}[YouTube
114](../Text/CH04.htm#marker-1017894){.index1} --
[117](../Text/CH04.htm#marker-1019409){.index1}

[]{#IBC.htm}

# inside back cover {#IBC.htm#heading_id_2 .tochead}

![](vertopal_8097d56a5e0b4a3295545dc13bbc2bee/Images/IBC_F01_Jain.png){.calibre1}
